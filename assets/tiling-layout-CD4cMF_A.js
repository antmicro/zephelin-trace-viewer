import{u as k,b as Wp,n as Vp,x as fu,a as Pr,$ as Na,k as Cn,M as Ar,A as St,_ as on,d as Xn,y as Er,p as hn,m as Ln,s as Oa,V as dr,F as zp,g as Fp,f as Up,C as Yp,v as Ad,h as lr,c as Xl,e as Hp,i as Xp,j as ql,t as Qn,l as tn,S as qp,o as Di,q as Sr,T as Gp,r as Ed,w as ks,z as jp,B as Mi,D as Gl,E as jl,G as Jp,H as Zp,I as ca,J as Qp}from"./index-BFehYo1t.js";function Kp({color:t="#9E9EA4"}){return k("div",{className:"panel-icon",children:k("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:k("path",{d:"M2.66666 8H13.3333M2.66666 4H13.3333M2.66666 12H13.3333",stroke:t,"stroke-width":"0.666667","stroke-linecap":"round","stroke-linejoin":"round"})})})}function tb(t){return{render:function(e){Vp(e,t)},unmount:function(){Wp(t)}}}var eb=Object.defineProperty,nb=(t,e,n)=>e in t?eb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y=(t,e,n)=>nb(t,typeof e!="symbol"?e+"":e,n);const Ri=class ya{constructor(e){Y(this,"_name"),this._name=e}static flip(e){return e===ya.HORZ?ya.VERT:ya.HORZ}getName(){return this._name}toString(){return this._name}};Y(Ri,"HORZ",new Ri("horz"));Y(Ri,"VERT",new Ri("vert"));let Ct=Ri;class Et{constructor(e,n,r,i){Y(this,"x"),Y(this,"y"),Y(this,"width"),Y(this,"height"),this.x=e,this.y=n,this.width=r,this.height=i}static empty(){return new Et(0,0,0,0)}static fromJson(e){return new Et(e.x,e.y,e.width,e.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(e){this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this.width=Math.round(this.width/e)*e,this.height=Math.round(this.height/e)*e}static getBoundingClientRect(e){const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();return new Et(n,r,i,a)}static getContentRect(e){const n=e.getBoundingClientRect(),r=window.getComputedStyle(e),i=parseFloat(r.paddingLeft),a=parseFloat(r.paddingRight),o=parseFloat(r.paddingTop),u=parseFloat(r.paddingBottom),l=parseFloat(r.borderLeftWidth),f=parseFloat(r.borderRightWidth),g=parseFloat(r.borderTopWidth),y=parseFloat(r.borderBottomWidth),x=n.width-l-i-a-f,A=n.height-g-o-u-y;return new Et(n.left+l+i,n.top+g+o,x,A)}static fromDomRect(e){return new Et(e.x,e.y,e.width,e.height)}relativeTo(e){return new Et(this.x-e.x,this.y-e.y,this.width,this.height)}clone(){return new Et(this.x,this.y,this.width,this.height)}equals(e){return this.x===(e==null?void 0:e.x)&&this.y===(e==null?void 0:e.y)&&this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}equalSize(e){return this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,n){this.styleWithPosition(e.style,n)}styleWithPosition(e,n="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=n,e}contains(e,n){return this.x<=e&&e<=this.getRight()&&this.y<=n&&n<=this.getBottom()}removeInsets(e){return new Et(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let n=this.width;return e===Ct.VERT&&(n=this.height),n}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}const Je=class re{constructor(e,n,r){Y(this,"name"),Y(this,"orientation"),Y(this,"indexPlus"),this.name=e,this.orientation=n,this.indexPlus=r,re.values.set(this.name,this)}static getByName(e){return re.values.get(e)}static getLocation(e,n,r){if(n=(n-e.x)/e.width,r=(r-e.y)/e.height,n>=.25&&n<.75&&r>=.25&&r<.75)return re.CENTER;const i=r>=n,a=r>=1-n;return i?a?re.BOTTOM:re.LEFT:a?re.RIGHT:re.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(e){return this===re.TOP?new Et(e.x,e.y,e.width,e.height/2):this===re.BOTTOM?new Et(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===re.LEFT?new Et(e.x,e.y,e.width/2,e.height):this===re.RIGHT?new Et(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,n){if(this===re.TOP){const r=new Et(e.x,e.y,e.width,n),i=new Et(e.x,e.y+n,e.width,e.height-n);return{start:r,end:i}}else if(this===re.LEFT){const r=new Et(e.x,e.y,n,e.height),i=new Et(e.x+n,e.y,e.width-n,e.height);return{start:r,end:i}}if(this===re.RIGHT){const r=new Et(e.getRight()-n,e.y,n,e.height),i=new Et(e.x,e.y,e.width-n,e.height);return{start:r,end:i}}else{const r=new Et(e.x,e.getBottom()-n,e.width,n),i=new Et(e.x,e.y,e.width,e.height-n);return{start:r,end:i}}}reflect(){return this===re.TOP?re.BOTTOM:this===re.LEFT?re.RIGHT:this===re.RIGHT?re.LEFT:re.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};Y(Je,"values",new Map);Y(Je,"TOP",new Je("top",Ct.VERT,0));Y(Je,"BOTTOM",new Je("bottom",Ct.VERT,1));Y(Je,"LEFT",new Je("left",Ct.HORZ,0));Y(Je,"RIGHT",new Je("right",Ct.HORZ,1));Y(Je,"CENTER",new Je("center",Ct.VERT,0));let vt=Je;var Ae=(t=>(t.Close_Tab="Close",t.Close_Tabset="Close tab set",t.Active_Tabset="Active tab set",t.Move_Tabset="Move tab set",t.Move_Tabs="Move tabs(?)",t.Maximize="Maximize tab set",t.Restore="Restore tab set",t.Popout_Tab="Popout selected tab",t.Overflow_Menu_Tooltip="Hidden tabs",t.Error_rendering_component="Error rendering component",t.Error_rendering_component_retry="Retry",t))(Ae||{}),j=(t=>(t.FLEXLAYOUT__BORDER="flexlayout__border",t.FLEXLAYOUT__BORDER_="flexlayout__border_",t.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",t.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",t.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",t.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",t.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",t.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",t.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",t.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",t.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",t.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",t.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",t.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",t.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",t.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",t.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",t.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",t.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",t.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",t.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",t.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",t.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",t.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",t.FLEXLAYOUT__LAYOUT="flexlayout__layout",t.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",t.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",t.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",t.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",t.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",t.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",t.FLEXLAYOUT__SPLITTER="flexlayout__splitter",t.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",t.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",t.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",t.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",t.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",t.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",t.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",t.FLEXLAYOUT__ROW="flexlayout__row",t.FLEXLAYOUT__TAB="flexlayout__tab",t.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",t.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",t.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",t.FLEXLAYOUT__TABSET="flexlayout__tabset",t.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",t.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",t.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",t.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",t.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",t.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",t.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",t.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",t.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",t.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",t.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",t.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",t.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",t.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",t.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",t.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",t.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",t.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",t.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",t.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",t.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",t.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",t.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",t.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",t.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",t.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",t.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",t.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",t.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",t.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",t))(j||{});class _e{constructor(e,n){Y(this,"type"),Y(this,"data"),this.type=e,this.data=n}}const be=class me{static addNode(e,n,r,i,a){return new _e(me.ADD_NODE,{json:e,toNode:n,location:r.getName(),index:i,select:a})}static moveNode(e,n,r,i,a){return new _e(me.MOVE_NODE,{fromNode:e,toNode:n,location:r.getName(),index:i,select:a})}static deleteTab(e){return new _e(me.DELETE_TAB,{node:e})}static deleteTabset(e){return new _e(me.DELETE_TABSET,{node:e})}static renameTab(e,n){return new _e(me.RENAME_TAB,{node:e,text:n})}static selectTab(e){return new _e(me.SELECT_TAB,{tabNode:e})}static setActiveTabset(e,n){return new _e(me.SET_ACTIVE_TABSET,{tabsetNode:e,windowId:n})}static adjustWeights(e,n){return new _e(me.ADJUST_WEIGHTS,{nodeId:e,weights:n})}static adjustBorderSplit(e,n){return new _e(me.ADJUST_BORDER_SPLIT,{node:e,pos:n})}static maximizeToggle(e,n){return new _e(me.MAXIMIZE_TOGGLE,{node:e,windowId:n})}static updateModelAttributes(e){return new _e(me.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,n){return new _e(me.UPDATE_NODE_ATTRIBUTES,{node:e,json:n})}static popoutTab(e){return new _e(me.POPOUT_TAB,{node:e})}static popoutTabset(e){return new _e(me.POPOUT_TABSET,{node:e})}static closeWindow(e){return new _e(me.CLOSE_WINDOW,{windowId:e})}static createWindow(e,n){return new _e(me.CREATE_WINDOW,{layout:e,rect:n})}};Y(be,"ADD_NODE","FlexLayout_AddNode");Y(be,"MOVE_NODE","FlexLayout_MoveNode");Y(be,"DELETE_TAB","FlexLayout_DeleteTab");Y(be,"DELETE_TABSET","FlexLayout_DeleteTabset");Y(be,"RENAME_TAB","FlexLayout_RenameTab");Y(be,"SELECT_TAB","FlexLayout_SelectTab");Y(be,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset");Y(be,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights");Y(be,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit");Y(be,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle");Y(be,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes");Y(be,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes");Y(be,"POPOUT_TAB","FlexLayout_PopoutTab");Y(be,"POPOUT_TABSET","FlexLayout_PopoutTabset");Y(be,"CLOSE_WINDOW","FlexLayout_CloseWindow");Y(be,"CREATE_WINDOW","FlexLayout_CreateWindow");let Ot=be;class rt{constructor(e,n,r,i){Y(this,"name"),Y(this,"alias"),Y(this,"modelName"),Y(this,"pairedAttr"),Y(this,"pairedType"),Y(this,"defaultValue"),Y(this,"alwaysWriteJson"),Y(this,"type"),Y(this,"required"),Y(this,"fixed"),Y(this,"description"),this.name=e,this.alias=void 0,this.modelName=n,this.defaultValue=r,this.alwaysWriteJson=i,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setAlias(e){return this.alias=e,this}setDescription(e){this.description=e}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(e){this.pairedAttr=e}setPairedType(e){this.pairedType=e}}Y(rt,"NUMBER","number");Y(rt,"STRING","string");Y(rt,"BOOLEAN","boolean");class Yi{constructor(){Y(this,"attributes"),Y(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(e,n,r,i){const a=new rt(e,n,r,i);return this.attributes.push(a),this.nameToAttribute.set(e,a),a}addInherited(e,n){return this.addWithAll(e,n,void 0,!1)}add(e,n,r){return this.addWithAll(e,void 0,n,r)}getAttributes(){return this.attributes}getModelName(e){const n=this.nameToAttribute.get(e);if(n!==void 0)return n.modelName}toJson(e,n){for(const r of this.attributes){const i=n[r.name];(r.alwaysWriteJson||i!==r.defaultValue)&&(e[r.name]=i)}}fromJson(e,n){for(const r of this.attributes){let i=e[r.name];i===void 0&&r.alias&&(i=e[r.alias]),i===void 0?n[r.name]=r.defaultValue:n[r.name]=i}}update(e,n){for(const r of this.attributes)if(Object.prototype.hasOwnProperty.call(e,r.name)){const i=e[r.name];i===void 0?delete n[r.name]:n[r.name]=i}}setDefaults(e){for(const n of this.attributes)e[n.name]=n.defaultValue}pairAttributes(e,n){for(const r of n.attributes)if(r.modelName&&this.nameToAttribute.has(r.modelName)){const i=this.nameToAttribute.get(r.modelName);i.setpairedAttr(r),r.setpairedAttr(i),i.setPairedType(e)}}toTypescriptInterface(e,n){var r,i;const a=[],o=this.attributes.sort((u,l)=>u.name.localeCompare(l.name));a.push("export interface I"+e+"Attributes {");for(let u=0;u<o.length;u++){const l=o[u];let f=l.type,g,y=l,x;y.defaultValue!==void 0?g=y.defaultValue:y.modelName!==void 0&&n!==void 0&&n.nameToAttribute.get(y.modelName)!==void 0&&(x=y.modelName,y=n.nameToAttribute.get(x),g=y.defaultValue,f=y.type);const A=JSON.stringify(g),M=y.required?"":"?";let C=`	/**
	  `;l.description?C+=l.description:l.pairedType&&((r=l.pairedAttr)!=null&&r.description)&&(C+=`Value for ${l.pairedType} attribute ${l.pairedAttr.name} if not overridden`,C+=`

	  `,C+=(i=l.pairedAttr)==null?void 0:i.description),C+=`

	  `,l.fixed?C+=`Fixed value: ${A}`:x?C+=`Default: inherited from Global attribute ${l.modelName} (default ${A})`:C+=`Default: ${A}`,C+=`
	 */`,a.push(C),a.push("	"+l.name+M+": "+f+`;
`)}return a.push("}"),a.join(`
`)}}class Oe{constructor(e,n,r,i,a){Y(this,"node"),Y(this,"rect"),Y(this,"location"),Y(this,"index"),Y(this,"className"),this.node=e,this.rect=n,this.location=r,this.index=i,this.className=a}}class Da{constructor(e){Y(this,"borders"),Y(this,"borderMap"),Y(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(e,n){const r=new Da(n);r.borders=e.map(i=>De.fromJson(i,n));for(const i of r.borders)r.borderMap.set(i.getLocation(),i);return r}toJson(){return this.borders.map(e=>e.toJson())}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(e){for(const n of this.borders){e(n,0);for(const r of n.getChildren())r.forEachNode(e,1)}}setPaths(){for(const e of this.borders){const n="/border/"+e.getLocation().getName();e.setPath(n);let r=0;for(const i of e.getChildren())i.setPath(n+"/t"+r),r++}}findDropTargetNode(e,n,r){for(const i of this.borders)if(i.isShowing()){const a=i.canDrop(e,n,r);if(a!==void 0)return a}}}class so{constructor(e){Y(this,"model"),Y(this,"attributes"),Y(this,"parent"),Y(this,"children"),Y(this,"rect"),Y(this,"path"),Y(this,"listeners"),this.model=e,this.attributes={},this.children=[],this.rect=Et.empty(),this.listeners=new Map,this.path=""}getId(){let e=this.attributes.id;return e!==void 0||(e=this.model.nextUniqueId(),this.setId(e)),e}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return this.parent===void 0?this.model.isRootOrientationVertical()?Ct.VERT:Ct.HORZ:Ct.flip(this.parent.getOrientation())}setEventListener(e,n){this.listeners.set(e,n)}removeEventListener(e){this.listeners.delete(e)}setId(e){this.attributes.id=e}fireEvent(e,n){this.listeners.has(e)&&this.listeners.get(e)(n)}getAttr(e){let n=this.attributes[e];if(n===void 0){const r=this.getAttributeDefinitions().getModelName(e);r!==void 0&&(n=this.model.getAttribute(r))}return n}forEachNode(e,n){e(this,n),n++;for(const r of this.children)r.forEachNode(e,n)}setPaths(e){let n=0;for(const r of this.children){let i=e;r.getType()==="row"?i+="/r"+n:r.getType()==="tabset"?i+="/ts"+n:r.getType()==="tab"&&(i+="/t"+n),r.path=i,r.setPaths(i),n++}}setParent(e){this.parent=e}setRect(e){this.rect=e}setPath(e){this.path=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}findDropTargetNode(e,n,r,i){let a;if(this.rect.contains(r,i)){if(this.model.getMaximizedTabset(e)!==void 0)a=this.model.getMaximizedTabset(e).canDrop(n,r,i);else if(a=this.canDrop(n,r,i),a===void 0&&this.children.length!==0){for(const o of this.children)if(a=o.findDropTargetNode(e,n,r,i),a!==void 0)break}}return a}canDrop(e,n,r){}canDockInto(e,n){if(n!=null){if(n.location===vt.CENTER&&n.node.isEnableDrop()===!1||n.location===vt.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||n.location!==vt.CENTER&&n.node.isEnableDivide()===!1)return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(e,n)}return!0}removeChild(e){const n=this.children.indexOf(e);return n!==-1&&this.children.splice(n,1),n}addChild(e,n){return n!=null?this.children.splice(n,0,e):(this.children.push(e),n=this.children.length-1),e.parent=this,n}removeAll(){this.children=[]}styleWithPosition(e){return e==null&&(e={}),this.rect.styleWithPosition(e)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"	")}}const Ra=class Yn extends so{constructor(e,n,r=!0){super(e),Y(this,"tabRect",Et.empty()),Y(this,"moveableElement"),Y(this,"tabStamp"),Y(this,"renderedName"),Y(this,"extra"),Y(this,"visible"),Y(this,"rendered"),Y(this,"scrollTop"),Y(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,Yn.attributeDefinitions.fromJson(n,this.attributes),r===!0&&e.addNode(this)}static fromJson(e,n,r=!0){return new Yn(n,e,r)}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof Gt?this.parent.getWindowId():Ue.MAIN_WINDOW_ID}getWindow(){const e=this.model.getwindowsMap().get(this.getWindowId());if(e)return e.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==Ue.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){const e={};return Yn.attributeDefinitions.toJson(e,this.attributes),e}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame(()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)})}setRect(e){e.equals(this.rect)||(this.fireEvent("resize",{rect:e}),this.rect=e)}setVisible(e){e!==this.visible&&(this.visible=e,this.fireEvent("visibility",{visible:e}))}getScrollTop(){return this.scrollTop}setScrollTop(e){this.scrollTop=e}getScrollLeft(){return this.scrollLeft}setScrollLeft(e){this.scrollLeft=e}isRendered(){return this.rendered}setRendered(e){this.rendered=e}getTabRect(){return this.tabRect}setTabRect(e){this.tabRect=e}getTabStamp(){return this.tabStamp}setTabStamp(e){this.tabStamp=e}getMoveableElement(){return this.moveableElement}setMoveableElement(e){this.moveableElement=e}setRenderedName(e){this.renderedName=e}getNameForOverflowMenu(){const e=this.getAttr("altName");return e!==void 0?e:this.renderedName}setName(e){this.attributes.name=e}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(e){Yn.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return Yn.attributeDefinitions}setBorderWidth(e){this.attributes.borderWidth=e}setBorderHeight(e){this.attributes.borderHeight=e}static getAttributeDefinitions(){return Yn.attributeDefinitions}static createAttributeDefinitions(){const e=new Yi;return e.add("type",Yn.TYPE,!0).setType(rt.STRING).setFixed(),e.add("id",void 0).setType(rt.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),e.add("name","[Unnamed Tab]").setType(rt.STRING).setDescription("name of tab to be displayed in the tab button"),e.add("altName",void 0).setType(rt.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),e.add("helpText",void 0).setType(rt.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),e.add("component",void 0).setType(rt.STRING).setDescription("string identifying which component to run (for factory)"),e.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),e.add("tabsetClassName",void 0).setType(rt.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),e.add("enableWindowReMount",!1).setType(rt.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),e.addInherited("enableClose","tabEnableClose").setType(rt.BOOLEAN).setDescription("allow user to close tab via close button"),e.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(rt.BOOLEAN).setDescription("allow user to drag tab to new location"),e.addInherited("enableRename","tabEnableRename").setType(rt.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),e.addInherited("className","tabClassName").setType(rt.STRING).setDescription("class applied to tab button"),e.addInherited("contentClassName","tabContentClassName").setType(rt.STRING).setDescription("class applied to tab content"),e.addInherited("icon","tabIcon").setType(rt.STRING).setDescription("the tab icon"),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(rt.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),e.addInherited("enablePopout","tabEnablePopout").setType(rt.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),e.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(rt.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),e.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(rt.BOOLEAN).setDescription(`if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)
            then enabling this option will gray out this tab`),e.addInherited("borderWidth","tabBorderWidth").setType(rt.NUMBER).setDescription("width when added to border, -1 will use border size"),e.addInherited("borderHeight","tabBorderHeight").setType(rt.NUMBER).setDescription("height when added to border, -1 will use border size"),e.addInherited("minWidth","tabMinWidth").setType(rt.NUMBER).setDescription("the min width of this tab"),e.addInherited("minHeight","tabMinHeight").setType(rt.NUMBER).setDescription("the min height of this tab"),e.addInherited("maxWidth","tabMaxWidth").setType(rt.NUMBER).setDescription("the max width of this tab"),e.addInherited("maxHeight","tabMaxHeight").setType(rt.NUMBER).setDescription("the max height of this tab"),e}};Y(Ra,"TYPE","tab");Y(Ra,"attributeDefinitions",Ra.createAttributeDefinitions());let Qt=Ra;function Sd(){return typeof window<"u"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}function du(t,e,n){let r;const i=e.getName(),a=e.getName();n===void 0&&(n=0),r===void 0&&e.getIcon()!==void 0&&(n!==0?r=k("img",{style:{width:"1em",height:"1em",transform:"rotate("+n+"deg)"},src:e.getIcon(),alt:"leadingContent"}):r=k("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const u={leading:r,content:i,name:a,buttons:[]};return t.customizeTab(e,u),e.setRenderedName(u.name),u}function Ci(t){let e=!1;return t.nativeEvent instanceof MouseEvent&&(t.nativeEvent.button!==0||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)&&(e=!0),e}function Ps(t,e){const n=[...Jl("iframe",e),...Jl("webview",e)];for(const r of n)r.style.pointerEvents=t?"auto":"none"}function Jl(t,e){return[...e.getElementsByTagName(t)]}function Md(t,e,n,r,i){e.preventDefault();const a=l=>{l.preventDefault(),n(l.clientX,l.clientY)},o=l=>{l.preventDefault(),i()},u=()=>{t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",u),t.removeEventListener("pointercancel",o),r()};t.addEventListener("pointermove",a),t.addEventListener("pointerup",u),t.addEventListener("pointercancel",o)}function Nd(t){if(t instanceof Qt)return t.isEnablePopout();if(t instanceof Gt){for(const e of t.getChildren())if(e.isEnablePopout()===!1)return!1;return!0}return!1}function Zl(t,e){const n=t.getAttribute("style"),r=e.getAttribute("style");return n===r?!1:(n?e.setAttribute("style",n):e.removeAttribute("style"),!0)}function rb(){const t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Chromium")}function Ca(t,e){if(t!==void 0&&(t instanceof Gt||t instanceof De)){const n=t.getSelected();n!==-1&&(e===n&&t.getChildren().length>0?e>=t.getChildren().length&&t.setSelected(t.getChildren().length-1):e<n?t.setSelected(n-1):e>n||t.setSelected(-1))}}function mi(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}const La=class fn extends so{constructor(e,n){super(e),Y(this,"tabStripRect",Et.empty()),Y(this,"contentRect",Et.empty()),Y(this,"calculatedMinHeight"),Y(this,"calculatedMinWidth"),Y(this,"calculatedMaxHeight"),Y(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,fn.attributeDefinitions.fromJson(n,this.attributes),e.addNode(this)}static fromJson(e,n,r){const i=new fn(n,e);if(e.children!=null)for(const a of e.children){const o=Qt.fromJson(a,n);i.addChild(o)}return i.children.length===0&&i.setSelected(-1),e.maximized&&e.maximized===!0&&(r.maximizedTabSet=i),e.active&&e.active===!0&&(r.activeTabSet=i),i}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){const e=this.attributes.selected;return e!==void 0?e:-1}getSelectedNode(){const e=this.getSelected();if(e!==-1)return this.children[e]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(e){return e===Ct.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(e){return e===Ct.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){const e={};return fn.attributeDefinitions.toJson(e,this.attributes),e.children=this.children.map(n=>n.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}calcMinMaxSize(){this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth();for(const e of this.children){const n=e;this.calculatedMinWidth=Math.max(this.calculatedMinWidth,n.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,n.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,n.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,n.getMaxHeight())}this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset(this.getWindowId())===this?!0:!(this.getParent()===this.getModel().getRoot(this.getWindowId())&&this.getModel().getRoot(this.getWindowId()).getChildren().length===1):!1}setContentRect(e){this.contentRect=e}getContentRect(){return this.contentRect}setTabStripRect(e){this.tabStripRect=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}getWindowId(){return this.parent.getWindowId()}canDrop(e,n,r){let i;if(e===this){const a=vt.CENTER,o=this.tabStripRect;i=new Oe(this,o,a,-1,j.FLEXLAYOUT__OUTLINE_RECT)}else{if(this.getWindowId()!==Ue.MAIN_WINDOW_ID&&!Nd(e))return;if(this.contentRect.contains(n,r)){let a=vt.CENTER;this.model.getMaximizedTabset(this.parent.getWindowId())===void 0&&(a=vt.getLocation(this.contentRect,n,r));const o=a.getDockRect(this.rect);i=new Oe(this,o,a,-1,j.FLEXLAYOUT__OUTLINE_RECT)}else if(this.tabStripRect!=null&&this.tabStripRect.contains(n,r)){let a,o,u;if(this.children.length===0)a=this.tabStripRect.clone(),o=a.y+3,u=a.height-4,a.width=2;else{let l=this.children[0];a=l.getTabRect(),o=a.y,u=a.height;let f=this.tabStripRect.x,g=0;for(let y=0;y<this.children.length;y++){if(l=this.children[y],a=l.getTabRect(),a.y!==o&&(o=a.y,f=this.tabStripRect.x),g=a.x+a.width/2,f<=n&&n<g&&a.y<r&&r<a.getBottom()){const x=vt.CENTER,A=new Et(a.x-2,a.y,3,a.height);if(this.rect.x<a.x&&a.x<this.rect.getRight()){i=new Oe(this,A,x,y,j.FLEXLAYOUT__OUTLINE_RECT);break}else return}f=g}}if(i==null&&a.getRight()<this.rect.getRight()){const l=vt.CENTER,f=new Et(a.getRight()-2,o,3,u);i=new Oe(this,f,l,this.children.length,j.FLEXLAYOUT__OUTLINE_RECT)}}}if(e.canDockInto(e,i))return i}delete(){this.parent.removeChild(this)}remove(e){const n=this.removeChild(e);this.model.tidy(),Ca(this,n)}drop(e,n,r,i){const a=n;if(this===e)return;let o=e.getParent(),u=0;if(o!==void 0&&(u=o.removeChild(e),o instanceof De&&o.getSelected()===u?o.setSelected(-1):Ca(o,u)),e instanceof Qt&&o===this&&u<r&&r>0&&r--,a===vt.CENTER){let l=r;if(l===-1&&(l=this.children.length),e instanceof Qt)this.addChild(e,l),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(l);else if(e instanceof ve)e.forEachNode((f,g)=>{f instanceof Qt&&(this.addChild(f,l),l++)},0);else{for(let f=0;f<e.getChildren().length;f++){const g=e.getChildren()[f];this.addChild(g,l),l++}this.getSelected()===-1&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let l=e;if(e instanceof Qt){const y=this.model.getOnCreateTabSet();l=new fn(this.model,y?y(e):{}),l.addChild(e),o=l}else if(e instanceof ve){const y=this.getParent();if(e.getOrientation()===y.getOrientation()&&(n.getOrientation()===y.getOrientation()||n===vt.CENTER)){const x=new ve(this.model,this.getWindowId(),{});x.addChild(e),l=x}}else l=e;const f=this.parent,g=f.getChildren().indexOf(this);if(f.getOrientation()===a.orientation)l.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),f.addChild(l,g+a.indexPlus);else{const y=new ve(this.model,this.getWindowId(),{});y.setWeight(this.getWeight()),y.addChild(this),this.setWeight(50),l.setWeight(50),y.addChild(l,a.indexPlus),f.removeChild(this),f.addChild(y,g)}l instanceof fn&&this.model.setActiveTabset(l,this.getWindowId())}this.model.tidy()}updateAttrs(e){fn.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return fn.attributeDefinitions}static getAttributeDefinitions(){return fn.attributeDefinitions}static createAttributeDefinitions(){const e=new Yi;return e.add("type",fn.TYPE,!0).setType(rt.STRING).setFixed(),e.add("id",void 0).setType(rt.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),e.add("weight",100).setType(rt.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),e.add("selected",0).setType(rt.NUMBER).setDescription("index of selected/visible tab in tabset"),e.add("name",void 0).setType(rt.STRING),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),e.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),e.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),e.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),e.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),e.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),e.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),e.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),e.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),e.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),e.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),e.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),e.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),e.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(rt.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),e.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(rt.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),e.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(rt.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};Y(La,"TYPE","tabset");Y(La,"attributeDefinitions",La.createAttributeDefinitions());let Gt=La;const Ia=class fe extends so{constructor(e,n,r){super(e),Y(this,"windowId"),Y(this,"minHeight"),Y(this,"minWidth"),Y(this,"maxHeight"),Y(this,"maxWidth"),this.windowId=n,this.minHeight=Mn,this.minWidth=Mn,this.maxHeight=Nn,this.maxWidth=Nn,fe.attributeDefinitions.fromJson(r,this.attributes),this.normalizeWeights(),e.addNode(this)}static fromJson(e,n,r){const i=new fe(n,r.windowId,e);if(e.children!=null)for(const a of e.children)if(a.type===Gt.TYPE){const o=Gt.fromJson(a,n,r);i.addChild(o)}else{const o=fe.fromJson(a,n,r);i.addChild(o)}return i}getWeight(){return this.attributes.weight}toJson(){const e={};fe.attributeDefinitions.toJson(e,this.attributes),e.children=[];for(const n of this.children)e.children.push(n.toJson());return e}getWindowId(){return this.windowId}setWindowId(e){this.windowId=e}setWeight(e){this.attributes.weight=e}getSplitterBounds(e){const n=this.getOrientation()===Ct.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=r[0].getRect(),o=r[r.length-1].getRect();let u=n?[a.x,o.getRight()]:[a.y,o.getBottom()];const l=n?[a.x,o.getRight()]:[a.y,o.getBottom()];for(let f=0;f<e;f++){const g=r[f];u[0]+=n?g.getMinWidth():g.getMinHeight(),l[0]+=n?g.getMaxWidth():g.getMaxHeight(),f>0&&(u[0]+=i,l[0]+=i)}for(let f=r.length-1;f>=e;f--){const g=r[f];u[1]-=(n?g.getMinWidth():g.getMinHeight())+i,l[1]-=(n?g.getMaxWidth():g.getMaxHeight())+i}return u=[Math.max(l[1],u[0]),Math.min(l[0],u[1])],u}getSplitterInitials(e){const n=this.getOrientation()===Ct.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=[];let o=0;for(let f=0;f<r.length;f++){const y=r[f].getRect(),x=n?y.width:y.height;a.push(x),o+=x}const u=r[e].getRect(),l=(n?u.x:u.y)-i;return{initialSizes:a,sum:o,startPosition:l}}calculateSplit(e,n,r,i,a){const o=this.getOrientation()===Ct.HORZ,u=this.getChildren(),l=u[e],f=o?l.getMaxWidth():l.getMaxHeight(),g=[...r];if(n<a){let x=a-n,A=0;g[e]+x>f?(A=g[e]+x-f,g[e]=f):g[e]+=x;for(let M=e-1;M>=0;M--){const C=u[M],N=o?C.getMinWidth():C.getMinHeight();if(g[M]-x>N){g[M]-=x;break}else x-=g[M]-N,g[M]=N}for(let M=e+1;M<u.length;M++){const C=u[M],N=o?C.getMaxWidth():C.getMaxHeight();if(g[M]+A<N){g[M]+=A;break}else A-=N-g[M],g[M]=N}}else{let x=n-a,A=0;g[e-1]+x>f?(A=g[e-1]+x-f,g[e-1]=f):g[e-1]+=x;for(let M=e;M<u.length;M++){const C=u[M],N=o?C.getMinWidth():C.getMinHeight();if(g[M]-x>N){g[M]-=x;break}else x-=g[M]-N,g[M]=N}for(let M=e-1;M>=0;M--){const C=u[M],N=o?C.getMaxWidth():C.getMaxHeight();if(g[M]+A<N){g[M]+=A;break}else A-=N-g[M],g[M]=N}}return g.map(x=>Math.max(.1,x)*100/i)}getMinSize(e){return e===Ct.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(e){return e===Ct.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=Mn,this.minWidth=Mn,this.maxHeight=Nn,this.maxWidth=Nn;let e=!0;for(const n of this.children){const r=n;r.calcMinMaxSize(),this.getOrientation()===Ct.VERT?(this.minHeight+=r.getMinHeight(),this.maxHeight+=r.getMaxHeight(),e||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,r.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,r.getMaxWidth())):(this.minWidth+=r.getMinWidth(),this.maxWidth+=r.getMaxWidth(),e||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,r.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,r.getMaxHeight())),e=!1}}tidy(){let e=0;for(;e<this.children.length;){const n=this.children[e];if(n instanceof fe){n.tidy();const r=n.getChildren();if(r.length===0)this.removeChild(n);else if(r.length===1){const i=r[0];if(this.removeChild(n),i instanceof fe){let a=0;const o=i.getChildren();for(const u of o)a+=u.getWeight();for(let u=0;u<o.length;u++){const l=o[u];l.setWeight(n.getWeight()*l.getWeight()/a),this.addChild(l,e+u)}}else i.setWeight(n.getWeight()),this.addChild(i,e)}else e++}else n instanceof Gt&&n.getChildren().length===0&&n.isEnableDeleteWhenEmpty()?(this.removeChild(n),n===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):e++}if(this===this.model.getRoot(this.windowId)&&this.children.length===0){const n=this.model.getOnCreateTabSet();let r=n?n():{};r={...r,selected:-1};const i=new Gt(this.model,r);this.model.setActiveTabset(i,this.windowId),this.addChild(i)}}canDrop(e,n,r){const i=r-this.rect.y,a=n-this.rect.x,o=this.rect.width,u=this.rect.height,l=10,f=50;let g;if(!(this.getWindowId()!==Ue.MAIN_WINDOW_ID&&!Nd(e))){if(this.model.isEnableEdgeDock()&&this.parent===void 0){if(n<this.rect.x+l&&i>u/2-f&&i<u/2+f){const y=vt.LEFT,x=y.getDockRect(this.rect);x.width=x.width/2,g=new Oe(this,x,y,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n>this.rect.getRight()-l&&i>u/2-f&&i<u/2+f){const y=vt.RIGHT,x=y.getDockRect(this.rect);x.width=x.width/2,x.x+=x.width,g=new Oe(this,x,y,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r<this.rect.y+l&&a>o/2-f&&a<o/2+f){const y=vt.TOP,x=y.getDockRect(this.rect);x.height=x.height/2,g=new Oe(this,x,y,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r>this.rect.getBottom()-l&&a>o/2-f&&a<o/2+f){const y=vt.BOTTOM,x=y.getDockRect(this.rect);x.height=x.height/2,x.y+=x.height,g=new Oe(this,x,y,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(g!==void 0&&!e.canDockInto(e,g))return}return g}}drop(e,n,r){const i=n,a=e.getParent();a&&a.removeChild(e),a!==void 0&&a instanceof Gt&&a.setSelected(0),a!==void 0&&a instanceof De&&a.setSelected(-1);let o;if(e instanceof Gt||e instanceof fe)o=e,o instanceof fe&&o.getOrientation()===this.getOrientation()&&(n.getOrientation()===this.getOrientation()||n===vt.CENTER)&&(o=new fe(this.model,this.windowId,{}),o.addChild(e));else{const f=this.model.getOnCreateTabSet();o=new Gt(this.model,f?f(e):{}),o.addChild(e)}let u=this.children.reduce((f,g)=>f+g.getWeight(),0);u===0&&(u=100),o.setWeight(u/3);const l=!this.model.isRootOrientationVertical();if(i===vt.CENTER)r===-1?this.addChild(o,this.children.length):this.addChild(o,r);else if(l&&i===vt.LEFT||!l&&i===vt.TOP)this.addChild(o,0);else if(l&&i===vt.RIGHT||!l&&i===vt.BOTTOM)this.addChild(o);else if(l&&i===vt.TOP||!l&&i===vt.LEFT){const f=new fe(this.model,this.windowId,{}),g=new fe(this.model,this.windowId,{});g.setWeight(75),o.setWeight(25);for(const y of this.children)g.addChild(y);this.removeAll(),f.addChild(o),f.addChild(g),this.addChild(f)}else if(l&&i===vt.BOTTOM||!l&&i===vt.RIGHT){const f=new fe(this.model,this.windowId,{}),g=new fe(this.model,this.windowId,{});g.setWeight(75),o.setWeight(25);for(const y of this.children)g.addChild(y);this.removeAll(),f.addChild(g),f.addChild(o),this.addChild(f)}o instanceof Gt&&this.model.setActiveTabset(o,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return fe.attributeDefinitions}updateAttrs(e){fe.attributeDefinitions.update(e,this.attributes)}static getAttributeDefinitions(){return fe.attributeDefinitions}normalizeWeights(){let e=0;for(const n of this.children)e+=n.getWeight();e===0&&(e=1);for(const n of this.children){const r=n;r.setWeight(Math.max(.001,100*r.getWeight()/e))}}static createAttributeDefinitions(){const e=new Yi;return e.add("type",fe.TYPE,!0).setType(rt.STRING).setFixed(),e.add("id",void 0).setType(rt.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),e.add("weight",100).setType(rt.NUMBER).setDescription("relative weight for sizing of this row in parent row"),e}};Y(Ia,"TYPE","row");Y(Ia,"attributeDefinitions",Ia.createAttributeDefinitions());let ve=Ia;class cr{constructor(e,n){Y(this,"_windowId"),Y(this,"_layout"),Y(this,"_rect"),Y(this,"_window"),Y(this,"_root"),Y(this,"_maximizedTabSet"),Y(this,"_activeTabSet"),Y(this,"_toScreenRectFunction"),this._windowId=e,this._rect=n,this._toScreenRectFunction=r=>r}visitNodes(e){this.root.forEachNode(e,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(e){this._rect=e}set layout(e){this._layout=e}set window(e){this._window=e}set root(e){this._root=e}set maximizedTabSet(e){this._maximizedTabSet=e}set activeTabSet(e){this._activeTabSet=e}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(e){this._toScreenRectFunction=e}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new Et(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(e,n,r){const i=n.getwindowsMap().size,a=e.rect?Et.fromJson(e.rect):new Et(50+50*i,50+50*i,600,400);a.snap(10);const o=new cr(r,a);return o.root=ve.fromJson(e.layout,n,o),o}}const Mn=0,Nn=99999,Ba=class Xt{constructor(){Y(this,"attributes"),Y(this,"idMap"),Y(this,"changeListeners"),Y(this,"borders"),Y(this,"onAllowDrop"),Y(this,"onCreateTabSet"),Y(this,"windows"),Y(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new Da(this),this.windows=new Map,this.rootWindow=new cr(Xt.MAIN_WINDOW_ID,Et.empty()),this.windows.set(Xt.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(e){var n;let r;switch(e.type){case Ot.ADD_NODE:{const i=new Qt(this,e.data.json,!0),a=this.idMap.get(e.data.toNode);(a instanceof Gt||a instanceof De||a instanceof ve)&&(a.drop(i,vt.getByName(e.data.location),e.data.index,e.data.select),r=i);break}case Ot.MOVE_NODE:{const i=this.idMap.get(e.data.fromNode);if(i instanceof Qt||i instanceof Gt||i instanceof ve){if(i===this.getMaximizedTabset(i.getWindowId())){const o=this.windows.get(i.getWindowId());o.maximizedTabSet=void 0}const a=this.idMap.get(e.data.toNode);(a instanceof Gt||a instanceof De||a instanceof ve)&&a.drop(i,vt.getByName(e.data.location),e.data.index,e.data.select)}this.removeEmptyWindows();break}case Ot.DELETE_TAB:{const i=this.idMap.get(e.data.node);i instanceof Qt&&i.delete(),this.removeEmptyWindows();break}case Ot.DELETE_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof Gt){const a=[...i.getChildren()];for(let o=0;o<a.length;o++){const u=a[o];u.isEnableClose()&&u.delete()}i.getChildren().length===0&&i.delete(),this.tidy()}this.removeEmptyWindows();break}case Ot.POPOUT_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof Gt){const a=i.isMaximized(),o=this.windows.get(i.getWindowId()),u=mi(),l=new cr(u,o.toScreenRectFunction(i.getRect())),f={type:"row",children:[]},g=ve.fromJson(f,this,l);l.root=g,this.windows.set(u,l),g.drop(i,vt.CENTER,0),a&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case Ot.POPOUT_TAB:{const i=this.idMap.get(e.data.node);if(i instanceof Qt){const a=mi();let o=Et.empty();i.getParent()instanceof Gt?o=i.getParent().getRect():o=i.getParent().getContentRect();const u=this.windows.get(i.getWindowId()),l=new cr(a,u.toScreenRectFunction(o)),f=mi(),g={type:"row",children:[{type:"tabset",id:f}]},y=ve.fromJson(g,this,l);l.root=y,this.windows.set(a,l),this.idMap.get(f).drop(i,vt.CENTER,0,!0)}this.removeEmptyWindows();break}case Ot.CLOSE_WINDOW:{const i=this.windows.get(e.data.windowId);i&&((n=this.rootWindow.root)==null||n.drop(i.root,vt.CENTER,-1),this.rootWindow.visitNodes((a,o)=>{a instanceof ve&&a.setWindowId(Xt.MAIN_WINDOW_ID)}),this.windows.delete(e.data.windowId));break}case Ot.CREATE_WINDOW:{const i=mi(),a=new cr(i,Et.fromJson(e.data.rect)),o=ve.fromJson(e.data.layout,this,a);a.root=o,this.windows.set(i,a),r=i;break}case Ot.RENAME_TAB:{const i=this.idMap.get(e.data.node);i instanceof Qt&&i.setName(e.data.text);break}case Ot.SELECT_TAB:{const i=this.idMap.get(e.data.tabNode),a=e.data.windowId?e.data.windowId:Xt.MAIN_WINDOW_ID,o=this.windows.get(a);if(i instanceof Qt){const u=i.getParent(),l=u.getChildren().indexOf(i);u instanceof De?u.getSelected()===l?u.setSelected(-1):u.setSelected(l):u instanceof Gt&&(u.getSelected()!==l&&u.setSelected(l),o.activeTabSet=u)}break}case Ot.SET_ACTIVE_TABSET:{const i=e.data.windowId?e.data.windowId:Xt.MAIN_WINDOW_ID,a=this.windows.get(i);if(e.data.tabsetNode===void 0)a.activeTabSet=void 0;else{const o=this.idMap.get(e.data.tabsetNode);o instanceof Gt&&(a.activeTabSet=o)}break}case Ot.ADJUST_WEIGHTS:{const a=this.idMap.get(e.data.nodeId).getChildren();for(let o=0;o<a.length;o++)a[o].setWeight(e.data.weights[o]);break}case Ot.ADJUST_BORDER_SPLIT:{const i=this.idMap.get(e.data.node);i instanceof De&&i.setSize(e.data.pos);break}case Ot.MAXIMIZE_TOGGLE:{const i=e.data.windowId?e.data.windowId:Xt.MAIN_WINDOW_ID,a=this.windows.get(i),o=this.idMap.get(e.data.node);o instanceof Gt&&(o===a.maximizedTabSet?a.maximizedTabSet=void 0:(a.maximizedTabSet=o,a.activeTabSet=o));break}case Ot.UPDATE_MODEL_ATTRIBUTES:{this.updateAttrs(e.data.json);break}case Ot.UPDATE_NODE_ATTRIBUTES:{this.idMap.get(e.data.node).updateAttrs(e.data.json);break}}this.updateIdMap();for(const i of this.changeListeners)i(e);return r}getActiveTabset(e=Xt.MAIN_WINDOW_ID){const n=this.windows.get(e);if(n&&n.activeTabSet&&this.getNodeById(n.activeTabSet.getId()))return n.activeTabSet}getMaximizedTabset(e=Xt.MAIN_WINDOW_ID){return this.windows.get(e).maximizedTabSet}getRoot(e=Xt.MAIN_WINDOW_ID){return this.windows.get(e).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(e){this.borders.forEachNode(e);for(const[n,r]of this.windows)r.root.forEachNode(e,0)}visitWindowNodes(e,n){this.windows.has(e)&&(e===Xt.MAIN_WINDOW_ID&&this.borders.forEachNode(n),this.windows.get(e).visitNodes(n))}getNodeById(e){return this.idMap.get(e)}getFirstTabSet(e=this.windows.get(Xt.MAIN_WINDOW_ID).root){const n=e.getChildren()[0];return n instanceof Gt?n:this.getFirstTabSet(n)}static fromJson(e){const n=new Xt;if(Xt.attributeDefinitions.fromJson(e.global,n.attributes),e.borders&&(n.borders=Da.fromJson(e.borders,n)),e.popouts)for(const r in e.popouts){const i=e.popouts[r],a=cr.fromJson(i,n,r);n.windows.set(r,a)}return n.rootWindow.root=ve.fromJson(e.layout,n,n.getwindowsMap().get(Xt.MAIN_WINDOW_ID)),n.tidy(),n}toJson(){const e={};Xt.attributeDefinitions.toJson(e,this.attributes),this.visitNodes(r=>{r.fireEvent("save",{})});const n={};for(const[r,i]of this.windows)r!==Xt.MAIN_WINDOW_ID&&(n[r]=i.toJson());return{global:e,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:n}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(e){this.onAllowDrop=e}setOnCreateTabSet(e){this.onCreateTabSet=e}addChangeListener(e){this.changeListeners.push(e)}removeChangeListener(e){const n=this.changeListeners.findIndex(r=>r===e);n!==-1&&this.changeListeners.splice(n,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){const e=new Set;for(const[n]of this.windows)if(n!==Xt.MAIN_WINDOW_ID){let r=0;this.visitWindowNodes(n,i=>{i instanceof Qt&&r++}),r===0&&e.add(n)}for(const n of e)this.windows.delete(n)}setActiveTabset(e,n){const r=this.windows.get(n);r&&(e?r.activeTabSet=e:r.activeTabSet=void 0)}setMaximizedTabset(e,n){const r=this.windows.get(n);r&&(e?r.maximizedTabSet=e:r.maximizedTabSet=void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes(e=>{this.idMap.set(e.getId(),e)})}addNode(e){const n=e.getId();if(this.idMap.has(n))throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);this.idMap.set(n,e)}findDropTargetNode(e,n,r,i){let a=this.windows.get(e).root.findDropTargetNode(e,n,r,i);return a===void 0&&e===Xt.MAIN_WINDOW_ID&&(a=this.borders.findDropTargetNode(n,r,i)),a}tidy(){for(const[e,n]of this.windows)n.root.tidy()}updateAttrs(e){Xt.attributeDefinitions.update(e,this.attributes)}nextUniqueId(){return"#"+mi()}getAttribute(e){return this.attributes[e]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){Xt.attributeDefinitions.pairAttributes("RowNode",ve.getAttributeDefinitions()),Xt.attributeDefinitions.pairAttributes("TabSetNode",Gt.getAttributeDefinitions()),Xt.attributeDefinitions.pairAttributes("TabNode",Qt.getAttributeDefinitions()),Xt.attributeDefinitions.pairAttributes("BorderNode",De.getAttributeDefinitions());const e=[];e.push(Xt.attributeDefinitions.toTypescriptInterface("Global",void 0)),e.push(ve.getAttributeDefinitions().toTypescriptInterface("Row",Xt.attributeDefinitions)),e.push(Gt.getAttributeDefinitions().toTypescriptInterface("TabSet",Xt.attributeDefinitions)),e.push(Qt.getAttributeDefinitions().toTypescriptInterface("Tab",Xt.attributeDefinitions)),e.push(De.getAttributeDefinitions().toTypescriptInterface("Border",Xt.attributeDefinitions))}static createAttributeDefinitions(){const e=new Yi;return e.add("enableEdgeDock",!0).setType(rt.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),e.add("rootOrientationVertical",!1).setType(rt.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),e.add("enableRotateBorderIcons",!0).setType(rt.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),e.add("splitterSize",8).setType(rt.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),e.add("splitterExtra",0).setType(rt.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),e.add("splitterEnableHandle",!1).setType(rt.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),e.add("tabEnableClose",!0).setType(rt.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnablePopout",!1).setType(rt.BOOLEAN).setAlias("tabEnableFloat"),e.add("tabEnablePopoutIcon",!0).setType(rt.BOOLEAN),e.add("tabEnablePopoutOverlay",!1).setType(rt.BOOLEAN),e.add("tabEnableDrag",!0).setType(rt.BOOLEAN),e.add("tabEnableRename",!0).setType(rt.BOOLEAN),e.add("tabContentClassName",void 0).setType(rt.STRING),e.add("tabClassName",void 0).setType(rt.STRING),e.add("tabIcon",void 0).setType(rt.STRING),e.add("tabEnableRenderOnDemand",!0).setType(rt.BOOLEAN),e.add("tabDragSpeed",.3).setType(rt.NUMBER),e.add("tabBorderWidth",-1).setType(rt.NUMBER),e.add("tabBorderHeight",-1).setType(rt.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(rt.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(rt.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(rt.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(rt.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(rt.BOOLEAN),e.add("tabSetEnableClose",!1).setType(rt.BOOLEAN),e.add("tabSetEnableSingleTabStretch",!1).setType(rt.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(rt.BOOLEAN),e.add("tabSetEnableActiveIcon",!1).setType(rt.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(rt.STRING),e.add("tabSetEnableTabStrip",!0).setType(rt.BOOLEAN),e.add("tabSetEnableTabWrap",!1).setType(rt.BOOLEAN),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabMinWidth",Mn).setType(rt.NUMBER),e.add("tabMinHeight",Mn).setType(rt.NUMBER),e.add("tabSetMinWidth",Mn).setType(rt.NUMBER),e.add("tabSetMinHeight",Mn).setType(rt.NUMBER),e.add("tabMaxWidth",Nn).setType(rt.NUMBER),e.add("tabMaxHeight",Nn).setType(rt.NUMBER),e.add("tabSetMaxWidth",Nn).setType(rt.NUMBER),e.add("tabSetMaxHeight",Nn).setType(rt.NUMBER),e.add("tabSetEnableTabScrollbar",!1).setType(rt.BOOLEAN),e.add("borderSize",200).setType(rt.NUMBER),e.add("borderMinSize",Mn).setType(rt.NUMBER),e.add("borderMaxSize",Nn).setType(rt.NUMBER),e.add("borderEnableDrop",!0).setType(rt.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(rt.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(rt.BOOLEAN),e.add("borderClassName",void 0).setType(rt.STRING),e.add("borderEnableAutoHide",!1).setType(rt.BOOLEAN),e.add("borderEnableTabScrollbar",!1).setType(rt.BOOLEAN),e}};Y(Ba,"MAIN_WINDOW_ID","__main_window_id__");Y(Ba,"attributeDefinitions",Ba.createAttributeDefinitions());let Ue=Ba;const ka=class An extends so{constructor(e,n,r){super(r),Y(this,"contentRect",Et.empty()),Y(this,"tabHeaderRect",Et.empty()),Y(this,"location"),this.location=e,this.attributes.id=`border_${e.getName()}`,An.attributeDefinitions.fromJson(n,this.attributes),r.addNode(this)}static fromJson(e,n){const r=vt.getByName(e.location),i=new An(r,e,n);return e.children&&(i.children=e.children.map(a=>{const o=Qt.fromJson(a,n);return o.setParent(i),o})),i}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===Ct.HORZ}getSize(){const e=this.getAttr("size"),n=this.getSelected();if(n===-1)return e;{const r=this.children[n],i=this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight");return i===-1?e:i}}getMinSize(){const e=this.getSelectedNode();let n=this.getAttr("minSize");if(e){const r=this.isHorizontal()?e.getMinWidth():e.getMinHeight();n=Math.max(n,r)}return n}getMaxSize(){const e=this.getSelectedNode();let n=this.getAttr("maxSize");if(e){const r=this.isHorizontal()?e.getMaxWidth():e.getMaxHeight();n=Math.min(n,r)}return n}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(this.getSelected()!==-1)return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){const e={};return An.attributeDefinitions.toJson(e,this.attributes),e.location=this.location.getName(),e.children=this.children.map(n=>n.toJson()),e}isAutoSelectTab(e){return e==null&&(e=this.getSelected()!==-1),e?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(e){this.attributes.selected=e}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(e){this.tabHeaderRect=e}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(e){this.contentRect=e}isEnableDrop(){return this.getAttr("enableDrop")}setSize(e){const n=this.getSelected();if(n===-1)this.attributes.size=e;else{const r=this.children[n];(this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight"))===-1?this.attributes.size=e:this.isHorizontal()?r.setBorderWidth(e):r.setBorderHeight(e)}}updateAttrs(e){An.attributeDefinitions.update(e,this.attributes)}remove(e){const n=this.removeChild(e);this.getSelected()!==-1&&Ca(this,n)}canDrop(e,n,r){if(!(e instanceof Qt))return;let i;const a=vt.CENTER;if(this.tabHeaderRect.contains(n,r)){if(this.location.orientation===Ct.VERT)if(this.children.length>0){let o=this.children[0],u=o.getTabRect();const l=u.y,f=u.height;let g=this.tabHeaderRect.x,y=0;for(let x=0;x<this.children.length;x++){if(o=this.children[x],u=o.getTabRect(),y=u.x+u.width/2,n>=g&&n<y){const A=new Et(u.x-2,l,3,f);i=new Oe(this,A,a,x,j.FLEXLAYOUT__OUTLINE_RECT);break}g=y}if(i==null){const x=new Et(u.getRight()-2,l,3,f);i=new Oe(this,x,a,this.children.length,j.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Et(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18);i=new Oe(this,o,a,0,j.FLEXLAYOUT__OUTLINE_RECT)}else if(this.children.length>0){let o=this.children[0],u=o.getTabRect();const l=u.x,f=u.width;let g=this.tabHeaderRect.y,y=0;for(let x=0;x<this.children.length;x++){if(o=this.children[x],u=o.getTabRect(),y=u.y+u.height/2,r>=g&&r<y){const A=new Et(l,u.y-2,f,3);i=new Oe(this,A,a,x,j.FLEXLAYOUT__OUTLINE_RECT);break}g=y}if(i==null){const x=new Et(l,u.getBottom()-2,f,3);i=new Oe(this,x,a,this.children.length,j.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Et(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3);i=new Oe(this,o,a,0,j.FLEXLAYOUT__OUTLINE_RECT)}if(!e.canDockInto(e,i))return}else if(this.getSelected()!==-1&&this.contentRect.contains(n,r)){const o=this.contentRect;if(i=new Oe(this,o,a,-1,j.FLEXLAYOUT__OUTLINE_RECT),!e.canDockInto(e,i))return}return i}drop(e,n,r,i){let a=0;const o=e.getParent();o!==void 0&&(a=o.removeChild(e),o!==this&&o instanceof An&&o.getSelected()===a?o.setSelected(-1):Ca(o,a)),e instanceof Qt&&o===this&&a<r&&r>0&&r--;let u=r;u===-1&&(u=this.children.length),e instanceof Qt&&this.addChild(e,u),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(u),this.model.tidy()}getSplitterBounds(e,n=!1){const r=[0,0],i=n?this.getMinSize():0,a=n?this.getMaxSize():99999,o=this.model.getRoot(Ue.MAIN_WINDOW_ID),u=o.getRect(),l=this.model.getSplitterSize();if(this.location===vt.TOP){r[0]=this.tabHeaderRect.getBottom()+i;const f=this.tabHeaderRect.getBottom()+a;r[1]=Math.max(r[0],u.getBottom()-o.getMinHeight()-l),r[1]=Math.min(r[1],f)}else if(this.location===vt.LEFT){r[0]=this.tabHeaderRect.getRight()+i;const f=this.tabHeaderRect.getRight()+a;r[1]=Math.max(r[0],u.getRight()-o.getMinWidth()-l),r[1]=Math.min(r[1],f)}else if(this.location===vt.BOTTOM){r[1]=this.tabHeaderRect.y-i-l;const f=this.tabHeaderRect.y-a-l;r[0]=Math.min(r[1],u.y+o.getMinHeight()),r[0]=Math.max(r[0],f)}else if(this.location===vt.RIGHT){r[1]=this.tabHeaderRect.x-i-l;const f=this.tabHeaderRect.x-a-l;r[0]=Math.min(r[1],u.x+o.getMinWidth()),r[0]=Math.max(r[0],f)}return r}calculateSplit(e,n){const r=this.getSplitterBounds(n);return this.location===vt.BOTTOM||this.location===vt.RIGHT?Math.max(0,r[1]-n):Math.max(0,n-r[0])}getAttributeDefinitions(){return An.attributeDefinitions}static getAttributeDefinitions(){return An.attributeDefinitions}static createAttributeDefinitions(){const e=new Yi;return e.add("type",An.TYPE,!0).setType(rt.STRING).setFixed(),e.add("selected",-1).setType(rt.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),e.add("show",!0).setType(rt.BOOLEAN).setDescription("show/hide this border"),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDrop","borderEnableDrop").setType(rt.BOOLEAN).setDescription("whether tabs can be dropped into this border"),e.addInherited("className","borderClassName").setType(rt.STRING).setDescription("class applied to tab button"),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(rt.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(rt.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),e.addInherited("size","borderSize").setType(rt.NUMBER).setDescription("size of the tab area when selected"),e.addInherited("minSize","borderMinSize").setType(rt.NUMBER).setDescription("the minimum size of the tab area"),e.addInherited("maxSize","borderMaxSize").setType(rt.NUMBER).setDescription("the maximum size of the tab area"),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(rt.BOOLEAN).setDescription("hide border if it has zero tabs"),e.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(rt.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};Y(ka,"TYPE","border");Y(ka,"attributeDefinitions",ka.createAttributeDefinitions());let De=ka,Ni=!1;const $s=t=>{const{layout:e,node:n,index:r,horizontal:i}=t,[a,o]=Xn(!1),u=St(null),l=St(null),f=St([]),g=St(void 0),y=St(void 0),x=St(0),A=St(0),M=St({initialSizes:[],sum:0,startPosition:0}),C=n.getModel().getSplitterSize();let N=n.getModel().getSplitterExtra();Sd()||(N=Math.max(20,N+C)-C),Er(()=>{var J,G;return(J=u.current)==null||J.addEventListener("touchstart",I,{passive:!1}),(G=l.current)==null||G.addEventListener("touchstart",I,{passive:!1}),()=>{var W,Z;(W=u.current)==null||W.removeEventListener("touchstart",I),(Z=l.current)==null||Z.removeEventListener("touchstart",I)}},[]);const I=J=>{J.preventDefault(),J.stopImmediatePropagation()},B=J=>{var G;J.stopPropagation(),n instanceof ve&&(M.current=n.getSplitterInitials(r)),Ps(!1,e.getCurrentDocument()),Md(J.currentTarget.ownerDocument,J,P,X,z),f.current=n.getSplitterBounds(r,!0);const W=e.getRootDiv();g.current=e.getCurrentDocument().createElement("div"),g.current.style.flexDirection=i?"row":"column",g.current.className=e.getClassName(j.FLEXLAYOUT__SPLITTER_DRAG),g.current.style.cursor=n.getOrientation()===Ct.VERT?"ns-resize":"ew-resize",n.getModel().isSplitterEnableHandle()&&(y.current=e.getCurrentDocument().createElement("div"),y.current.className=K(j.FLEXLAYOUT__SPLITTER_HANDLE)+" "+K(i?j.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:j.FLEXLAYOUT__SPLITTER_HANDLE_VERT),g.current.appendChild(y.current));const Z=(G=u.current)==null?void 0:G.getBoundingClientRect(),U=new Et(Z.x-e.getDomRect().x,Z.y-e.getDomRect().y,Z.width,Z.height);x.current=J.clientX-Z.x,A.current=J.clientY-Z.y,U.positionElement(g.current),W&&W.appendChild(g.current),o(!0),Ni=!0},z=()=>{const J=e.getRootDiv();J&&g.current&&J.removeChild(g.current),g.current=void 0,o(!1),Ni=!1},P=(J,G)=>{if(g.current){const W=e.getDomRect();if(!W)return;n.getOrientation()===Ct.VERT?g.current.style.top=lt(G-W.y-A.current)+"px":g.current.style.left=lt(J-W.x-x.current)+"px",e.isRealtimeResize()&&q()}},X=()=>{if(g.current){q();const J=e.getRootDiv();J&&g.current&&J.removeChild(g.current),g.current=void 0}Ps(!0,e.getCurrentDocument()),o(!1),Ni=!1},q=J=>{(()=>{if(g.current){let W=0;if(n.getOrientation()===Ct.VERT?W=g.current.offsetTop:W=g.current.offsetLeft,n instanceof De){const Z=n.calculateSplit(n,W);e.doAction(Ot.adjustBorderSplit(n.getId(),Z))}else{const Z=M.current,U=n.calculateSplit(r,W,Z.initialSizes,Z.sum,Z.startPosition);e.doAction(Ot.adjustWeights(n.getId(),U))}}})()},lt=J=>{const G=f.current;let W=J;return J<G[0]&&(W=G[0]),J>G[1]&&(W=G[1]),W},K=e.getClassName,nt={cursor:i?"ew-resize":"ns-resize",flexDirection:i?"column":"row"};let mt=K(j.FLEXLAYOUT__SPLITTER)+" "+K(j.FLEXLAYOUT__SPLITTER_+n.getOrientation().getName());n instanceof De?mt+=" "+K(j.FLEXLAYOUT__SPLITTER_BORDER):n.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(nt.display="none"),i?(nt.width=C+"px",nt.minWidth=C+"px"):(nt.height=C+"px",nt.minHeight=C+"px");let ft;if(!a&&n.getModel().isSplitterEnableHandle()&&(ft=k("div",{className:K(j.FLEXLAYOUT__SPLITTER_HANDLE)+" "+K(i?j.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:j.FLEXLAYOUT__SPLITTER_HANDLE_VERT)})),N===0)return k("div",{className:mt,style:nt,ref:u,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:B,children:ft});{const J={};n.getOrientation()===Ct.HORZ?(J.height="100%",J.width=C+N+"px",J.cursor="ew-resize"):(J.height=C+N+"px",J.width="100%",J.cursor="ns-resize");const G=K(j.FLEXLAYOUT__SPLITTER_EXTRA);return k("div",{className:mt,style:nt,ref:u,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:B,children:k("div",{style:J,ref:l,className:G,onPointerDown:B})})}};function ib(t){const{layout:e,border:n,show:r}=t,i=St(null),a=St(void 0);on(()=>{const f=e.getBoundingClientRect(i.current);!isNaN(f.x)&&f.width>0&&(n.getContentRect().equals(f)||(n.setContentRect(f),Ni?(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e.redrawInternal("border content rect "+f),a.current=void 0},50)):e.redrawInternal("border content rect "+f)))});let o=!0;const u={};n.getOrientation()===Ct.HORZ?(u.width=n.getSize(),u.minWidth=n.getMinSize(),u.maxWidth=n.getMaxSize()):(u.height=n.getSize(),u.minHeight=n.getMinSize(),u.maxHeight=n.getMaxSize(),o=!1),u.display=r?"flex":"none";const l=e.getClassName(j.FLEXLAYOUT__BORDER_TAB_CONTENTS);return n.getLocation()===vt.LEFT||n.getLocation()===vt.TOP?k(Cn,{children:[k("div",{ref:i,style:u,className:l}),r&&k($s,{layout:e,node:n,index:0,horizontal:o})]}):k(Cn,{children:[r&&k($s,{layout:e,node:n,index:0,horizontal:o}),k("div",{ref:i,style:u,className:l})]})}var Li=(t=>(t[t.Visible=1]="Visible",t[t.Always=2]="Always",t[t.Selected=3]="Selected",t))(Li||{});const ab=t=>{const{layout:e,node:n,selected:r,border:i,icons:a,path:o}=t,u=St(null),l=St(null),f=nt=>{n.isEnableDrag()?(nt.stopPropagation(),e.setDragNode(nt.nativeEvent,n)):nt.preventDefault()},g=nt=>{nt.stopPropagation(),e.clearDragMain()},y=nt=>{Ci(nt)&&e.auxMouseClick(n,nt)},x=nt=>{e.showContextMenu(n,nt)},A=()=>{e.doAction(Ot.selectTab(n.getId()))},M=()=>{const nt=n.getCloseType();return!!(r||nt===Li.Always||nt===Li.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},C=nt=>{M()&&(e.doAction(Ot.deleteTab(n.getId())),nt.stopPropagation())},N=nt=>{nt.stopPropagation()};on(()=>{n.setTabRect(e.getBoundingClientRect(u.current)),e.getEditingTab()===n&&l.current.select()});const I=nt=>{nt.stopPropagation()},B=nt=>{nt.code==="Escape"?e.setEditingTab(void 0):(nt.code==="Enter"||nt.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Ot.renameTab(n.getId(),nt.target.value)))},z=e.getClassName;let P=z(j.FLEXLAYOUT__BORDER_BUTTON)+" "+z(j.FLEXLAYOUT__BORDER_BUTTON_+i);r?P+=" "+z(j.FLEXLAYOUT__BORDER_BUTTON__SELECTED):P+=" "+z(j.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),n.getClassName()!==void 0&&(P+=" "+n.getClassName());let X=0;n.getModel().isEnableRotateBorderIcons()===!1&&(i==="left"?X=90:i==="right"&&(X=-90));const q=du(e,n,X);let lt=q.content?k("div",{className:z(j.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:q.content}):null;const K=q.leading?k("div",{className:z(j.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:q.leading}):null;if(e.getEditingTab()===n&&(lt=k("input",{ref:l,className:z(j.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":o+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:B,onPointerDown:I})),n.isEnableClose()){const nt=e.i18nName(Ae.Close_Tab);q.buttons.push(k("div",{"data-layout-path":o+"/button/close",title:nt,className:z(j.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:N,onClick:C,children:typeof a.close=="function"?a.close(n):a.close},"close"))}return k("div",{ref:u,"data-layout-path":o,className:P,onClick:A,onAuxClick:y,onContextMenu:x,title:n.getHelpText(),draggable:!0,onDragStart:f,onDragEnd:g,children:[K,lt,q.buttons]})},Pa=t=>{const{layout:e,node:n}=t,r=e.getClassName,i=r(j.FLEXLAYOUT__TAB_BUTTON_STAMP),a=du(e,n),o=a.content?k("div",{className:r(j.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:a.content}):n.getNameForOverflowMenu(),u=a.leading?k("div",{className:r(j.FLEXLAYOUT__TAB_BUTTON_LEADING),children:a.leading}):null;return k("div",{className:i,title:n.getHelpText(),children:[u,o]})};function Od(t,e,n,r,i){const a=i.getRootDiv(),o=i.getClassName,u=t.ownerDocument,l=t.getBoundingClientRect(),f=(a==null?void 0:a.getBoundingClientRect())??new DOMRect(0,0,100,100),g=u.createElement("div");g.className=o(j.FLEXLAYOUT__POPUP_MENU_CONTAINER),l.left<f.left+f.width/2?g.style.left=l.left-f.left+"px":g.style.right=f.right-l.right+"px",l.top<f.top+f.height/2?g.style.top=l.top-f.top+"px":g.style.bottom=f.bottom-l.bottom+"px",i.showOverlay(!0),a&&a.appendChild(g);const y=()=>{i.hideControlInPortal(),i.showOverlay(!1),a&&a.removeChild(g),g.removeEventListener("pointerdown",x),u.removeEventListener("pointerdown",A)},x=M=>{M.stopPropagation()},A=M=>{y()};g.addEventListener("pointerdown",x),u.addEventListener("pointerdown",A),i.showControlInPortal(k(ob,{currentDocument:u,parentNode:e,onSelect:r,onHide:y,items:n,classNameMapper:o,layout:i}),g)}const ob=t=>{const{parentNode:e,items:n,onHide:r,onSelect:i,classNameMapper:a,layout:o}=t,u=St(null);Er(()=>{u.current&&u.current.focus()},[]);const l=(A,M)=>{i(A),r(),M.stopPropagation()},f=(A,M)=>{A.stopPropagation(),o.setDragNode(A.nativeEvent,M),setTimeout(()=>{r()},0)},g=A=>{o.clearDragMain()},y=A=>{A.key==="Escape"&&r()},x=n.map((A,M)=>{let C=a(j.FLEXLAYOUT__POPUP_MENU_ITEM);return e.getSelected()===A.index&&(C+=" "+a(j.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),k("div",{className:C,"data-layout-path":"/popup-menu/tb"+M,onClick:N=>l(A,N),draggable:!0,onDragStart:N=>f(N,A.node),onDragEnd:g,title:A.node.getHelpText(),children:k(Pa,{node:A.node,layout:o})},A.index)});return k("div",{className:a(j.FLEXLAYOUT__POPUP_MENU),ref:u,tabIndex:0,onKeyDown:y,"data-layout-path":"/popup-menu",children:x})},Dd=(t,e,n,r,i,a)=>{const[o,u]=Xn([]),[l,f]=Xn(!1),[g,y]=Xn(!1),x=St(null),A=St(!1),M=St(void 0),C=St([]),N=St(0),I=St(!1);C.current=o,on(()=>{r.current&&st(0)},[e.getId()]),on(()=>{A.current=!1},[e.getSelectedNode(),e.getRect().width,e.getRect().height]),on(()=>{ft(),A.current===!1&&z(),P(),X()}),Er(()=>{var Q;return(Q=x.current)==null||Q.addEventListener("wheel",B,{passive:!1}),()=>{var it;(it=x.current)==null||it.removeEventListener("wheel",B)}},[x.current]);const B=Q=>{Q.preventDefault()};function z(){const Q=e.getSelectedNode();if(Q&&r.current){const it=t.getBoundingClientRect(r.current),ut=Q.getTabRect();let ht=W(it)-W(ut);ht>0||et(ut)>et(it)?(st(gt(r.current)-ht),I.current=!0):(ht=Z(ut)-Z(it),ht>0&&(st(gt(r.current)+ht),I.current=!0))}}const P=()=>{if(r.current&&i.current){const Q=r.current,it=i.current,ut=U(Q),ht=dt(Q),Mt=gt(Q);if(ht>ut&&ht>0){let At=ut*ut/ht,xt=0;At<20&&(xt=20-At,At=20);const Dt=Mt*(ut-xt)/ht;n===Ct.HORZ?(it.style.width=At+"px",it.style.left=Dt+"px"):(it.style.height=At+"px",it.style.top=Dt+"px"),it.style.display="block"}else it.style.display="none";n===Ct.HORZ?it.style.bottom="0px":it.style.right="0px"}},X=()=>{const it=J().length>0;it!==l&&f(it),M.current===void 0&&(M.current=setTimeout(()=>{const ut=J();sb(ut,C.current)||u(ut),M.current=void 0},100))},q=()=>{I.current||(A.current=!0),I.current=!1,P(),X()},lt=Q=>{var it;Q.stopPropagation(),i.current.setPointerCapture(Q.pointerId);const ut=(it=i.current)==null?void 0:it.getBoundingClientRect();n===Ct.HORZ?N.current=Q.clientX-ut.x:N.current=Q.clientY-ut.y,Md(Q.currentTarget.ownerDocument,Q,K,nt,mt)},K=(Q,it)=>{if(r.current&&i.current){const ut=r.current,ht=i.current,Mt=U(ut),At=dt(ut),xt=U(ht),Dt=ut.getBoundingClientRect();let ct=0;if(n===Ct.HORZ?ct=Q-Dt.x-N.current:ct=it-Dt.y-N.current,ct=Math.max(0,Math.min(At-xt,ct)),Mt>0){const _t=ct*At/Mt;st(_t)}}},nt=()=>{},mt=()=>{},ft=()=>{if(r.current){const it=r.current.firstElementChild,ut=g?10:0,ht=U(it)+ut>U(r.current);ht!==g&&y(ht)}},J=()=>{const Q=[];if(r.current){const it=r.current,ut=it.getBoundingClientRect(),ht=W(ut)-1,Mt=Z(ut)+1,At=it.firstElementChild;let xt=0;Array.from(At.children).forEach(Dt=>{const ct=Dt.getBoundingClientRect();Dt.classList.contains(a)&&((W(ct)<ht||Z(ct)>Mt)&&Q.push(xt),xt++)})}return Q},G=Q=>{if(r.current){if(e.getChildren().length===0)return;let it=0;if(Math.abs(Q.deltaY)>0){it=-Q.deltaY,Q.deltaMode===1&&(it*=40);const ut=gt(r.current)-it,ht=dt(r.current)-U(r.current),Mt=Math.max(0,Math.min(ht,ut));st(Mt),Q.stopPropagation()}}},W=Q=>n===Ct.HORZ?Q.x:Q.y,Z=Q=>n===Ct.HORZ?Q.right:Q.bottom,U=Q=>n===Ct.HORZ?Q.clientWidth:Q.clientHeight,et=Q=>n===Ct.HORZ?Q.width:Q.height,dt=Q=>n===Ct.HORZ?Q.scrollWidth:Q.scrollHeight,st=Q=>{n===Ct.HORZ?r.current.scrollLeft=Q:r.current.scrollTop=Q},gt=Q=>n===Ct.HORZ?Q.scrollLeft:Q.scrollTop;return{selfRef:x,userControlledPositionRef:A,onScroll:q,onScrollPointerDown:lt,hiddenTabs:o,onMouseWheel:G,isDockStickyButtons:g,isShowHiddenTabs:l}};function sb(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])}const ub=t=>{const{border:e,layout:n,size:r}=t,i=St(null),a=St(null),o=St(null),u=St(null),l=St(null),f=n.getIcons();on(()=>{e.setTabHeaderRect(n.getBoundingClientRect(g.current))});const{selfRef:g,userControlledPositionRef:y,onScroll:x,onScrollPointerDown:A,hiddenTabs:M,onMouseWheel:C,isDockStickyButtons:N,isShowHiddenTabs:I}=Dd(n,e,Ct.flip(e.getOrientation()),l,a,n.getClassName(j.FLEXLAYOUT__BORDER_BUTTON)),B=ut=>{Ci(ut)&&n.auxMouseClick(e,ut)},z=ut=>{n.showContextMenu(e,ut)},P=ut=>{ut.stopPropagation()},X=ut=>{const ht=n.getShowOverflowMenu(),Mt=M.map(At=>({index:At,node:e.getChildren()[At]}));if(ht!==void 0)ht(e,ut,Mt,q);else{const At=o.current;Od(At,e,Mt,q,n)}ut.stopPropagation()},q=ut=>{n.doAction(Ot.selectTab(ut.node.getId())),y.current=!1},lt=ut=>{const ht=e.getChildren()[e.getSelected()];ht!==void 0&&n.doAction(Ot.popoutTab(ht.getId())),ut.stopPropagation()},K=n.getClassName,nt=[],mt=ut=>{const ht=e.getSelected()===ut,Mt=e.getChildren()[ut];nt.push(k(ab,{layout:n,border:e.getLocation().getName(),node:Mt,path:e.getPath()+"/tb"+ut,selected:ht,icons:f},Mt.getId())),ut<e.getChildren().length-1&&nt.push(k("div",{className:K(j.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+ut))};for(let ut=0;ut<e.getChildren().length;ut++)mt(ut);let ft=K(j.FLEXLAYOUT__BORDER)+" "+K(j.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(ft+=" "+e.getClassName());let J,G=[],W=[];const Z={leading:J,buttons:G,stickyButtons:W,overflowPosition:void 0};if(n.customizeTabSet(e,Z),J=Z.leading,W=Z.stickyButtons,G=Z.buttons,Z.overflowPosition===void 0&&(Z.overflowPosition=W.length),W.length>0&&(N?G=[...W,...G]:nt.push(k("div",{ref:u,onPointerDown:P,onDragStart:ut=>{ut.preventDefault()},className:K(j.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:W},"sticky_buttons_container"))),I){const ut=n.i18nName(Ae.Overflow_Menu_Tooltip);let ht;if(typeof f.more=="function"){const Mt=M.map(At=>({index:At,node:e.getChildren()[At]}));ht=f.more(e,Mt)}else ht=k(Cn,{children:[f.more,k("div",{className:K(j.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:M.length>0?M.length:""})]});G.splice(Math.min(Z.overflowPosition,G.length),0,k("button",{ref:o,className:K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:ut,onClick:X,onPointerDown:P,children:ht},"overflowbutton"))}const U=e.getSelected();if(U!==-1){const ut=e.getChildren()[U];if(ut!==void 0&&n.isSupportsPopout()&&ut.isEnablePopout()){const ht=n.i18nName(Ae.Popout_Tab);G.push(k("button",{title:ht,className:K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:lt,onPointerDown:P,children:typeof f.popout=="function"?f.popout(ut):f.popout},"popout"))}}const et=k("div",{ref:i,className:K(j.FLEXLAYOUT__BORDER_TOOLBAR)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName()),children:G},"toolbar");let dt={},st={};const gt=r-1;e.getLocation()===vt.LEFT?(dt={right:"100%",top:0},st={width:gt,overflowY:"auto"}):e.getLocation()===vt.RIGHT?(dt={left:"100%",top:0},st={width:gt,overflowY:"auto"}):(dt={left:0},st={height:gt,overflowX:"auto"});let Q;e.isEnableTabScrollbar()&&(Q=k("div",{ref:a,className:K(j.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:A}));let it;return J&&(it=k("div",{className:K(j.FLEXLAYOUT__BORDER_LEADING),children:J})),k("div",{ref:g,style:{display:"flex",flexDirection:e.getOrientation()===Ct.VERT?"row":"column"},className:ft,"data-layout-path":e.getPath(),onClick:B,onAuxClick:B,onContextMenu:z,onWheel:C,children:[it,k("div",{className:K(j.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[k("div",{ref:l,className:K(j.FLEXLAYOUT__BORDER_INNER)+" "+K(j.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName()),style:st,onScroll:x,children:k("div",{style:dt,className:K(j.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+K(j.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName()),children:nt})}),Q]}),et]})},cb=t=>{const{layout:e,node:n}=t,r=St(null);Er(()=>{n.setTabStamp(r.current)},[n,r.current]);const i=e.getClassName,a=i(j.FLEXLAYOUT__DRAG_RECT);return k("div",{ref:r,className:a,children:k(Pa,{layout:e,node:n},n.getId())})},lb=t=>{const{title:e,layout:n,layoutWindow:r,url:i,onCloseWindow:a,onSetWindow:o,children:u}=t,l=St(null),[f,g]=Xn(void 0),y=new Map;return on(()=>{if(!l.current){const x=r.windowId,A=r.rect;l.current=window.open(i,x,`left=${A.x},top=${A.y},width=${A.width},height=${A.height}`),l.current?(r.window=l.current,o(r,l.current),window.addEventListener("beforeunload",()=>{if(l.current){const M=l.current;l.current=null,M.close()}}),l.current.addEventListener("load",()=>{if(l.current){l.current.focus(),l.current.resizeTo(A.width,A.height),l.current.moveTo(A.x,A.y);const M=l.current.document;M.title=e;const C=M.createElement("div");C.className=j.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,M.body.appendChild(C),db(M,y).then(()=>{g(C)});const N=new MutationObserver(I=>fb(I,M,y));N.observe(document.head,{childList:!0}),l.current.addEventListener("beforeunload",()=>{l.current&&(a(r),l.current=null,N.disconnect())})}})):a(r)}return()=>{var x;n.getModel().getwindowsMap().has(r.windowId)||((x=l.current)==null||x.close(),l.current=null)}},[]),f!==void 0?Na(u,f):null};function fb(t,e,n){for(const r of t)if(r.type==="childList"){for(const i of r.addedNodes)(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement)&&Rd(e,i,n);for(const i of r.removedNodes)if(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement){const a=n.get(i);a&&e.head.removeChild(a)}}}function db(t,e){const n=[],r=document.querySelectorAll('style, link[rel="stylesheet"]');for(const i of r)Rd(t,i,e,n);return Promise.all(n)}function Rd(t,e,n,r){if(e instanceof HTMLLinkElement){const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i),r&&r.push(new Promise(a=>{i.onload=()=>a(!0)}))}else if(e instanceof HTMLStyleElement)try{const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i)}catch{}}const Kr={width:"1em",height:"1em",display:"flex",alignItems:"center"},Ql=()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kr,viewBox:"0 0 24 24",children:[k("path",{fill:"none",d:"M0 0h24v24H0z"}),k("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),hb=()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[k("path",{d:"M0 0h24v24H0z",fill:"none"}),k("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),gb=()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[k("path",{d:"M0 0h24v24H0z",fill:"none"}),k("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),mb=()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:k("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),vb=()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kr,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[k("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),k("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),pb=()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[k("path",{d:"M0 0h24v24H0z",fill:"none"}),k("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),bb=()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kr,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:k("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),yb=t=>{const{layout:e,show:n}=t;return k("div",{className:e.getClassName(j.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:n?"flex":"none"}})},_b=t=>{const{layout:e,node:n,selected:r,path:i}=t,a=St(null),o=St(null),u=e.getIcons();on(()=>{n.setTabRect(e.getBoundingClientRect(a.current)),e.getEditingTab()===n&&o.current.select()});const l=G=>{n.isEnableDrag()?(G.stopPropagation(),e.setDragNode(G.nativeEvent,n)):G.preventDefault()},f=G=>{e.clearDragMain()},g=G=>{Ci(G)&&e.auxMouseClick(n,G)},y=G=>{e.showContextMenu(n,G)},x=()=>{e.doAction(Ot.selectTab(n.getId()))},A=G=>{n.isEnableRename()&&(M(),G.stopPropagation())},M=()=>{e.setEditingTab(n),e.getCurrentDocument().body.addEventListener("pointerdown",C)},C=G=>{G.target!==o.current&&(e.getCurrentDocument().body.removeEventListener("pointerdown",C),e.setEditingTab(void 0))},N=()=>{const G=n.getCloseType();return!!(r||G===Li.Always||G===Li.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},I=G=>{N()&&(e.doAction(Ot.deleteTab(n.getId())),G.stopPropagation())},B=G=>{G.stopPropagation()},z=G=>{G.stopPropagation()},P=G=>{G.code==="Escape"?e.setEditingTab(void 0):(G.code==="Enter"||G.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Ot.renameTab(n.getId(),G.target.value)))},X=e.getClassName,q=n.getParent(),lt=q.isEnableSingleTabStretch()&&q.getChildren().length===1,K=lt?j.FLEXLAYOUT__TAB_BUTTON_STRETCH:j.FLEXLAYOUT__TAB_BUTTON;let nt=X(K);nt+=" "+X(K+"_"+q.getTabLocation()),lt||(r?nt+=" "+X(K+"--selected"):nt+=" "+X(K+"--unselected")),n.getClassName()!==void 0&&(nt+=" "+n.getClassName());const mt=du(e,n);let ft=mt.content?k("div",{className:X(j.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:mt.content}):null;const J=mt.leading?k("div",{className:X(j.FLEXLAYOUT__TAB_BUTTON_LEADING),children:mt.leading}):null;if(e.getEditingTab()===n&&(ft=k("input",{ref:o,className:X(j.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":i+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:P,onPointerDown:z})),n.isEnableClose()&&!lt){const G=e.i18nName(Ae.Close_Tab);mt.buttons.push(k("div",{"data-layout-path":i+"/button/close",title:G,className:X(j.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:B,onClick:I,children:typeof u.close=="function"?u.close(n):u.close},"close"))}return k("div",{ref:a,"data-layout-path":i,className:nt,onClick:x,onAuxClick:g,onContextMenu:y,title:n.getHelpText(),draggable:!0,onDragStart:l,onDragEnd:f,onDoubleClick:A,children:[J,ft,mt.buttons]})},wb=t=>{const{node:e,layout:n}=t,r=St(null),i=St(null),a=St(null),o=St(null),u=St(null),l=St(null),f=St(null),g=St(void 0),y=n.getIcons();on(()=>{e.setRect(n.getBoundingClientRect(x.current)),r.current&&e.setTabStripRect(n.getBoundingClientRect(r.current));const ot=n.getBoundingClientRect(o.current);!e.getContentRect().equals(ot)&&!isNaN(ot.x)&&(e.setContentRect(ot),Ni?(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{n.redrawInternal("border content rect "+ot),g.current=void 0},50)):n.redrawInternal("border content rect "+ot))});const{selfRef:x,userControlledPositionRef:A,onScroll:M,onScrollPointerDown:C,hiddenTabs:N,onMouseWheel:I,isDockStickyButtons:B,isShowHiddenTabs:z}=Dd(n,e,Ct.HORZ,a,i,n.getClassName(j.FLEXLAYOUT__TAB_BUTTON)),P=ot=>{const Yt=n.getShowOverflowMenu(),qt=N.map(pt=>({index:pt,node:e.getChildren()[pt]}));if(Yt!==void 0)Yt(e,ot,qt,X);else{const pt=l.current;Od(pt,e,qt,X,n)}ot.stopPropagation()},X=ot=>{n.doAction(Ot.selectTab(ot.node.getId())),A.current=!1},q=ot=>{n.getEditingTab()?ot.preventDefault():e.isEnableDrag()?(ot.stopPropagation(),n.setDragNode(ot.nativeEvent,e)):ot.preventDefault()},lt=ot=>{Ci(ot)||n.doAction(Ot.setActiveTabset(e.getId(),n.getWindowId()))},K=ot=>{Ci(ot)&&n.auxMouseClick(e,ot)},nt=ot=>{n.showContextMenu(e,ot)},mt=ot=>{ot.stopPropagation()},ft=ot=>{e.canMaximize()&&n.maximize(e),ot.stopPropagation()},J=ot=>{n.doAction(Ot.deleteTabset(e.getId())),ot.stopPropagation()},G=ot=>{n.doAction(Ot.deleteTab(e.getChildren()[0].getId())),ot.stopPropagation()},W=ot=>{et!==void 0&&n.doAction(Ot.popoutTab(et.getId())),ot.stopPropagation()},Z=ot=>{e.canMaximize()&&n.maximize(e)},U=n.getClassName,et=e.getSelectedNode(),dt=e.getPath(),st=[];if(e.isEnableTabStrip())for(let ot=0;ot<e.getChildren().length;ot++){const Yt=e.getChildren()[ot],qt=e.getSelected()===ot;st.push(k(_b,{layout:n,node:Yt,path:dt+"/tb"+ot,selected:qt},Yt.getId())),ot<e.getChildren().length-1&&st.push(k("div",{className:U(j.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+ot))}let gt,Q=[],it=[];const ut={leading:gt,stickyButtons:Q,buttons:it,overflowPosition:void 0};n.customizeTabSet(e,ut),gt=ut.leading,Q=ut.stickyButtons,it=ut.buttons;const ht=e.isEnableSingleTabStretch()&&e.getChildren().length===1,Mt=ht&&e.getChildren()[0].isEnableClose()||e.isEnableClose();if(ut.overflowPosition===void 0&&(ut.overflowPosition=Q.length),Q.length>0&&(!e.isEnableTabWrap()&&(B||ht)?it=[...Q,...it]:st.push(k("div",{ref:f,onPointerDown:mt,onDragStart:ot=>{ot.preventDefault()},className:U(j.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:Q},"sticky_buttons_container"))),!e.isEnableTabWrap()&&z){const ot=n.i18nName(Ae.Overflow_Menu_Tooltip);let Yt;if(typeof y.more=="function"){const qt=N.map(pt=>({index:pt,node:e.getChildren()[pt]}));Yt=y.more(e,qt)}else Yt=k(Cn,{children:[y.more,k("div",{className:U(j.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:N.length>0?N.length:""})]});it.splice(Math.min(ut.overflowPosition,it.length),0,k("button",{"data-layout-path":dt+"/button/overflow",ref:l,className:U(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+U(j.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:ot,onClick:P,onPointerDown:mt,children:Yt},"overflowbutton"))}if(et!==void 0&&n.isSupportsPopout()&&et.isEnablePopout()&&et.isEnablePopoutIcon()){const ot=n.i18nName(Ae.Popout_Tab);it.push(k("button",{"data-layout-path":dt+"/button/popout",title:ot,className:U(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+U(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:W,onPointerDown:mt,children:typeof y.popout=="function"?y.popout(et):y.popout},"popout"))}if(e.canMaximize()){const ot=n.i18nName(Ae.Restore),Yt=n.i18nName(Ae.Maximize);it.push(k("button",{"data-layout-path":dt+"/button/max",title:e.isMaximized()?ot:Yt,className:U(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+U(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:ft,onPointerDown:mt,children:e.isMaximized()?typeof y.restore=="function"?y.restore(e):y.restore:typeof y.maximize=="function"?y.maximize(e):y.maximize},"max"))}if(!e.isMaximized()&&Mt){const ot=ht?n.i18nName(Ae.Close_Tab):n.i18nName(Ae.Close_Tabset);it.push(k("button",{"data-layout-path":dt+"/button/close",title:ot,className:U(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+U(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:ht?G:J,onPointerDown:mt,children:typeof y.closeTabset=="function"?y.closeTabset(e):y.closeTabset},"close"))}if(e.isActive()&&e.isEnableActiveIcon()){const ot=n.i18nName(Ae.Active_Tabset);it.push(k("div",{"data-layout-path":dt+"/button/active",title:ot,className:U(j.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:typeof y.activeTabset=="function"?y.activeTabset(e):y.activeTabset},"active"))}const At=k("div",{ref:u,className:U(j.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:mt,onDragStart:ot=>{ot.preventDefault()},children:it},"buttonbar");let xt,Dt=U(j.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(Dt+=" "+e.getClassNameTabStrip()),Dt+=" "+j.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&(Dt+=" "+U(j.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(Dt+=" "+U(j.FLEXLAYOUT__TABSET_MAXIMIZED)),ht){const ot=e.getChildren()[0];ot.getTabSetClassName()!==void 0&&(Dt+=" "+ot.getTabSetClassName())}let ct;if(gt&&(ct=k("div",{className:U(j.FLEXLAYOUT__TABSET_LEADING),children:gt})),e.isEnableTabWrap())e.isEnableTabStrip()&&(xt=k("div",{className:Dt,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:r,"data-layout-path":dt+"/tabstrip",onPointerDown:lt,onDoubleClick:Z,onContextMenu:nt,onClick:K,onAuxClick:K,draggable:!0,onDragStart:q,children:[ct,st,k("div",{style:{flexGrow:1}}),At]}));else if(e.isEnableTabStrip()){let ot;e.isEnableTabScrollbar()&&(ot=k("div",{ref:i,className:U(j.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:C})),xt=k("div",{className:Dt,ref:r,"data-layout-path":dt+"/tabstrip",onPointerDown:lt,onDoubleClick:Z,onContextMenu:nt,onClick:K,onAuxClick:K,draggable:!0,onWheel:I,onDragStart:q,children:[ct,k("div",{className:U(j.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[k("div",{ref:a,className:U(j.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+U(j.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:M,children:k("div",{style:{width:ht?"100%":"none"},className:U(j.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+U(j.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation()),children:st})}),ot]}),At]})}let _t;if(e.getChildren().length===0){const ot=n.getTabSetPlaceHolderCallback();ot&&(_t=ot(e))}let Nt=k("div",{ref:o,className:U(j.FLEXLAYOUT__TABSET_CONTENT),children:_t});e.getTabLocation()==="top"?Nt=k(Cn,{children:[xt,Nt]}):Nt=k(Cn,{children:[Nt,xt]});const at={flexGrow:Math.max(1,e.getWeight()*1e3),minWidth:e.getMinWidth(),minHeight:e.getMinHeight(),maxWidth:e.getMaxWidth(),maxHeight:e.getMaxHeight()};e.getModel().getMaximizedTabset(n.getWindowId())!==void 0&&!e.isMaximized()&&(at.display="none");const Ut=k("div",{ref:x,className:U(j.FLEXLAYOUT__TABSET_CONTAINER),style:at,children:k("div",{className:U(j.FLEXLAYOUT__TABSET),"data-layout-path":dt,children:Nt})});return e.isMaximized()&&n.getMainElement()?Na(k("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:Ut}),n.getMainElement()):Ut},Cd=t=>{const{layout:e,node:n}=t,r=St(null),i=n.getOrientation()===Ct.HORZ;on(()=>{n.setRect(e.getBoundingClientRect(r.current))});const a=[];let o=0;for(const l of n.getChildren())o>0&&a.push(k($s,{layout:e,node:n,index:o,horizontal:i},"splitter"+o)),l instanceof ve?a.push(k(Cd,{layout:e,node:l},l.getId())):l instanceof Gt&&a.push(k(wb,{layout:e,node:l},l.getId())),o++;const u={flexGrow:Math.max(1,n.getWeight()*1e3),minWidth:n.getMinWidth(),minHeight:n.getMinHeight(),maxWidth:n.getMaxWidth(),maxHeight:n.getMaxHeight()};return i?u.flexDirection="row":u.flexDirection="column",k("div",{ref:r,className:e.getClassName(j.FLEXLAYOUT__ROW),style:u,children:a})},xb=t=>{const{layout:e,selected:n,node:r,path:i}=t,a=St(null),o=St(!0),u=r.getParent(),l=u.getContentRect();on(()=>{const M=r.getMoveableElement();a.current.appendChild(M),r.setMoveableElement(M);const C=()=>{r.saveScrollPosition()};return M.addEventListener("scroll",C),a.current.addEventListener("pointerdown",f),()=>{M.removeEventListener("scroll",C),a.current&&a.current.removeEventListener("pointerdown",f),r.setVisible(!1)}},[]),Er(()=>{r.isSelected()&&o.current&&(r.restoreScrollPosition(),o.current=!1)});const f=()=>{const M=r.getParent();M instanceof Gt&&(M.isActive()||e.doAction(Ot.setActiveTabset(M.getId(),e.getWindowId())))};r.setRect(l);const g=e.getClassName,y={};l.styleWithPosition(y);let x=null;if(n){if(r.setVisible(!0),document.hidden&&r.isEnablePopoutOverlay()){const M={};l.styleWithPosition(M),x=k("div",{style:M,className:g(j.FLEXLAYOUT__TAB_OVERLAY)})}}else y.display="none",r.setVisible(!1);u instanceof Gt&&r.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(u.isMaximized()?y.zIndex=10:y.display="none"),u instanceof De&&(u.isShowing()||(y.display="none"));let A=g(j.FLEXLAYOUT__TAB);return u instanceof De&&(A+=" "+g(j.FLEXLAYOUT__TAB_BORDER),A+=" "+g(j.FLEXLAYOUT__TAB_BORDER_+u.getLocation().getName())),r.getContentClassName()!==void 0&&(A+=" "+r.getContentClassName()),k(Cn,{children:[x,k("div",{ref:a,style:y,className:A,"data-layout-path":i})]})};class Tb extends fu{constructor(e){super(e),Y(this,"retry",()=>{this.setState({hasError:!1})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){}render(){return this.state.hasError?k("div",{className:j.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:k("div",{className:j.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:k("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,k("p",{children:k("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}const Ab=Ar(({layout:t,node:e})=>k(Tb,{message:t.i18nName(Ae.Error_rendering_component),retryText:t.i18nName(Ae.Error_rendering_component_retry),children:t.props.factory(e)}),Eb);function Eb(t,e){return!(e.visible&&(!t.rect.equalSize(e.rect)||t.forceRevision!==e.forceRevision||t.tabsRevision!==e.tabsRevision))}class Sb extends fu{constructor(e){super(e),Y(this,"selfRef"),Y(this,"revision"),this.selfRef=Pr(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(e,n){return this.selfRef.current.addTabToTabSet(e,n)}addTabWithDragAndDrop(e,n,r){this.selfRef.current.addTabWithDragAndDrop(e,n,r)}moveTabWithDragAndDrop(e,n){this.selfRef.current.moveTabWithDragAndDrop(e,n)}addTabToActiveTabSet(e){return this.selfRef.current.addTabToActiveTabSet(e)}setDragComponent(e,n,r,i){this.selfRef.current.setDragComponent(e,n,r,i)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return k(Mb,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}const Ld=class Pe extends fu{constructor(e){super(e),Y(this,"selfRef"),Y(this,"moveablesRef"),Y(this,"findBorderBarSizeRef"),Y(this,"mainRef"),Y(this,"previousModel"),Y(this,"orderedTabIds"),Y(this,"orderedTabMoveableIds"),Y(this,"moveableElementMap",new Map),Y(this,"dropInfo"),Y(this,"outlineDiv"),Y(this,"currentDocument"),Y(this,"currentWindow"),Y(this,"supportsPopout"),Y(this,"popoutURL"),Y(this,"icons"),Y(this,"resizeObserver"),Y(this,"dragEnterCount",0),Y(this,"dragging",!1),Y(this,"windowId"),Y(this,"layoutWindow"),Y(this,"mainLayout"),Y(this,"isMainWindow"),Y(this,"isDraggingOverWindow"),Y(this,"styleObserver"),Y(this,"popoutWindowName"),Y(this,"updateLayoutMetrics",()=>{if(this.findBorderBarSizeRef.current){const n=this.findBorderBarSizeRef.current.getBoundingClientRect().height;n!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:n})}}),Y(this,"onModelChange",n=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,n)}),Y(this,"updateRect",()=>{if(this.selfRef.current){const n=Et.fromDomRect(this.selfRef.current.getBoundingClientRect());!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&(this.setState({rect:n}),this.windowId!==Ue.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}}),Y(this,"getClassName",n=>this.props.classNameMapper===void 0?n:this.props.classNameMapper(n)),Y(this,"onCloseWindow",n=>{this.doAction(Ot.closeWindow(n.windowId))}),Y(this,"onSetWindow",(n,r)=>{}),Y(this,"showControlInPortal",(n,r)=>{const i=Na(n,r);this.setState({portal:i})}),Y(this,"hideControlInPortal",()=>{this.setState({portal:void 0})}),Y(this,"getIcons",()=>this.icons),Y(this,"setDragNode",(n,r)=>{if(Pe.dragState=new ms(this.mainLayout,"internal",r,void 0,void 0),n.dataTransfer.setData("text/plain","--flexlayout--"),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.dropEffect="move",this.dragEnterCount=0,r instanceof Gt){let i=!1,a=this.i18nName(Ae.Move_Tabset);if(r.getChildren().length>0&&(a=this.i18nName(Ae.Move_Tabs).replace("?",String(r.getChildren().length))),this.props.onRenderDragRect){const o=this.props.onRenderDragRect(a,r,void 0);o&&(this.setDragComponent(n,o,10,10),i=!0)}i||this.setDragComponent(n,a,10,10)}else{const a=n.target.getBoundingClientRect(),o=n.clientX-a.left,u=n.clientY-a.top,l=r==null?void 0:r.getParent(),f=l instanceof De&&l.getOrientation()===Ct.HORZ,g=f?10:o,y=f?10:u;let x=!1;if(this.props.onRenderDragRect){const A=k(Pa,{layout:this,node:r},r.getId()),M=this.props.onRenderDragRect(A,r,void 0);M&&(this.setDragComponent(n,M,g,y),x=!0)}x||(rb()?this.setDragComponent(n,k(Pa,{node:r,layout:this}),g,y):n.dataTransfer.setDragImage(r.getTabStamp(),g,y))}}),Y(this,"onDragEnterRaw",n=>{this.dragEnterCount++,this.dragEnterCount===1&&this.onDragEnter(n)}),Y(this,"onDragLeaveRaw",n=>{this.dragEnterCount--,this.dragEnterCount===0&&this.onDragLeave(n)}),Y(this,"onDragEnter",n=>{if(!Pe.dragState&&this.props.onExternalDrag){const r=this.props.onExternalDrag(n);if(r){const i=Qt.fromJson(r.json,this.props.model,!1);Pe.dragState=new ms(this.mainLayout,"external",i,r.json,r.onDrop)}}if(Pe.dragState){if(this.windowId!==Ue.MAIN_WINDOW_ID&&Pe.dragState.mainLayout===this.mainLayout&&Pe.dragState.mainLayout.setDraggingOverWindow(!0),Pe.dragState.mainLayout!==this.mainLayout)return;n.preventDefault(),this.dropInfo=void 0;const r=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(j.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";const i=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${i}s, left ${i}s, width ${i}s, height ${i}s`,r.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),!this.isDraggingOverWindow&&this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()});const a=this.selfRef.current.getBoundingClientRect();new Et(n.clientX-a.left,n.clientY-a.top,1,1).positionElement(this.outlineDiv)}}),Y(this,"onDragOver",n=>{var r;if(this.dragging&&!this.isDraggingOverWindow){n.preventDefault();const i=(r=this.selfRef.current)==null?void 0:r.getBoundingClientRect(),a={x:n.clientX-((i==null?void 0:i.left)??0),y:n.clientY-((i==null?void 0:i.top)??0)};this.checkForBorderToShow(a.x,a.y);const o=this.props.model.findDropTargetNode(this.windowId,Pe.dragState.dragNode,a.x,a.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}}),Y(this,"onDragLeave",n=>{this.dragging&&(this.windowId!==Ue.MAIN_WINDOW_ID&&Pe.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())}),Y(this,"onDrop",n=>{if(this.dragging){n.preventDefault();const r=Pe.dragState;if(this.dropInfo)if(r.dragJson!==void 0){const i=this.doAction(Ot.addNode(r.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));r.fnNewNodeDropped!==void 0&&r.fnNewNodeDropped(i,n)}else r.dragNode!==void 0&&this.doAction(Ot.moveNode(r.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.mainLayout.clearDragMain()}this.dragEnterCount=0}),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=Pr(),this.moveablesRef=Pr(),this.mainRef=Pr(),this.findBorderBarSizeRef=Pr(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:Ob,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons={...Nb,...e.icons},this.windowId=e.windowId?e.windowId:Ue.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:Et.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:vt.CENTER},this.isMainWindow=this.windowId===Ue.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{this.updateRect()})}),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",()=>{this.updateRect()});const e=this.props.mainLayout.getRootDiv(),n=this.selfRef.current;Zl(e,n),this.styleObserver=new MutationObserver(()=>{Zl(e,n)&&this.redraw("mutation observer")}),this.styleObserver.observe(e,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",()=>{for(const[e,n]of this.props.model.getwindowsMap())n.layout&&this.redraw("visibility change")})}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var e,n;this.selfRef.current&&((e=this.resizeObserver)==null||e.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),(n=this.styleObserver)==null||n.disconnect()}render(){if(!this.selfRef.current)return k("div",{ref:this.selfRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT),children:[k("div",{ref:this.moveablesRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});const e=this.props.model;e.getRoot(this.windowId).calcMinMaxSize(),e.getRoot(this.windowId).setPaths(""),e.getBorderSet().setPaths();const n=this.renderLayout(),r=this.renderBorders(n),i=this.renderTabs(),a=this.reorderComponents(i,this.orderedTabIds);let o=null,u=null,l=null,f=null;if(this.isMainWindow){o=this.renderWindows(),f=this.renderMetricsElements();const g=this.renderTabMoveables();u=this.reorderComponents(g,this.orderedTabMoveableIds),l=k("div",{className:this.getClassName(j.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return k("div",{ref:this.selfRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[k("div",{ref:this.moveablesRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),f,k(yb,{layout:this,show:this.state.showOverlay},"__overlay__"),r,a,u,l,this.state.portal,o]})}renderBorders(e){const n=this.getClassName(j.FLEXLAYOUT__LAYOUT_MAIN),r=this.props.model.getBorderSet().getBorderMap();if(this.isMainWindow&&r.size>0){e=k("div",{className:n,ref:this.mainRef,children:e});const i=new Map,a=new Map;for(const[l,f]of vt.values){const g=r.get(f);g&&g.isShowing()&&(!g.isAutoHide()||g.isAutoHide()&&(g.getChildren().length>0||this.state.showHiddenBorder===f))&&(i.set(f,k(ub,{layout:this,border:g,size:this.state.calculatedBorderBarSize})),a.set(f,k(ib,{layout:this,border:g,show:g.getSelected()!==-1})))}const o=this.getClassName(j.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),u=this.getClassName(j.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){const l=k("div",{className:u,style:{flexDirection:"column"},children:[a.get(vt.TOP),k("div",{className:u,style:{flexDirection:"row"},children:[a.get(vt.LEFT),e,a.get(vt.RIGHT)]}),a.get(vt.BOTTOM)]});return k("div",{className:o,style:{flexDirection:"column"},children:[i.get(vt.TOP),k("div",{className:u,style:{flexDirection:"row"},children:[i.get(vt.LEFT),l,i.get(vt.RIGHT)]}),i.get(vt.BOTTOM)]})}else{const l=k("div",{className:u,style:{flexDirection:"row"},children:[a.get(vt.LEFT),k("div",{className:u,style:{flexDirection:"column"},children:[a.get(vt.TOP),e,a.get(vt.BOTTOM)]}),a.get(vt.RIGHT)]});return k("div",{className:o,style:{flexDirection:"row"},children:[i.get(vt.LEFT),k("div",{className:u,style:{flexDirection:"column"},children:[i.get(vt.TOP),l,i.get(vt.BOTTOM)]}),i.get(vt.RIGHT)]})}}else return k("div",{className:n,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:e})}renderLayout(){return k(Cn,{children:[k(Cd,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){const e=[],n=this.icons.edgeArrow;if(this.state.showEdges){const r=this.props.model.getRoot(this.windowId).getRect(),i=gs,a=Kl,o=gs/2,u=this.getClassName(j.FLEXLAYOUT__EDGE_RECT),l=50;e.push(k("div",{style:{top:0,left:r.width/2-o,width:i,height:a,borderBottomLeftRadius:l,borderBottomRightRadius:l},className:u+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_TOP),children:k("div",{style:{transform:"rotate(180deg)"},children:n})},"North")),e.push(k("div",{style:{top:r.height/2-o,left:0,width:a,height:i,borderTopRightRadius:l,borderBottomRightRadius:l},className:u+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_LEFT),children:k("div",{style:{transform:"rotate(90deg)"},children:n})},"West")),e.push(k("div",{style:{top:r.height-a,left:r.width/2-o,width:i,height:a,borderTopLeftRadius:l,borderTopRightRadius:l},className:u+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:k("div",{children:n})},"South")),e.push(k("div",{style:{top:r.height/2-o,left:r.width-a,width:a,height:i,borderTopLeftRadius:l,borderBottomLeftRadius:l},className:u+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_RIGHT),children:k("div",{style:{transform:"rotate(-90deg)"},children:n})},"East"))}return e}renderWindows(){const e=[];if(this.supportsPopout){const n=this.props.model.getwindowsMap();let r=1;for(const[i,a]of n)i!==Ue.MAIN_WINDOW_ID&&(e.push(k(lb,{layout:this,title:this.popoutWindowName+" "+r,layoutWindow:a,url:this.popoutURL+"?id="+i,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:k("div",{className:this.props.popoutClassName,children:k(Pe,{...this.props,windowId:i,mainLayout:this})})},i)),r++)}return e}renderTabMoveables(){const e=new Map;return this.props.model.visitNodes(n=>{if(n instanceof Qt){const r=n,i=this.getMoveableElement(r.getId());r.setMoveableElement(i);const a=r.isSelected(),o=r.getParent().getContentRect(),u=a||!r.isEnableRenderOnDemand(),l=r.isRendered()||u&&o.width>0&&o.height>0;if(l){const f=r.getId()+(r.isEnableWindowReMount()?r.getWindowId():"");e.set(n.getId(),Na(k(Ab,{layout:this,node:r,rect:o,visible:u,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},f),i)),r.setRendered(l)}}}),e}renderTabStamps(){const e=[];return this.props.model.visitNodes(n=>{if(n instanceof Qt){const r=n;e.push(k(cb,{layout:this,node:r},r.getId()))}}),e}renderTabs(){const e=new Map;return this.props.model.visitWindowNodes(this.windowId,n=>{if(n instanceof Qt){const r=n,i=r.isSelected(),a=r.getPath();(r.isRendered()||i||!r.isEnableRenderOnDemand())&&e.set(r.getId(),k(xb,{layout:this,path:a,node:r,selected:i},r.getId()))}}),e}renderMetricsElements(){return k("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(j.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(e,n){const r=this.getBoundingClientRect(this.mainRef.current),i=r.getCenter(),a=Kl,o=gs/2;let u=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===vt.CENTER&&(n>i.y-o&&n<i.y+o||e>i.x-o&&e<i.x+o)&&(u=!0);let l=vt.CENTER;u||(e<=r.x+a?l=vt.LEFT:e>=r.getRight()-a?l=vt.RIGHT:n<=r.y+a?l=vt.TOP:n>=r.getBottom()-a&&(l=vt.BOTTOM)),l!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:l})}tidyMoveablesMap(){const e=new Map;this.props.model.visitNodes((n,r)=>{n instanceof Qt&&e.set(n.getId(),n)});for(const[n,r]of this.moveableElementMap)e.has(n)||(r.remove(),this.moveableElementMap.delete(n))}reorderComponents(e,n){const r=[],i=new Set;let a=[];for(const o of n)e.get(o)&&(r.push(o),i.add(o));n.splice(0,n.length,...r);for(const[o,u]of e)i.has(o)||n.push(o);return a=n.map(o=>e.get(o)),a}redraw(e){this.mainLayout.setState((n,r)=>({forceRevision:n.forceRevision+1}))}redrawInternal(e){this.mainLayout.setState((n,r)=>({layoutRevision:n.layoutRevision+1}))}doAction(e){if(this.props.onAction!==void 0){const n=this.props.onAction(e);return n!==void 0?this.props.model.doAction(n):void 0}else return this.props.model.doAction(e)}getBoundingClientRect(e){const n=this.getDomRect();return n?Et.getBoundingClientRect(e).relativeTo(n):Et.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(e){let n=this.moveableElementMap.get(e);return n===void 0&&(n=document.createElement("div"),this.moveablesRef.current.appendChild(n),n.className=j.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(e,n)),n}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current?Et.fromDomRect(this.selfRef.current.getBoundingClientRect()):Et.empty()}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(e){const n=e.clone(),r=this.getDomRect(),i=60,a=2;return n.x=this.currentWindow.screenX+this.currentWindow.scrollX+a/2+r.x+n.x,n.y=this.currentWindow.screenY+this.currentWindow.scrollY+(i-a/2)+r.y+n.y,n.height+=i,n.width+=a,n}addTabToTabSet(e,n){if(this.props.model.getNodeById(e)!==void 0)return this.doAction(Ot.addNode(n,e,vt.CENTER,-1))}addTabToActiveTabSet(e){const n=this.props.model.getActiveTabset(this.windowId);if(n!==void 0)return this.doAction(Ot.addNode(e,n.getId(),vt.CENTER,-1))}maximize(e){this.doAction(Ot.maximizeToggle(e.getId(),this.getWindowId()))}customizeTab(e,n){this.props.onRenderTab&&this.props.onRenderTab(e,n)}customizeTabSet(e,n){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,n)}i18nName(e,n){let r;return this.props.i18nMapper&&(r=this.props.i18nMapper(e,n)),r===void 0&&(r=e+(n===void 0?"":n)),r}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,n){this.props.onContextMenu&&this.props.onContextMenu(e,n)}auxMouseClick(e,n){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,n)}showOverlay(e){this.setState({showOverlay:e}),Ps(!e,this.currentDocument)}addTabWithDragAndDrop(e,n,r){const i=Qt.fromJson(n,this.props.model,!1);Pe.dragState=new ms(this.mainLayout,"add",i,n,r)}moveTabWithDragAndDrop(e,n){this.setDragNode(e,n)}setDragComponent(e,n,r,i){const a=k("div",{style:{position:"unset"},className:this.getClassName(j.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(j.FLEXLAYOUT__DRAG_RECT),children:n}),o=this.currentDocument.createElement("div");o.setAttribute("data-layout-path","/drag-rectangle"),o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",this.currentDocument.body.appendChild(o),tb(o).render(a),e.dataTransfer.setDragImage(o,r,i),setTimeout(()=>{this.currentDocument.body.removeChild(o)},0)}setDraggingOverWindow(e){this.isDraggingOverWindow!==e&&(this.outlineDiv&&(this.outlineDiv.style.visibility=e?"hidden":"visible"),e?this.setState({showEdges:!1}):this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=e)}clearDragMain(){Pe.dragState=void 0,this.windowId===Ue.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1);for(const[,e]of this.props.model.getwindowsMap())e.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};Y(Ld,"dragState");let Mb=Ld;const Nb={close:k(Ql,{}),closeTabset:k(Ql,{}),popout:k(vb,{}),maximize:k(hb,{}),restore:k(pb,{}),more:k(gb,{}),edgeArrow:k(mb,{}),activeTabset:k(bb,{})},Ob=Sd(),gs=100,Kl=10;class ms{constructor(e,n,r,i,a){Y(this,"mainLayout"),Y(this,"dragSource"),Y(this,"dragNode"),Y(this,"dragJson"),Y(this,"fnNewNodeDropped"),this.mainLayout=e,this.dragSource=n,this.dragNode=r,this.dragJson=i,this.fnNewNodeDropped=a}}const $a={"panel-element":"_panel-element_1ae75_41","section-content":"_section-content_1ae75_49","no-padding":"_no-padding_1ae75_59","generic-info":"_generic-info_1ae75_67"};function kn({children:t,additionalContentClass:e}){return k("div",{className:$a["panel-element"],children:k("div",{className:$a["section-content"]+` ${e??""}`,children:t})})}const Db="_key_17q3l_54",Rb="_major_17q3l_84",Sn={"model-event-section":"_model-event-section_17q3l_41",key:Db,"model-layer-section":"_model-layer-section_17q3l_70",major:Rb,"item-name":"_item-name_17q3l_91"},hu="MEMORY",Cb=`${hu}::SYMBOLS`,Lb=`${hu}::STATICALLY_ASSIGNED_MEM`,Ib="thread_name",Bb="CPU_LOAD",kb="DIE_TEMP",Id="MODEL",Pb="INFERENCE",Bd=new RegExp(`^${Id}(?<modelNum>[0-9]*)::`);function Fr(t){var e;return typeof(t==null?void 0:t.key)=="string"&&((e=t==null?void 0:t.key)==null?void 0:e.match(Bd))!==null}function kd(t){var e;return typeof(t==null?void 0:t.key)=="string"&&((e=t==null?void 0:t.key)==null?void 0:e.startsWith(`${Pb}::`))}function Pd(t){return(t==null?void 0:t.name)===Id}function $b(t,e){return e&&e!==""?e+"::":""}function qn(t){return t.replace(Bd,$b)}function $d(){var n;const t=(n=hn.getActiveProfile())==null?void 0:n.profile,e=[];return t==null||t.forEachCall(r=>{e.push(r)},()=>{}),e}function Wd(){var n,r;if(!((n=hn.getActiveProfile())==null?void 0:n.profile))return null;const e=new Map;return(r=$d())==null||r.forEach(i=>{const{frame:a}=i;if(!Fr(a))return;const{name:o,args:{begin:{tag:u}}}=a,l=qn(o),f=i.getSelfWeight();e.has(u)||e.set(u,new Map);const g=e.get(u);g.has(l)||g.set(l,[]),g.get(l).push(f)}),e}function Wb(){const t=Wd();if(!t)return null;const e=Array.from(t.values()).flatMap(n=>Array.from(n.entries())).map(([n,r])=>{const i=r.reduce((a,o)=>a+o,0);return{name:n,duration:{total:i,average:i/r.length}}});return e.length?{plotData:[e]}:null}function Vb(){const t=Wd();if(!t)return null;const e=Array.from(t.entries()).map(([n,r])=>{const{count:i,total:a}=Array.from(r.values()).reduce((o,u)=>(o.count+=u.length,o.total+=u.reduce((l,f)=>l+f,0),o),{count:0,total:0});return{name:n,duration:{total:a,average:a/i}}});return e.length?{plotData:[e]}:null}function zb(){const e=(Ln.get()??[]).filter(Pd).map(r=>r==null?void 0:r.args);if(!e.length)return null;const n=[];return e.forEach(r=>{const{tensors:i,inputs:a,outputs:o}=r;if(!i.filter(({size:I})=>I!==void 0).length)return null;const l=$d().filter(({frame:I,parent:B})=>{var z,P;return Fr(I)&&(e.length===1||kd(B==null?void 0:B.frame)&&((P=(z=B==null?void 0:B.frame.args)==null?void 0:z.begin)==null?void 0:P.model_id)===r.id)}).map(({frame:I})=>I);let f=0;const{ops:g}=r,y=g.flatMap(I=>{const B=l.slice(f).findIndex(P=>P.args.begin.tag===I.op_name);if(B===-1)return[];const{name:z}=l[f];return f=f+B+1,[{...I,op_name:qn(z)}]}),x=I=>B=>(I.name_long??I.name)===B.name,A=new Set([...a.map(I=>{var B;return(B=i.find(x(I)))==null?void 0:B.index}),...o.map(I=>{var B;return(B=i.find(x(I)))==null?void 0:B.index}),...g.flatMap(({outputs:I})=>I)]),M=new Set,C=new Map(i.map(({index:I,size:B})=>[I,B])),N=I=>M.has(I)||(M.add(I),!C.has(I))?void 0:C.get(I);n.push(...y.flatMap(({op_name:I,inputs:B})=>{const z=B.filter(P=>!A.has(P)).map(P=>N(P)??0).reduce((P,X)=>P+X,0);return z?[{name:I,size:z}]:[]}))}),n.length?{plotData:[n]}:null}function Fb({frame:t}){if((t==null?void 0:t.args)===void 0)return;const e=["subgraph_idx","op_idx","tag","runtime","thread_id","tag_len","cpu_id"],n=Object.entries(t.args.begin).filter(([r,i])=>!e.includes(r));if(n.length!==0)return k("table",{children:[k("thead",{children:k("tr",{children:[k("th",{className:Sn.key,children:"Param"}),k("th",{children:"Start"}),k("th",{children:"End"})]})}),k("tbody",{children:n.map(([r,i])=>k("tr",{children:[k("th",{className:Sn.key,children:r}),k("th",{children:i}),k("th",{children:t==null?void 0:t.args.end[r]})]}))})]})}function Ub({frame:t,parent:e}){var g;const[n,r]=Xn(Ln.get());Ln.subscribe(()=>{r(Ln.get())});const i=(n??[]).filter(Pd);let a;if(i.length>1){const y=e==null?void 0:e.args.begin.model_id;y===void 0&&(a=i[0].args),a=(g=i.find(x=>x.args.id===y))==null?void 0:g.args}else i.length===1&&(a=i[0].args);const o=y=>{const x=a==null?void 0:a.tensors.find(M=>M.index===y&&M.subgraph_idx===(t==null?void 0:t.args.begin.subgraph_idx));if(x===void 0)return;const A=x.name.split("/").map((M,C,N)=>C===N.length-1?M:k(Cn,{children:[M,"/",k("wbr",{})]}));return k("li",{children:[" ",A,": [",x.shape.join(", "),"] of ",x.dtype," "]})};if(a===void 0)return;const u=a.ops.find(y=>y.index===(t==null?void 0:t.args.begin.op_idx));if(!u)return;const l=y=>k("span",{className:Sn["item-name"],children:y.children}),f=Object.entries(u.parameters??{}).map(([y,x])=>typeof x=="string"?[y,x]:[y,JSON.stringify(x)]).map(([y,x])=>k("li",{children:[y,": ",x]}));return k("div",{className:Sn["model-layer-section"],children:[k("h3",{children:" Layer info "}),k("ul",{children:[k("li",{className:Sn.major,children:[" Operation type: ",u.op_name," "]}),k("li",{className:Sn.major,children:[k(l,{children:"Inputs"}),":",k("ol",{children:u.inputs.map(o)})]}),k("li",{className:Sn.major,children:[k(l,{children:"Outputs"}),":",k("ol",{children:u.outputs.map(o)})]}),f.length>0&&k("li",{className:Sn.major,children:[k(l,{children:"Parameters"}),":",k("ol",{children:f})]})]})]})}function Yb(t){const e=Fb(t),n=Ub(t);return!e&&!n?k(Ws,{info:"The event does not contain information to display"}):k(kn,{additionalContentClass:$a["no-padding"],children:k("div",{className:Sn["model-event-section"],children:[e,n]})})}function Vd(){const t=hn.getActiveProfile();if(!t)return null;const e=Ad.get();let n;switch(e){case dr.CHRONO_FLAME_CHART:n=t.chronoViewState;break;case dr.LEFT_HEAVY_FLAME_GRAPH:n=t.leftHeavyViewState;break;case dr.SANDWICH_VIEW:n=t.sandwichViewState;break}return{viewMode:e,activeView:n}}function Hb(){const[t,e]=Xn(void 0);return Oa.subscribe(()=>{var o;const n=Oa.get();if(n===null){e(void 0);return}const r=Vd();if(r===null){e(void 0);return}const i=(o=hn.getActiveProfile())==null?void 0:o.profile;if(i===void 0){e(void 0);return}const{viewMode:a}=r;if(a===dr.SANDWICH_VIEW&&n instanceof zp){const l=Fp({profile:i,frame:n,flattenRecursion:Up.get()}).getAppendOrderCalltreeRoot().children[0].children;e({frame:n,parent:l[0]})}else if(a!==dr.SANDWICH_VIEW&&n instanceof Yp)e({frame:n==null?void 0:n.frame,parent:n==null?void 0:n.parent});else{e(void 0);return}}),{frameSt:t}}function Xb(){const t=hn.getActiveProfile(),e=t==null?void 0:t.profile;if(!e)return;const n=new Map,r=new Map;return e.forEachFrame(i=>{if(!Fr(i))return;const a=qn(i.name);n.has(a)||n.set(a,i)}),e.forEachCall(i=>{const{frame:a}=i;if(!Fr(a))return;const o=qn(a.name);r.has(o)||r.set(o,i)},()=>{}),i=>{if(!i)return;const{name:a}=i,o=n.get(a);o&&hn.setSelectedFrame(o);const u=r.get(a),l=Ad.get(),f={[dr.CHRONO_FLAME_CHART]:ql.CHRONO,[dr.LEFT_HEAVY_FLAME_GRAPH]:ql.LEFT_HEAVY}[l];u&&f&&hn.setSelectedNode(f,u)}}const qb=t=>()=>{var o;if(!t.current)return;const{current:e}=t;e.annotations.pop();const n=lr.get();if(!n){e.redraw();return}const r="frame"in n?n.frame:n,i=qn(r.name),a=(o=e.plotData)==null?void 0:o.flat().find(({name:u})=>u===i);a?e._addAnnotation(a):e.redraw()},Gb=t=>e=>{var f;const{current:n}=t;if(!n)return Xl;const r=(f=hn.getActiveProfile())==null?void 0:f.profile;if(!r)return Xl;const i=Hp(r),a=Xp({theme:n.props.theme,frameToColorBucket:i}),o=new Map;r.forEachFrame(g=>{if(!Fr(g))return;const y=qn(g.name);o.has(y)||o.set(y,g)});const u=()=>{const[g]=n.annotations;if(!g)return;const{x:y,y:x}=g,{name:A}=n._findClosestPoint(y,x)??{};if(A)return qn(A)},l=()=>{var x,A,M;const g=(x=Vd())==null?void 0:x.activeView;if(!g)return;const y="hover"in g?(A=g.selectedNode)==null?void 0:A.frame.name:(M=g.callerCallee)==null?void 0:M.selectedFrame.name;if(y)return qn(y)};return g=>{g.select("path").attr("fill",({name:y})=>{const x=o.get(y);return x?a(x):e}).attr("stroke-width",({name:y})=>u()===y?4:l()===y?2:null).attr("stroke",({name:y})=>{const x=l()===y,A=u()===y;return x&&A?n.props.theme.selectionPrimaryColor:x?n.props.theme.selectionSecondaryColor:A?n.props.theme.fgPrimaryColor:null})}},jb=t=>([e])=>{const{current:n}=t;if(!n)return;if(n.annotations.pop(),!e){lr.set(null);return}const r=n.xScale.invert(e.x),i=n.yScale.invert(e.y),a=n._findClosestPoint(r,i);n._addAnnotation(a);const{onFrameHover:o}=n.props;o&&lr.unsubscribe(o),lr.set(a?{name:a.name}:null),o&&lr.subscribe(o)},zd=t=>{const e=()=>{var n;return(n=t.current)==null?void 0:n.redraw()};return{onFrameSelect:e,onProfileChange:e,onFrameHover:qb(t),useClick:Xb,decorateSvgSeries:Gb(t),onPoint:jb(t)}};function Ws({info:t}){return k(kn,{children:k("p",{className:$a["generic-info"],children:t})})}function Jb(){var e;const{frameSt:t}=Hb();return Fr(t==null?void 0:t.frame)?k(Yb,{frame:t.frame,parent:kd((e=t==null?void 0:t.parent)==null?void 0:e.frame)?t.parent.frame:void 0}):t?k(Ws,{info:"The chosen event does not contain additional information"}):k(Ws,{info:"For more info, choose an event"})}const Zb=Qn(Jb,"Details");function Qb(){const e=(Ln.get()??[]).filter(n=>n.name===Bb).map(n=>({ts:+n.ts.toFixed(3),...n.args}));if(e.length!==0)return{fullData:e}}function ee(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fd(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hi(t){let e,n,r;t.length!==2?(e=ee,n=(u,l)=>ee(t(u),l),r=(u,l)=>t(u)-l):(e=t===ee||t===Fd?t:Kb,n=t,r=t);function i(u,l,f=0,g=u.length){if(f<g){if(e(l,l)!==0)return g;do{const y=f+g>>>1;n(u[y],l)<0?f=y+1:g=y}while(f<g)}return f}function a(u,l,f=0,g=u.length){if(f<g){if(e(l,l)!==0)return g;do{const y=f+g>>>1;n(u[y],l)<=0?f=y+1:g=y}while(f<g)}return f}function o(u,l,f=0,g=u.length){const y=i(u,l,f,g-1);return y>f&&r(u[y-1],l)>-r(u[y],l)?y-1:y}return{left:i,center:o,right:a}}function Kb(){return 0}function Wa(t){return t===null?NaN:+t}function*ty(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Ud=Hi(ee),jn=Ud.right,ey=Ud.left,ny=Hi(Wa).center;function ry(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=gu(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const iy=Yd(gu),ay=Yd(oy);function Yd(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const u=n&&t(n),l=r&&t(r),f=i.slice();return u&&l?(Rr(u,f,i,a,o),Rr(u,i,f,a,o),Rr(u,f,i,a,o),Cr(l,i,f,a,o),Cr(l,f,i,a,o),Cr(l,i,f,a,o)):u?(Rr(u,i,f,a,o),Rr(u,f,i,a,o),Rr(u,i,f,a,o)):l&&(Cr(l,i,f,a,o),Cr(l,f,i,a,o),Cr(l,i,f,a,o)),e}}function Rr(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function Cr(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function oy(t){const e=gu(t);return(n,r,i,a,o)=>{i<<=2,a<<=2,o<<=2,e(n,r,i+0,a+0,o),e(n,r,i+1,a+1,o),e(n,r,i+2,a+2,o),e(n,r,i+3,a+3,o)}}function gu(t){const e=Math.floor(t);if(e===t)return sy(t);const n=t-e,r=2*t+1;return(i,a,o,u,l)=>{if(!((u-=l)>=o))return;let f=e*a[o];const g=l*e,y=g+l;for(let x=o,A=o+g;x<A;x+=l)f+=a[Math.min(u,x)];for(let x=o,A=u;x<=A;x+=l)f+=a[Math.min(u,x+g)],i[x]=(f+n*(a[Math.max(o,x-y)]+a[Math.min(u,x+y)]))/r,f-=a[Math.max(o,x-g)]}}function sy(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let u=t*r[i];const l=o*t;for(let f=i,g=i+l;f<g;f+=o)u+=r[Math.min(a,f)];for(let f=i,g=a;f<=g;f+=o)u+=r[Math.min(a,f+l)],n[f]=u/e,u-=r[Math.max(i,f-l)]}}function uo(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function uy(t){return t.length|0}function cy(t){return!(t>0)}function ly(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function fy(t){return e=>t(...e)}function dy(...t){const e=typeof t[t.length-1]=="function"&&fy(t.pop());t=t.map(ly);const n=t.map(uy),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(cy))return a;for(;;){a.push(i.map((u,l)=>t[l][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}}function hy(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function Hd(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of t)(u=e(u,++o,t))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function Xd(t,e){const n=Hd(t,e);return n&&Math.sqrt(n)}function _a(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class mu{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,u=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);u&&(n[r++]=u),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function gy(t,e){const n=new mu;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function my(t,e){const n=new mu;let r=-1;return Float64Array.from(t,e===void 0?i=>n.add(+i||0):i=>n.add(+e(i,++r,t)||0))}class Ii extends Map{constructor(e,n=jd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Vs(this,e))}has(e){return super.has(Vs(this,e))}set(e,n){return super.set(qd(this,e),n)}delete(e){return super.delete(Gd(this,e))}}class mr extends Set{constructor(e,n=jd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Vs(this,e))}add(e){return super.add(qd(this,e))}delete(e){return super.delete(Gd(this,e))}}function Vs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function qd({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Gd({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function jd(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ur(t){return t}function Jd(t,...e){return ti(t,Ur,Ur,e)}function Zd(t,...e){return ti(t,Array.from,Ur,e)}function Qd(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function vy(t,...e){return Qd(Zd(t,...e),e)}function py(t,e,...n){return Qd(th(t,e,...n),n)}function Kd(t,e,...n){return ti(t,Ur,e,n)}function th(t,e,...n){return ti(t,Array.from,e,n)}function by(t,...e){return ti(t,Ur,eh,e)}function yy(t,...e){return ti(t,Array.from,eh,e)}function eh(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function ti(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new Ii,l=r[o++];let f=-1;for(const g of a){const y=l(g,++f,a),x=u.get(y);x?x.push(g):u.set(y,[g])}for(const[g,y]of u)u.set(g,i(y,o));return e(u)}(t,0)}function nh(t,e){return Array.from(e,n=>t[n])}function zs(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const u=Yr(o[i],o[a]);if(u)return u}})):(n=t.map(n),r.sort((i,a)=>Yr(n[i],n[a]))),nh(t,r)}return t.sort(vu(n))}function vu(t=ee){if(t===ee)return Yr;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Yr(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function _y(t,e,n){return(e.length!==2?zs(Kd(t,e,n),([r,i],[a,o])=>ee(i,o)||ee(r,a)):zs(Jd(t,n),([r,i],[a,o])=>e(i,o)||ee(r,a))).map(([r])=>r)}var wy=Array.prototype,xy=wy.slice;function vs(t){return()=>t}const Ty=Math.sqrt(50),Ay=Math.sqrt(10),Ey=Math.sqrt(2);function Va(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Ty?10:a>=Ay?5:a>=Ey?2:1;let u,l,f;return i<0?(f=Math.pow(10,-i)/o,u=Math.round(t*f),l=Math.round(e*f),u/f<t&&++u,l/f>e&&--l,f=-f):(f=Math.pow(10,i)*o,u=Math.round(t/f),l=Math.round(e/f),u*f<t&&++u,l*f>e&&--l),l<u&&.5<=n&&n<2?Va(t,e,n*2):[u,l,f]}function Bi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?Va(e,t,n):Va(t,e,n);if(!(a>=i))return[];const u=a-i+1,l=new Array(u);if(r)if(o<0)for(let f=0;f<u;++f)l[f]=(a-f)/-o;else for(let f=0;f<u;++f)l[f]=(a-f)*o;else if(o<0)for(let f=0;f<u;++f)l[f]=(i+f)/-o;else for(let f=0;f<u;++f)l[f]=(i+f)*o;return l}function vr(t,e,n){return e=+e,t=+t,n=+n,Va(t,e,n)[2]}function za(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?vr(e,t,n):vr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function rh(t,e,n){let r;for(;;){const i=vr(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function ih(t){return Math.max(1,Math.ceil(Math.log(uo(t))/Math.LN2)+1)}function tf(){var t=Ur,e=_a,n=ih;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,u,l,f=new Array(o);for(a=0;a<o;++a)f[a]=t(i[a],a,i);var g=e(f),y=g[0],x=g[1],A=n(f,y,x);if(!Array.isArray(A)){const z=x,P=+A;if(e===_a&&([y,x]=rh(y,x,P)),A=Bi(y,x,P),A[0]<=y&&(l=vr(y,x,P)),A[A.length-1]>=x)if(z>=x&&e===_a){const X=vr(y,x,P);isFinite(X)&&(X>0?x=(Math.floor(x/X)+1)*X:X<0&&(x=(Math.ceil(x*-X)+1)/-X))}else A.pop()}for(var M=A.length,C=0,N=M;A[C]<=y;)++C;for(;A[N-1]>x;)--N;(C||N<M)&&(A=A.slice(C,N),M=N-C);var I=new Array(M+1),B;for(a=0;a<=M;++a)B=I[a]=[],B.x0=a>0?A[a-1]:y,B.x1=a<M?A[a]:x;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(u=f[a])!=null&&y<=u&&u<=x&&I[Math.min(M,Math.floor((u-y)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((u=f[a])!=null&&y<=u&&u<=x){const z=Math.floor((y-u)*l);I[Math.min(M,z+(A[z]<=u))].push(i[a])}}}else for(a=0;a<o;++a)(u=f[a])!=null&&y<=u&&u<=x&&I[jn(A,u,0,M)].push(i[a]);return I}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:vs(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:vs([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:vs(Array.isArray(i)?xy.call(i):i),r):n},r}function Fs(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function pu(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Fa(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function bu(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function co(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Yr:vu(i);r>n;){if(r-n>600){const l=r-n+1,f=e-n+1,g=Math.log(l),y=.5*Math.exp(2*g/3),x=.5*Math.sqrt(g*y*(l-y)/l)*(f-l/2<0?-1:1),A=Math.max(n,Math.floor(e-f*y/l+x)),M=Math.min(r,Math.floor(e+(l-f)*y/l+x));co(t,e,A,M,i)}const a=t[e];let o=n,u=r;for(vi(t,n,e),i(t[r],a)>0&&vi(t,n,r);o<u;){for(vi(t,o,u),++o,--u;i(t[o],a)<0;)++o;for(;i(t[u],a)>0;)--u}i(t[n],a)===0?vi(t,n,u):(++u,vi(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function vi(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ah(t,e=ee){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?ee(o,i)>0:ee(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function ki(t,e,n){if(t=Float64Array.from(ty(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Fa(t);if(e>=1)return Fs(t);var r,i=(r-1)*e,a=Math.floor(i),o=Fs(co(t,a).subarray(0,a+1)),u=Fa(t.subarray(a+1));return o+(u-o)*(i-a)}}function oh(t,e,n=Wa){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),u=+n(t[a+1],a+1,t);return o+(u-o)*(i-a)}}function sh(t,e,n=Wa){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(u,l)=>Wa(n(t[l],l,t))),e<=0)return bu(r);if(e>=1)return pu(r);var r,i=Uint32Array.from(t,(u,l)=>l),a=r.length-1,o=Math.floor(a*e);return co(i,o,0,a,(u,l)=>Yr(r[u],r[l])),o=ah(i.subarray(0,o+1),u=>r[u]),o>=0?o:-1}}function Sy(t,e,n){const r=uo(t),i=ki(t,.75)-ki(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function My(t,e,n){const r=uo(t),i=Xd(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function Ny(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function Oy(t,e){return ki(t,.5,e)}function Dy(t,e){return sh(t,.5,e)}function*Ry(t){for(const e of t)yield*e}function Cy(t){return Array.from(Ry(t))}function Ly(t,e){const n=new Ii;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function Iy(t,e=By){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function By(t,e){return[t,e]}function yu(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function ky(t,e=ee){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=ee);const i=(u,l)=>e(n[u],n[l]);let a,o;return t=Uint32Array.from(n,(u,l)=>l),t.sort(e===ee?(u,l)=>Yr(n[u],n[l]):vu(i)),t.forEach((u,l)=>{const f=i(u,a===void 0?u:a);f>=0?((a===void 0||f>0)&&(a=u,o=l),r[u]=o):r[u]=NaN}),r}function Ua(t,e=ee){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?ee(o,i)<0:ee(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)<0:e(i,i)===0)&&(n=i,r=!0);return n}function uh(t,e=ee){if(e.length===1)return bu(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)<0)&&(n=a,r=i);return r}function Py(t,e=ee){if(e.length===1)return pu(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)>0)&&(n=a,r=i);return r}function $y(t,e){const n=uh(t,e);return n<0?void 0:n}const Wy=ch(Math.random);function ch(t){return function(n,r=0,i=n.length){let a=i-(r=+r);for(;a;){const o=t()*a--|0,u=n[a+r];n[a+r]=n[o+r],n[o+r]=u}return n}}function Vy(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function lh(t){if(!(a=t.length))return[];for(var e=-1,n=Fa(t,zy),r=new Array(n);++e<n;)for(var i=-1,a,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r}function zy(t){return t.length}function Fy(){return lh(arguments)}function Uy(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Yy(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Hy(t,e){if(typeof e!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function Xy(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function qy(t,e,n){if(typeof e!="function")throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++o}for(;{done:i,value:a}=r.next(),!i;)n=e(n,a,++o,t);return n}function Gy(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function jy(t,...e){t=new mr(t);for(const n of e)for(const r of n)t.delete(r);return t}function Jy(t,e){const n=e[Symbol.iterator](),r=new mr;for(const i of t){if(r.has(i))return!1;let a,o;for(;({value:a,done:o}=n.next())&&!o;){if(Object.is(i,a))return!1;r.add(a)}}return!0}function Zy(t,...e){t=new mr(t),e=e.map(Qy);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function Qy(t){return t instanceof mr?t:new mr(t)}function fh(t,e){const n=t[Symbol.iterator](),r=new Set;for(const i of e){const a=ef(i);if(r.has(a))continue;let o,u;for(;{value:o,done:u}=n.next();){if(u)return!1;const l=ef(o);if(r.add(l),Object.is(a,l))break}}return!0}function ef(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ky(t,e){return fh(e,t)}function t1(...t){const e=new mr;for(const n of t)for(const r of n)e.add(r);return e}const e1=Object.freeze(Object.defineProperty({__proto__:null,Adder:mu,InternMap:Ii,InternSet:mr,ascending:ee,bin:tf,bisect:jn,bisectCenter:ny,bisectLeft:ey,bisectRight:jn,bisector:Hi,blur:ry,blur2:iy,blurImage:ay,count:uo,cross:dy,cumsum:hy,descending:Fd,deviation:Xd,difference:jy,disjoint:Jy,every:Uy,extent:_a,fcumsum:my,filter:Hy,flatGroup:vy,flatRollup:py,fsum:gy,greatest:ah,greatestIndex:Py,group:Jd,groupSort:_y,groups:Zd,histogram:tf,index:by,indexes:yy,intersection:Zy,least:Ua,leastIndex:uh,map:Xy,max:Fs,maxIndex:pu,mean:Ny,median:Oy,medianIndex:Dy,merge:Cy,min:Fa,minIndex:bu,mode:Ly,nice:rh,pairs:Iy,permute:nh,quantile:ki,quantileIndex:sh,quantileSorted:oh,quickselect:co,range:yu,rank:ky,reduce:qy,reverse:Gy,rollup:Kd,rollups:th,scan:$y,shuffle:Wy,shuffler:ch,some:Yy,sort:zs,subset:Ky,sum:Vy,superset:fh,thresholdFreedmanDiaconis:Sy,thresholdScott:My,thresholdSturges:ih,tickIncrement:vr,tickStep:za,ticks:Bi,transpose:lh,union:t1,variance:Hd,zip:Fy},Symbol.toStringTag,{value:"Module"}));var n1={value:()=>{}};function Xi(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new wa(n)}function wa(t){this._=t}function r1(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}wa.prototype=Xi.prototype={constructor:wa,on:function(t,e){var n=this._,r=r1(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=i1(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=nf(n[i],t.name,e);else if(e==null)for(i in n)n[i]=nf(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new wa(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function i1(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function nf(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=n1,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const a1=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Xi},Symbol.toStringTag,{value:"Module"}));var Us="http://www.w3.org/1999/xhtml";const Ys={svg:"http://www.w3.org/2000/svg",xhtml:Us,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qi(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ys.hasOwnProperty(e)?{space:Ys[e],local:t}:t}function o1(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Us&&e.documentElement.namespaceURI===Us?e.createElement(t):e.createElementNS(n,t)}}function s1(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function lo(t){var e=qi(t);return(e.local?s1:o1)(e)}function u1(){}function fo(t){return t==null?u1:function(){return this.querySelector(t)}}function c1(t){typeof t!="function"&&(t=fo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,u=r[i]=new Array(o),l,f,g=0;g<o;++g)(l=a[g])&&(f=t.call(l,l.__data__,g,a))&&("__data__"in l&&(f.__data__=l.__data__),u[g]=f);return new Ce(r,this._parents)}function dh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function l1(){return[]}function _u(t){return t==null?l1:function(){return this.querySelectorAll(t)}}function f1(t){return function(){return dh(t.apply(this,arguments))}}function d1(t){typeof t=="function"?t=f1(t):t=_u(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],u=o.length,l,f=0;f<u;++f)(l=o[f])&&(r.push(t.call(l,l.__data__,f,o)),i.push(l));return new Ce(r,i)}function wu(t){return function(){return this.matches(t)}}function hh(t){return function(e){return e.matches(t)}}var h1=Array.prototype.find;function g1(t){return function(){return h1.call(this.children,t)}}function m1(){return this.firstElementChild}function v1(t){return this.select(t==null?m1:g1(typeof t=="function"?t:hh(t)))}var p1=Array.prototype.filter;function b1(){return Array.from(this.children)}function y1(t){return function(){return p1.call(this.children,t)}}function _1(t){return this.selectAll(t==null?b1:y1(typeof t=="function"?t:hh(t)))}function w1(t){typeof t!="function"&&(t=wu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,u=r[i]=[],l,f=0;f<o;++f)(l=a[f])&&t.call(l,l.__data__,f,a)&&u.push(l);return new Ce(r,this._parents)}function gh(t){return new Array(t.length)}function x1(){return new Ce(this._enter||this._groups.map(gh),this._parents)}function Ya(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ya.prototype={constructor:Ya,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function T1(t){return function(){return t}}function A1(t,e,n,r,i,a){for(var o=0,u,l=e.length,f=a.length;o<f;++o)(u=e[o])?(u.__data__=a[o],r[o]=u):n[o]=new Ya(t,a[o]);for(;o<l;++o)(u=e[o])&&(i[o]=u)}function E1(t,e,n,r,i,a,o){var u,l,f=new Map,g=e.length,y=a.length,x=new Array(g),A;for(u=0;u<g;++u)(l=e[u])&&(x[u]=A=o.call(l,l.__data__,u,e)+"",f.has(A)?i[u]=l:f.set(A,l));for(u=0;u<y;++u)A=o.call(t,a[u],u,a)+"",(l=f.get(A))?(r[u]=l,l.__data__=a[u],f.delete(A)):n[u]=new Ya(t,a[u]);for(u=0;u<g;++u)(l=e[u])&&f.get(x[u])===l&&(i[u]=l)}function S1(t){return t.__data__}function M1(t,e){if(!arguments.length)return Array.from(this,S1);var n=e?E1:A1,r=this._parents,i=this._groups;typeof t!="function"&&(t=T1(t));for(var a=i.length,o=new Array(a),u=new Array(a),l=new Array(a),f=0;f<a;++f){var g=r[f],y=i[f],x=y.length,A=N1(t.call(g,g&&g.__data__,f,r)),M=A.length,C=u[f]=new Array(M),N=o[f]=new Array(M),I=l[f]=new Array(x);n(g,y,C,N,I,A,e);for(var B=0,z=0,P,X;B<M;++B)if(P=C[B]){for(B>=z&&(z=B+1);!(X=N[z])&&++z<M;);P._next=X||null}}return o=new Ce(o,r),o._enter=u,o._exit=l,o}function N1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function O1(){return new Ce(this._exit||this._groups.map(gh),this._parents)}function D1(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function R1(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),l=0;l<o;++l)for(var f=n[l],g=r[l],y=f.length,x=u[l]=new Array(y),A,M=0;M<y;++M)(A=f[M]||g[M])&&(x[M]=A);for(;l<i;++l)u[l]=n[l];return new Ce(u,this._parents)}function C1(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function L1(t){t||(t=I1);function e(y,x){return y&&x?t(y.__data__,x.__data__):!y-!x}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,l=i[a]=new Array(u),f,g=0;g<u;++g)(f=o[g])&&(l[g]=f);l.sort(e)}return new Ce(i,this._parents).order()}function I1(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function B1(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function k1(){return Array.from(this)}function P1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function $1(){let t=0;for(const e of this)++t;return t}function W1(){return!this.node()}function V1(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&t.call(u,u.__data__,a,i);return this}function z1(t){return function(){this.removeAttribute(t)}}function F1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function U1(t,e){return function(){this.setAttribute(t,e)}}function Y1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function H1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function X1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function q1(t,e){var n=qi(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?F1:z1:typeof e=="function"?n.local?X1:H1:n.local?Y1:U1)(n,e))}function xu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function G1(t){return function(){this.style.removeProperty(t)}}function j1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function J1(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Z1(t,e,n){return arguments.length>1?this.each((e==null?G1:typeof e=="function"?J1:j1)(t,e,n??"")):pr(this.node(),t)}function pr(t,e){return t.style.getPropertyValue(e)||xu(t).getComputedStyle(t,null).getPropertyValue(e)}function Q1(t){return function(){delete this[t]}}function K1(t,e){return function(){this[t]=e}}function t_(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function e_(t,e){return arguments.length>1?this.each((e==null?Q1:typeof e=="function"?t_:K1)(t,e)):this.node()[t]}function mh(t){return t.trim().split(/^|\s+/)}function Tu(t){return t.classList||new vh(t)}function vh(t){this._node=t,this._names=mh(t.getAttribute("class")||"")}vh.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ph(t,e){for(var n=Tu(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function bh(t,e){for(var n=Tu(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function n_(t){return function(){ph(this,t)}}function r_(t){return function(){bh(this,t)}}function i_(t,e){return function(){(e.apply(this,arguments)?ph:bh)(this,t)}}function a_(t,e){var n=mh(t+"");if(arguments.length<2){for(var r=Tu(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?i_:e?n_:r_)(n,e))}function o_(){this.textContent=""}function s_(t){return function(){this.textContent=t}}function u_(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function c_(t){return arguments.length?this.each(t==null?o_:(typeof t=="function"?u_:s_)(t)):this.node().textContent}function l_(){this.innerHTML=""}function f_(t){return function(){this.innerHTML=t}}function d_(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function h_(t){return arguments.length?this.each(t==null?l_:(typeof t=="function"?d_:f_)(t)):this.node().innerHTML}function g_(){this.nextSibling&&this.parentNode.appendChild(this)}function m_(){return this.each(g_)}function v_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function p_(){return this.each(v_)}function b_(t){var e=typeof t=="function"?t:lo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function y_(){return null}function __(t,e){var n=typeof t=="function"?t:lo(t),r=e==null?y_:typeof e=="function"?e:fo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function w_(){var t=this.parentNode;t&&t.removeChild(this)}function x_(){return this.each(w_)}function T_(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function A_(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function E_(t){return this.select(t?A_:T_)}function S_(t){return arguments.length?this.property("__data__",t):this.node().__data__}function M_(t){return function(e){t.call(this,e,this.__data__)}}function N_(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function O_(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function D_(t,e,n){return function(){var r=this.__on,i,a=M_(e);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function R_(t,e,n){var r=N_(t+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,f=u.length,g;l<f;++l)for(i=0,g=u[l];i<a;++i)if((o=r[i]).type===g.type&&o.name===g.name)return g.value}return}for(u=e?D_:O_,i=0;i<a;++i)this.each(u(r[i],e,n));return this}function yh(t,e,n){var r=xu(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function C_(t,e){return function(){return yh(this,t,e)}}function L_(t,e){return function(){return yh(this,t,e.apply(this,arguments))}}function I_(t,e){return this.each((typeof e=="function"?L_:C_)(t,e))}function*B_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Au=[null];function Ce(t,e){this._groups=t,this._parents=e}function ei(){return new Ce([[document.documentElement]],Au)}function k_(){return this}Ce.prototype=ei.prototype={constructor:Ce,select:c1,selectAll:d1,selectChild:v1,selectChildren:_1,filter:w1,data:M1,enter:x1,exit:O1,join:D1,merge:R1,selection:k_,order:C1,sort:L1,call:B1,nodes:k1,node:P1,size:$1,empty:W1,each:V1,attr:q1,style:Z1,property:e_,classed:a_,text:c_,html:h_,raise:m_,lower:p_,append:b_,insert:__,remove:x_,clone:E_,datum:S_,on:R_,dispatch:I_,[Symbol.iterator]:B_};function de(t){return typeof t=="string"?new Ce([[document.querySelector(t)]],[document.documentElement]):new Ce([[t]],Au)}function P_(t){return de(lo(t).call(document.documentElement))}var $_=0;function _h(){return new Hs}function Hs(){this._="@"+(++$_).toString(36)}Hs.prototype=_h.prototype={constructor:Hs,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function wh(t){let e;for(;e=t.sourceEvent;)t=e;return t}function nn(t,e){if(t=wh(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function W_(t,e){return t.target&&(t=wh(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>nn(n,e))}function V_(t){return typeof t=="string"?new Ce([document.querySelectorAll(t)],[document.documentElement]):new Ce([dh(t)],Au)}const z_=Object.freeze(Object.defineProperty({__proto__:null,create:P_,creator:lo,local:_h,matcher:wu,namespace:qi,namespaces:Ys,pointer:nn,pointers:W_,select:de,selectAll:V_,selection:ei,selector:fo,selectorAll:_u,style:pr,window:xu},Symbol.toStringTag,{value:"Module"})),Xs={capture:!0,passive:!1};function qs(t){t.preventDefault(),t.stopImmediatePropagation()}function xh(t){var e=t.document.documentElement,n=de(t).on("dragstart.drag",qs,Xs);"onselectstart"in e?n.on("selectstart.drag",qs,Xs):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Th(t,e){var n=t.document.documentElement,r=de(t).on("dragstart.drag",null);e&&(r.on("click.drag",qs,Xs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ho(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Eu(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ni(){}var br=.7,Hr=1/br,$r="\\s*([+-]?\\d+)\\s*",Pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F_=/^#([0-9a-f]{3,8})$/,U_=new RegExp(`^rgb\\(${$r},${$r},${$r}\\)$`),Y_=new RegExp(`^rgb\\(${gn},${gn},${gn}\\)$`),H_=new RegExp(`^rgba\\(${$r},${$r},${$r},${Pi}\\)$`),X_=new RegExp(`^rgba\\(${gn},${gn},${gn},${Pi}\\)$`),q_=new RegExp(`^hsl\\(${Pi},${gn},${gn}\\)$`),G_=new RegExp(`^hsla\\(${Pi},${gn},${gn},${Pi}\\)$`),rf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ho(ni,Jn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:af,formatHex:af,formatHex8:j_,formatHsl:J_,formatRgb:of,toString:of});function af(){return this.rgb().formatHex()}function j_(){return this.rgb().formatHex8()}function J_(){return Eh(this).formatHsl()}function of(){return this.rgb().formatRgb()}function Jn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=F_.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sf(e):n===3?new Ee(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?la(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?la(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=U_.exec(t))?new Ee(e[1],e[2],e[3],1):(e=Y_.exec(t))?new Ee(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=H_.exec(t))?la(e[1],e[2],e[3],e[4]):(e=X_.exec(t))?la(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=q_.exec(t))?lf(e[1],e[2]/100,e[3]/100,1):(e=G_.exec(t))?lf(e[1],e[2]/100,e[3]/100,e[4]):rf.hasOwnProperty(t)?sf(rf[t]):t==="transparent"?new Ee(NaN,NaN,NaN,0):null}function sf(t){return new Ee(t>>16&255,t>>8&255,t&255,1)}function la(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ee(t,e,n,r)}function Ah(t){return t instanceof ni||(t=Jn(t)),t?(t=t.rgb(),new Ee(t.r,t.g,t.b,t.opacity)):new Ee}function yr(t,e,n,r){return arguments.length===1?Ah(t):new Ee(t,e,n,r??1)}function Ee(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ho(Ee,yr,Eu(ni,{brighter(t){return t=t==null?Hr:Math.pow(Hr,t),new Ee(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new Ee(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ee(hr(this.r),hr(this.g),hr(this.b),Ha(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uf,formatHex:uf,formatHex8:Z_,formatRgb:cf,toString:cf}));function uf(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}`}function Z_(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}${fr((isNaN(this.opacity)?1:this.opacity)*255)}`}function cf(){const t=Ha(this.opacity);return`${t===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${t===1?")":`, ${t})`}`}function Ha(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fr(t){return t=hr(t),(t<16?"0":"")+t.toString(16)}function lf(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new an(t,e,n,r)}function Eh(t){if(t instanceof an)return new an(t.h,t.s,t.l,t.opacity);if(t instanceof ni||(t=Jn(t)),!t)return new an;if(t instanceof an)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,u=a-i,l=(a+i)/2;return u?(e===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-e)/u+2:o=(e-n)/u+4,u/=l<.5?a+i:2-a-i,o*=60):u=l>0&&l<1?0:o,new an(o,u,l,t.opacity)}function Q_(t,e,n,r){return arguments.length===1?Eh(t):new an(t,e,n,r??1)}function an(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ho(an,Q_,Eu(ni,{brighter(t){return t=t==null?Hr:Math.pow(Hr,t),new an(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new an(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ee(ps(t>=240?t-240:t+120,i,r),ps(t,i,r),ps(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new an(ff(this.h),fa(this.s),fa(this.l),Ha(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ha(this.opacity);return`${t===1?"hsl(":"hsla("}${ff(this.h)}, ${fa(this.s)*100}%, ${fa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ff(t){return t=(t||0)%360,t<0?t+360:t}function fa(t){return Math.max(0,Math.min(1,t||0))}function ps(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const K_=Math.PI/180,tw=180/Math.PI;var Sh=-.14861,Su=1.78277,Mu=-.29227,go=-.90649,$i=1.97294,df=$i*go,hf=$i*Su,gf=Su*Mu-go*Sh;function ew(t){if(t instanceof gr)return new gr(t.h,t.s,t.l,t.opacity);t instanceof Ee||(t=Ah(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(gf*r+df*e-hf*n)/(gf+df-hf),a=r-i,o=($i*(n-i)-Mu*a)/go,u=Math.sqrt(o*o+a*a)/($i*i*(1-i)),l=u?Math.atan2(o,a)*tw-120:NaN;return new gr(l<0?l+360:l,u,i,t.opacity)}function mn(t,e,n,r){return arguments.length===1?ew(t):new gr(t,e,n,r??1)}function gr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ho(gr,mn,Eu(ni,{brighter(t){return t=t==null?Hr:Math.pow(Hr,t),new gr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new gr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*K_,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ee(255*(e+n*(Sh*r+Su*i)),255*(e+n*(Mu*r+go*i)),255*(e+n*($i*r)),this.opacity)}}));function nw(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function rw(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,u=r<e-1?t[r+2]:2*a-i;return nw((n-r/e)*e,o,i,a,u)}}const mo=t=>()=>t;function Mh(t,e){return function(n){return t+n*e}}function iw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function aw(t,e){var n=e-t;return n?Mh(t,n>180||n<-180?n-360*Math.round(n/360):n):mo(isNaN(t)?e:t)}function ow(t){return(t=+t)==1?Wr:function(e,n){return n-e?iw(e,n,t):mo(isNaN(e)?n:e)}}function Wr(t,e){var n=e-t;return n?Mh(t,n):mo(isNaN(t)?e:t)}const Xa=function t(e){var n=ow(e);function r(i,a){var o=n((i=yr(i)).r,(a=yr(a)).r),u=n(i.g,a.g),l=n(i.b,a.b),f=Wr(i.opacity,a.opacity);return function(g){return i.r=o(g),i.g=u(g),i.b=l(g),i.opacity=f(g),i+""}}return r.gamma=t,r}(1);function sw(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=yr(e[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=t(r),i=t(i),a=t(a),u.opacity=1,function(l){return u.r=r(l),u.g=i(l),u.b=a(l),u+""}}}var uw=sw(rw);function cw(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function lw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fw(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Mr(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function dw(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function rn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hw(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Mr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Gs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bs=new RegExp(Gs.source,"g");function gw(t){return function(){return t}}function mw(t){return function(e){return t(e)+""}}function Nh(t,e){var n=Gs.lastIndex=bs.lastIndex=0,r,i,a,o=-1,u=[],l=[];for(t=t+"",e=e+"";(r=Gs.exec(t))&&(i=bs.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,l.push({i:o,x:rn(r,i)})),n=bs.lastIndex;return n<e.length&&(a=e.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?l[0]?mw(l[0].x):gw(e):(e=l.length,function(f){for(var g=0,y;g<e;++g)u[(y=l[g]).i]=y.x(f);return u.join("")})}function Mr(t,e){var n=typeof e,r;return e==null||n==="boolean"?mo(e):(n==="number"?rn:n==="string"?(r=Jn(e))?(e=r,Xa):Nh:e instanceof Jn?Xa:e instanceof Date?dw:lw(e)?cw:Array.isArray(e)?fw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hw:rn)(t,e)}function Nu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var mf=180/Math.PI,js={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oh(t,e,n,r,i,a){var o,u,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*mf,skewX:Math.atan(l)*mf,scaleX:o,scaleY:u}}var da;function vw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?js:Oh(e.a,e.b,e.c,e.d,e.e,e.f)}function pw(t){return t==null||(da||(da=document.createElementNS("http://www.w3.org/2000/svg","g")),da.setAttribute("transform",t),!(t=da.transform.baseVal.consolidate()))?js:(t=t.matrix,Oh(t.a,t.b,t.c,t.d,t.e,t.f))}function Dh(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function a(f,g,y,x,A,M){if(f!==y||g!==x){var C=A.push("translate(",null,e,null,n);M.push({i:C-4,x:rn(f,y)},{i:C-2,x:rn(g,x)})}else(y||x)&&A.push("translate("+y+e+x+n)}function o(f,g,y,x){f!==g?(f-g>180?g+=360:g-f>180&&(f+=360),x.push({i:y.push(i(y)+"rotate(",null,r)-2,x:rn(f,g)})):g&&y.push(i(y)+"rotate("+g+r)}function u(f,g,y,x){f!==g?x.push({i:y.push(i(y)+"skewX(",null,r)-2,x:rn(f,g)}):g&&y.push(i(y)+"skewX("+g+r)}function l(f,g,y,x,A,M){if(f!==y||g!==x){var C=A.push(i(A)+"scale(",null,",",null,")");M.push({i:C-4,x:rn(f,y)},{i:C-2,x:rn(g,x)})}else(y!==1||x!==1)&&A.push(i(A)+"scale("+y+","+x+")")}return function(f,g){var y=[],x=[];return f=t(f),g=t(g),a(f.translateX,f.translateY,g.translateX,g.translateY,y,x),o(f.rotate,g.rotate,y,x),u(f.skewX,g.skewX,y,x),l(f.scaleX,f.scaleY,g.scaleX,g.scaleY,y,x),f=g=null,function(A){for(var M=-1,C=x.length,N;++M<C;)y[(N=x[M]).i]=N.x(A);return y.join("")}}}var bw=Dh(vw,"px, ","px)","deg)"),yw=Dh(pw,", ",")",")"),_w=1e-12;function vf(t){return((t=Math.exp(t))+1/t)/2}function ww(t){return((t=Math.exp(t))-1/t)/2}function xw(t){return((t=Math.exp(2*t))-1)/(t+1)}const Tw=function t(e,n,r){function i(a,o){var u=a[0],l=a[1],f=a[2],g=o[0],y=o[1],x=o[2],A=g-u,M=y-l,C=A*A+M*M,N,I;if(C<_w)I=Math.log(x/f)/e,N=function(lt){return[u+lt*A,l+lt*M,f*Math.exp(e*lt*I)]};else{var B=Math.sqrt(C),z=(x*x-f*f+r*C)/(2*f*n*B),P=(x*x-f*f-r*C)/(2*x*n*B),X=Math.log(Math.sqrt(z*z+1)-z),q=Math.log(Math.sqrt(P*P+1)-P);I=(q-X)/e,N=function(lt){var K=lt*I,nt=vf(X),mt=f/(n*B)*(nt*xw(e*K+X)-ww(X));return[u+mt*A,l+mt*M,f*nt/vf(e*K+X)]}}return N.duration=I*1e3*e/Math.SQRT2,N}return i.rho=function(a){var o=Math.max(.001,+a),u=o*o,l=u*u;return t(o,u,l)},i}(Math.SQRT2,2,4);function Rh(t){return function e(n){n=+n;function r(i,a){var o=t((i=mn(i)).h,(a=mn(a)).h),u=Wr(i.s,a.s),l=Wr(i.l,a.l),f=Wr(i.opacity,a.opacity);return function(g){return i.h=o(g),i.s=u(g),i.l=l(Math.pow(g,n)),i.opacity=f(g),i+""}}return r.gamma=e,r}(1)}Rh(aw);var Ou=Rh(Wr);function Aw(t,e){e===void 0&&(e=t,t=Mr);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}var Xr=0,Ti=0,pi=0,Ch=1e3,qa,Ai,Ga=0,_r=0,vo=0,Wi=typeof performance=="object"&&performance.now?performance:Date,Lh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Du(){return _r||(Lh(Ew),_r=Wi.now()+vo)}function Ew(){_r=0}function ja(){this._call=this._time=this._next=null}ja.prototype=Ih.prototype={constructor:ja,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Du():+n)+(e==null?0:+e),!this._next&&Ai!==this&&(Ai?Ai._next=this:qa=this,Ai=this),this._call=t,this._time=n,Js()},stop:function(){this._call&&(this._call=null,this._time=1/0,Js())}};function Ih(t,e,n){var r=new ja;return r.restart(t,e,n),r}function Sw(){Du(),++Xr;for(var t=qa,e;t;)(e=_r-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xr}function pf(){_r=(Ga=Wi.now())+vo,Xr=Ti=0;try{Sw()}finally{Xr=0,Nw(),_r=0}}function Mw(){var t=Wi.now(),e=t-Ga;e>Ch&&(vo-=e,Ga=t)}function Nw(){for(var t,e=qa,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qa=n);Ai=t,Js(r)}function Js(t){if(!Xr){Ti&&(Ti=clearTimeout(Ti));var e=t-_r;e>24?(t<1/0&&(Ti=setTimeout(pf,t-Wi.now()-vo)),pi&&(pi=clearInterval(pi))):(pi||(Ga=Wi.now(),pi=setInterval(Mw,Ch)),Xr=1,Lh(pf))}}function bf(t,e,n){var r=new ja;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Ow=Xi("start","end","cancel","interrupt"),Dw=[],Bh=0,yf=1,Zs=2,xa=3,_f=4,Qs=5,Ta=6;function po(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Rw(t,n,{name:e,index:r,group:i,on:Ow,tween:Dw,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Bh})}function Ru(t,e){var n=sn(t,e);if(n.state>Bh)throw new Error("too late; already scheduled");return n}function yn(t,e){var n=sn(t,e);if(n.state>xa)throw new Error("too late; already running");return n}function sn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Rw(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ih(a,0,n.time);function a(f){n.state=yf,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var g,y,x,A;if(n.state!==yf)return l();for(g in r)if(A=r[g],A.name===n.name){if(A.state===xa)return bf(o);A.state===_f?(A.state=Ta,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete r[g]):+g<e&&(A.state=Ta,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete r[g])}if(bf(function(){n.state===xa&&(n.state=_f,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=Zs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Zs){for(n.state=xa,i=new Array(x=n.tween.length),g=0,y=-1;g<x;++g)(A=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(i[++y]=A);i.length=y+1}}function u(f){for(var g=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=Qs,1),y=-1,x=i.length;++y<x;)i[y].call(t,g);n.state===Qs&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Ta,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function Vr(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>Zs&&r.state<Qs,r.state=Ta,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Cw(t){return this.each(function(){Vr(this,t)})}function Lw(t,e){var n,r;return function(){var i=yn(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Iw(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=yn(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:e,value:n},l=0,f=i.length;l<f;++l)if(i[l].name===e){i[l]=u;break}l===f&&i.push(u)}a.tween=i}}function Bw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=sn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Lw:Iw)(n,t,e))}function Cu(t,e,n){var r=t._id;return t.each(function(){var i=yn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return sn(i,r).value[e]}}function kh(t,e){var n;return(typeof e=="number"?rn:e instanceof Jn?Xa:(n=Jn(e))?(e=n,Xa):Nh)(t,e)}function kw(t){return function(){this.removeAttribute(t)}}function Pw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $w(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ww(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Vw(t,e,n){var r,i,a;return function(){var o,u=n(this),l;return u==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=u+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,u)))}}function zw(t,e,n){var r,i,a;return function(){var o,u=n(this),l;return u==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=u+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,u)))}}function Fw(t,e){var n=qi(t),r=n==="transform"?yw:kh;return this.attrTween(t,typeof e=="function"?(n.local?zw:Vw)(n,r,Cu(this,"attr."+t,e)):e==null?(n.local?Pw:kw)(n):(n.local?Ww:$w)(n,r,e))}function Uw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Yw(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Hw(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Yw(t,a)),n}return i._value=e,i}function Xw(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Uw(t,a)),n}return i._value=e,i}function qw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=qi(t);return this.tween(n,(r.local?Hw:Xw)(r,e))}function Gw(t,e){return function(){Ru(this,t).delay=+e.apply(this,arguments)}}function jw(t,e){return e=+e,function(){Ru(this,t).delay=e}}function Jw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Gw:jw)(e,t)):sn(this.node(),e).delay}function Zw(t,e){return function(){yn(this,t).duration=+e.apply(this,arguments)}}function Qw(t,e){return e=+e,function(){yn(this,t).duration=e}}function Kw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zw:Qw)(e,t)):sn(this.node(),e).duration}function tx(t,e){if(typeof e!="function")throw new Error;return function(){yn(this,t).ease=e}}function ex(t){var e=this._id;return arguments.length?this.each(tx(e,t)):sn(this.node(),e).ease}function nx(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,t).ease=n}}function rx(t){if(typeof t!="function")throw new Error;return this.each(nx(this._id,t))}function ix(t){typeof t!="function"&&(t=wu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,u=r[i]=[],l,f=0;f<o;++f)(l=a[f])&&t.call(l,l.__data__,f,a)&&u.push(l);return new In(r,this._parents,this._name,this._id)}function ax(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var l=e[u],f=n[u],g=l.length,y=o[u]=new Array(g),x,A=0;A<g;++A)(x=l[A]||f[A])&&(y[A]=x);for(;u<r;++u)o[u]=e[u];return new In(o,this._parents,this._name,this._id)}function ox(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function sx(t,e,n){var r,i,a=ox(e)?Ru:yn;return function(){var o=a(this,t),u=o.on;u!==r&&(i=(r=u).copy()).on(e,n),o.on=i}}function ux(t,e){var n=this._id;return arguments.length<2?sn(this.node(),n).on.on(t):this.each(sx(n,t,e))}function cx(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function lx(){return this.on("end.remove",cx(this._id))}function fx(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fo(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],l=u.length,f=a[o]=new Array(l),g,y,x=0;x<l;++x)(g=u[x])&&(y=t.call(g,g.__data__,x,u))&&("__data__"in g&&(y.__data__=g.__data__),f[x]=y,po(f[x],e,n,x,f,sn(g,n)));return new In(a,this._parents,e,n)}function dx(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_u(t));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var l=r[u],f=l.length,g,y=0;y<f;++y)if(g=l[y]){for(var x=t.call(g,g.__data__,y,l),A,M=sn(g,n),C=0,N=x.length;C<N;++C)(A=x[C])&&po(A,e,n,C,x,M);a.push(x),o.push(g)}return new In(a,o,e,n)}var hx=ei.prototype.constructor;function gx(){return new hx(this._groups,this._parents)}function mx(t,e){var n,r,i;return function(){var a=pr(this,t),o=(this.style.removeProperty(t),pr(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Ph(t){return function(){this.style.removeProperty(t)}}function vx(t,e,n){var r,i=n+"",a;return function(){var o=pr(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function px(t,e,n){var r,i,a;return function(){var o=pr(this,t),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(t),pr(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,u))}}function bx(t,e){var n,r,i,a="style."+e,o="end."+a,u;return function(){var l=yn(this,t),f=l.on,g=l.value[a]==null?u||(u=Ph(e)):void 0;(f!==n||i!==g)&&(r=(n=f).copy()).on(o,i=g),l.on=r}}function yx(t,e,n){var r=(t+="")=="transform"?bw:kh;return e==null?this.styleTween(t,mx(t,r)).on("end.style."+t,Ph(t)):typeof e=="function"?this.styleTween(t,px(t,r,Cu(this,"style."+t,e))).each(bx(this._id,t)):this.styleTween(t,vx(t,r,e),n).on("end.style."+t,null)}function _x(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function wx(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&_x(t,o,n)),r}return a._value=e,a}function xx(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,wx(t,e,n??""))}function Tx(t){return function(){this.textContent=t}}function Ax(t){return function(){var e=t(this);this.textContent=e??""}}function Ex(t){return this.tween("text",typeof t=="function"?Ax(Cu(this,"text",t)):Tx(t==null?"":t+""))}function Sx(t){return function(e){this.textContent=t.call(this,e)}}function Mx(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Sx(i)),e}return r._value=t,r}function Nx(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Mx(t))}function Ox(){for(var t=this._name,e=this._id,n=$h(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,l,f=0;f<u;++f)if(l=o[f]){var g=sn(l,e);po(l,t,n,f,o,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new In(r,this._parents,t,n)}function Dx(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var f=yn(this,r),g=f.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(l)),f.on=e}),i===0&&a()})}var Rx=0;function In(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function $h(){return++Rx}var xn=ei.prototype;In.prototype={constructor:In,select:fx,selectAll:dx,selectChild:xn.selectChild,selectChildren:xn.selectChildren,filter:ix,merge:ax,selection:gx,transition:Ox,call:xn.call,nodes:xn.nodes,node:xn.node,size:xn.size,empty:xn.empty,each:xn.each,on:ux,attr:Fw,attrTween:qw,style:yx,styleTween:xx,text:Ex,textTween:Nx,remove:lx,tween:Bw,delay:Jw,duration:Kw,ease:ex,easeVarying:rx,end:Dx,[Symbol.iterator]:xn[Symbol.iterator]};function Cx(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Lx={time:null,delay:0,duration:250,ease:Cx};function Ix(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Bx(t){var e,n;t instanceof In?(e=t._id,t=t._name):(e=$h(),(n=Lx).time=Du(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,l,f=0;f<u;++f)(l=o[f])&&po(l,t,e,f,o,n||Ix(l,e));return new In(r,this._parents,t,e)}ei.prototype.interrupt=Cw;ei.prototype.transition=Bx;const ys=t=>()=>t;function kx(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Px(t){t.stopImmediatePropagation()}function _s(t){t.preventDefault(),t.stopImmediatePropagation()}var wf={name:"drag"},ws={name:"space"},Lr={name:"handle"},Ir={name:"center"};const{abs:xf,max:we,min:xe}=Math;function Tf(t){return[+t[0],+t[1]]}function Ks(t){return[Tf(t[0]),Tf(t[1])]}var Aa={name:"x",handles:["w","e"].map(Vi),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ea={name:"y",handles:["n","s"].map(Vi),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},$x={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Vi),input:function(t){return t==null?null:Ks(t)},output:function(t){return t}},Tn={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Af={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ef={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Wx={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Vx={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Vi(t){return{type:t}}function zx(t){return!t.ctrlKey&&!t.button}function Fx(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ux(){return navigator.maxTouchPoints||"ontouchstart"in this}function xs(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Yx(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Hx(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Xx(){return Lu(Aa)}function qx(){return Lu(Ea)}function Gx(){return Lu($x)}function Lu(t){var e=Fx,n=zx,r=Ux,i=!0,a=Xi("start","brush","end"),o=6,u;function l(N){var I=N.property("__brush",C).selectAll(".overlay").data([Vi("overlay")]);I.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Tn.overlay).merge(I).each(function(){var z=xs(this).extent;de(this).attr("x",z[0][0]).attr("y",z[0][1]).attr("width",z[1][0]-z[0][0]).attr("height",z[1][1]-z[0][1])}),N.selectAll(".selection").data([Vi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Tn.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var B=N.selectAll(".handle").data(t.handles,function(z){return z.type});B.exit().remove(),B.enter().append("rect").attr("class",function(z){return"handle handle--"+z.type}).attr("cursor",function(z){return Tn[z.type]}),N.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",x).filter(r).on("touchstart.brush",x).on("touchmove.brush",A).on("touchend.brush touchcancel.brush",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(N,I,B){N.tween?N.on("start.brush",function(z){g(this,arguments).beforestart().start(z)}).on("interrupt.brush end.brush",function(z){g(this,arguments).end(z)}).tween("brush",function(){var z=this,P=z.__brush,X=g(z,arguments),q=P.selection,lt=t.input(typeof I=="function"?I.apply(this,arguments):I,P.extent),K=Mr(q,lt);function nt(mt){P.selection=mt===1&&lt===null?null:K(mt),f.call(z),X.brush()}return q!==null&&lt!==null?nt:nt(1)}):N.each(function(){var z=this,P=arguments,X=z.__brush,q=t.input(typeof I=="function"?I.apply(z,P):I,X.extent),lt=g(z,P).beforestart();Vr(z),X.selection=q===null?null:q,f.call(z),lt.start(B).brush(B).end(B)})},l.clear=function(N,I){l.move(N,null,I)};function f(){var N=de(this),I=xs(this).selection;I?(N.selectAll(".selection").style("display",null).attr("x",I[0][0]).attr("y",I[0][1]).attr("width",I[1][0]-I[0][0]).attr("height",I[1][1]-I[0][1]),N.selectAll(".handle").style("display",null).attr("x",function(B){return B.type[B.type.length-1]==="e"?I[1][0]-o/2:I[0][0]-o/2}).attr("y",function(B){return B.type[0]==="s"?I[1][1]-o/2:I[0][1]-o/2}).attr("width",function(B){return B.type==="n"||B.type==="s"?I[1][0]-I[0][0]+o:o}).attr("height",function(B){return B.type==="e"||B.type==="w"?I[1][1]-I[0][1]+o:o})):N.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function g(N,I,B){var z=N.__brush.emitter;return z&&(!B||!z.clean)?z:new y(N,I,B)}function y(N,I,B){this.that=N,this.args=I,this.state=N.__brush,this.active=0,this.clean=B}y.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(N,I){return this.starting?(this.starting=!1,this.emit("start",N,I)):this.emit("brush",N),this},brush:function(N,I){return this.emit("brush",N,I),this},end:function(N,I){return--this.active===0&&(delete this.state.emitter,this.emit("end",N,I)),this},emit:function(N,I,B){var z=de(this.that).datum();a.call(N,this.that,new kx(N,{sourceEvent:I,target:l,selection:t.output(this.state.selection),mode:B,dispatch:a}),z)}};function x(N){if(u&&!N.touches||!n.apply(this,arguments))return;var I=this,B=N.target.__data__.type,z=(i&&N.metaKey?B="overlay":B)==="selection"?wf:i&&N.altKey?Ir:Lr,P=t===Ea?null:Wx[B],X=t===Aa?null:Vx[B],q=xs(I),lt=q.extent,K=q.selection,nt=lt[0][0],mt,ft,J=lt[0][1],G,W,Z=lt[1][0],U,et,dt=lt[1][1],st,gt,Q=0,it=0,ut,ht=P&&X&&i&&N.shiftKey,Mt,At,xt=Array.from(N.touches||[N],pt=>{const te=pt.identifier;return pt=nn(pt,I),pt.point0=pt.slice(),pt.identifier=te,pt});Vr(I);var Dt=g(I,arguments,!0).beforestart();if(B==="overlay"){K&&(ut=!0);const pt=[xt[0],xt[1]||xt[0]];q.selection=K=[[mt=t===Ea?nt:xe(pt[0][0],pt[1][0]),G=t===Aa?J:xe(pt[0][1],pt[1][1])],[U=t===Ea?Z:we(pt[0][0],pt[1][0]),st=t===Aa?dt:we(pt[0][1],pt[1][1])]],xt.length>1&&Ut(N)}else mt=K[0][0],G=K[0][1],U=K[1][0],st=K[1][1];ft=mt,W=G,et=U,gt=st;var ct=de(I).attr("pointer-events","none"),_t=ct.selectAll(".overlay").attr("cursor",Tn[B]);if(N.touches)Dt.moved=at,Dt.ended=ot;else{var Nt=de(N.view).on("mousemove.brush",at,!0).on("mouseup.brush",ot,!0);i&&Nt.on("keydown.brush",Yt,!0).on("keyup.brush",qt,!0),xh(N.view)}f.call(I),Dt.start(N,z.name);function at(pt){for(const te of pt.changedTouches||[pt])for(const ie of xt)ie.identifier===te.identifier&&(ie.cur=nn(te,I));if(ht&&!Mt&&!At&&xt.length===1){const te=xt[0];xf(te.cur[0]-te[0])>xf(te.cur[1]-te[1])?At=!0:Mt=!0}for(const te of xt)te.cur&&(te[0]=te.cur[0],te[1]=te.cur[1]);ut=!0,_s(pt),Ut(pt)}function Ut(pt){const te=xt[0],ie=te.point0;var un;switch(Q=te[0]-ie[0],it=te[1]-ie[1],z){case ws:case wf:{P&&(Q=we(nt-mt,xe(Z-U,Q)),ft=mt+Q,et=U+Q),X&&(it=we(J-G,xe(dt-st,it)),W=G+it,gt=st+it);break}case Lr:{xt[1]?(P&&(ft=we(nt,xe(Z,xt[0][0])),et=we(nt,xe(Z,xt[1][0])),P=1),X&&(W=we(J,xe(dt,xt[0][1])),gt=we(J,xe(dt,xt[1][1])),X=1)):(P<0?(Q=we(nt-mt,xe(Z-mt,Q)),ft=mt+Q,et=U):P>0&&(Q=we(nt-U,xe(Z-U,Q)),ft=mt,et=U+Q),X<0?(it=we(J-G,xe(dt-G,it)),W=G+it,gt=st):X>0&&(it=we(J-st,xe(dt-st,it)),W=G,gt=st+it));break}case Ir:{P&&(ft=we(nt,xe(Z,mt-Q*P)),et=we(nt,xe(Z,U+Q*P))),X&&(W=we(J,xe(dt,G-it*X)),gt=we(J,xe(dt,st+it*X)));break}}et<ft&&(P*=-1,un=mt,mt=U,U=un,un=ft,ft=et,et=un,B in Af&&_t.attr("cursor",Tn[B=Af[B]])),gt<W&&(X*=-1,un=G,G=st,st=un,un=W,W=gt,gt=un,B in Ef&&_t.attr("cursor",Tn[B=Ef[B]])),q.selection&&(K=q.selection),Mt&&(ft=K[0][0],et=K[1][0]),At&&(W=K[0][1],gt=K[1][1]),(K[0][0]!==ft||K[0][1]!==W||K[1][0]!==et||K[1][1]!==gt)&&(q.selection=[[ft,W],[et,gt]],f.call(I),Dt.brush(pt,z.name))}function ot(pt){if(Px(pt),pt.touches){if(pt.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Th(pt.view,ut),Nt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ct.attr("pointer-events","all"),_t.attr("cursor",Tn.overlay),q.selection&&(K=q.selection),Yx(K)&&(q.selection=null,f.call(I)),Dt.end(pt,z.name)}function Yt(pt){switch(pt.keyCode){case 16:{ht=P&&X;break}case 18:{z===Lr&&(P&&(U=et-Q*P,mt=ft+Q*P),X&&(st=gt-it*X,G=W+it*X),z=Ir,Ut(pt));break}case 32:{(z===Lr||z===Ir)&&(P<0?U=et-Q:P>0&&(mt=ft-Q),X<0?st=gt-it:X>0&&(G=W-it),z=ws,_t.attr("cursor",Tn.selection),Ut(pt));break}default:return}_s(pt)}function qt(pt){switch(pt.keyCode){case 16:{ht&&(Mt=At=ht=!1,Ut(pt));break}case 18:{z===Ir&&(P<0?U=et:P>0&&(mt=ft),X<0?st=gt:X>0&&(G=W),z=Lr,Ut(pt));break}case 32:{z===ws&&(pt.altKey?(P&&(U=et-Q*P,mt=ft+Q*P),X&&(st=gt-it*X,G=W+it*X),z=Ir):(P<0?U=et:P>0&&(mt=ft),X<0?st=gt:X>0&&(G=W),z=Lr),_t.attr("cursor",Tn[B]),Ut(pt));break}default:return}_s(pt)}}function A(N){g(this,arguments).moved(N)}function M(N){g(this,arguments).ended(N)}function C(){var N=this.__brush||{selection:null};return N.extent=Ks(e.apply(this,arguments)),N.dim=t,N}return l.extent=function(N){return arguments.length?(e=typeof N=="function"?N:ys(Ks(N)),l):e},l.filter=function(N){return arguments.length?(n=typeof N=="function"?N:ys(!!N),l):n},l.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:ys(!!N),l):r},l.handleSize=function(N){return arguments.length?(o=+N,l):o},l.keyModifiers=function(N){return arguments.length?(i=!!N,l):i},l.on=function(){var N=a.on.apply(a,arguments);return N===a?l:N},l}const jx=Object.freeze(Object.defineProperty({__proto__:null,brush:Gx,brushSelection:Hx,brushX:Xx,brushY:qx},Symbol.toStringTag,{value:"Module"})),tu=Math.PI,eu=2*tu,sr=1e-6,Jx=eu-sr;function Wh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Zx(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Wh;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let bo=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Wh:Zx(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,l=r-e,f=i-n,g=o-e,y=u-n,x=g*g+y*y;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(x>sr)if(!(Math.abs(y*l-f*g)>sr)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let A=r-o,M=i-u,C=l*l+f*f,N=A*A+M*M,I=Math.sqrt(C),B=Math.sqrt(x),z=a*Math.tan((tu-Math.acos((C+x-N)/(2*I*B)))/2),P=z/B,X=z/I;Math.abs(P-1)>sr&&this._append`L${e+P*g},${n+P*y}`,this._append`A${a},${a},0,0,${+(y*A>g*M)},${this._x1=e+X*l},${this._y1=n+X*f}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),l=r*Math.sin(i),f=e+u,g=n+l,y=1^o,x=o?i-a:a-i;this._x1===null?this._append`M${f},${g}`:(Math.abs(this._x1-f)>sr||Math.abs(this._y1-g)>sr)&&this._append`L${f},${g}`,r&&(x<0&&(x=x%eu+eu),x>Jx?this._append`A${r},${r},0,1,${y},${e-u},${n-l}A${r},${r},0,1,${y},${this._x1=f},${this._y1=g}`:x>sr&&this._append`A${r},${r},0,${+(x>=tu)},${y},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Vh(){return new bo}Vh.prototype=bo.prototype;function Qx(t=3){return new bo(+t)}const Kx=Object.freeze(Object.defineProperty({__proto__:null,Path:bo,path:Vh,pathRound:Qx},Symbol.toStringTag,{value:"Module"}));var Sf={},Ts={},As=34,bi=10,Es=13;function zh(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function tT(t,e){var n=zh(t);return function(r,i){return e(n(r),i,t)}}function Mf(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function $e(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function eT(t){return t<0?"-"+$e(-t,6):t>9999?"+"+$e(t,6):$e(t,4)}function nT(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":eT(t.getUTCFullYear())+"-"+$e(t.getUTCMonth()+1,2)+"-"+$e(t.getUTCDate(),2)+(i?"T"+$e(e,2)+":"+$e(n,2)+":"+$e(r,2)+"."+$e(i,3)+"Z":r?"T"+$e(e,2)+":"+$e(n,2)+":"+$e(r,2)+"Z":n||e?"T"+$e(e,2)+":"+$e(n,2)+"Z":"")}function Iu(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(y,x){var A,M,C=i(y,function(N,I){if(A)return A(N,I-1);M=N,A=x?tT(N,x):zh(N)});return C.columns=M||[],C}function i(y,x){var A=[],M=y.length,C=0,N=0,I,B=M<=0,z=!1;y.charCodeAt(M-1)===bi&&--M,y.charCodeAt(M-1)===Es&&--M;function P(){if(B)return Ts;if(z)return z=!1,Sf;var q,lt=C,K;if(y.charCodeAt(lt)===As){for(;C++<M&&y.charCodeAt(C)!==As||y.charCodeAt(++C)===As;);return(q=C)>=M?B=!0:(K=y.charCodeAt(C++))===bi?z=!0:K===Es&&(z=!0,y.charCodeAt(C)===bi&&++C),y.slice(lt+1,q-1).replace(/""/g,'"')}for(;C<M;){if((K=y.charCodeAt(q=C++))===bi)z=!0;else if(K===Es)z=!0,y.charCodeAt(C)===bi&&++C;else if(K!==n)continue;return y.slice(lt,q)}return B=!0,y.slice(lt,M)}for(;(I=P())!==Ts;){for(var X=[];I!==Sf&&I!==Ts;)X.push(I),I=P();x&&(X=x(X,N++))==null||A.push(X)}return A}function a(y,x){return y.map(function(A){return x.map(function(M){return g(A[M])}).join(t)})}function o(y,x){return x==null&&(x=Mf(y)),[x.map(g).join(t)].concat(a(y,x)).join(`
`)}function u(y,x){return x==null&&(x=Mf(y)),a(y,x).join(`
`)}function l(y){return y.map(f).join(`
`)}function f(y){return y.map(g).join(t)}function g(y){return y==null?"":y instanceof Date?nT(y):e.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:l,formatRow:f,formatValue:g}}var rT=Iu(","),iT=rT.parse,aT=Iu("	"),oT=aT.parse;function sT(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function uT(t,e){return fetch(t,e).then(sT)}function cT(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function lT(t,e){return fetch(t,e).then(cT)}function fT(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function yo(t,e){return fetch(t,e).then(fT)}function Fh(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),yo(e,n).then(function(i){return t(i,r)})}}function dT(t,e,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=Iu(t);return yo(e,n).then(function(a){return i.parse(a,r)})}var hT=Fh(iT),gT=Fh(oT);function mT(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function vT(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function pT(t,e){return fetch(t,e).then(vT)}function Bu(t){return(e,n)=>yo(e,n).then(r=>new DOMParser().parseFromString(r,t))}const bT=Bu("application/xml");var yT=Bu("text/html"),_T=Bu("image/svg+xml");const wT=Object.freeze(Object.defineProperty({__proto__:null,blob:uT,buffer:lT,csv:hT,dsv:dT,html:yT,image:mT,json:pT,svg:_T,text:yo,tsv:gT,xml:bT},Symbol.toStringTag,{value:"Module"}));function xT(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ja(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function qr(t){return t=Ja(Math.abs(t)),t?t[1]:NaN}function TT(t,e){return function(n,r){for(var i=n.length,a=[],o=0,u=t[0],l=0;i>0&&u>0&&(l+u+1>r&&(u=Math.max(1,r-l)),a.push(n.substring(i-=u,i+u)),!((l+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(e)}}function AT(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ET=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zi(t){if(!(e=ET.exec(t)))throw new Error("invalid format: "+t);var e;return new ku({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}zi.prototype=ku.prototype;function ku(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ku.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ST(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Uh;function MT(t,e){var n=Ja(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Uh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ja(t,Math.max(0,e+a-1))[0]}function Nf(t,e){var n=Ja(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Of={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xT,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Nf(t*100,e),r:Nf,s:MT,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Df(t){return t}var Rf=Array.prototype.map,Cf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function NT(t){var e=t.grouping===void 0||t.thousands===void 0?Df:TT(Rf.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Df:AT(Rf.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function f(y){y=zi(y);var x=y.fill,A=y.align,M=y.sign,C=y.symbol,N=y.zero,I=y.width,B=y.comma,z=y.precision,P=y.trim,X=y.type;X==="n"?(B=!0,X="g"):Of[X]||(z===void 0&&(z=12),P=!0,X="g"),(N||x==="0"&&A==="=")&&(N=!0,x="0",A="=");var q=C==="$"?n:C==="#"&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",lt=C==="$"?r:/[%p]/.test(X)?o:"",K=Of[X],nt=/[defgprs%]/.test(X);z=z===void 0?6:/[gprs]/.test(X)?Math.max(1,Math.min(21,z)):Math.max(0,Math.min(20,z));function mt(ft){var J=q,G=lt,W,Z,U;if(X==="c")G=K(ft)+G,ft="";else{ft=+ft;var et=ft<0||1/ft<0;if(ft=isNaN(ft)?l:K(Math.abs(ft),z),P&&(ft=ST(ft)),et&&+ft==0&&M!=="+"&&(et=!1),J=(et?M==="("?M:u:M==="-"||M==="("?"":M)+J,G=(X==="s"?Cf[8+Uh/3]:"")+G+(et&&M==="("?")":""),nt){for(W=-1,Z=ft.length;++W<Z;)if(U=ft.charCodeAt(W),48>U||U>57){G=(U===46?i+ft.slice(W+1):ft.slice(W))+G,ft=ft.slice(0,W);break}}}B&&!N&&(ft=e(ft,1/0));var dt=J.length+ft.length+G.length,st=dt<I?new Array(I-dt+1).join(x):"";switch(B&&N&&(ft=e(st+ft,st.length?I-G.length:1/0),st=""),A){case"<":ft=J+ft+G+st;break;case"=":ft=J+st+ft+G;break;case"^":ft=st.slice(0,dt=st.length>>1)+J+ft+G+st.slice(dt);break;default:ft=st+J+ft+G;break}return a(ft)}return mt.toString=function(){return y+""},mt}function g(y,x){var A=f((y=zi(y),y.type="f",y)),M=Math.max(-8,Math.min(8,Math.floor(qr(x)/3)))*3,C=Math.pow(10,-M),N=Cf[8+M/3];return function(I){return A(C*I)+N}}return{format:f,formatPrefix:g}}var ha,Pu,Yh;OT({thousands:",",grouping:[3],currency:["$",""]});function OT(t){return ha=NT(t),Pu=ha.format,Yh=ha.formatPrefix,ha}function DT(t){return Math.max(0,-qr(Math.abs(t)))}function RT(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qr(e)/3)))*3-qr(Math.abs(t)))}function CT(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qr(e)-qr(t))+1}const ye=Math.random,LT=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n}(ye),IT=function t(e){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(e()*i+r)}}return n.source=t,n}(ye),$u=function t(e){function n(r,i){var a,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var u;if(a!=null)u=a,a=null;else do a=e()*2-1,u=e()*2-1,o=a*a+u*u;while(!o||o>1);return r+i*u*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(ye),BT=function t(e){var n=$u.source(e);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=t,r}(ye),Hh=function t(e){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,a=r;a>1;--a)i+=e();return i+a*e()}}return n.source=t,n}(ye),kT=function t(e){var n=Hh.source(e);function r(i){if((i=+i)==0)return e;var a=n(i);return function(){return a()/i}}return r.source=t,r}(ye),PT=function t(e){function n(r){return function(){return-Math.log1p(-e())/r}}return n.source=t,n}(ye),$T=function t(e){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-e(),r)}}return n.source=t,n}(ye),WT=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+r)}}return n.source=t,n}(ye),Xh=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-e())/r)})}return n.source=t,n}(ye),Wu=function t(e){var n=$u.source(e)();function r(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-e())*a;var o=(i<1?i+1:i)-1/3,u=1/(3*Math.sqrt(o)),l=i<1?()=>Math.pow(e(),1/i):()=>1;return function(){do{do var f=n(),g=1+u*f;while(g<=0);g*=g*g;var y=1-e()}while(y>=1-.0331*f*f*f*f&&Math.log(y)>=.5*f*f+o*(1-g+Math.log(g)));return o*g*l()*a}}return r.source=t,r}(ye),qh=function t(e){var n=Wu.source(e);function r(i,a){var o=n(i),u=n(a);return function(){var l=o();return l===0?0:l/(l+u())}}return r.source=t,r}(ye),Gh=function t(e){var n=Xh.source(e),r=qh.source(e);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var u=0,l=a,f=o;l*f>16&&l*(1-f)>16;){var g=Math.floor((l+1)*f),y=r(g,l-g+1)();y<=f?(u+=g,l-=g,f=(f-y)/(1-y)):(l=g-1,f/=y)}for(var x=f<.5,A=x?f:1-f,M=n(A),C=M(),N=0;C<=l;++N)C+=M();return u+(x?N:l-N)}}return i.source=t,i}(ye),VT=function t(e){function n(r,i,a){var o;return(r=+r)==0?o=u=>-Math.log(u):(r=1/r,o=u=>Math.pow(u,r)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-e()))}}return n.source=t,n}(ye),zT=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*e())}}return n.source=t,n}(ye),FT=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var a=e();return r+i*Math.log(a/(1-a))}}return n.source=t,n}(ye),UT=function t(e){var n=Wu.source(e),r=Gh.source(e);function i(a){return function(){for(var o=0,u=a;u>16;){var l=Math.floor(.875*u),f=n(l)();if(f>u)return o+r(l-1,u/f)();o+=l,u-=f}for(var g=-Math.log1p(-e()),y=0;g<=u;++y)g-=Math.log1p(-e());return o+y}}return i.source=t,i}(ye),YT=1664525,HT=1013904223,Lf=1/4294967296;function XT(t=Math.random()){let e=(0<=t&&t<1?t/Lf:Math.abs(t))|0;return()=>(e=YT*e+HT|0,Lf*(e>>>0))}const qT=Object.freeze(Object.defineProperty({__proto__:null,randomBates:kT,randomBernoulli:WT,randomBeta:qh,randomBinomial:Gh,randomCauchy:zT,randomExponential:PT,randomGamma:Wu,randomGeometric:Xh,randomInt:IT,randomIrwinHall:Hh,randomLcg:XT,randomLogNormal:BT,randomLogistic:FT,randomNormal:$u,randomPareto:$T,randomPoisson:UT,randomUniform:LT,randomWeibull:VT},Symbol.toStringTag,{value:"Module"}));function en(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Pn(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nu=Symbol("implicit");function Vu(){var t=new Ii,e=[],n=[],r=nu;function i(a){let o=t.get(a);if(o===void 0){if(r!==nu)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Ii;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Vu(e,n).unknown(r)},en.apply(i,arguments),i}function zu(){var t=Vu().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,u=!1,l=0,f=0,g=.5;delete t.unknown;function y(){var x=e().length,A=i<r,M=A?i:r,C=A?r:i;a=(C-M)/Math.max(1,x-l+f*2),u&&(a=Math.floor(a)),M+=(C-M-a*(x-l))*g,o=a*(1-l),u&&(M=Math.round(M),o=Math.round(o));var N=yu(x).map(function(I){return M+a*I});return n(A?N.reverse():N)}return t.domain=function(x){return arguments.length?(e(x),y()):e()},t.range=function(x){return arguments.length?([r,i]=x,r=+r,i=+i,y()):[r,i]},t.rangeRound=function(x){return[r,i]=x,r=+r,i=+i,u=!0,y()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(x){return arguments.length?(u=!!x,y()):u},t.padding=function(x){return arguments.length?(l=Math.min(1,f=+x),y()):l},t.paddingInner=function(x){return arguments.length?(l=Math.min(1,x),y()):l},t.paddingOuter=function(x){return arguments.length?(f=+x,y()):f},t.align=function(x){return arguments.length?(g=Math.max(0,Math.min(1,x)),y()):g},t.copy=function(){return zu(e(),[r,i]).round(u).paddingInner(l).paddingOuter(f).align(g)},en.apply(y(),arguments)}function jh(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jh(e())},t}function GT(){return jh(zu.apply(null,arguments).paddingInner(1))}function jT(t){return function(){return t}}function Za(t){return+t}var If=[0,1];function Re(t){return t}function ru(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:jT(isNaN(e)?NaN:.5)}function JT(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ZT(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=ru(i,r),a=n(o,a)):(r=ru(r,i),a=n(a,o)),function(u){return a(r(u))}}function QT(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=ru(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(u){var l=jn(t,u,1,r)-1;return a[l](i[l](u))}}function Gi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _o(){var t=If,e=If,n=Mr,r,i,a,o=Re,u,l,f;function g(){var x=Math.min(t.length,e.length);return o!==Re&&(o=JT(t[0],t[x-1])),u=x>2?QT:ZT,l=f=null,y}function y(x){return x==null||isNaN(x=+x)?a:(l||(l=u(t.map(r),e,n)))(r(o(x)))}return y.invert=function(x){return o(i((f||(f=u(e,t.map(r),rn)))(x)))},y.domain=function(x){return arguments.length?(t=Array.from(x,Za),g()):t.slice()},y.range=function(x){return arguments.length?(e=Array.from(x),g()):e.slice()},y.rangeRound=function(x){return e=Array.from(x),n=Nu,g()},y.clamp=function(x){return arguments.length?(o=x?!0:Re,g()):o!==Re},y.interpolate=function(x){return arguments.length?(n=x,g()):n},y.unknown=function(x){return arguments.length?(a=x,y):a},function(x,A){return r=x,i=A,g()}}function Fu(){return _o()(Re,Re)}function Jh(t,e,n,r){var i=za(t,e,n),a;switch(r=zi(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=RT(i,o))&&(r.precision=a),Yh(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=CT(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=DT(i))&&(r.precision=a-(r.type==="%")*2);break}}return Pu(r)}function Kn(t){var e=t.domain;return t.ticks=function(n){var r=e();return Bi(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Jh(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],u=r[a],l,f,g=10;for(u<o&&(f=o,o=u,u=f,f=i,i=a,a=f);g-- >0;){if(f=vr(o,u,n),f===l)return r[i]=o,r[a]=u,e(r);if(f>0)o=Math.floor(o/f)*f,u=Math.ceil(u/f)*f;else if(f<0)o=Math.ceil(o*f)/f,u=Math.floor(u*f)/f;else break;l=f}return t},t}function Ze(){var t=Fu();return t.copy=function(){return Gi(t,Ze())},en.apply(t,arguments),Kn(t)}function Zh(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Za),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Zh(t).unknown(e)},t=arguments.length?Array.from(t,Za):[0,1],Kn(n)}function Qh(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Bf(t){return Math.log(t)}function kf(t){return Math.exp(t)}function KT(t){return-Math.log(-t)}function t2(t){return-Math.exp(-t)}function e2(t){return isFinite(t)?+("1e"+t):t<0?0:t}function n2(t){return t===10?e2:t===Math.E?Math.exp:e=>Math.pow(t,e)}function r2(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Pf(t){return(e,n)=>-t(-e,n)}function Uu(t){const e=t(Bf,kf),n=e.domain;let r=10,i,a;function o(){return i=r2(r),a=n2(r),n()[0]<0?(i=Pf(i),a=Pf(a),t(KT,t2)):t(Bf,kf),e}return e.base=function(u){return arguments.length?(r=+u,o()):r},e.domain=function(u){return arguments.length?(n(u),o()):n()},e.ticks=u=>{const l=n();let f=l[0],g=l[l.length-1];const y=g<f;y&&([f,g]=[g,f]);let x=i(f),A=i(g),M,C;const N=u==null?10:+u;let I=[];if(!(r%1)&&A-x<N){if(x=Math.floor(x),A=Math.ceil(A),f>0){for(;x<=A;++x)for(M=1;M<r;++M)if(C=x<0?M/a(-x):M*a(x),!(C<f)){if(C>g)break;I.push(C)}}else for(;x<=A;++x)for(M=r-1;M>=1;--M)if(C=x>0?M/a(-x):M*a(x),!(C<f)){if(C>g)break;I.push(C)}I.length*2<N&&(I=Bi(f,g,N))}else I=Bi(x,A,Math.min(A-x,N)).map(a);return y?I.reverse():I},e.tickFormat=(u,l)=>{if(u==null&&(u=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=zi(l)).precision==null&&(l.trim=!0),l=Pu(l)),u===1/0)return l;const f=Math.max(1,r*u/e.ticks().length);return g=>{let y=g/a(Math.round(i(g)));return y*r<r-.5&&(y*=r),y<=f?l(g):""}},e.nice=()=>n(Qh(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),e}function Kh(){const t=Uu(_o()).domain([1,10]);return t.copy=()=>Gi(t,Kh()).base(t.base()),en.apply(t,arguments),t}function $f(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Wf(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Yu(t){var e=1,n=t($f(e),Wf(e));return n.constant=function(r){return arguments.length?t($f(e=+r),Wf(e)):e},Kn(n)}function tg(){var t=Yu(_o());return t.copy=function(){return Gi(t,tg()).constant(t.constant())},en.apply(t,arguments)}function Vf(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function i2(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function a2(t){return t<0?-t*t:t*t}function Hu(t){var e=t(Re,Re),n=1;function r(){return n===1?t(Re,Re):n===.5?t(i2,a2):t(Vf(n),Vf(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Kn(e)}function Xu(){var t=Hu(_o());return t.copy=function(){return Gi(t,Xu()).exponent(t.exponent())},en.apply(t,arguments),t}function o2(){return Xu.apply(null,arguments).exponent(.5)}function zf(t){return Math.sign(t)*t*t}function s2(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function eg(){var t=Fu(),e=[0,1],n=!1,r;function i(a){var o=s2(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(zf(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Za)).map(zf)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return eg(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},en.apply(i,arguments),Kn(i)}function ng(){var t=[],e=[],n=[],r;function i(){var o=0,u=Math.max(1,e.length);for(n=new Array(u-1);++o<u;)n[o-1]=oh(t,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:e[jn(n,o)]}return a.invertExtent=function(o){var u=e.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let u of o)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(ee),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return ng().domain(t).range(e).unknown(r)},en.apply(a,arguments)}function rg(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[jn(r,l,0,n)]:a}function u(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,u()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,u()):i.slice()},o.invertExtent=function(l){var f=i.indexOf(l);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return rg().domain([t,e]).range(i).unknown(a)},en.apply(Kn(o),arguments)}function ig(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[jn(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return ig().domain(t).range(e).unknown(n)},en.apply(i,arguments)}const Ss=new Date,Ms=new Date;function ce(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const l=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return l;let f;do l.push(f=new Date(+a)),e(a,u),t(a);while(f<a&&a<o);return l},i.filter=a=>ce(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;e(o,-1),!a(o););else for(;--u>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Ss.setTime(+a),Ms.setTime(+o),t(Ss),t(Ms),Math.floor(n(Ss,Ms))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Gr=ce(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Gr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ce(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Gr);const Ff=Gr.range,On=1e3,Ge=On*60,Dn=Ge*60,Bn=Dn*24,qu=Bn*7,Uf=Bn*30,Ns=Bn*365,Rn=ce(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*On)},(t,e)=>(e-t)/On,t=>t.getUTCSeconds()),Yf=Rn.range,wo=ce(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*On)},(t,e)=>{t.setTime(+t+e*Ge)},(t,e)=>(e-t)/Ge,t=>t.getMinutes()),u2=wo.range,xo=ce(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ge)},(t,e)=>(e-t)/Ge,t=>t.getUTCMinutes()),c2=xo.range,To=ce(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*On-t.getMinutes()*Ge)},(t,e)=>{t.setTime(+t+e*Dn)},(t,e)=>(e-t)/Dn,t=>t.getHours()),l2=To.range,Ao=ce(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Dn)},(t,e)=>(e-t)/Dn,t=>t.getUTCHours()),f2=Ao.range,ri=ce(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ge)/Bn,t=>t.getDate()-1),d2=ri.range,ji=ce(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bn,t=>t.getUTCDate()-1),h2=ji.range,Gu=ce(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bn,t=>Math.floor(t/Bn)),g2=Gu.range;function Nr(t){return ce(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ge)/qu)}const jr=Nr(0),Fi=Nr(1),ag=Nr(2),og=Nr(3),wr=Nr(4),sg=Nr(5),ug=Nr(6),Hf=jr.range,m2=Fi.range,v2=ag.range,p2=og.range,b2=wr.range,y2=sg.range,_2=ug.range;function Or(t){return ce(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/qu)}const Jr=Or(0),Ui=Or(1),cg=Or(2),lg=Or(3),xr=Or(4),fg=Or(5),dg=Or(6),Xf=Jr.range,w2=Ui.range,x2=cg.range,T2=lg.range,A2=xr.range,E2=fg.range,S2=dg.range,Eo=ce(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),M2=Eo.range,So=ce(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),N2=So.range,vn=ce(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());vn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ce(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});const O2=vn.range,pn=ce(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());pn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ce(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});const D2=pn.range;function hg(t,e,n,r,i,a){const o=[[Rn,1,On],[Rn,5,5*On],[Rn,15,15*On],[Rn,30,30*On],[a,1,Ge],[a,5,5*Ge],[a,15,15*Ge],[a,30,30*Ge],[i,1,Dn],[i,3,3*Dn],[i,6,6*Dn],[i,12,12*Dn],[r,1,Bn],[r,2,2*Bn],[n,1,qu],[e,1,Uf],[e,3,3*Uf],[t,1,Ns]];function u(f,g,y){const x=g<f;x&&([f,g]=[g,f]);const A=y&&typeof y.range=="function"?y:l(f,g,y),M=A?A.range(f,+g+1):[];return x?M.reverse():M}function l(f,g,y){const x=Math.abs(g-f)/y,A=Hi(([,,N])=>N).right(o,x);if(A===o.length)return t.every(za(f/Ns,g/Ns,y));if(A===0)return Gr.every(Math.max(za(f,g,y),1));const[M,C]=o[x/o[A-1][2]<o[A][2]/x?A-1:A];return M.every(C)}return[u,l]}const[gg,mg]=hg(pn,So,Jr,Gu,Ao,xo),[vg,pg]=hg(vn,Eo,jr,ri,To,wo),R2=Object.freeze(Object.defineProperty({__proto__:null,timeDay:ri,timeDays:d2,timeFriday:sg,timeFridays:y2,timeHour:To,timeHours:l2,timeInterval:ce,timeMillisecond:Gr,timeMilliseconds:Ff,timeMinute:wo,timeMinutes:u2,timeMonday:Fi,timeMondays:m2,timeMonth:Eo,timeMonths:M2,timeSaturday:ug,timeSaturdays:_2,timeSecond:Rn,timeSeconds:Yf,timeSunday:jr,timeSundays:Hf,timeThursday:wr,timeThursdays:b2,timeTickInterval:pg,timeTicks:vg,timeTuesday:ag,timeTuesdays:v2,timeWednesday:og,timeWednesdays:p2,timeWeek:jr,timeWeeks:Hf,timeYear:vn,timeYears:O2,unixDay:Gu,unixDays:g2,utcDay:ji,utcDays:h2,utcFriday:fg,utcFridays:E2,utcHour:Ao,utcHours:f2,utcMillisecond:Gr,utcMilliseconds:Ff,utcMinute:xo,utcMinutes:c2,utcMonday:Ui,utcMondays:w2,utcMonth:So,utcMonths:N2,utcSaturday:dg,utcSaturdays:S2,utcSecond:Rn,utcSeconds:Yf,utcSunday:Jr,utcSundays:Xf,utcThursday:xr,utcThursdays:A2,utcTickInterval:mg,utcTicks:gg,utcTuesday:cg,utcTuesdays:x2,utcWednesday:lg,utcWednesdays:T2,utcWeek:Jr,utcWeeks:Xf,utcYear:pn,utcYears:D2},Symbol.toStringTag,{value:"Module"}));function Os(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ds(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function yi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function C2(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,l=t.shortMonths,f=_i(i),g=wi(i),y=_i(a),x=wi(a),A=_i(o),M=wi(o),C=_i(u),N=wi(u),I=_i(l),B=wi(l),z={a:et,A:dt,b:st,B:gt,c:null,d:Qf,e:Qf,f:eA,g:fA,G:hA,H:Q2,I:K2,j:tA,L:bg,m:nA,M:rA,p:Q,q:it,Q:ed,s:nd,S:iA,u:aA,U:oA,V:sA,w:uA,W:cA,x:null,X:null,y:lA,Y:dA,Z:gA,"%":td},P={a:ut,A:ht,b:Mt,B:At,c:null,d:Kf,e:Kf,f:bA,g:NA,G:DA,H:mA,I:vA,j:pA,L:_g,m:yA,M:_A,p:xt,q:Dt,Q:ed,s:nd,S:wA,u:xA,U:TA,V:AA,w:EA,W:SA,x:null,X:null,y:MA,Y:OA,Z:RA,"%":td},X={a:mt,A:ft,b:J,B:G,c:W,d:Jf,e:Jf,f:G2,g:jf,G:Gf,H:Zf,I:Zf,j:Y2,L:q2,m:U2,M:H2,p:nt,q:F2,Q:J2,s:Z2,S:X2,u:P2,U:$2,V:W2,w:k2,W:V2,x:Z,X:U,y:jf,Y:Gf,Z:z2,"%":j2};z.x=q(n,z),z.X=q(r,z),z.c=q(e,z),P.x=q(n,P),P.X=q(r,P),P.c=q(e,P);function q(ct,_t){return function(Nt){var at=[],Ut=-1,ot=0,Yt=ct.length,qt,pt,te;for(Nt instanceof Date||(Nt=new Date(+Nt));++Ut<Yt;)ct.charCodeAt(Ut)===37&&(at.push(ct.slice(ot,Ut)),(pt=qf[qt=ct.charAt(++Ut)])!=null?qt=ct.charAt(++Ut):pt=qt==="e"?" ":"0",(te=_t[qt])&&(qt=te(Nt,pt)),at.push(qt),ot=Ut+1);return at.push(ct.slice(ot,Ut)),at.join("")}}function lt(ct,_t){return function(Nt){var at=yi(1900,void 0,1),Ut=K(at,ct,Nt+="",0),ot,Yt;if(Ut!=Nt.length)return null;if("Q"in at)return new Date(at.Q);if("s"in at)return new Date(at.s*1e3+("L"in at?at.L:0));if(_t&&!("Z"in at)&&(at.Z=0),"p"in at&&(at.H=at.H%12+at.p*12),at.m===void 0&&(at.m="q"in at?at.q:0),"V"in at){if(at.V<1||at.V>53)return null;"w"in at||(at.w=1),"Z"in at?(ot=Ds(yi(at.y,0,1)),Yt=ot.getUTCDay(),ot=Yt>4||Yt===0?Ui.ceil(ot):Ui(ot),ot=ji.offset(ot,(at.V-1)*7),at.y=ot.getUTCFullYear(),at.m=ot.getUTCMonth(),at.d=ot.getUTCDate()+(at.w+6)%7):(ot=Os(yi(at.y,0,1)),Yt=ot.getDay(),ot=Yt>4||Yt===0?Fi.ceil(ot):Fi(ot),ot=ri.offset(ot,(at.V-1)*7),at.y=ot.getFullYear(),at.m=ot.getMonth(),at.d=ot.getDate()+(at.w+6)%7)}else("W"in at||"U"in at)&&("w"in at||(at.w="u"in at?at.u%7:"W"in at?1:0),Yt="Z"in at?Ds(yi(at.y,0,1)).getUTCDay():Os(yi(at.y,0,1)).getDay(),at.m=0,at.d="W"in at?(at.w+6)%7+at.W*7-(Yt+5)%7:at.w+at.U*7-(Yt+6)%7);return"Z"in at?(at.H+=at.Z/100|0,at.M+=at.Z%100,Ds(at)):Os(at)}}function K(ct,_t,Nt,at){for(var Ut=0,ot=_t.length,Yt=Nt.length,qt,pt;Ut<ot;){if(at>=Yt)return-1;if(qt=_t.charCodeAt(Ut++),qt===37){if(qt=_t.charAt(Ut++),pt=X[qt in qf?_t.charAt(Ut++):qt],!pt||(at=pt(ct,Nt,at))<0)return-1}else if(qt!=Nt.charCodeAt(at++))return-1}return at}function nt(ct,_t,Nt){var at=f.exec(_t.slice(Nt));return at?(ct.p=g.get(at[0].toLowerCase()),Nt+at[0].length):-1}function mt(ct,_t,Nt){var at=A.exec(_t.slice(Nt));return at?(ct.w=M.get(at[0].toLowerCase()),Nt+at[0].length):-1}function ft(ct,_t,Nt){var at=y.exec(_t.slice(Nt));return at?(ct.w=x.get(at[0].toLowerCase()),Nt+at[0].length):-1}function J(ct,_t,Nt){var at=I.exec(_t.slice(Nt));return at?(ct.m=B.get(at[0].toLowerCase()),Nt+at[0].length):-1}function G(ct,_t,Nt){var at=C.exec(_t.slice(Nt));return at?(ct.m=N.get(at[0].toLowerCase()),Nt+at[0].length):-1}function W(ct,_t,Nt){return K(ct,e,_t,Nt)}function Z(ct,_t,Nt){return K(ct,n,_t,Nt)}function U(ct,_t,Nt){return K(ct,r,_t,Nt)}function et(ct){return o[ct.getDay()]}function dt(ct){return a[ct.getDay()]}function st(ct){return l[ct.getMonth()]}function gt(ct){return u[ct.getMonth()]}function Q(ct){return i[+(ct.getHours()>=12)]}function it(ct){return 1+~~(ct.getMonth()/3)}function ut(ct){return o[ct.getUTCDay()]}function ht(ct){return a[ct.getUTCDay()]}function Mt(ct){return l[ct.getUTCMonth()]}function At(ct){return u[ct.getUTCMonth()]}function xt(ct){return i[+(ct.getUTCHours()>=12)]}function Dt(ct){return 1+~~(ct.getUTCMonth()/3)}return{format:function(ct){var _t=q(ct+="",z);return _t.toString=function(){return ct},_t},parse:function(ct){var _t=lt(ct+="",!1);return _t.toString=function(){return ct},_t},utcFormat:function(ct){var _t=q(ct+="",P);return _t.toString=function(){return ct},_t},utcParse:function(ct){var _t=lt(ct+="",!0);return _t.toString=function(){return ct},_t}}}var qf={"-":"",_:" ",0:"0"},he=/^\s*\d+/,L2=/^%/,I2=/[\\^$*+?|[\]().{}]/g;function zt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function B2(t){return t.replace(I2,"\\$&")}function _i(t){return new RegExp("^(?:"+t.map(B2).join("|")+")","i")}function wi(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function k2(t,e,n){var r=he.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function P2(t,e,n){var r=he.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function $2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function W2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function V2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Gf(t,e,n){var r=he.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function jf(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function z2(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function F2(t,e,n){var r=he.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function U2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Jf(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Y2(t,e,n){var r=he.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Zf(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function H2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function X2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function q2(t,e,n){var r=he.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function G2(t,e,n){var r=he.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function j2(t,e,n){var r=L2.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function J2(t,e,n){var r=he.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Z2(t,e,n){var r=he.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Qf(t,e){return zt(t.getDate(),e,2)}function Q2(t,e){return zt(t.getHours(),e,2)}function K2(t,e){return zt(t.getHours()%12||12,e,2)}function tA(t,e){return zt(1+ri.count(vn(t),t),e,3)}function bg(t,e){return zt(t.getMilliseconds(),e,3)}function eA(t,e){return bg(t,e)+"000"}function nA(t,e){return zt(t.getMonth()+1,e,2)}function rA(t,e){return zt(t.getMinutes(),e,2)}function iA(t,e){return zt(t.getSeconds(),e,2)}function aA(t){var e=t.getDay();return e===0?7:e}function oA(t,e){return zt(jr.count(vn(t)-1,t),e,2)}function yg(t){var e=t.getDay();return e>=4||e===0?wr(t):wr.ceil(t)}function sA(t,e){return t=yg(t),zt(wr.count(vn(t),t)+(vn(t).getDay()===4),e,2)}function uA(t){return t.getDay()}function cA(t,e){return zt(Fi.count(vn(t)-1,t),e,2)}function lA(t,e){return zt(t.getFullYear()%100,e,2)}function fA(t,e){return t=yg(t),zt(t.getFullYear()%100,e,2)}function dA(t,e){return zt(t.getFullYear()%1e4,e,4)}function hA(t,e){var n=t.getDay();return t=n>=4||n===0?wr(t):wr.ceil(t),zt(t.getFullYear()%1e4,e,4)}function gA(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zt(e/60|0,"0",2)+zt(e%60,"0",2)}function Kf(t,e){return zt(t.getUTCDate(),e,2)}function mA(t,e){return zt(t.getUTCHours(),e,2)}function vA(t,e){return zt(t.getUTCHours()%12||12,e,2)}function pA(t,e){return zt(1+ji.count(pn(t),t),e,3)}function _g(t,e){return zt(t.getUTCMilliseconds(),e,3)}function bA(t,e){return _g(t,e)+"000"}function yA(t,e){return zt(t.getUTCMonth()+1,e,2)}function _A(t,e){return zt(t.getUTCMinutes(),e,2)}function wA(t,e){return zt(t.getUTCSeconds(),e,2)}function xA(t){var e=t.getUTCDay();return e===0?7:e}function TA(t,e){return zt(Jr.count(pn(t)-1,t),e,2)}function wg(t){var e=t.getUTCDay();return e>=4||e===0?xr(t):xr.ceil(t)}function AA(t,e){return t=wg(t),zt(xr.count(pn(t),t)+(pn(t).getUTCDay()===4),e,2)}function EA(t){return t.getUTCDay()}function SA(t,e){return zt(Ui.count(pn(t)-1,t),e,2)}function MA(t,e){return zt(t.getUTCFullYear()%100,e,2)}function NA(t,e){return t=wg(t),zt(t.getUTCFullYear()%100,e,2)}function OA(t,e){return zt(t.getUTCFullYear()%1e4,e,4)}function DA(t,e){var n=t.getUTCDay();return t=n>=4||n===0?xr(t):xr.ceil(t),zt(t.getUTCFullYear()%1e4,e,4)}function RA(){return"+0000"}function td(){return"%"}function ed(t){return+t}function nd(t){return Math.floor(+t/1e3)}var Br,xg,Tg;CA({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CA(t){return Br=C2(t),xg=Br.format,Br.parse,Tg=Br.utcFormat,Br.utcParse,Br}function LA(t){return new Date(t)}function IA(t){return t instanceof Date?+t:+new Date(+t)}function ju(t,e,n,r,i,a,o,u,l,f){var g=Fu(),y=g.invert,x=g.domain,A=f(".%L"),M=f(":%S"),C=f("%I:%M"),N=f("%I %p"),I=f("%a %d"),B=f("%b %d"),z=f("%B"),P=f("%Y");function X(q){return(l(q)<q?A:u(q)<q?M:o(q)<q?C:a(q)<q?N:r(q)<q?i(q)<q?I:B:n(q)<q?z:P)(q)}return g.invert=function(q){return new Date(y(q))},g.domain=function(q){return arguments.length?x(Array.from(q,IA)):x().map(LA)},g.ticks=function(q){var lt=x();return t(lt[0],lt[lt.length-1],q??10)},g.tickFormat=function(q,lt){return lt==null?X:f(lt)},g.nice=function(q){var lt=x();return(!q||typeof q.range!="function")&&(q=e(lt[0],lt[lt.length-1],q??10)),q?x(Qh(lt,q)):g},g.copy=function(){return Gi(g,ju(t,e,n,r,i,a,o,u,l,f))},g}function BA(){return en.apply(ju(vg,pg,vn,Eo,jr,ri,To,wo,Rn,xg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kA(){return en.apply(ju(gg,mg,pn,So,Jr,ji,Ao,xo,Rn,Tg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mo(){var t=0,e=1,n,r,i,a,o=Re,u=!1,l;function f(y){return y==null||isNaN(y=+y)?l:o(i===0?.5:(y=(a(y)-n)*i,u?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([t,e]=y,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(y){return arguments.length?(u=!!y,f):u},f.interpolator=function(y){return arguments.length?(o=y,f):o};function g(y){return function(x){var A,M;return arguments.length?([A,M]=x,o=y(A,M),f):[o(0),o(1)]}}return f.range=g(Mr),f.rangeRound=g(Nu),f.unknown=function(y){return arguments.length?(l=y,f):l},function(y){return a=y,n=y(t),r=y(e),i=n===r?0:1/(r-n),f}}function tr(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ag(){var t=Kn(Mo()(Re));return t.copy=function(){return tr(t,Ag())},Pn.apply(t,arguments)}function Eg(){var t=Uu(Mo()).domain([1,10]);return t.copy=function(){return tr(t,Eg()).base(t.base())},Pn.apply(t,arguments)}function Sg(){var t=Yu(Mo());return t.copy=function(){return tr(t,Sg()).constant(t.constant())},Pn.apply(t,arguments)}function Ju(){var t=Hu(Mo());return t.copy=function(){return tr(t,Ju()).exponent(t.exponent())},Pn.apply(t,arguments)}function PA(){return Ju.apply(null,arguments).exponent(.5)}function Mg(){var t=[],e=Re;function n(r){if(r!=null&&!isNaN(r=+r))return e((jn(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ee),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>ki(t,a/r))},n.copy=function(){return Mg(e).domain(t)},Pn.apply(n,arguments)}function No(){var t=0,e=.5,n=1,r=1,i,a,o,u,l,f=Re,g,y=!1,x;function A(C){return isNaN(C=+C)?x:(C=.5+((C=+g(C))-a)*(r*C<r*a?u:l),f(y?Math.max(0,Math.min(1,C)):C))}A.domain=function(C){return arguments.length?([t,e,n]=C,i=g(t=+t),a=g(e=+e),o=g(n=+n),u=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,A):[t,e,n]},A.clamp=function(C){return arguments.length?(y=!!C,A):y},A.interpolator=function(C){return arguments.length?(f=C,A):f};function M(C){return function(N){var I,B,z;return arguments.length?([I,B,z]=N,f=Aw(C,[I,B,z]),A):[f(0),f(.5),f(1)]}}return A.range=M(Mr),A.rangeRound=M(Nu),A.unknown=function(C){return arguments.length?(x=C,A):x},function(C){return g=C,i=C(t),a=C(e),o=C(n),u=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,A}}function Ng(){var t=Kn(No()(Re));return t.copy=function(){return tr(t,Ng())},Pn.apply(t,arguments)}function Og(){var t=Uu(No()).domain([.1,1,10]);return t.copy=function(){return tr(t,Og()).base(t.base())},Pn.apply(t,arguments)}function Dg(){var t=Yu(No());return t.copy=function(){return tr(t,Dg()).constant(t.constant())},Pn.apply(t,arguments)}function Zu(){var t=Hu(No());return t.copy=function(){return tr(t,Zu()).exponent(t.exponent())},Pn.apply(t,arguments)}function $A(){return Zu.apply(null,arguments).exponent(.5)}const WA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:zu,scaleDiverging:Ng,scaleDivergingLog:Og,scaleDivergingPow:Zu,scaleDivergingSqrt:$A,scaleDivergingSymlog:Dg,scaleIdentity:Zh,scaleImplicit:nu,scaleLinear:Ze,scaleLog:Kh,scaleOrdinal:Vu,scalePoint:GT,scalePow:Xu,scaleQuantile:ng,scaleQuantize:rg,scaleRadial:eg,scaleSequential:Ag,scaleSequentialLog:Eg,scaleSequentialPow:Ju,scaleSequentialQuantile:Mg,scaleSequentialSqrt:PA,scaleSequentialSymlog:Sg,scaleSqrt:o2,scaleSymlog:tg,scaleThreshold:ig,scaleTime:BA,scaleUtc:kA,tickFormat:Jh},Symbol.toStringTag,{value:"Module"}));function Rt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const VA=Rt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),zA=Rt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),FA=Rt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),UA=Rt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),YA=Rt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),HA=Rt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),XA=Rt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qA=Rt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),GA=Rt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),jA=Rt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Rg=Rt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),jt=t=>uw(t[t.length-1]);var Cg=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Rt);const JA=jt(Cg);var Lg=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Rt);const ZA=jt(Lg);var Ig=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Rt);const QA=jt(Ig);var Bg=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Rt);const KA=jt(Bg);var kg=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Rt);const tE=jt(kg);var Pg=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Rt);const eE=jt(Pg);var $g=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Rt);const nE=jt($g);var Wg=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Rt);const rE=jt(Wg);var Vg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Rt);const iE=jt(Vg);var zg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Rt);const aE=jt(zg);var Fg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Rt);const oE=jt(Fg);var Ug=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Rt);const sE=jt(Ug);var Yg=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Rt);const uE=jt(Yg);var Hg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Rt);const cE=jt(Hg);var Xg=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Rt);const lE=jt(Xg);var qg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Rt);const fE=jt(qg);var Gg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Rt);const dE=jt(Gg);var jg=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Rt);const hE=jt(jg);var Jg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Rt);const gE=jt(Jg);var Zg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Rt);const mE=jt(Zg);var Qg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Rt);const vE=jt(Qg);var Kg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Rt);const pE=jt(Kg);var tm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Rt);const bE=jt(tm);var em=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Rt);const yE=jt(em);var nm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Rt);const _E=jt(nm);var rm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Rt);const wE=jt(rm);var im=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Rt);const xE=jt(im);function TE(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const AE=Ou(mn(300,.5,0),mn(-240,.5,1));var EE=Ou(mn(-100,.75,.35),mn(80,1.5,.8)),SE=Ou(mn(260,.75,.35),mn(80,1.5,.8)),ga=mn();function ME(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ga.h=360*t-100,ga.s=1.5-1.5*e,ga.l=.8-.9*e,ga+""}var ma=yr(),NE=Math.PI/3,OE=Math.PI*2/3;function DE(t){var e;return t=(.5-t)*Math.PI,ma.r=255*(e=Math.sin(t))*e,ma.g=255*(e=Math.sin(t+NE))*e,ma.b=255*(e=Math.sin(t+OE))*e,ma+""}function am(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Oo(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const RE=Oo(Rt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var CE=Oo(Rt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),LE=Oo(Rt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),IE=Oo(Rt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const BE=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:pE,interpolateBrBG:JA,interpolateBuGn:aE,interpolateBuPu:oE,interpolateCividis:TE,interpolateCool:SE,interpolateCubehelixDefault:AE,interpolateGnBu:sE,interpolateGreens:bE,interpolateGreys:yE,interpolateInferno:LE,interpolateMagma:CE,interpolateOrRd:uE,interpolateOranges:xE,interpolatePRGn:ZA,interpolatePiYG:QA,interpolatePlasma:IE,interpolatePuBu:lE,interpolatePuBuGn:cE,interpolatePuOr:KA,interpolatePuRd:fE,interpolatePurples:_E,interpolateRainbow:ME,interpolateRdBu:tE,interpolateRdGy:eE,interpolateRdPu:dE,interpolateRdYlBu:nE,interpolateRdYlGn:rE,interpolateReds:wE,interpolateSinebow:DE,interpolateSpectral:iE,interpolateTurbo:am,interpolateViridis:RE,interpolateWarm:EE,interpolateYlGn:gE,interpolateYlGnBu:hE,interpolateYlOrBr:mE,interpolateYlOrRd:vE,schemeAccent:zA,schemeBlues:Kg,schemeBrBG:Cg,schemeBuGn:zg,schemeBuPu:Fg,schemeCategory10:VA,schemeDark2:FA,schemeGnBu:Ug,schemeGreens:tm,schemeGreys:em,schemeObservable10:UA,schemeOrRd:Yg,schemeOranges:im,schemePRGn:Lg,schemePaired:YA,schemePastel1:HA,schemePastel2:XA,schemePiYG:Ig,schemePuBu:Xg,schemePuBuGn:Hg,schemePuOr:Bg,schemePuRd:qg,schemePurples:nm,schemeRdBu:kg,schemeRdGy:Pg,schemeRdPu:Gg,schemeRdYlBu:$g,schemeRdYlGn:Wg,schemeReds:rm,schemeSet1:qA,schemeSet2:GA,schemeSet3:jA,schemeSpectral:Vg,schemeTableau10:Rg,schemeYlGn:Jg,schemeYlGnBu:jg,schemeYlOrBr:Zg,schemeYlOrRd:Qg},Symbol.toStringTag,{value:"Module"})),va=t=>()=>t;function kE(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function je(t,e,n){this.k=t,this.x=e,this.y=n}je.prototype={constructor:je,scale:function(t){return t===1?this:new je(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new je(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Do=new je(1,0,0);om.prototype=je.prototype;function om(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Do;return t.__zoom}function Rs(t){t.stopImmediatePropagation()}function xi(t){t.preventDefault(),t.stopImmediatePropagation()}function PE(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function $E(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function rd(){return this.__zoom||Do}function WE(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function VE(){return navigator.maxTouchPoints||"ontouchstart"in this}function zE(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function sm(){var t=PE,e=$E,n=zE,r=WE,i=VE,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Tw,f=Xi("start","zoom","end"),g,y,x,A=500,M=150,C=0,N=10;function I(W){W.property("__zoom",rd).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",nt).on("dblclick.zoom",mt).filter(i).on("touchstart.zoom",ft).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function(W,Z,U,et){var dt=W.selection?W.selection():W;dt.property("__zoom",rd),W!==dt?X(W,Z,U,et):dt.interrupt().each(function(){q(this,arguments).event(et).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},I.scaleBy=function(W,Z,U,et){I.scaleTo(W,function(){var dt=this.__zoom.k,st=typeof Z=="function"?Z.apply(this,arguments):Z;return dt*st},U,et)},I.scaleTo=function(W,Z,U,et){I.transform(W,function(){var dt=e.apply(this,arguments),st=this.__zoom,gt=U==null?P(dt):typeof U=="function"?U.apply(this,arguments):U,Q=st.invert(gt),it=typeof Z=="function"?Z.apply(this,arguments):Z;return n(z(B(st,it),gt,Q),dt,o)},U,et)},I.translateBy=function(W,Z,U,et){I.transform(W,function(){return n(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),o)},null,et)},I.translateTo=function(W,Z,U,et,dt){I.transform(W,function(){var st=e.apply(this,arguments),gt=this.__zoom,Q=et==null?P(st):typeof et=="function"?et.apply(this,arguments):et;return n(Do.translate(Q[0],Q[1]).scale(gt.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof U=="function"?-U.apply(this,arguments):-U),st,o)},et,dt)};function B(W,Z){return Z=Math.max(a[0],Math.min(a[1],Z)),Z===W.k?W:new je(Z,W.x,W.y)}function z(W,Z,U){var et=Z[0]-U[0]*W.k,dt=Z[1]-U[1]*W.k;return et===W.x&&dt===W.y?W:new je(W.k,et,dt)}function P(W){return[(+W[0][0]+ +W[1][0])/2,(+W[0][1]+ +W[1][1])/2]}function X(W,Z,U,et){W.on("start.zoom",function(){q(this,arguments).event(et).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(et).end()}).tween("zoom",function(){var dt=this,st=arguments,gt=q(dt,st).event(et),Q=e.apply(dt,st),it=U==null?P(Q):typeof U=="function"?U.apply(dt,st):U,ut=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),ht=dt.__zoom,Mt=typeof Z=="function"?Z.apply(dt,st):Z,At=l(ht.invert(it).concat(ut/ht.k),Mt.invert(it).concat(ut/Mt.k));return function(xt){if(xt===1)xt=Mt;else{var Dt=At(xt),ct=ut/Dt[2];xt=new je(ct,it[0]-Dt[0]*ct,it[1]-Dt[1]*ct)}gt.zoom(null,xt)}})}function q(W,Z,U){return!U&&W.__zooming||new lt(W,Z)}function lt(W,Z){this.that=W,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=e.apply(W,Z),this.taps=0}lt.prototype={event:function(W){return W&&(this.sourceEvent=W),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(W,Z){return this.mouse&&W!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&W!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&W!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(W){var Z=de(this.that).datum();f.call(W,this.that,new kE(W,{sourceEvent:this.sourceEvent,target:I,transform:this.that.__zoom,dispatch:f}),Z)}};function K(W,...Z){if(!t.apply(this,arguments))return;var U=q(this,Z).event(W),et=this.__zoom,dt=Math.max(a[0],Math.min(a[1],et.k*Math.pow(2,r.apply(this,arguments)))),st=nn(W);if(U.wheel)(U.mouse[0][0]!==st[0]||U.mouse[0][1]!==st[1])&&(U.mouse[1]=et.invert(U.mouse[0]=st)),clearTimeout(U.wheel);else{if(et.k===dt)return;U.mouse=[st,et.invert(st)],Vr(this),U.start()}xi(W),U.wheel=setTimeout(gt,M),U.zoom("mouse",n(z(B(et,dt),U.mouse[0],U.mouse[1]),U.extent,o));function gt(){U.wheel=null,U.end()}}function nt(W,...Z){if(x||!t.apply(this,arguments))return;var U=W.currentTarget,et=q(this,Z,!0).event(W),dt=de(W.view).on("mousemove.zoom",it,!0).on("mouseup.zoom",ut,!0),st=nn(W,U),gt=W.clientX,Q=W.clientY;xh(W.view),Rs(W),et.mouse=[st,this.__zoom.invert(st)],Vr(this),et.start();function it(ht){if(xi(ht),!et.moved){var Mt=ht.clientX-gt,At=ht.clientY-Q;et.moved=Mt*Mt+At*At>C}et.event(ht).zoom("mouse",n(z(et.that.__zoom,et.mouse[0]=nn(ht,U),et.mouse[1]),et.extent,o))}function ut(ht){dt.on("mousemove.zoom mouseup.zoom",null),Th(ht.view,et.moved),xi(ht),et.event(ht).end()}}function mt(W,...Z){if(t.apply(this,arguments)){var U=this.__zoom,et=nn(W.changedTouches?W.changedTouches[0]:W,this),dt=U.invert(et),st=U.k*(W.shiftKey?.5:2),gt=n(z(B(U,st),et,dt),e.apply(this,Z),o);xi(W),u>0?de(this).transition().duration(u).call(X,gt,et,W):de(this).call(I.transform,gt,et,W)}}function ft(W,...Z){if(t.apply(this,arguments)){var U=W.touches,et=U.length,dt=q(this,Z,W.changedTouches.length===et).event(W),st,gt,Q,it;for(Rs(W),gt=0;gt<et;++gt)Q=U[gt],it=nn(Q,this),it=[it,this.__zoom.invert(it),Q.identifier],dt.touch0?!dt.touch1&&dt.touch0[2]!==it[2]&&(dt.touch1=it,dt.taps=0):(dt.touch0=it,st=!0,dt.taps=1+!!g);g&&(g=clearTimeout(g)),st&&(dt.taps<2&&(y=it[0],g=setTimeout(function(){g=null},A)),Vr(this),dt.start())}}function J(W,...Z){if(this.__zooming){var U=q(this,Z).event(W),et=W.changedTouches,dt=et.length,st,gt,Q,it;for(xi(W),st=0;st<dt;++st)gt=et[st],Q=nn(gt,this),U.touch0&&U.touch0[2]===gt.identifier?U.touch0[0]=Q:U.touch1&&U.touch1[2]===gt.identifier&&(U.touch1[0]=Q);if(gt=U.that.__zoom,U.touch1){var ut=U.touch0[0],ht=U.touch0[1],Mt=U.touch1[0],At=U.touch1[1],xt=(xt=Mt[0]-ut[0])*xt+(xt=Mt[1]-ut[1])*xt,Dt=(Dt=At[0]-ht[0])*Dt+(Dt=At[1]-ht[1])*Dt;gt=B(gt,Math.sqrt(xt/Dt)),Q=[(ut[0]+Mt[0])/2,(ut[1]+Mt[1])/2],it=[(ht[0]+At[0])/2,(ht[1]+At[1])/2]}else if(U.touch0)Q=U.touch0[0],it=U.touch0[1];else return;U.zoom("touch",n(z(gt,Q,it),U.extent,o))}}function G(W,...Z){if(this.__zooming){var U=q(this,Z).event(W),et=W.changedTouches,dt=et.length,st,gt;for(Rs(W),x&&clearTimeout(x),x=setTimeout(function(){x=null},A),st=0;st<dt;++st)gt=et[st],U.touch0&&U.touch0[2]===gt.identifier?delete U.touch0:U.touch1&&U.touch1[2]===gt.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(gt=nn(gt,this),Math.hypot(y[0]-gt[0],y[1]-gt[1])<N)){var Q=de(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return I.wheelDelta=function(W){return arguments.length?(r=typeof W=="function"?W:va(+W),I):r},I.filter=function(W){return arguments.length?(t=typeof W=="function"?W:va(!!W),I):t},I.touchable=function(W){return arguments.length?(i=typeof W=="function"?W:va(!!W),I):i},I.extent=function(W){return arguments.length?(e=typeof W=="function"?W:va([[+W[0][0],+W[0][1]],[+W[1][0],+W[1][1]]]),I):e},I.scaleExtent=function(W){return arguments.length?(a[0]=+W[0],a[1]=+W[1],I):[a[0],a[1]]},I.translateExtent=function(W){return arguments.length?(o[0][0]=+W[0][0],o[1][0]=+W[1][0],o[0][1]=+W[0][1],o[1][1]=+W[1][1],I):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},I.constrain=function(W){return arguments.length?(n=W,I):n},I.duration=function(W){return arguments.length?(u=+W,I):u},I.interpolate=function(W){return arguments.length?(l=W,I):l},I.on=function(){var W=f.on.apply(f,arguments);return W===f?I:W},I.clickDistance=function(W){return arguments.length?(C=(W=+W)*W,I):Math.sqrt(C)},I.tapDistance=function(W){return arguments.length?(N=+W,I):N},I}const FE=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:je,zoom:sm,zoomIdentity:Do,zoomTransform:om},Symbol.toStringTag,{value:"Module"}));var Ei={exports:{}};const UE=tn(e1),YE=tn(WA),HE=tn(R2),XE=tn(qT),qE=tn(wT),GE=tn(Kx),jE=tn(z_);var iu=Math.PI,au=2*iu,ur=1e-6,JE=au-ur;function ou(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ji(){return new ou}ou.prototype=Ji.prototype={constructor:ou,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-t,l=r-e,f=a-t,g=o-e,y=f*f+g*g;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(y>ur)if(!(Math.abs(g*u-l*f)>ur)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var x=n-a,A=r-o,M=u*u+l*l,C=x*x+A*A,N=Math.sqrt(M),I=Math.sqrt(y),B=i*Math.tan((iu-Math.acos((M+y-C)/(2*N*I)))/2),z=B/I,P=B/N;Math.abs(z-1)>ur&&(this._+="L"+(t+z*f)+","+(e+z*g)),this._+="A"+i+","+i+",0,0,"+ +(g*x>f*A)+","+(this._x1=t+P*u)+","+(this._y1=e+P*l)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),u=n*Math.sin(r),l=t+o,f=e+u,g=1^a,y=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+f:(Math.abs(this._x1-l)>ur||Math.abs(this._y1-f)>ur)&&(this._+="L"+l+","+f),n&&(y<0&&(y=y%au+au),y>JE?this._+="A"+n+","+n+",0,1,"+g+","+(t-o)+","+(e-u)+"A"+n+","+n+",0,1,"+g+","+(this._x1=l)+","+(this._y1=f):y>ur&&(this._+="A"+n+","+n+",0,"+ +(y>=iu)+","+g+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function kt(t){return function(){return t}}var Te=1e-12,Tr=Math.PI,Qa=Tr/2,Gn=2*Tr;function ZE(t){return t.innerRadius}function QE(t){return t.outerRadius}function KE(t){return t.startAngle}function tS(t){return t.endAngle}function eS(t){return t&&t.padAngle}function id(t){return t>=1?Qa:t<=-1?-Qa:Math.asin(t)}function nS(t,e,n,r,i,a,o,u){var l=n-t,f=r-e,g=o-i,y=u-a,x=(g*(e-a)-y*(t-i))/(y*l-g*f);return[t+x*l,e+x*f]}function pa(t,e,n,r,i,a,o){var u=t-n,l=e-r,f=(o?a:-a)/Math.sqrt(u*u+l*l),g=f*l,y=-f*u,x=t+g,A=e+y,M=n+g,C=r+y,N=(x+M)/2,I=(A+C)/2,B=M-x,z=C-A,P=B*B+z*z,X=i-a,q=x*C-M*A,lt=(z<0?-1:1)*Math.sqrt(Math.max(0,X*X*P-q*q)),K=(q*z-B*lt)/P,nt=(-q*B-z*lt)/P,mt=(q*z+B*lt)/P,ft=(-q*B+z*lt)/P,J=K-N,G=nt-I,W=mt-N,Z=ft-I;return J*J+G*G>W*W+Z*Z&&(K=mt,nt=ft),{cx:K,cy:nt,x01:-g,y01:-y,x11:K*(i/X-1),y11:nt*(i/X-1)}}function um(){var t=ZE,e=QE,n=kt(0),r=null,i=KE,a=tS,o=eS,u=null;function l(){var f,g,y=+t.apply(this,arguments),x=+e.apply(this,arguments),A=i.apply(this,arguments)-Qa,M=a.apply(this,arguments)-Qa,C=Math.abs(M-A),N=M>A;if(u||(u=f=Ji()),x<y&&(g=x,x=y,y=g),!(x>Te))u.moveTo(0,0);else if(C>Gn-Te)u.moveTo(x*Math.cos(A),x*Math.sin(A)),u.arc(0,0,x,A,M,!N),y>Te&&(u.moveTo(y*Math.cos(M),y*Math.sin(M)),u.arc(0,0,y,M,A,N));else{var I=A,B=M,z=A,P=M,X=C,q=C,lt=o.apply(this,arguments)/2,K=lt>Te&&(r?+r.apply(this,arguments):Math.sqrt(y*y+x*x)),nt=Math.min(Math.abs(x-y)/2,+n.apply(this,arguments)),mt=nt,ft=nt,J,G;if(K>Te){var W=id(K/y*Math.sin(lt)),Z=id(K/x*Math.sin(lt));(X-=W*2)>Te?(W*=N?1:-1,z+=W,P-=W):(X=0,z=P=(A+M)/2),(q-=Z*2)>Te?(Z*=N?1:-1,I+=Z,B-=Z):(q=0,I=B=(A+M)/2)}var U=x*Math.cos(I),et=x*Math.sin(I),dt=y*Math.cos(P),st=y*Math.sin(P);if(nt>Te){var gt=x*Math.cos(B),Q=x*Math.sin(B),it=y*Math.cos(z),ut=y*Math.sin(z);if(C<Tr){var ht=X>Te?nS(U,et,it,ut,gt,Q,dt,st):[dt,st],Mt=U-ht[0],At=et-ht[1],xt=gt-ht[0],Dt=Q-ht[1],ct=1/Math.sin(Math.acos((Mt*xt+At*Dt)/(Math.sqrt(Mt*Mt+At*At)*Math.sqrt(xt*xt+Dt*Dt)))/2),_t=Math.sqrt(ht[0]*ht[0]+ht[1]*ht[1]);mt=Math.min(nt,(y-_t)/(ct-1)),ft=Math.min(nt,(x-_t)/(ct+1))}}q>Te?ft>Te?(J=pa(it,ut,U,et,x,ft,N),G=pa(gt,Q,dt,st,x,ft,N),u.moveTo(J.cx+J.x01,J.cy+J.y01),ft<nt?u.arc(J.cx,J.cy,ft,Math.atan2(J.y01,J.x01),Math.atan2(G.y01,G.x01),!N):(u.arc(J.cx,J.cy,ft,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!N),u.arc(0,0,x,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(G.cy+G.y11,G.cx+G.x11),!N),u.arc(G.cx,G.cy,ft,Math.atan2(G.y11,G.x11),Math.atan2(G.y01,G.x01),!N))):(u.moveTo(U,et),u.arc(0,0,x,I,B,!N)):u.moveTo(U,et),!(y>Te)||!(X>Te)?u.lineTo(dt,st):mt>Te?(J=pa(dt,st,gt,Q,y,-mt,N),G=pa(U,et,it,ut,y,-mt,N),u.lineTo(J.cx+J.x01,J.cy+J.y01),mt<nt?u.arc(J.cx,J.cy,mt,Math.atan2(J.y01,J.x01),Math.atan2(G.y01,G.x01),!N):(u.arc(J.cx,J.cy,mt,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!N),u.arc(0,0,y,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(G.cy+G.y11,G.cx+G.x11),N),u.arc(G.cx,G.cy,mt,Math.atan2(G.y11,G.x11),Math.atan2(G.y01,G.x01),!N))):u.arc(0,0,y,P,z,N)}if(u.closePath(),f)return u=null,f+""||null}return l.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,g=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Tr/2;return[Math.cos(g)*f,Math.sin(g)*f]},l.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:kt(+f),l):t},l.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:kt(+f),l):e},l.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:kt(+f),l):n},l.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:kt(+f),l):r},l.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:kt(+f),l):i},l.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:kt(+f),l):a},l.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:kt(+f),l):o},l.context=function(f){return arguments.length?(u=f??null,l):u},l}function cm(t){this._context=t}cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Zi(t){return new cm(t)}function lm(t){return t[0]}function fm(t){return t[1]}function Ro(){var t=lm,e=fm,n=kt(!0),r=null,i=Zi,a=null;function o(u){var l,f=u.length,g,y=!1,x;for(r==null&&(a=i(x=Ji())),l=0;l<=f;++l)!(l<f&&n(g=u[l],l,u))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(g,l,u),+e(g,l,u));if(x)return a=null,x+""||null}return o.x=function(u){return arguments.length?(t=typeof u=="function"?u:kt(+u),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:kt(+u),o):e},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:kt(!!u),o):n},o.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),o):i},o.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),o):r},o}function dm(){var t=lm,e=null,n=kt(0),r=fm,i=kt(!0),a=null,o=Zi,u=null;function l(g){var y,x,A,M=g.length,C,N=!1,I,B=new Array(M),z=new Array(M);for(a==null&&(u=o(I=Ji())),y=0;y<=M;++y){if(!(y<M&&i(C=g[y],y,g))===N)if(N=!N)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),A=y-1;A>=x;--A)u.point(B[A],z[A]);u.lineEnd(),u.areaEnd()}N&&(B[y]=+t(C,y,g),z[y]=+n(C,y,g),u.point(e?+e(C,y,g):B[y],r?+r(C,y,g):z[y]))}if(I)return u=null,I+""||null}function f(){return Ro().defined(i).curve(o).context(a)}return l.x=function(g){return arguments.length?(t=typeof g=="function"?g:kt(+g),e=null,l):t},l.x0=function(g){return arguments.length?(t=typeof g=="function"?g:kt(+g),l):t},l.x1=function(g){return arguments.length?(e=g==null?null:typeof g=="function"?g:kt(+g),l):e},l.y=function(g){return arguments.length?(n=typeof g=="function"?g:kt(+g),r=null,l):n},l.y0=function(g){return arguments.length?(n=typeof g=="function"?g:kt(+g),l):n},l.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:kt(+g),l):r},l.lineX0=l.lineY0=function(){return f().x(t).y(n)},l.lineY1=function(){return f().x(t).y(r)},l.lineX1=function(){return f().x(e).y(n)},l.defined=function(g){return arguments.length?(i=typeof g=="function"?g:kt(!!g),l):i},l.curve=function(g){return arguments.length?(o=g,a!=null&&(u=o(a)),l):o},l.context=function(g){return arguments.length?(g==null?a=u=null:u=o(a=g),l):a},l}function rS(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function iS(t){return t}function aS(){var t=iS,e=rS,n=null,r=kt(0),i=kt(Gn),a=kt(0);function o(u){var l,f=u.length,g,y,x=0,A=new Array(f),M=new Array(f),C=+r.apply(this,arguments),N=Math.min(Gn,Math.max(-Gn,i.apply(this,arguments)-C)),I,B=Math.min(Math.abs(N)/f,a.apply(this,arguments)),z=B*(N<0?-1:1),P;for(l=0;l<f;++l)(P=M[A[l]=l]=+t(u[l],l,u))>0&&(x+=P);for(e!=null?A.sort(function(X,q){return e(M[X],M[q])}):n!=null&&A.sort(function(X,q){return n(u[X],u[q])}),l=0,y=x?(N-f*z)/x:0;l<f;++l,C=I)g=A[l],P=M[g],I=C+(P>0?P*y:0)+z,M[g]={data:u[g],index:l,value:P,startAngle:C,endAngle:I,padAngle:B};return M}return o.value=function(u){return arguments.length?(t=typeof u=="function"?u:kt(+u),o):t},o.sortValues=function(u){return arguments.length?(e=u,n=null,o):e},o.sort=function(u){return arguments.length?(n=u,e=null,o):n},o.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:kt(+u),o):r},o.endAngle=function(u){return arguments.length?(i=typeof u=="function"?u:kt(+u),o):i},o.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:kt(+u),o):a},o}var hm=Qu(Zi);function gm(t){this._curve=t}gm.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Qu(t){function e(n){return new gm(t(n))}return e._curve=t,e}function Si(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Qu(n)):e()._curve},t}function oS(){return Si(Ro().curve(hm))}function sS(){var t=dm().curve(hm),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Si(n())},delete t.lineX0,t.lineEndAngle=function(){return Si(r())},delete t.lineX1,t.lineInnerRadius=function(){return Si(i())},delete t.lineY0,t.lineOuterRadius=function(){return Si(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(Qu(o)):e()._curve},t}const Ku={draw:function(t,e){var n=Math.sqrt(e/Tr);t.moveTo(n,0),t.arc(0,0,n,0,Gn)}},mm={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var vm=Math.sqrt(1/3),uS=vm*2;const pm={draw:function(t,e){var n=Math.sqrt(e/uS),r=n*vm;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}};var cS=.8908130915292852,bm=Math.sin(Tr/10)/Math.sin(7*Tr/10),lS=Math.sin(Gn/10)*bm,fS=-Math.cos(Gn/10)*bm;const ym={draw:function(t,e){var n=Math.sqrt(e*cS),r=lS*n,i=fS*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Gn*a/5,u=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-u*n),t.lineTo(u*r-l*i,l*r+u*i)}t.closePath()}},_m={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}};var Cs=Math.sqrt(3);const wm={draw:function(t,e){var n=-Math.sqrt(e/(Cs*3));t.moveTo(0,n*2),t.lineTo(-Cs*n,-n),t.lineTo(Cs*n,-n),t.closePath()}};var Xe=-.5,qe=Math.sqrt(3)/2,su=1/Math.sqrt(12),dS=(su/2+1)*3;const xm={draw:function(t,e){var n=Math.sqrt(e/dS),r=n/2,i=n*su,a=r,o=n*su+n,u=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(u,l),t.lineTo(Xe*r-qe*i,qe*r+Xe*i),t.lineTo(Xe*a-qe*o,qe*a+Xe*o),t.lineTo(Xe*u-qe*l,qe*u+Xe*l),t.lineTo(Xe*r+qe*i,Xe*i-qe*r),t.lineTo(Xe*a+qe*o,Xe*o-qe*a),t.lineTo(Xe*u+qe*l,Xe*l-qe*u),t.closePath()}};var hS=[Ku,mm,pm,_m,ym,wm,xm];function gS(){var t=kt(Ku),e=kt(64),n=null;function r(){var i;if(n||(n=i=Ji()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(t=typeof i=="function"?i:kt(i),r):t},r.size=function(i){return arguments.length?(e=typeof i=="function"?i:kt(+i),r):e},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Zn(){}function Ka(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Co(t){this._context=t}Co.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ka(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ka(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mS(t){return new Co(t)}function Tm(t){this._context=t}Tm.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ka(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vS(t){return new Tm(t)}function Am(t){this._context=t}Am.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ka(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pS(t){return new Am(t)}function Em(t,e){this._basis=new Co(t),this._beta=e}Em.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,u=-1,l;++u<=n;)l=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(r+l*a),this._beta*e[u]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const bS=function t(e){function n(r){return e===1?new Co(r):new Em(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function to(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function tc(t,e){this._context=t,this._k=(1-e)/6}tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:to(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:to(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const yS=function t(e){function n(r){return new tc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function ec(t,e){this._context=t,this._k=(1-e)/6}ec.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:to(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const _S=function t(e){function n(r){return new ec(r,e)}return n.tension=function(r){return t(+r)},n}(0);function nc(t,e){this._context=t,this._k=(1-e)/6}nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:to(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const wS=function t(e){function n(r){return new nc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function rc(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Te){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Te){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,g=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*f+t._x1*t._l23_2a-e*t._l12_2a)/g,o=(o*f+t._y1*t._l23_2a-n*t._l12_2a)/g}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function Sm(t,e){this._context=t,this._alpha=e}Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:rc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Mm=function t(e){function n(r){return e?new Sm(r,e):new tc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Nm(t,e){this._context=t,this._alpha=e}Nm.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:rc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const xS=function t(e){function n(r){return e?new Nm(r,e):new ec(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Om(t,e){this._context=t,this._alpha=e}Om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const TS=function t(e){function n(r){return e?new Om(r,e):new nc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Dm(t){this._context=t}Dm.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function AS(t){return new Dm(t)}function ad(t){return t<0?-1:1}function od(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(ad(a)+ad(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function sd(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ls(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,o-u*n,a,o)}function eo(t){this._context=t}eo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ls(this,this._t0,sd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ls(this,sd(this,n=od(this,t,e)),n);break;default:Ls(this,this._t0,n=od(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Rm(t){this._context=new Cm(t)}(Rm.prototype=Object.create(eo.prototype)).point=function(t,e){eo.prototype.point.call(this,e,t)};function Cm(t){this._context=t}Cm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function ES(t){return new eo(t)}function SS(t){return new Rm(t)}function Lm(t){this._context=t}Lm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=ud(t),i=ud(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ud(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function MS(t){return new Lm(t)}function Lo(t,e){this._context=t,this._t=e}Lo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function NS(t){return new Lo(t,.5)}function OS(t){return new Lo(t,0)}function DS(t){return new Lo(t,1)}var cd=Array.prototype.slice;function Zr(t,e){if((a=t.length)>1)for(var n=1,r,i=t[e[0]],a,o=i.length;n<a;++n){r=i,i=t[e[n]];for(var u=0;u<o;++u)i[u][1]+=i[u][0]=isNaN(r[u][1])?r[u][0]:r[u][1]}}function Qr(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function RS(t,e){return t[e]}function CS(){var t=kt([]),e=Qr,n=Zr,r=RS;function i(a){var o=t.apply(this,arguments),u,l=a.length,f=o.length,g=new Array(f),y;for(u=0;u<f;++u){for(var x=o[u],A=g[u]=new Array(l),M=0,C;M<l;++M)A[M]=C=[0,+r(a[M],x,M,a)],C.data=a[M];A.key=x}for(u=0,y=e(g);u<f;++u)g[y[u]].index=u;return n(g,y),g}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:kt(cd.call(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:kt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Qr:typeof a=="function"?a:kt(cd.call(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Zr,i):n},i}function LS(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Zr(t,e)}}function IS(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,u=0;o<i;++o)u+=t[o][n][1]||0;r[n][1]+=r[n][0]=-u/2}Zr(t,e)}}function BS(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var u=0,l=0,f=0;u<o;++u){for(var g=t[e[u]],y=g[r][1]||0,x=g[r-1][1]||0,A=(y-x)/2,M=0;M<u;++M){var C=t[e[M]],N=C[r][1]||0,I=C[r-1][1]||0;A+=N-I}l+=y,f+=A*y}i[r-1][1]+=i[r-1][0]=n,l&&(n-=f/l)}i[r-1][1]+=i[r-1][0]=n,Zr(t,e)}}function Im(t){var e=t.map(Bm);return Qr(t).sort(function(n,r){return e[n]-e[r]})}function Bm(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function kS(t){return Im(t).reverse()}function PS(t){var e=t.length,n,r,i=t.map(Bm),a=Qr(t).sort(function(g,y){return i[y]-i[g]}),o=0,u=0,l=[],f=[];for(n=0;n<e;++n)r=a[n],o<u?(o+=i[r],l.push(r)):(u+=i[r],f.push(r));return f.reverse().concat(l)}function $S(t){return Qr(t).reverse()}const WS=Object.freeze(Object.defineProperty({__proto__:null,arc:um,area:dm,curveBasis:mS,curveBasisClosed:vS,curveBasisOpen:pS,curveBundle:bS,curveCardinal:yS,curveCardinalClosed:_S,curveCardinalOpen:wS,curveCatmullRom:Mm,curveCatmullRomClosed:xS,curveCatmullRomOpen:TS,curveLinear:Zi,curveLinearClosed:AS,curveMonotoneX:ES,curveMonotoneY:SS,curveNatural:MS,curveStep:NS,curveStepAfter:DS,curveStepBefore:OS,line:Ro,pie:aS,radialArea:sS,radialLine:oS,stack:CS,stackOffsetExpand:LS,stackOffsetNone:Zr,stackOffsetSilhouette:IS,stackOffsetWiggle:BS,stackOrderAscending:Im,stackOrderDescending:kS,stackOrderInsideOut:PS,stackOrderNone:Qr,stackOrderReverse:$S,symbol:gS,symbolCircle:Ku,symbolCross:mm,symbolDiamond:pm,symbolSquare:_m,symbolStar:ym,symbolTriangle:wm,symbolWye:xm,symbols:hS},Symbol.toStringTag,{value:"Module"})),VS=tn(WS),zS=tn(BE),FS=tn(a1),US=tn(jx),YS=tn(FE);var HS=Ei.exports,ld;function XS(){return ld||(ld=1,function(t,e){(function(n,r){r(e,UE,YE,HE,XE,qE,GE,jE,VS,zS,FS,US,YS)})(HS,function(n,r,i,a,o,u,l,f,g,y,x,A,M){var C=function(s,c,d){var m=c[d];if(typeof m!="function")throw new Error("Attempt to rebind ".concat(d," which isn't a function on the source object"));return function(){for(var b=arguments.length,_=new Array(b),h=0;h<b;h++)_[h]=arguments[h];var v=m.apply(c,_);return v===c?s:v}},N=function(s,c){for(var d=arguments.length,m=new Array(d>2?d-2:0),b=2;b<d;b++)m[b-2]=arguments[b];for(var _=0,h=m;_<h.length;_++){var v=h[_];s[v]=C(s,c,v)}return s},I=function(c){return function(d){return c.reduce(function(m,b){return m&&b(m)},d)}},B=function(s,c){for(var d=arguments.length,m=new Array(d>2?d-2:0),b=2;b<d;b++)m[b-2]=arguments[b];for(var _=I(m),h=0,v=Object.keys(c);h<v.length;h++){var p=v[h],w=_(p);w&&(s[w]=C(s,c,p))}return s},z=function(s){return s.map(function(c){return typeof c=="string"?new RegExp("^".concat(c,"$")):c})},P=function(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return c=z(c),function(m){return c.every(function(b){return!b.test(m)})&&m}},X=function(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return c=z(c),function(m){return c.some(function(b){return b.test(m)})&&m}},q=function(s){return function(c){return s[c]}},lt=function(c){return c[0].toUpperCase()+c.slice(1)},K=function(s){return function(c){return s+lt(c)}};function nt(s){return s}function mt(s){}function ft(s){return typeof s=="function"?s:function(){return s}}function J(s){return typeof s=="number"&&isNaN(s)?void 0:s}function G(){var s=function(){return 10},c=mt,d=nt,m=function(h){return h!=null},b=function(h){var v=s.apply(this,arguments),p=h.slice(0,v).map(d);return h.map(function(w,T){return T>=v&&(p.shift(),p.push(d(w,T))),T<v-1||p.some(function(E){return!m(E)})?c(void 0,T):c(p,T)})};return b.period=function(){return arguments.length?(s=ft(arguments.length<=0?void 0:arguments[0]),b):s},b.accumulator=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.defined=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],b):m},b.value=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},b}function W(){var s=2,c=G().accumulator(function(m){var b=m&&r.deviation(m),_=m&&r.mean(m);return{average:_,upper:J(_+s*b),lower:J(_-s*b)}}),d=function(b){return c(b)};return d.multiplier=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},N(d,c,"period","value"),d}function Z(){var s=nt,c=function(){return 9},d=function(_){var h=[];return function(v){var p;return h.length<_&&(v!=null?h.push(v):h=[]),h.length>=_&&(p=r.mean(h)),p}},m=function(_){var h=c.apply(this,arguments),v=2/(h+1),p=d(h),w;return _.map(function(T,E){var S=s(T,E);return w===void 0?w=p(S):w=S*v+(1-v)*w,J(w)})};return m.period=function(){return arguments.length?(c=ft(arguments.length<=0?void 0:arguments[0]),m):c},m.value=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m):s},m}function U(){var s=nt,c=Z().period(12),d=Z().period(26),m=Z().period(9),b=function(h){c.value(s),d.value(s);var v=r.zip(c(h),d(h)).map(function(w){return w[0]!==void 0&&w[1]!==void 0?w[0]-w[1]:void 0}),p=m(v);return r.zip(v,p).map(function(w){return{macd:w[0],signal:w[1],divergence:w[0]!==void 0&&w[1]!==void 0?w[0]-w[1]:void 0}})};return b.value=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],b):s},B(b,c,q({period:"fastPeriod"})),B(b,d,q({period:"slowPeriod"})),B(b,m,q({period:"signalPeriod"})),b}function et(s,c){(c==null||c>s.length)&&(c=s.length);for(var d=0,m=Array(c);d<c;d++)m[d]=s[d];return m}function dt(s){if(Array.isArray(s))return s}function st(s){if(Array.isArray(s))return et(s)}function gt(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Q(s,c,d){return c=xt(c),Yt(s,_t()?Reflect.construct(c,d||[],xt(s).constructor):c.apply(s,d))}function it(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")}function ut(s,c,d){if(_t())return Reflect.construct.apply(null,arguments);var m=[null];m.push.apply(m,c);var b=new(s.bind.apply(s,m));return d&&qt(b,d.prototype),b}function ht(s,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(s,w0(m.key),m)}}function Mt(s,c,d){return c&&ht(s.prototype,c),d&&ht(s,d),Object.defineProperty(s,"prototype",{writable:!1}),s}function At(s,c){var d=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!d){if(Array.isArray(s)||(d=Ki(s))||c){d&&(s=d);var m=0,b=function(){};return{s:b,n:function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}},e:function(p){throw p},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,h=!0,v=!1;return{s:function(){d=d.call(s)},n:function(){var p=d.next();return h=p.done,p},e:function(p){v=!0,_=p},f:function(){try{h||d.return==null||d.return()}finally{if(v)throw _}}}}function xt(s){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},xt(s)}function Dt(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),c&&qt(s,c)}function ct(s){try{return Function.toString.call(s).indexOf("[native code]")!==-1}catch{return typeof s=="function"}}function _t(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_t=function(){return!!s})()}function Nt(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function at(s,c){var d=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(d!=null){var m,b,_,h,v=[],p=!0,w=!1;try{if(_=(d=d.call(s)).next,c===0){if(Object(d)!==d)return;p=!1}else for(;!(p=(m=_.call(d)).done)&&(v.push(m.value),v.length!==c);p=!0);}catch(T){w=!0,b=T}finally{try{if(!p&&d.return!=null&&(h=d.return(),Object(h)!==h))return}finally{if(w)throw b}}return v}}function Ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(s,c){if(c&&(typeof c=="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gt(s)}function qt(s,c){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,m){return d.__proto__=m,d},qt(s,c)}function pt(s,c){return dt(s)||at(s,c)||Ki(s,c)||Ut()}function te(s){return dt(s)||Nt(s)||Ki(s)||Ut()}function ie(s){return st(s)||Nt(s)||Ki(s)||ot()}function un(s,c){if(typeof s!="object"||!s)return s;var d=s[Symbol.toPrimitive];if(d!==void 0){var m=d.call(s,c);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}function w0(s){var c=un(s,"string");return typeof c=="symbol"?c:c+""}function Qi(s){"@babel/helpers - typeof";return Qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Qi(s)}function Ki(s,c){if(s){if(typeof s=="string")return et(s,c);var d={}.toString.call(s).slice(8,-1);return d==="Object"&&s.constructor&&(d=s.constructor.name),d==="Map"||d==="Set"?Array.from(s):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?et(s,c):void 0}}function ta(s){var c=typeof Map=="function"?new Map:void 0;return ta=function(d){if(d===null||!ct(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(c!==void 0){if(c.has(d))return c.get(d);c.set(d,m)}function m(){return ut(d,arguments,xt(this).constructor)}return m.prototype=Object.create(d.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),qt(m,d)},ta(s)}function x0(){var s=G().period(14),c=function(p,w){return w+(p[p.length-1]-w)/p.length},d=function(p){var w=pt(p,2),T=w[0],E=w[1];return T<E?0:T-E},m=function(p){var w=pt(p,2),T=w[0],E=w[1];return T>E?0:E-T},b=function(p,w){return w!==void 0?c(p,w):r.mean(p)},_=function(){var p,w,T;return function(E){if(!E){p!==void 0&&(p=NaN);return}if(p===void 0){p=E[0];return}var S=r.pairs([p].concat(ie(E)));w=b(S.map(d),w),T=b(S.map(m),T);var O=isNaN(p)?NaN:T/w;return J(100-100/(1+O))}},h=function(p){var w=_();return s.accumulator(w),s(p)};return N(h,s,"period","value"),h}function uc(){var s=G().accumulator(function(d){return d&&r.mean(d)}),c=function(m){return s(m)};return N(c,s,"period","value"),c}function T0(){var s=function(v,p){return v.close},c=function(v,p){return v.high},d=function(v,p){return v.low},m=G().period(5).defined(function(h){return s(h)!=null&&c(h)!=null&&d(h)!=null}).accumulator(function(h){var v=h&&r.max(h,c),p=h&&r.min(h,d),w=h&&100*(s(h[h.length-1])-p)/(v-p);return J(w)}),b=uc().period(3),_=function(v){var p=m(v),w=b(p);return p.map(function(T,E){return{k:T,d:w[E]}})};return _.closeValue=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],_):s},_.highValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.lowValue=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},B(_,m,q({period:"kPeriod"})),B(_,b,q({period:"dPeriod"})),_}function A0(){var s=function(h,v){return h.volume},c=function(h,v){return h.close},d=Z().period(13),m=G().period(2).defined(function(_){return c(_)!=null&&s(_)!=null}).accumulator(function(_){return _&&J((c(_[1])-c(_[0]))*s(_[1]))}),b=function(h){var v=m(h);return d(v)};return b.volumeValue=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],b):s},b.closeValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},N(b,d,"period"),b}function E0(){var s=.1,c=nt,d=function(b){return b.map(function(_){var h=J(c(_)*(1-s)),v=J(c(_)*(1+s));return{lower:h,upper:v}})};return d.factor=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},d.value=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],d):c},d}function S0(){var s=function(h,v){return h.close},c=function(h,v){return h.high},d=function(h,v){return h.low},m=Z().period(13),b=function(h){return m.value(s),r.zip(h,m(h)).map(function(v){var p=J(c(v[0])-v[1]),w=J(d(v[0])-v[1]);return{bullPower:p,bearPower:w}})};return b.closeValue=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],b):s},b.highValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.lowValue=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},N(b,m,"period"),b}function cc(){var s={};return s.distance=function(c,d){return d-c},s.offset=function(c,d){return c instanceof Date?new Date(c.getTime()+d):c+d},s.clampUp=function(c){return c},s.clampDown=function(c){return c},s.copy=function(){return s},s}function M0(s,c){var d=s.map(c.clampUp);return d.length,new Set(d.map(function(m){return m==null?void 0:m.valueOf()})).size,d}function lc(s){var c=this;arguments.length||(s=i.scaleIdentity());var d=cc(),m=function(_){var h=s.domain(),v=s.range(),p=d.distance(h[0],h[1]),w=d.distance(h[0],_),T=w/p,E=T*(v[1]-v[0])+v[0];return E};return m.invert=function(b){var _=s.domain(),h=s.range(),v=(b-h[0])/(h[1]-h[0]),p=d.distance(_[0],_[1]),w=v*p;return d.offset(_[0],w)},m.domain=function(){if(!arguments.length)return s.domain();var b=arguments.length<=0?void 0:arguments[0],_=d.clampUp(b[0]),h=d.clampDown(b[1]);return s.domain([_,h]),m},m.nice=function(){s.nice();var b=s.domain(),_=d.clampUp(b[0]),h=d.clampDown(b[1]);return s.domain([_,h]),m},m.ticks=function(){for(var b=arguments.length,_=new Array(b),h=0;h<b;h++)_[h]=arguments[h];var v=s.ticks.apply(c,_);return M0(v,d)},m.copy=function(){return lc(s.copy()).discontinuityProvider(d.copy())},m.discontinuityProvider=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},B(m,s,X("range","rangeRound","interpolate","clamp","tickFormat")),m}var fc=function(c,d,m,b){var _={sunday:0,monday:1,saturday:6},h=24*3600*1e3,v=h*5,p=h*7,w={},T=function(S){return c(S)===0||c(S)===6};return w.clampDown=function(E){if(E&&T(E)){var S=d.ceil(E);return c(S)===_.sunday?d.offset(S,-1):c(S)===_.monday?d.offset(S,-2):S}else return E},w.clampUp=function(E){if(E&&T(E)){var S=d.floor(E);return c(S)===_.saturday?d.offset(S,2):c(S)===_.sunday?d.offset(S,1):S}else return E},w.distance=function(E,S){E=w.clampUp(E),S=w.clampDown(S);var O=m.ceil(E);if(S<O)return S.getTime()-E.getTime();var R=O.getTime()-E.getTime(),D=m.ceil(S),L=D.getTime()-S.getTime(),$=Math.round((D.getTime()-O.getTime())/p);return $*v+R-L},w.offset=function(E,S){var O=T(E)?w.clampUp(E):E;if(S===0)return O;var R=S<0,D=S>0,L=S,$=R?b.floor(O):m.ceil(O);if(L-=$.getTime()-O.getTime(),R&&L>0||D&&L<0)return new Date(O.getTime()+S);O=R?$:d.offset($,2);var F=Math.floor(L/v);return O=d.offset(O,F*7),L-=F*v,O=new Date(O.getTime()+L),O},w.copy=function(){return w},w},N0=function(){return fc(function(s){return s.getDay()},a.timeDay,a.timeSaturday,a.timeMonday)},O0=function(){return fc(function(s){return s.getUTCDay()},a.utcDay,a.utcSaturday,a.utcMonday)},D0=function(){for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];var b=function(w,T){return w>T[0]&&w<T[1]},_=function(w,T){return w[0]>=T[0]&&w[1]<=T[1]},h={};h.distance=function(p,w){p=h.clampUp(p),w=h.clampDown(w);var T=d.filter(function(S){return _(S,[p,w])}),E=T.map(function(S){return S[1]-S[0]});return w-p-E.reduce(function(S,O){return S+O},0)};var v=function(w,T){return w instanceof Date?new Date(w.getTime()+T):w+T};return h.offset=function(p,w){if(w>0){for(var T=h.clampUp(p),E=w;E>0;){var S=d.filter(function(H){return H[0]>T}).sort(function(H,tt){return H[0]-tt[0]});if(S.length){var O=S[0],R=O[0]-T;R>E?(T=v(T,E),E=0):(T=O[1],E-=R)}else T=v(T,E),E=0}return T}else{for(var D=h.clampDown(p),L=w;L<0;){var $=d.filter(function(H){return H[1]<D}).sort(function(H,tt){return tt[0]-H[0]});if($.length){var F=$[0],V=F[1]-D;V<L?(D=v(D,L),L=0):(D=F[0],L-=V)}else D=v(D,L),L=0}return D}},h.clampUp=function(p){return d.reduce(function(w,T){return b(w,T)?T[1]:w},p)},h.clampDown=function(p){return d.reduce(function(w,T){return b(w,T)?T[0]:w},p)},h.copy=function(){return h},h},ea=24*3600*1e3,Ye="00:00:00.000",R0="SOD",C0="EOD";function dc(s){if(arguments.length!==1||typeof s!="string")throw"Expected single argument of type string";var c=function(h,v){return Number.isInteger(h)?h>=0&&h<=v:!1},d=[0,0,0,0],m=s.split(":");if(m.length<2||m.length>3)throw"Expected an argument wiht 2 or 3 colon delimited parts.";if(d[0]=c(parseInt(m[0],10),23)?parseInt(m[0],10):function(){throw"'Hours' component must be an int between 0 and 23, but was '".concat(m[0],"'")}(),d[1]=c(parseInt(m[1],10),59)?parseInt(m[1],10):function(){throw"'Minutes' component must be an int between 0 and 59, but was '".concat(m[1],"'")}(),m.length===3){var b=m[2].split(".").map(function(_){return parseInt(_,10)});d[2]=c(b[0],59)?b[0]:function(){throw"'Seconds' component must be an int between 0 and 59, but was '".concat(b[0],"'")}(),b.length===2&&(d[3]=c(b[1],999)?b[1]:function(){throw"'Miliseconds' component must be an int between 0 and 999, but was '".concat(b[1],"'")}())}return"".concat(d[0].toString(10).padStart(2,"0"),":").concat(d[1].toString(10).padStart(2,"0"),":").concat(d[2].toString(10).padStart(2,"0"),".").concat(d[3].toString(10).padStart(3,"0"))}function L0(s,c){if(arguments.length!=2||!Array.isArray(s)||s.length!==2||typeof s[0]!="string"||typeof s[1]!="string")throw"Expected argument is a single string[] of length 2.";s[0]===R0&&(s[0]=Ye),s[1]===C0&&(s[1]=Ye);var d=dc(s[0]),m=dc(s[1]);if(m!==Ye&&d>m)throw"Time range start time '".concat(d,"' must be before end time '").concat(m,"' or both must equal ").concat(Ye);var b=c.setTime(new Date(m===Ye?ea:0),m)-c.setTime(new Date(0),d),_={startTime:d,endTime:m,lenghtInMs:b};return _.isInRange=function(h){var v=c.getTimeString(h);return _.startTime<=v&&(_.endTime===Ye||_.endTime>v)},_}var nr=function(c,d){var m=c.map(function(v){return L0(v,d)}).sort(function(v,p){return v.startTime<p.startTime?-1:v.startTime>p.startTime?1:0}),b=ea-m.reduce(function(v,p){return v+p.lenghtInMs},0),_=function(p,w){if(p.getTime()===w.getTime())return 0;if(d.dayInterval(p).getTime()!==d.dayInterval(w).getTime()&&d.getStartOfNextDay(p).getTime()!==w.getTime())throw"tradingDay.totalTradingMillisecondsBetween arguments must be on the same day or intervalEnd must be the start of the next day instead: intervalStart: '".concat(p,"'; intervalEnd: '").concat(w,"'");var T=0,E=m.filter(function($){return $.endTime===Ye||d.setTime(p,$.endTime)>=p}),S=At(E),O;try{for(S.s();!(O=S.n()).done;){var R=O.value,D=d.setTime(p,R.startTime),L=R.endTime===Ye?d.getStartOfNextDay(p):d.setTime(p,R.endTime);if(p<D&&w<D)return T+d.msInterval.count(p,w);if(p<D&&(T+=d.msInterval.count(p,D)),w<L)return T;p=L}}catch($){S.e($)}finally{S.f()}return T+d.msInterval.count(p,w)},h=function(p,w){if(w===0)return[p,w];var T=d.msInterval.offset(p,w),E=w>0?m.filter(function(H){return d.setTime(p,H.startTime)>=p}):m.filter(function(H){return d.setTime(p,H.startTime)<p}).reverse();if(E.length===0)return[d.msInterval.offset(p,w),0];if(w>0){var S=At(E),O;try{for(S.s();!(O=S.n()).done;){var R=O.value,D=d.setTime(p,R.startTime);D<=T&&(w-=d.msInterval.count(p,D),p=R.endTime===Ye?d.getStartOfNextDay(p):d.setTime(p,R.endTime),T=d.msInterval.offset(p,w))}}catch(H){S.e(H)}finally{S.f()}w-=d.msInterval.count(p,T)}else{var L=At(E),$;try{for(L.s();!($=L.n()).done;){var F=$.value,V=F.endTime===Ye?d.getStartOfNextDay(p):d.setTime(p,F.endTime);T<V&&(w+=d.msInterval.count(V,p)+1,p=d.msInterval.offset(d.setTime(p,F.startTime),-1),T=d.msInterval.offset(p,w))}}catch(H){L.e(H)}finally{L.f()}w+=d.msInterval.count(T,p)}if(w!==0)throw"tradingDay.offset was called with an offset that spans more than a day";return[T,w]};return{totalTradingTimeInMiliseconds:b,nonTradingTimeRanges:m,totalTradingMillisecondsBetween:_,offset:h}},hc=function(c,d,m,b,_){var h={};return h.getTimeComponentArrayFromString=function(v){return[v.slice(0,2),v.slice(3,5),v.slice(6,8),v.slice(9,12)]},h.getTimeString=function(v){var p=m(v).map(function(R){return R.toString(10).padStart(2,"0")}),w=pt(p,4),T=w[0],E=w[1],S=w[2],O=w[3];return"".concat(T,":").concat(E,":").concat(S,".").concat(O.padStart(3,"0"))},h.setTime=function(v,p){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,T=h.getTimeComponentArrayFromString(p),E=pt(T,4),S=E[0],O=E[1],R=E[2],D=E[3];return _.offset(c(v,S,O,R,D),w)},h.getStartOfNextDay=function(v){return b.offset(b.floor(v),1)},h.getEndOfPreviousDay=function(v){return _.offset(b.floor(v),-1)},h.dayInterval=b,h.msInterval=_,h.getDay=d,h},I0=hc(function(s,c,d,m,b){return new Date(s.getFullYear(),s.getMonth(),s.getDate(),c,d,m,b)},function(s){return s.getDay()},function(s){return[s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()]},a.timeDay,a.timeMillisecond),gc=function(c,d){var m=function(p){return c[p]===void 0?[]:c[p]},b=[nr(m("Sunday"),d),nr(m("Monday"),d),nr(m("Tuesday"),d),nr(m("Wednesday"),d),nr(m("Thursday"),d),nr(m("Friday"),d),nr(m("Saturday"),d)],_=b.reduce(function(v,p){return v+p.totalTradingTimeInMiliseconds},0);if(_===0)throw"Trading pattern must yield at least 1 ms of trading time";var h={tradingDays:b,totalTradingWeekMilliseconds:_};return h.clampUp=function(v){var p=b[d.getDay(v)],w=At(p.nonTradingTimeRanges),T;try{for(w.s();!(T=w.n()).done;){var E=T.value;if(E.isInRange(v))return E.endTime===Ye?h.clampUp(d.getStartOfNextDay(v)):d.setTime(v,E.endTime)}}catch(S){w.e(S)}finally{w.f()}return v},h.clampDown=function(v){var p=b[d.getDay(v)],w=At(p.nonTradingTimeRanges),T;try{for(w.s();!(T=w.n()).done;){var E=T.value;if(E.isInRange(v))return E.startTime===Ye?h.clampDown(d.getEndOfPreviousDay(v)):d.setTime(v,E.startTime,-1)}}catch(S){w.e(S)}finally{w.f()}return v},h.distance=function(v,p){if(v.getTime()===p.getTime())return 0;var w=v<=p?[v,p,1]:[p,v,-1],T=pt(w,3),E=T[0],S=T[1],O=T[2];if(d.dayInterval(E).getTime()===d.dayInterval(S).getTime())return h.tradingDays[d.getDay(E)].totalTradingMillisecondsBetween(E,S);var R=h.tradingDays[d.getDay(E)].totalTradingMillisecondsBetween(E,d.dayInterval.offset(d.dayInterval(E),1))+h.tradingDays[d.getDay(S)].totalTradingMillisecondsBetween(d.dayInterval(S),S);return d.dayInterval.count(E,S)===1?R:(E=d.dayInterval.offset(d.dayInterval(E),1),S=d.dayInterval(S),O*d.dayInterval.range(E,S).reduce(function(D,L,$,F){var V=$<F.length-1?F[$+1]:d.dayInterval.offset(L,1),H=V-L!==ea,tt=h.tradingDays[d.getDay(L)];return D+=H?tt.totalTradingMillisecondsBetween(L,V):tt.totalTradingTimeInMiliseconds},R))},h.offset=function(v,p){v=p>=0?h.clampUp(v):h.clampDown(v);var w=function(H){return d.dayInterval.offset(H)-d.dayInterval(H)!==ea},T=function(H,tt,bt){if(bt<0){var wt=d.dayInterval(tt),yt=H.totalTradingMillisecondsBetween(wt,tt);return Math.abs(bt)<=yt?H.offset(tt,bt):[h.clampDown(d.msInterval.offset(wt,-1)),bt+yt+1]}else{var Bt=d.getStartOfNextDay(tt),ge=H.totalTradingMillisecondsBetween(tt,Bt);return bt<ge?H.offset(tt,bt):[h.clampUp(Bt),bt-ge]}};if(p===0)return v;var E=p<0?function(V,H,tt){return[h.clampDown(d.dayInterval.offset(V,-1)),H+tt]}:function(V,H,tt){return[h.clampUp(d.dayInterval.offset(V)),H-tt]},S=h.tradingDays[d.getDay(v)],O=T(S,v,p),R=pt(O,2);for(v=R[0],p=R[1];p!==0;)if(S=h.tradingDays[d.getDay(v)],w(v)){var D=T(S,v,p),L=pt(D,2);v=L[0],p=L[1]}else{var $=Math.abs(p)>=S.totalTradingTimeInMiliseconds?E(v,p,S.totalTradingTimeInMiliseconds):T(S,v,p),F=pt($,2);v=F[0],p=F[1]}return v},h.copy=function(){return h},h},B0=function(s){return gc(s,I0)},k0=hc(function(s,c,d,m,b){return new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),c,d,m,b))},function(s){return s.getUTCDay()},function(s){return[s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()]},a.utcDay,a.utcMillisecond),P0=function(s){return gc(s,k0)};function mc(){var s=[function(h){return h}],c=[0,0],d="percent",m=null,b=[],_=function(v){var p=new Array(v.length),w=At(s),T;try{for(w.s();!(T=w.n()).done;)for(var E=T.value,S=0;S<v.length;S++){var O=E(v[S],S);Array.isArray(O)?p.push.apply(p,ie(O)):p.push(O)}}catch($){w.e($)}finally{w.f()}var R=[r.min(p),r.max(p)];if(R[0]=R[0]==null?r.min(b):r.min([R[0]].concat(ie(b))),R[1]=R[1]==null?r.max(b):r.max([R[1]].concat(ie(b))),m!=null){var D=Math.max(Math.abs(R[1]-m),Math.abs(R[0]-m));R[0]=m-D,R[1]=m+D}switch(d){case"domain":{R[0]-=c[0],R[1]+=c[1];break}case"percent":{var L=R[1]-R[0];R[0]-=c[0]*L,R[1]+=c[1]*L;break}default:throw new Error("Unknown padUnit: ".concat(d))}return R};return _.accessors=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],_):s},_.pad=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.padUnit=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},_.include=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],_):b},_.symmetricalAbout=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_}function vc(){var s=[],c=[0,0],d="percent",m=null,b=[],_=mc(),h=function(w){return w!=null?w.valueOf():null},v=function(w){var T=s.map(function(E){return function(){var S=E.apply(void 0,arguments);return Array.isArray(S)?S.map(h):h(S)}});return _.accessors(T).pad(c).padUnit(d).symmetricalAbout(m!=null?m.valueOf():null).include(b.map(function(E){return E.valueOf()})),_(w).map(function(E){return new Date(E)})};return v.accessors=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],v):s},v.pad=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.padUnit=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],v):d},v.include=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],v):b},v.symmetricalAbout=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],v):m},v}function pc(){var s=1,c=20,d=.1,m=.1,b=o.randomNormal(),_=function(){for(var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,p=s/c,w=[],T=0;T<c+1;T++){w.push(v);var E=b()*Math.sqrt(p)*m+(d-m*m/2)*p;v=v*Math.exp(E)}return w};return _.period=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],_):s},_.steps=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.mu=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},_.sigma=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_.random=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],_):b},_}function $0(s){return typeof s=="function"?s:function(){return s}}function W0(){var s=new Date,c=100,d=a.timeDay,m=1,b=a.timeYear,_=1,h=null,v=function(){var D=o.randomNormal(1,.1);return Math.ceil(D()*1e3)},p=pc(),w=function(D){var L=b.offset(D,_)-D;return(d.offset(D,m)-D)/L},T=function(D,L){var $=w(D),F=p.period($)(L),V={date:D,open:F[0],high:Math.max.apply(Math,F),low:Math.min.apply(Math,F),close:F[p.steps()]};return V.volume=v(V),V},E=function(D){var L,$,F;do L=D?d.offset(D.date,m):new Date(s.getTime()),$=D?D.close:c,D=T(L,$),F=h&&!h(D);while(F);return D},S=function(){var D,L={};return L.next=function(){var $=E(D);return D=$,$},L.take=function($){return L.until(function(F,V){return!$||$<0||V===$})},L.until=function($){for(var F=[],V=0,H=E(D),tt=$&&!$(H,V);tt;)F.push(H),D=H,H=E(D),V+=1,tt=$&&!$(H,V);return F},L},O=function(D){return S().take(D)};if(O.stream=S,typeof Symbol!="function"||Qi(Symbol.iterator)!=="symbol")throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return O[Symbol.iterator]=function(){var R=S();return{next:function(){return{value:R.next(),done:!1}}}},O.startDate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],O):s},O.startPrice=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],O):c},O.interval=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],O):d},O.intervalStep=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],O):m},O.unitInterval=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],O):b},O.unitIntervalStep=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],O):_},O.filter=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],O):h},O.volume=function(){return arguments.length?(v=$0(arguments.length<=0?void 0:arguments[0]),O):v},B(O,p),O}function V0(s){var c=s.date.getDay();return!(c===0||c===6)}function z0(){var s="BTC-USD",c=null,d=null,m=null,b=function(){var h=[];c!=null&&h.push("start="+c.toISOString()),d!=null&&h.push("end="+d.toISOString()),m!=null&&h.push("granularity="+m);var v="https://api.gdax.com/products/"+s+"/candles?"+h.join("&");return u.json(v).then(function(p){return p.map(function(w){return{date:new Date(w[0]*1e3),open:w[3],high:w[2],low:w[1],close:w[4],volume:w[5]}})})};return b.product=function(_){return arguments.length?(s=_,b):s},b.start=function(_){return arguments.length?(c=_,b):c},b.end=function(_){return arguments.length?(d=_,b):d},b.granularity=function(_){return arguments.length?(m=_,b):m},b}function na(){var s=10,c=function(m){return s<=1?m.map(function(b){return[b]}):r.range(0,Math.ceil(m.length/s)).map(function(b){return m.slice(b*s,(b+1)*s)})};return c.bucketSize=function(d){return arguments.length?(s=d,c):s},c}function F0(){var s=na(),c=function(h){return h},d=function(h){return h},m=function(h){if(s.bucketSize()>=h.length)return h;var v=b(h),p=s(v),w=s(h.slice(1,h.length-1)),T=w.map(function(E,S){var O=p[S],R=r.max(O),D=O.indexOf(R);return E[D]});return[].concat([h[0]],T,[h[h.length-1]])};function b(_){var h=_.map(function(p){return[c(p),d(p)]}),v=r.range(1,h.length-1).map(function(p){var w=h[p-1],T=h[p],E=h[p+1];return .5*Math.abs((w[0]-E[0])*(T[1]-w[1])-(w[0]-T[0])*(E[1]-w[1]))});return v}return N(m,s,"bucketSize"),m.x=function(_){return arguments.length?(c=_,m):c},m.y=function(_){return arguments.length?(d=_,m):d},m}function U0(){var s=function(_){return _},c=function(_){return _},d=na(),m=function(_){if(d.bucketSize()>=_.length)return _;var h=d(_.slice(1,_.length-1)),v=_[0],p=_[_.length-1],w=[].concat([v],h,[p]),T=s(v),E=c(v),S=h.map(function(O,R){var D=r.mean(w[R+1],s),L=r.mean(w[R+1],c),$=O.map(function(tt){return[s(tt),c(tt)]}),F=$.map(function(tt){return .5*Math.abs((T-D)*(tt[1]-E)-(T-tt[0])*(L-E))}),V=F.indexOf(r.max(F)),H=$[V];return T=H[0],E=H[1],O[V]});return[].concat([_[0]],S,[_[_.length-1]])};return N(m,d,"bucketSize"),m.x=function(b){return arguments.length?(s=b,m):s},m.y=function(b){return arguments.length?(c=b,m):c},m}function Y0(){var s=na(),c=function(b){return b},d=function(b){if(s.bucketSize()>b.length)return b;var _=r.extent(b,c),h=s(b.slice(1,b.length-1)),v=h.map(function(p,w){var T={},E,S,O=!0,R=p.map(c),D=R.filter(function(L){return L===_[0]||L===_[1]}).map(function(L){return R.indexOf(L)})[0];return D!==void 0?p[D]:(R.forEach(function(L,$){T[L]===void 0&&(T[L]=0),T[L]++,T[L]>T[E]||E===void 0?(E=L,S=$,O=!0):T[L]===T[E]&&(O=!1)}),O?p[S]:p[Math.floor(p.length/2)])});return[].concat([b[0]],v,[b[b.length-1]])};return N(d,s,"bucketSize"),d.value=function(m){return arguments.length?(c=m,d):c},d}var $t=function(s){return typeof s=="function"?s:function(){return s}},Wo=function(){var s=null,c=function(T){return T.date},d=function(T){return T.open},m=function(T){return T.high},b=function(T){return T.low},_=function(T){return T.close},h="vertical",v=$t(3),p=function(T){var E=s||l.path();return T.forEach(function(S,O){var R=c(S,O),D=d(S,O),L=m(S,O),$=b(S,O),F=_(S,O),V=v(S,O)/2;h==="vertical"?(E.moveTo(R,$),E.lineTo(R,L),E.moveTo(R,D),E.lineTo(R-V,D),E.moveTo(R,F),E.lineTo(R+V,F)):(E.moveTo($,R),E.lineTo(L,R),E.moveTo(D,R),E.lineTo(D,R+V),E.moveTo(F,R),E.lineTo(F,R-V))}),s?null:E.toString()};return p.context=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],p):s},p.x=function(){return arguments.length?(c=$t(arguments.length<=0?void 0:arguments[0]),p):c},p.open=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),p):d},p.high=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),p):m},p.low=function(){return arguments.length?(b=$t(arguments.length<=0?void 0:arguments[0]),p):b},p.close=function(){return arguments.length?(_=$t(arguments.length<=0?void 0:arguments[0]),p):_},p.width=function(){return arguments.length?(v=$t(arguments.length<=0?void 0:arguments[0]),p):v},p.orient=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],p):h},p},Dr=function(){var s=null,c=function(w){return w.x},d=function(w){return w.y},m="center",b="center",_=function(w){return w.height},h=$t(3),v=function(w,T){var E=s||l.path();return w.forEach(function(S,O){var R=c.call(this,S,T||O),D=d.call(this,S,T||O),L=_.call(this,S,T||O),$=h.call(this,S,T||O),F;switch(m){case"left":F=$;break;case"right":F=0;break;case"center":F=$/2;break;default:throw new Error("Invalid horizontal alignment "+m)}var V;switch(b){case"bottom":V=-L;break;case"top":V=0;break;case"center":V=L/2;break;default:throw new Error("Invalid vertical alignment "+b)}E.rect(R-F,D-V,$,L)},this),s?null:E.toString()};return v.context=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],v):s},v.x=function(){return arguments.length?(c=$t(arguments.length<=0?void 0:arguments[0]),v):c},v.y=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),v):d},v.width=function(){return arguments.length?(h=$t(arguments.length<=0?void 0:arguments[0]),v):h},v.horizontalAlign=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],v):m},v.height=function(){return arguments.length?(_=$t(arguments.length<=0?void 0:arguments[0]),v):_},v.verticalAlign=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],v):b},v},Vo=function(){var s=null,c=function(w){return w.date},d=function(w){return w.open},m=function(w){return w.high},b=function(w){return w.low},_=function(w){return w.close},h=$t(3),v=function(w){var T=s||l.path();return w.forEach(function(E,S){var O=c(E,S),R=d(E,S),D=m(E,S),L=b(E,S),$=_(E,S),F=h(E,S),V=F/2;T.rect(O-V,R,F,$-R),T.moveTo(O,Math.min($,R)),T.lineTo(O,D),T.moveTo(O,Math.max($,R)),T.lineTo(O,L)}),s?null:T.toString()};return v.context=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],v):s},v.x=function(){return arguments.length?(c=$t(arguments.length<=0?void 0:arguments[0]),v):c},v.open=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),v):d},v.high=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),v):m},v.low=function(){return arguments.length?(b=$t(arguments.length<=0?void 0:arguments[0]),v):b},v.close=function(){return arguments.length?(_=$t(arguments.length<=0?void 0:arguments[0]),v):_},v.width=function(){return arguments.length?(h=$t(arguments.length<=0?void 0:arguments[0]),v):h},v},zo=function(){var s=null,c=function(S){return S.value},d=function(S){return S.median},m=function(S){return S.upperQuartile},b=function(S){return S.lowerQuartile},_=function(S){return S.high},h=function(S){return S.low},v="vertical",p=$t(5),w=$t(.5),T=function(S){var O=s||l.path();return S.forEach(function(R,D){var L=c(R,D),$=p(R,D),F=$/2,V=$*w(R,D),H=V/2,tt=_(R,D),bt=m(R,D),wt=d(R,D),yt=b(R,D),Bt=h(R,D),ge=yt-bt;v==="vertical"?(O.moveTo(L-H,tt),O.lineTo(L+H,tt),O.moveTo(L,tt),O.lineTo(L,bt),O.rect(L-F,bt,$,ge),O.moveTo(L-F,wt),O.lineTo(L+F,wt),O.moveTo(L,yt),O.lineTo(L,Bt),O.moveTo(L-H,Bt),O.lineTo(L+H,Bt)):(O.moveTo(Bt,L-H),O.lineTo(Bt,L+H),O.moveTo(Bt,L),O.lineTo(yt,L),O.rect(yt,L-F,-ge,$),O.moveTo(wt,L-F),O.lineTo(wt,L+F),O.moveTo(bt,L),O.lineTo(tt,L),O.moveTo(tt,L-H),O.lineTo(tt,L+H))}),s?null:O.toString()};return T.context=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],T):s},T.value=function(){return arguments.length?(c=$t(arguments.length<=0?void 0:arguments[0]),T):c},T.median=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),T):d},T.upperQuartile=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),T):m},T.lowerQuartile=function(){return arguments.length?(b=$t(arguments.length<=0?void 0:arguments[0]),T):b},T.high=function(){return arguments.length?(_=$t(arguments.length<=0?void 0:arguments[0]),T):_},T.low=function(){return arguments.length?(h=$t(arguments.length<=0?void 0:arguments[0]),T):h},T.width=function(){return arguments.length?(p=$t(arguments.length<=0?void 0:arguments[0]),T):p},T.orient=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],T):v},T.cap=function(){return arguments.length?(w=$t(arguments.length<=0?void 0:arguments[0]),T):w},T},Fo=function(){var s=null,c=function(p){return p.x},d=function(p){return p.high},m=function(p){return p.low},b="vertical",_=$t(5),h=function(p){var w=s||l.path();return p.forEach(function(T,E){var S=c(T,E),O=_(T,E),R=O/2,D=d(T,E),L=m(T,E);b==="vertical"?(w.moveTo(S-R,D),w.lineTo(S+R,D),w.moveTo(S,D),w.lineTo(S,L),w.moveTo(S-R,L),w.lineTo(S+R,L)):(w.moveTo(L,S-R),w.lineTo(L,S+R),w.moveTo(L,S),w.lineTo(D,S),w.moveTo(D,S-R),w.lineTo(D,S+R))}),s?null:w.toString()};return h.context=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],h):s},h.value=function(){return arguments.length?(c=$t(arguments.length<=0?void 0:arguments[0]),h):c},h.high=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),h):d},h.low=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),h):m},h.width=function(){return arguments.length?(_=$t(arguments.length<=0?void 0:arguments[0]),h):_},h.orient=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h},Uo=function(s){return typeof s=="function"?s:function(){return s}},Yo=1e-6,se=function(c){return c.selection()!==c},Wt=function(s,c){s=s||"g";var d=function(h,v){return v},m=null,b=function(h,v){v=v||function(D){return D};var p=h.selection(),w=se(h)?h:null,T=p.selectChildren(c==null?s:"".concat(s,".").concat(c)),E=T.data(v,d),S=E.enter().append(s).attr("class",c),O=E.exit();E=E.merge(S);var R=w||m;return R&&(E=E.transition(R).style("opacity",1),S.style("opacity",Yo),O=O.transition(R).style("opacity",Yo)),O.remove(),E.enter=function(){return S},E.exit=function(){return O},E};return b.element=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],b):s},b.className=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.key=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},b.transition=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],b):m},b},H0=function(s){var c=function(){},d=function(){return[0,0]},m=function(E,S){return[E.x,E.y]},b=s||function(T){return T},_=function(){},h=i.scaleIdentity(),v=i.scaleIdentity(),p=Wt("g","label"),w=function(E){E.each(function(S,O,R){var D=p(f.select(R[O]),S).call(_),L=D.nodes(),$=L.map(function(V,H){var tt=f.select(V).datum(),bt=m(tt,H,L),wt=[h(bt[0]),v(bt[1])],yt=d(tt,H,L);return{hidden:!1,x:wt[0],y:wt[1],width:yt[0],height:yt[1]}}),F=b($);D.attr("style",function(V,H){return"display:"+(F[H].hidden?"none":"inherit")}).attr("transform",function(V,H){return"translate("+F[H].x+", "+F[H].y+")"}).attr("layout-width",function(V,H){return F[H].width}).attr("layout-height",function(V,H){return F[H].height}).attr("anchor-x",function(V,H,tt){return $[H].x-F[H].x}).attr("anchor-y",function(V,H,tt){return $[H].y-F[H].y}),D.call(_),c(D,S,O)})};return B(w,p,X("key")),B(w,b),w.size=function(){return arguments.length?(d=Uo(arguments.length<=0?void 0:arguments[0]),w):d},w.position=function(){return arguments.length?(m=Uo(arguments.length<=0?void 0:arguments[0]),w):m},w.component=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],w):_},w.decorate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],w):c},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w},X0=function(s){var c=2,d=function(p){return p},m=Wt("text"),b=Wt("rect"),_=Wt("circle"),h=function(p){p.each(function(w,T,E){var S=E[T],O=f.select(S),R=Number(S.getAttribute("layout-width")),D=Number(S.getAttribute("layout-height")),L=b(O,[w]);L.attr("width",R).attr("height",D);var $=Number(S.getAttribute("anchor-x")),F=Number(S.getAttribute("anchor-y")),V=_(O,[w]);V.attr("r",2).attr("cx",$).attr("cy",F);var H=m(O,[w]);H.enter().attr("dy","0.9em").attr("transform","translate(".concat(c,", ").concat(c,")")),H.text(d)})};return h.padding=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.value=function(){return arguments.length?(d=Uo(arguments.length<=0?void 0:arguments[0]),h):d},h},q0=function(c,d){return!(c.x>=d.x+d.width||c.x+c.width<=d.x||c.y>=d.y+d.height||c.y+c.height<=d.y)},Ho=function(s,c){if(q0(s,c)){var d=Math.max(s.x,c.x),m=Math.min(s.x+s.width,c.x+c.width),b=Math.max(s.y,c.y),_=Math.min(s.y+s.height,c.y+c.height);return(m-d)*(_-b)}else return 0},Xo=function(c,d){return r.sum(c.map(function(m,b){return d===b?0:Ho(c[d],m)}))},$n=function(c,d,m,b,_){return{x:c,y:d,width:m,height:b,location:_}},bc=function(s){var c=s.x,d=s.y,m=s.width,b=s.height;return[$n(c,d,m,b,"bottom-right"),$n(c-m,d,m,b,"bottom-left"),$n(c-m,d-b,m,b,"top-left"),$n(c,d-b,m,b,"top-right"),$n(c,d-b/2,m,b,"middle-right"),$n(c-m/2,d,m,b,"bottom-center"),$n(c-m,d-b/2,m,b,"middle-left"),$n(c-m/2,d-b,m,b,"top-center")]},yc=function(c,d,m){return[].concat(ie(c.slice(0,d)),[m],ie(c.slice(d+1)))},G0=function(c,d){return c<d},qo=function(){var c=null,d=G0,m=function(){return 0},b,_=function(p,w){return c-m(b[w],w,b)+m(p,w,yc(b,w,p))},h=function(p,w){c||(c=r.sum(b.map(function(E,S){return m(E,S,b)})));var T=_(p,w);return d(T,c)?qo().locationScore(m).winningScore(d).score(T).rectangles(yc(b,w,p)):h};return h.rectangles=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h.score=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.winningScore=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},h.locationScore=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h},j0=function(){var s,c=function(_){return s?_.width*_.height-Ho(_,s):0},d=function(_,h,v){return Xo(v,h)+c(_)},m=function(_){var h=qo().locationScore(d).rectangles(_);return _.forEach(function(v,p){bc(v).forEach(function(w,T){h=h(w,p)})}),h.rectangles()};return m.bounds=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m):s},m},J0=function(c){return c[_c(c)]},_c=function(c){return Math.floor(Math.random()*c.length)},Z0=function(){var s=1e3,c=1,d,m=function(p){switch(p.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return p.width*p.height/8}return p.width*p.height/4},b=function(p){return d?p.width*p.height-Ho(p,d):0},_=function(p,w,T){return Xo(T,w)+b(p)+m(p)},h=function(p){for(var w=s,T=function(D,L){return Math.exp((L-D)/w)>Math.random()},E=qo().locationScore(_).winningScore(T).rectangles(p);w>0;){var S=_c(p),O=J0(bc(p[S]));E=E(O,S),w-=c}return E.rectangles()};return h.temperature=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],h):s},h.cooling=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.bounds=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},h},Q0=function(c,d){return c[r.scan(c,d)]},K0=function(s){s=s||function(d){return d};var c=function(m){m=s(m);for(var b=function(){var h=m.filter(function(w){return!w.hidden}),v=h.map(function(w,T){return[w,Xo(h,T)]}),p=Q0(v,function(w,T){return T[1]-w[1]});if(p[1]>0)p[0].hidden=!0;else return 1};!b(););return m};return B(c,s),c},tv=function(){var s=[0,0],c=function(m){return m.map(function(b,_){var h=b.x,v=b.y;return h+b.width>s[0]&&(h-=b.width),v+b.height>s[1]&&(v-=b.height),{height:b.height,width:b.width,x:h,y:v}})};return c.bounds=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],c):s},c},Jt=function(s){return typeof s=="function"?s:function(){return s}};function oi(){var s=arguments;return function(c,d){for(var m=0,b=s.length;m<b;m++)if(s[m](c,d)==null)return!1;return!0}}var si=function(s,c){switch(s){case"left":return c/2;case"right":return-c/2;default:return 0}},rr=function(s){var c=Object.assign({},s),d=function(){};return Object.keys(c).forEach(function(m){d[m]=function(){return arguments.length?(c[m]=arguments.length<=0?void 0:arguments[0],d):c[m]}}),d},He=function(){var s=function(){return 0},c=function(p){return p.x},d=function(p){return p.y},m="center",b=function(){return 5},_="vertical",h=rr({decorate:function(){},defined:function(p,w){return oi(s,c,d)(p,w)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return h.values=function(v,p){var w=b(v,p),T=si(m,w),E=h.xScale(),S=h.yScale();if(_==="vertical"){var O=S(d(v,p),p),R=S(s(v,p),p),D=E(c(v,p),p)+T;return{d:v,x:D,y:O,y0:R,width:w,height:O-R,origin:[D,O],baseOrigin:[D,R],transposedX:D,transposedY:O}}else{var L=E(d(v,p),p),$=E(s(v,p),p),F=S(c(v,p),p)+T;return{d:v,x:F,y:L,y0:$,width:w,height:L-$,origin:[L,F],baseOrigin:[$,F],transposedX:L,transposedY:F}}},h.xValues=function(){return _==="vertical"?[c]:[s,d]},h.yValues=function(){return _!=="vertical"?[c]:[s,d]},h.baseValue=function(){return arguments.length?(s=Jt(arguments.length<=0?void 0:arguments[0]),h):s},h.crossValue=function(){return arguments.length?(c=Jt(arguments.length<=0?void 0:arguments[0]),h):c},h.mainValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),h):d},h.bandwidth=function(){return arguments.length?(b=Jt(arguments.length<=0?void 0:arguments[0]),h):b},h.align=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.orient=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],h):_},h},ev="#c60",nv="#6c0",rv="#000",iv="#ddd",av="#999",ne={red:ev,green:nv,black:rv,gray:iv,darkGray:av},Go=function(){var s=He(),c=g.line().x(function(b,_){return s.values(b,_).transposedX}).y(function(b,_){return s.values(b,_).transposedY}),d=Wt("path","line"),m=function(_){se(_)&&d.transition(_),c.defined(s.defined()),_.each(function(h,v,p){var w=d(f.select(p[v]),[h]);w.enter().attr("fill","none").attr("stroke",ne.black),w.attr("d",c),s.decorate()(w,h,v)})};return B(m,s,P("baseValue","bandwidth","align")),N(m,d,"key"),N(m,c,"curve"),m},jo=function(){var s=He(),c=g.line().x(function(m,b){return s.values(m,b).transposedX}).y(function(m,b){return s.values(m,b).transposedY}),d=function(b){var _=c.context();_.beginPath(),_.strokeStyle=ne.black,_.fillStyle="transparent",s.decorate()(_,b),c.defined(s.defined())(b),_.fill(),_.stroke(),_.closePath()};return B(d,s,P("baseValue","bandwidth","align")),N(d,c,"curve","context"),d},le=function(){var s=[0,1],c=[-1,1],d=function(){};return d.domain=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},d.range=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],d):c},d},wc=function(){var s={},c={},d=null,m=function(_,h){var v=_.context();Object.keys(s).forEach(function(p){var w=s[p];if(typeof w!="function")throw new Error("Expected an attribute for ".concat(p,", found ").concat(w));var T=v.getAttribLocation(h,p);w.location(T)(_)}),Object.keys(c).forEach(function(p){var w=c[p];if(typeof w!="function")throw new Error("Expected a uniform for ".concat(p,", found ").concat(w));var T=v.getUniformLocation(h,p);w.location(T)(_)}),d!==null&&d(_)};return m.flush=function(){Object.values(s).forEach(function(b){return b.clear()}),Object.values(c).forEach(function(b){return b.clear()}),d!==null&&d.clear()},m.attribute=function(){for(var b=arguments.length,_=new Array(b),h=0;h<b;h++)_[h]=arguments[h];return _.length===1?s[_[0]]:(s[_[0]]=_[1],m)},m.uniform=function(){for(var b=arguments.length,_=new Array(b),h=0;h<b;h++)_[h]=arguments[h];return _.length===1?c[_[0]]:(c[_[0]]=_[1],m)},m.elementIndices=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},m},ze=function(s){var c=-1,d=s,m=!0,b=function(h){if(m){var v=h.context();if(Array.isArray(d))switch(d.length){case 1:v.uniform1fv(c,d);break;case 2:v.uniform2fv(c,d);break;case 3:v.uniform3fv(c,d);break;case 4:v.uniform4fv(c,d);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(d.length," provided."))}else v.uniform1f(c,d);m=!1}};return b.clear=function(){m=!0},b.location=function(){return arguments.length?(c!==(arguments.length<=0?void 0:arguments[0])&&(c=arguments.length<=0?void 0:arguments[0],m=!0),b):c},b.data=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m=!0,b):d},b},_n={POINTS:0,TRIANGLES:4},wn=function(){var s=null,c=null,d=null,m=null,b=null,_=null,h=_n.TRIANGLES,v=0,p=wc(),w=!1,T=null,E=!0,S=1,O=function(F){if(s!=null){var V=d(),H=m();if(R(c,V,H)&&(c=D(V,H),b=V,_=H,E=!1),s.useProgram(c),p.uniform("uScreen",ze([s.canvas.width/S,s.canvas.height/S])),p(O,c),v===0)p.elementIndices()==null?s.drawArrays(h,0,F):s.drawElements(h,F,s.UNSIGNED_SHORT,0);else if(p.elementIndices()==null)T.drawArraysInstancedANGLE(h,0,v,F);else{var tt=p.elementIndices().data().length;if(v!==tt)throw new Error("Expected elementIndices length ".concat(tt)+" to match subInstanceCount ".concat(v,"."));T.drawElementsInstancedANGLE(h,v,s.UNSIGNED_SHORT,0,F)}}};return O.extInstancedArrays=function(){return T},O.context=function(){for(var $=arguments.length,F=new Array($),V=0;V<$;V++)F[V]=arguments[V];return F.length?((F[0]==null||F[0]!==s)&&(p.flush(),E=!0),F[0]!=null&&F[0]!==s&&(T=F[0].getExtension("ANGLE_instanced_arrays")),s=F[0],O):s},O.buffers=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],O):p},O.vertexShader=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],O):d},O.fragmentShader=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],O):m},O.mode=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],O):h},O.subInstanceCount=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],O):v},O.debug=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],O):w},O.pixelRatio=function(){return arguments.length?(S=arguments.length<=0?void 0:arguments[0],O):S},O;function R($,F,V){return!$||E?!0:F!==b||V!==_}function D($,F){var V=L($,s.VERTEX_SHADER),H=L(F,s.FRAGMENT_SHADER),tt=s.createProgram();if(s.attachShader(tt,V),s.attachShader(tt,H),s.linkProgram(tt),w&&!s.getProgramParameter(tt,s.LINK_STATUS)){var bt=s.getProgramInfoLog(tt);throw s.deleteProgram(tt),new Error("Failed to link program : ".concat(bt,`
            Vertex Shader : `).concat($,`
            Fragment Shader : `).concat(F))}return tt}function L($,F){var V=s.createShader(F);if(s.shaderSource(V,$),s.compileShader(V),w&&!s.getShaderParameter(V,s.COMPILE_STATUS)){var H=s.getShaderInfoLog(V);throw s.deleteShader(V),new Error("Failed to compile shader : ".concat(H,`
            Shader : `).concat($))}return V}},Ht=function(s){var c=[],d=[],m=function(){return s(c.join(`
`),d.join(`
`))};function b(v,p){v.push(p)}function _(v,p,w){var T=v.indexOf(w);v.splice(T>=0?T:v.length,0,p)}function h(v,p){var w=v.indexOf(p);w===-1&&v.push(p)}return m.appendHeader=function(v){return b(c,v),m},m.insertHeader=function(v,p){return _(c,v,p),m},m.appendHeaderIfNotExists=function(v){return h(c,v),m},m.appendBody=function(v){return b(d,v),m},m.insertBody=function(v,p){return _(d,v,p),m},m.appendBodyIfNotExists=function(v){return h(d,v),m},m},Le=function(c,d){return`
precision mediump float;
float inf = 1.0 / 0.0;
`.concat(c,`
void main() {
    `).concat(d,`
}`)},Ie=function(c,d){return`
precision mediump float;
`.concat(c,`
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    `).concat(d,`
}`)},xc={header:`attribute vec4 aFillColor;
             varying vec4 vFillColor;`,body:"vFillColor = aFillColor;"},Tc={header:`attribute vec4 aStrokeColor;
             varying vec4 vStrokeColor;`,body:"vStrokeColor = aStrokeColor;"},Ac={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 2.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Ec={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 4.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Sc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Mc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Nc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Oc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Dc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 5.0);
        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Rc={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
         (isPositiveY * isExtremeY * aLowValue) +
         (isPositiveY * isNotExtremeY * aCloseValue) +
         (isNotPositiveY * isNotExtremeY * aOpenValue) +
         (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);

        float bodyThickness = (aOpenValue == aCloseValue ? 1.0 : sign(aCloseValue - aOpenValue));
        float lineWidthYDirection = (isNotExtremeY * bodyThickness * aCorner.y);

        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Cc={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
            (isPositiveY * isExtremeY * aLowValue) +
            (isPositiveY * isNotExtremeY * aCloseValue) +
            (isNotPositiveY * isNotExtremeY * aOpenValue) +
            (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = isExtremeY * aCorner.z;
        float lineWidthYDirection = isNotExtremeY * aCorner.z;

        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Lc={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aMainValue;
        attribute float aBaseValue;
        attribute vec2 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isBaseline = (1.0 - aCorner.y) / 2.0;
        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);

        float xModifier = aCorner.x * (aBandwidth) / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Ic={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isLow = (aCorner.y + 1.0) / 2.0;
        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;

        float isEdgeCorner = abs(aCorner.x);
        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;
        float lineWidthYDirection = isEdgeCorner * aCorner.z;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);
        float yModifier = (uStrokeWidth * lineWidthYDirection);`},Bc={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aCrossNextValue;
        attribute float aMainNextValue;
        attribute float aBaseValue;
        attribute float aBaseNextValue;
        attribute float aDefined;
        attribute float aDefinedNext;

        varying float vDefined;

        float when_lt(float a, float b) {
            return max(sign(b - a), 0.0);
        }

        float and(float a, float b) {
            return a * b;
        }`,body:`
        vDefined = aDefined * aDefinedNext;
        gl_Position = vec4(0, 0, 0, 1);

        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);
        float useIntercept = and(aCorner.z, hasIntercepted);

        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);
        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);

        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);
        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);

        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);
        float interceptXValue = (y0Constant - yConstant) / denominator;
        float interceptYValue = (yGradient * interceptXValue) + yConstant;

        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);

        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));
        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));
        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));`},kc={header:`
        attribute vec4 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aCapWidth;
        attribute float aHighValue;
        attribute float aUpperQuartileValue;
        attribute float aMedianValue;
        attribute float aLowerQuartileValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;
    `,body:`
        vDefined = aDefined;
        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;

        float isNonZeroY = abs(sign(aCorner.y));
        float isZeroY = 1.0 - isNonZeroY;

        float isQuartileY = isNotExtremeY * isNonZeroY;

        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;
        float isNegativeY = 1.0 - isPositiveY;

        float yValue =
          (isExtremeY * isNegativeY) * aHighValue +
          (isQuartileY * isNegativeY) * aUpperQuartileValue +
          isZeroY * aMedianValue +
          (isQuartileY * isPositiveY) * aLowerQuartileValue +
          (isExtremeY * isPositiveY) * aLowValue;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float isHorizontal = aCorner.w;
        float isVertical = 1.0 - isHorizontal;

        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;

        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;
        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;`},Pc={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float distance = length(2.0 * gl_PointCoord - 1.0);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},$c={header:`
        varying float vSize;
        varying float vDefined;

        // anterior, exterior angles
        float an = 0.628319;
        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)
        float en = 0.952000;
        vec2 ecs = vec2(0.580055, 0.814577);
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        p -= acs;
        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);
        float d = length(p) * sign(p.x);

        float distance = 1.0 + d;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Wc={header:`
        varying float vSize;
        varying float vDefined;
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float an = 3.141593 / 3.0;
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        // box
        vec2 d = abs(p) - vec2(0.9, 0.35);
        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);

        float distance = 1.0 + sdf;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Vc={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);`},zc={header:`
        varying float vSize;
        varying float vDefined;
        float a = 0.6;
        float b = 1.0;
    `,body:`
        if (vDefined < 0.5) {
            discard;
        }

        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;

        float x = abs(pointCoordTransform.x);
        float y = abs(pointCoordTransform.y);

        float X = (a * b * x) / (a * y + b * x);
        float Y = (a * b * y) / (a * y + b * x);

        float distance = length(vec2(x, y)) / length(vec2(X, Y));

        if (distance > 1.0) {
            discard;
        }
    `},Fc={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));
        float bottomEdgeDistance = pointCoordTransform.y + 0.5;
        float distance = max(topEdgesDistance, bottomEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},Uc={header:`
        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;
        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float distance = max(innerCornerDistance, outerEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},Yc={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},Hc={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},Xc={header:`
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);`},qc={header:`
        varying float vDefined;
    `,body:`
        float canFill = 0.0;
        float canStroke = 1.0;

        if (vDefined < 0.5) {
            discard;
        }`},Gc={header:"varying float vDefined;",body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }`},jc={header:"varying float vDefined;",body:`
        float canFill = 1.0;
        float canStroke = 0.0;

        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);

        if (vDefined < 0.5) {
            discard;
        }`},Jc={header:"varying vec4 vFillColor;",body:"gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);"},Zc={header:"varying vec4 vStrokeColor;",body:"gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);"},ov=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Bc.header).appendBody(Bc.body),c.appendHeader(Xc.header).appendBody(Xc.body),{vertex:function(){return s},fragment:function(){return c}}},Vt={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126};function Jo(s){switch(s){case Vt.BYTE:case Vt.UNSIGNED_BYTE:return 1;case Vt.SHORT:case Vt.UNSIGNED_SHORT:return 2;case Vt.FLOAT:return 4;default:throw new Error("Unknown type ".concat(s))}}function Qc(s){switch(s){case Vt.BYTE:return Int8Array;case Vt.UNSIGNED_BYTE:return Uint8Array;case Vt.SHORT:return Int16Array;case Vt.UNSIGNED_SHORT:return Uint16Array;case Vt.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(s))}}var ra=function(){var s=-1,c=null,d=1,m=Vt.FLOAT,b=!1,_=0,h=0,v=null,p=function(T){var E=T.context();c==null&&(c=E.createBuffer()),E.bindBuffer(E.ARRAY_BUFFER,c),E.vertexAttribPointer(s,d,m,b,_,h),E.enableVertexAttribArray(s);var S=T.extInstancedArrays();S.vertexAttribDivisorANGLE(s,v??(T.subInstanceCount()>0?1:0))};return p.location=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],p):s},p.buffer=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],p):c},p.size=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],p):d},p.type=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],p):m},p.normalized=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],p):b},p.stride=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],p):_},p.offset=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],p):h},p.divisor=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],p):v},p},sv=function(){var s=Vt.FLOAT,c=new Float32Array(0),d=function(b){var _=Qc(s);return c.length>b?c=new _(c.buffer,0,b):c.length!==b&&(c=new _(b)),c};return d.type=function(){if(!arguments.length)return s;if(s!==(arguments.length<=0?void 0:arguments[0])){s=arguments.length<=0?void 0:arguments[0];var m=Qc(s);c=new m(0)}return d},d},Kc=function(){var s=!0,c=1,d=Vt.FLOAT,m=sv(),b=function(p,w){return p},_=null,h=function(){var p=_.length,w=m.type(d)(p*c);if(c>1)for(var T=0;T<p;T++){var E=b(_[T],T);if(E.length!==c)throw new Error("Expected components array of size ".concat(c,", recieved array with length ").concat(E.length,"."));for(var S=0;S<c;S++)w[T*c+S]=E[S]}else for(var O=0;O<p;O++){var R=b(_[O],O);if(Array.isArray(R))throw new Error("Expected a single component value, recieved array with length ".concat(R.length,"."));w[O]=R}return s=!1,w};return h.dirty=function(){return s},h.clear=function(){s=!0},h.size=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],s=!0,h):c},h.type=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],s=!0,h):d},h.arrayViewFactory=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],s=!0,h):m},h.value=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],s=!0,h):b},h.data=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],s=!0,h):_},h},Lt=function(){var s=ra(),c=Kc(),d=function(b){if(s.size(d.size()).type(d.type()),s(b),!!c.dirty()){var _=c(),h=b.context();h.bindBuffer(h.ARRAY_BUFFER,s.buffer()),h.bufferData(h.ARRAY_BUFFER,_,h.DYNAMIC_DRAW)}};return d.clear=function(){s.buffer(null),c.clear()},N(d,s,"normalized","location","divisor"),N(d,c,"data","value","size","type"),d},Tt=function(s,c,d,m){for(var b=arguments.length,_=new Array(b>4?b-4:0),h=4;h<b;h++)_[h-4]=arguments[h];s[c]=function(){for(var v=arguments.length,p=new Array(v),w=0;w<v;w++)p[w]=arguments[w];var T=d[m].apply(d,_.concat(p));return T===d?s:T}},tl=function(){var s=wn().mode(_n.TRIANGLES).subInstanceCount(6),c=le(),d=le(),m=function(){},b=Lt().divisor(0).size(3).type(Vt.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);s.buffers().attribute("aCorner",b);var _=function(v){var p=ov();s.vertexShader(p.vertex()).fragmentShader(p.fragment()),c(s,"gl_Position",0),d(s,"gl_Position",1),m(s),s(v-1)};return _.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},N(_,s,"context","pixelRatio"),Tt(_,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(_,"crossNextValueAttribute",s.buffers(),"attribute","aCrossNextValue"),Tt(_,"mainValueAttribute",s.buffers(),"attribute","aMainValue"),Tt(_,"mainNextValueAttribute",s.buffers(),"attribute","aMainNextValue"),Tt(_,"baseValueAttribute",s.buffers(),"attribute","aBaseValue"),Tt(_,"baseNextValueAttribute",s.buffers(),"attribute","aBaseNextValue"),Tt(_,"definedAttribute",s.buffers(),"attribute","aDefined"),Tt(_,"definedNextAttribute",s.buffers(),"attribute","aDefinedNext"),_},el=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Ac.header).appendBody(Ac.body),c.appendHeader(Pc.header).appendBody(Pc.body),{vertex:function(){return s},fragment:function(){return c}}},nl=function(){var s=wn().mode(_n.POINTS),c=le(),d=le(),m=el(),b=function(){},_=function(v){s.vertexShader(m.vertex()).fragmentShader(m.fragment()),c(s,"gl_Position",0),d(s,"gl_Position",1),b(s),s(v)};return _.type=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],_):b},_.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},N(_,s,"context","pixelRatio"),Tt(_,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(_,"mainValueAttribute",s.buffers(),"attribute","aMainValue"),Tt(_,"sizeAttribute",s.buffers(),"attribute","aSize"),Tt(_,"definedAttribute",s.buffers(),"attribute","aDefined"),_},ui=function(){var s=1,c=function(m){m.buffers().uniform("uStrokeWidth",ze(s))};return c.lineWidth=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],c):s},c},ir=function(s){var c=null,d=s,m=!0,b=function(h){var v=h.context();c==null&&(c=v.createBuffer()),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,c),m&&(v.bufferData(v.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),v.STATIC_DRAW),m=!1)};return b.clear=function(){c=null,m=!0},b.data=function(){return arguments.length?(m=!0,d=arguments.length<=0?void 0:arguments[0],b):d},b},rl=function(){var s=wn().mode(_n.TRIANGLES).subInstanceCount(6),c=le(),d=le(),m=function(){},b=ui(),_=Lt().divisor(0).size(4).type(Vt.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);s.buffers().elementIndices(ir([0,1,2,2,3,0])).attribute("aCorner",_);var h=function(p){var w=Ht(Le),T=Ht(Ie);s.vertexShader(w).fragmentShader(T),w.appendHeader(`
            attribute vec4 aCorner;
            attribute float aCrossValue;
            attribute float aCrossNextValue;
            attribute float aMainValue;
            attribute float aMainNextValue;
            attribute float aDefined;
            attribute float aDefinedNext;

            uniform float uStrokeWidth;
            uniform vec2 uScreen;

            varying float vLength;
            varying vec2 vPosition;
        `),w.appendBody(`
            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);
            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);
        `),c(s,"value",0),c(s,"nextValue",0),d(s,"value",1),d(s,"nextValue",1),w.appendBody(`
            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;

            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);
            vec2 normal = vec2(direction.y, -direction.x);
            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));
            
            padding *= aDefined * aDefinedNext;
            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;

            gl_Position = vec4(position.x, position.y, 0.0, 1.0);

            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));
            vPosition = aCorner.xy * (uStrokeWidth / 2.0);
            vPosition.x += aCorner[3] * vLength;
        `),T.appendHeader(`
            uniform float uStrokeWidth;
            varying float vLength;
            varying vec2 vPosition;

            float canFill = 0.0;
            float canStroke = 1.0;
        `),T.appendBody(`
            vec2 position = vPosition;
            position.x -= clamp(position.x, 0.0, vLength);
            float sdf = length(position) - uStrokeWidth / 2.0;
            if (sdf > 0.5) {
                discard;
            }
        `),b(s),m(s),s(p-1)};return h.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},N(h,s,"context","pixelRatio"),N(h,b,"lineWidth"),Tt(h,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(h,"crossNextValueAttribute",s.buffers(),"attribute","aCrossNextValue"),Tt(h,"mainValueAttribute",s.buffers(),"attribute","aMainValue"),Tt(h,"mainNextValueAttribute",s.buffers(),"attribute","aMainNextValue"),Tt(h,"definedAttribute",s.buffers(),"attribute","aDefined"),Tt(h,"definedNextAttribute",s.buffers(),"attribute","aDefinedNext"),h},uv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Cc.header).appendBody(Cc.body),c.appendHeader(Hc.header).appendBody(Hc.body),{vertex:function(){return s},fragment:function(){return c}}},il=function(){var s=wn().mode(_n.TRIANGLES).subInstanceCount(18),c=le(),d=le(),m=ui(),b=function(){},_=Lt().divisor(0).size(3).type(Vt.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);s.buffers().elementIndices(ir([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",_);var h=function(p){var w=uv();s.vertexShader(w.vertex()).fragmentShader(w.fragment()),c(s,"gl_Position",0),d(s,"gl_Position",1),m(s),s.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),b(s),s(p)};return h.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},N(h,s,"context","pixelRatio"),N(h,m,"lineWidth"),Tt(h,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(h,"openValueAttribute",s.buffers(),"attribute","aOpenValue"),Tt(h,"highValueAttribute",s.buffers(),"attribute","aHighValue"),Tt(h,"lowValueAttribute",s.buffers(),"attribute","aLowValue"),Tt(h,"closeValueAttribute",s.buffers(),"attribute","aCloseValue"),Tt(h,"bandwidthAttribute",s.buffers(),"attribute","aBandwidth"),Tt(h,"definedAttribute",s.buffers(),"attribute","aDefined"),h},cv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Lc.header).appendBody(Lc.body),c.appendHeader(jc.header).appendBody(jc.body),{vertex:function(){return s},fragment:function(){return c}}},al=function(){var s=wn().mode(_n.TRIANGLES).subInstanceCount(6),c=le(),d=le(),m=function(){},b=Lt().divisor(0).size(2).type(Vt.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);s.buffers().elementIndices(ir([0,1,2,0,1,3])).attribute("aCorner",b);var _=function(v){var p=cv();s.vertexShader(p.vertex()).fragmentShader(p.fragment()),c(s,"gl_Position",0),d(s,"gl_Position",1),s.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
        `),m(s),s(v)};return _.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},N(_,s,"context","pixelRatio"),Tt(_,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(_,"mainValueAttribute",s.buffers(),"attribute","aMainValue"),Tt(_,"baseValueAttribute",s.buffers(),"attribute","aBaseValue"),Tt(_,"bandwidthAttribute",s.buffers(),"attribute","aBandwidth"),Tt(_,"definedAttribute",s.buffers(),"attribute","aDefined"),_},lv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Ic.header).appendBody(Ic.body),c.appendHeader(Gc.header).appendBody(Gc.body),{vertex:function(){return s},fragment:function(){return c}}},ol=function(){var s=wn().mode(_n.TRIANGLES).subInstanceCount(18),c=le(),d=le(),m=function(){},b=ui(),_=Lt().divisor(0).size(3).type(Vt.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);s.buffers().elementIndices(ir([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",_);var h=function(p){var w=lv();s.vertexShader(w.vertex()).fragmentShader(w.fragment()),c(s,"gl_Position",0),d(s,"gl_Position",1),b(s),s.vertexShader().appendBody(`
                gl_Position.x += xModifier / uScreen.x * 2.0;
                gl_Position.y += yModifier / uScreen.y * 2.0;
            `),m(s),s(p)};return h.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},N(h,s,"context","pixelRatio"),N(h,b,"lineWidth"),Tt(h,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(h,"highValueAttribute",s.buffers(),"attribute","aHighValue"),Tt(h,"lowValueAttribute",s.buffers(),"attribute","aLowValue"),Tt(h,"bandwidthAttribute",s.buffers(),"attribute","aBandwidth"),Tt(h,"definedAttribute",s.buffers(),"attribute","aDefined"),h},fv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Rc.header).appendBody(Rc.body),c.appendHeader(Yc.header).appendBody(Yc.body),{vertex:function(){return s},fragment:function(){return c}}},sl=function(){var s=wn().mode(_n.TRIANGLES).subInstanceCount(12),c=le(),d=le(),m=ui(),b=function(){},_=Lt().divisor(0).size(3).type(Vt.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);s.buffers().elementIndices(ir([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",_);var h=function(p){var w=fv();s.vertexShader(w.vertex()).fragmentShader(w.fragment()),c(s,"gl_Position",0),d(s,"gl_Position",1),m(s),s.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),b(s),s(p)};return h.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},N(h,s,"context","pixelRatio"),N(h,m,"lineWidth"),Tt(h,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(h,"openValueAttribute",s.buffers(),"attribute","aOpenValue"),Tt(h,"highValueAttribute",s.buffers(),"attribute","aHighValue"),Tt(h,"lowValueAttribute",s.buffers(),"attribute","aLowValue"),Tt(h,"closeValueAttribute",s.buffers(),"attribute","aCloseValue"),Tt(h,"bandwidthAttribute",s.buffers(),"attribute","aBandwidth"),Tt(h,"definedAttribute",s.buffers(),"attribute","aDefined"),h},dv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(kc.header).appendBody(kc.body),c.appendHeader(qc.header).appendBody(qc.body),{vertex:function(){return s},fragment:function(){return c}}},ul=function(){var s=wn().mode(_n.TRIANGLES).subInstanceCount(54),c=le(),d=le(),m=function(){},b=ui(),_=Lt().divisor(0).size(4).type(Vt.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);s.buffers().elementIndices(ir([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",_);var h=function(p){var w=dv();s.vertexShader(w.vertex()).fragmentShader(w.fragment()),c(s,"gl_Position",0),d(s,"gl_Position",1),b(s),s.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
            gl_Position.y += yModifier / uScreen.y * 2.0;
        `),m(s),s(p)};return h.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},N(h,s,"context","pixelRatio"),N(h,b,"lineWidth"),Tt(h,"crossValueAttribute",s.buffers(),"attribute","aCrossValue"),Tt(h,"highValueAttribute",s.buffers(),"attribute","aHighValue"),Tt(h,"upperQuartileValueAttribute",s.buffers(),"attribute","aUpperQuartileValue"),Tt(h,"medianValueAttribute",s.buffers(),"attribute","aMedianValue"),Tt(h,"lowerQuartileValueAttribute",s.buffers(),"attribute","aLowerQuartileValue"),Tt(h,"lowValueAttribute",s.buffers(),"attribute","aLowValue"),Tt(h,"bandwidthAttribute",s.buffers(),"attribute","aBandwidth"),Tt(h,"capAttribute",s.buffers(),"attribute","aCapWidth"),Tt(h,"definedAttribute",s.buffers(),"attribute","aDefined"),h},Wn=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(s>0||c<0)throw new Error("Offset values (".concat(s," & ").concat(c,") must straddle 0 "));var d=ra(),m=Kc(),b=function(h){var v=b.size()*Jo(b.type()),p=Math.abs(s)*v;if(d.offset(p).size(b.size()).type(b.type()),d(h),!!m.dirty()){var w=m(),T=c*v,E=p+w.length*Jo(b.type())+T,S=h.context();S.bindBuffer(S.ARRAY_BUFFER,d.buffer()),S.bufferData(S.ARRAY_BUFFER,E,S.DYNAMIC_DRAW),S.bufferSubData(S.ARRAY_BUFFER,p,w)}};return b.offset=function(_){if(s>_||_>c)throw new Error("Requested offset ".concat(_," exceeds bounds (").concat(s," & ").concat(c,") "));var h=function(p){d.offset((_-s)*b.size()*Jo(b.type())),d(p)};return N(h,b,"clear","location"),h},b.clear=function(){d.buffer(null),m.clear()},N(b,d,"normalized","location","divisor"),N(b,m,"data","value","size","type"),b},ia=function(){var s=le(),c=function(b){return"linear".concat(b)},d=function(b,_,h){b.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(c(h),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(c(h),"Scale;")).appendBody("".concat(_," = ").concat(_," + ").concat(c(h),"Offset;")).appendBody("".concat(_," = ").concat(_," * ").concat(c(h),"Scale;"));var v=s.domain()[1]-s.domain()[0],p=s.range()[1]-s.range()[0],w=s.range()[0]*(v/p)-s.domain()[0],T=p/v,E=[0,0,0,0],S=[1,1,1,1];E[h]=w,S[h]=T,b.buffers().uniform("".concat(c(h),"Offset"),ze(E)).uniform("".concat(c(h),"Scale"),ze(S))};return B(d,s),d},cl=function(){var s=le(),c=10;function d(_,h){return Math.log10(_)/Math.log10(h)}var m=function(h){return"log".concat(h)},b=function(h,v,p){var w="".concat(m(p),"Offset + (").concat(m(p),"Scale * clamp(log(").concat(v,") / log(").concat(m(p),"Base), -inf, inf))");h.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(m(p),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(p),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(p),"Include;")).appendHeaderIfNotExists("uniform float ".concat(m(p),"Base;")).appendBody("".concat(v," = (").concat(m(p),"Include * (").concat(w,")) + ((1.0 - ").concat(m(p),"Include) * ").concat(v,");"));var T=d(s.domain()[1],c)-d(s.domain()[0],c),E=s.range()[1]-s.range()[0],S=E/T,O=s.range()[0]-S*d(s.domain()[0],c),R=[0,0,0,0],D=[0,0,0,0],L=[0,0,0,0];R[p]=O,D[p]=S,L[p]=1,h.buffers().uniform("".concat(m(p),"Offset"),ze(R)).uniform("".concat(m(p),"Scale"),ze(D)).uniform("".concat(m(p),"Include"),ze(L)).uniform("".concat(m(p),"Base"),ze(c))};return b.base=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},B(b,s),b},ll=function(){var s=le(),c=1;function d(_,h){return Math.sign(_)*Math.pow(Math.abs(_),h)}var m=function(h){return"pow".concat(h)},b=function(h,v,p){var w="".concat(m(p),"Offset + (").concat(m(p),"Scale * sign(").concat(v,") * pow(abs(").concat(v,"), vec4(").concat(m(p),"Exp)))");h.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(m(p),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(p),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(p),"Include;")).appendHeaderIfNotExists("uniform float ".concat(m(p),"Exp;")).appendBody("".concat(v," = (").concat(m(p),"Include * (").concat(w,")) + ((1.0 - ").concat(m(p),"Include) * ").concat(v,");"));var T=d(s.domain()[1],c)-d(s.domain()[0],c),E=s.range()[1]-s.range()[0],S=E/T,O=s.range()[0]-S*d(s.domain()[0],c),R=[0,0,0,0],D=[0,0,0,0],L=[0,0,0,0];R[p]=O,D[p]=S,L[p]=1,h.buffers().uniform("".concat(m(p),"Offset"),ze(R)).uniform("".concat(m(p),"Scale"),ze(D)).uniform("".concat(m(p),"Include"),ze(L)).uniform("".concat(m(p),"Exp"),ze(c))};return b.exponent=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},B(b,s),b},hv=i.scaleLinear().copy.toString(),gv=i.scaleLog().copy.toString(),mv=i.scalePow().copy.toString(),vv=i.scaleTime().copy.toString(),Zo=i.scaleIdentity(),pv=Date.now(),fl=function(c){return c-pv},Vn=function(s){switch(s.copy.toString()){case hv:return{scale:Zo,webglScale:ia().domain(s.domain())};case vv:return{scale:fl,webglScale:ia().domain(s.domain().map(fl))};case gv:return{scale:Zo,webglScale:cl().domain(s.domain()).base(s.base())};case mv:return{scale:Zo,webglScale:ll().domain(s.domain()).exponent(s.exponent())};default:return{scale:s.copy(),webglScale:ia().domain(s.range())}}},bv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Mc.header).appendBody(Mc.body),c.appendHeader(Vc.header).appendBody(Vc.body),{vertex:function(){return s},fragment:function(){return c}}},yv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Oc.header).appendBody(Oc.body),c.appendHeader(Fc.header).appendBody(Fc.body),{vertex:function(){return s},fragment:function(){return c}}},_v=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Dc.header).appendBody(Dc.body),c.appendHeader(Uc.header).appendBody(Uc.body),{vertex:function(){return s},fragment:function(){return c}}},wv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Nc.header).appendBody(Nc.body),c.appendHeader(zc.header).appendBody(zc.body),{vertex:function(){return s},fragment:function(){return c}}},xv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Ec.header).appendBody(Ec.body),c.appendHeader($c.header).appendBody($c.body),{vertex:function(){return s},fragment:function(){return c}}},Tv=function(){var s=Ht(Le),c=Ht(Ie);return s.appendHeader(Sc.header).appendBody(Sc.body),c.appendHeader(Wc.header).appendBody(Wc.body),{vertex:function(){return s},fragment:function(){return c}}},dl=function(s){switch(s){case g.symbolCircle:return el();case g.symbolSquare:return bv();case g.symbolTriangle:return yv();case g.symbolCross:return _v();case g.symbolDiamond:return wv();case g.symbolStar:return xv();case g.symbolWye:return Tv();default:throw new Error("Unrecognised symbol: ".concat(s))}},hl=function(s){var c=ra().divisor(1),d=s,m=!0,b=function(h){if(c(h),!!m){if(!Array.isArray(d))throw new Error("Expected an array, received: ".concat(d));if(d.length!==c.size())throw new Error("Expected array of length: ".concat(c.size(),", recieved array of length: ").concat(d.length));var v=h.context();v["vertexAttrib".concat(d.length,"fv")](c.location(),d),v.disableVertexAttribArray(c.location()),m=!1}};return b.clear=function(){m=!0},b.value=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m=!0,b):d},N(b,c,"normalized","size","location"),b},Av=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],c=Lt().size(4),d=s,m=!0,b=function(h){if(h.vertexShader().appendHeaderIfNotExists(xc.header).appendBodyIfNotExists(xc.body),h.fragmentShader().appendHeaderIfNotExists(Jc.header).appendBodyIfNotExists(Jc.body),Array.isArray(d))h.buffers().attribute("aFillColor",hl(d).size(4));else if(typeof d=="function"){if(!m)return;c.value(d),h.buffers().attribute("aFillColor",c)}else throw new Error("Expected value to be an array or function, received ".concat(d));m=!1};return b.value=function(){return arguments.length?(d!==(arguments.length<=0?void 0:arguments[0])&&(d=arguments.length<=0?void 0:arguments[0],m=!0),b):d},N(b,c,"data"),b},Ev=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],c=Lt().size(4),d=s,m=!0,b=function(h){if(h.vertexShader().appendHeaderIfNotExists(Tc.header).appendBodyIfNotExists(Tc.body),h.fragmentShader().appendHeaderIfNotExists(Zc.header).appendBodyIfNotExists(Zc.body),Array.isArray(d))h.buffers().attribute("aStrokeColor",hl(d).size(4));else if(typeof d=="function"){if(!m)return;c.value(d),h.buffers().attribute("aStrokeColor",c)}else throw new Error("Expected value to be an array or function, received ".concat(d));m=!1};return b.value=function(){return arguments.length?(d!==(arguments.length<=0?void 0:arguments[0])&&(d=arguments.length<=0?void 0:arguments[0],m=!0),b):d},N(b,c,"data"),b},gl=function(){var s=He(),c=Wn(0,1),d=c.offset(1),m=Wn(0,1),b=m.offset(1),_=Wn(0,1).type(Vt.UNSIGNED_BYTE),h=_.offset(1),v=rl().crossValueAttribute(c).crossNextValueAttribute(d).mainValueAttribute(m).mainNextValueAttribute(b).definedAttribute(_).definedNextAttribute(h),p=function(D,L){return!1},w=Vn,T=[],E=null,S=null,O=function(D){var L=w(s.xScale()),$=w(s.yScale()),F=!p(T,D);F&&(T=D,_.value(function(V,H){return s.defined()(V,H)}).data(D)),(F||L.scale!==E)&&(E=L.scale,s.orient()==="vertical"?c.value(function(V,H){return L.scale(s.crossValue()(V,H))}).data(D):c.value(function(V,H){return L.scale(s.mainValue()(V,H))}).data(D)),(F||$.scale!==S)&&(S=$.scale,s.orient()==="vertical"?m.value(function(V,H){return $.scale(s.mainValue()(V,H))}).data(D):m.value(function(V,H){return $.scale(s.crossValue()(V,H))}).data(D)),v.xScale(L.webglScale).yScale($.webglScale).decorate(function(V){return s.decorate()(V,D,0)}),v(D.length)};return O.equals=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],O):p},O.scaleMapper=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],O):w},B(O,s,P("baseValue","bandwidth","align")),N(O,v,"context","lineWidth","pixelRatio"),O},ml=function(){var s=g.symbol(),c=He(),d=Wt("g","point"),m=function(h){return"translate("+h[0]+", "+h[1]+")"},b=function(h){se(h)&&d.transition(h),h.each(function(v,p,w){var T=v.filter(c.defined()),E=d(f.select(w[p]),T);E.enter().attr("transform",function(S,O){return m(c.values(S,O).origin)}).attr("fill",ne.gray).attr("stroke",ne.black).append("path"),E.attr("transform",function(S,O){return m(c.values(S,O).origin)}).select("path").attr("d",s),c.decorate()(E,v,p)})};return B(b,c,P("baseValue","bandwidth","align")),N(b,d,"key"),N(b,s,"type","size"),b},vl=function(){var s=g.symbol(),c=He(),d=function(b){var _=b.filter(c.defined()),h=s.context();_.forEach(function(v,p){h.save();var w=c.values(v,p);h.translate(w.origin[0],w.origin[1]),h.beginPath(),h.strokeStyle=ne.black,h.fillStyle=ne.gray,c.decorate()(h,v,p),s(v,p),h.fill(),h.stroke(),h.closePath(),h.restore()})};return B(d,c,P("baseValue","bandwidth","align")),N(d,s,"size","type","context"),d},Sv=function(){var s=He(),c=Jt(64),d=g.symbolCircle,m=Lt(),b=Lt(),_=Lt().type(Vt.UNSIGNED_SHORT),h=Lt().type(Vt.UNSIGNED_BYTE),v=nl().crossValueAttribute(m).mainValueAttribute(b).sizeAttribute(_).definedAttribute(h),p=function(D,L){return!1},w=Vn,T=[],E=null,S=null,O=function(D){var L=w(s.xScale()),$=w(s.yScale()),F=!p(T,D);F&&(T=D,_.value(function(V,H){return c(V,H)}).data(D),h.value(function(V,H){return s.defined()(V,H)}).data(D)),(F||L.scale!==E)&&(E=L.scale,s.orient()==="vertical"?m.value(function(V,H){return L.scale(s.crossValue()(V,H))}).data(D):m.value(function(V,H){return L.scale(s.mainValue()(V,H))}).data(D)),(F||$.scale!==S)&&(S=$.scale,s.orient()==="vertical"?b.value(function(V,H){return $.scale(s.mainValue()(V,H))}).data(D):b.value(function(V,H){return $.scale(s.crossValue()(V,H))}).data(D)),v.xScale(L.webglScale).yScale($.webglScale).type(dl(d)).decorate(function(V){return s.decorate()(V,D,0)}),v(D.length)};return O.size=function(){return arguments.length?(c=Jt(arguments.length<=0?void 0:arguments[0]),O):c},O.type=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],O):d},O.equals=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],O):p},O.scaleMapper=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],O):w},B(O,s,P("baseValue","bandwidth","align")),N(O,v,"context","pixelRatio"),O},Mv=function(){var s=Dr().x(0).y(0),c=He(),d=Wt("g","bar"),m=function(p){return c.orient()==="vertical"?p.height:p.width},b=function(p){return c.orient()==="vertical"?p.width:p.height},_=function(p){return"translate("+p[0]+", "+p[1]+")"},h=function(p){se(p)&&d.transition(p),p.each(function(w,T,E){var S=c.orient();if(S!=="vertical"&&S!=="horizontal")throw new Error("The bar series does not support an orientation of "+S);var O=w.filter(c.defined()),R=O.map(c.values);s.width(0).height(0),c.orient()==="vertical"?(s.verticalAlign("top"),s.horizontalAlign("center")):(s.horizontalAlign("right"),s.verticalAlign("center"));var D=d(f.select(E[T]),O);D.enter().attr("transform",function(L,$){return _(R[$].baseOrigin)}).attr("class","bar "+c.orient()).attr("fill",ne.darkGray).append("path").attr("d",function(L,$){return b(s)(R[$].width),s([L])}),D.attr("transform",function(L,$){return _(R[$].origin)}).select("path").attr("d",function(L,$){return b(s)(R[$].width),m(s)(-R[$].height),s([L])}),c.decorate()(D,O,T)})};return B(h,c),N(h,d,"key"),h},Nv=function(){var s=He(),c=Dr().x(0).y(0),d=function(h){return s.orient()==="vertical"?h.height:h.width},m=function(h){return s.orient()==="vertical"?h.width:h.height},b=function(h){var v=c.context(),p=h.filter(s.defined()),w=p.map(s.values);s.orient()==="vertical"?(c.verticalAlign("top"),c.horizontalAlign("center")):(c.horizontalAlign("right"),c.verticalAlign("center")),w.forEach(function(T,E){v.save(),v.beginPath(),v.translate(T.origin[0],T.origin[1]),v.fillStyle=ne.darkGray,v.strokeStyle="transparent",s.decorate()(v,T.d,E),d(c)(-T.height),m(c)(T.width),c([T]),v.fill(),v.stroke(),v.closePath(),v.restore()})};return B(b,s),N(b,c,"context"),b},Ov=function(){var s=He(),c=Lt(),d=Lt(),m=Lt(),b=Lt().type(Vt.UNSIGNED_SHORT),_=Lt().type(Vt.UNSIGNED_BYTE),h=al().crossValueAttribute(c).mainValueAttribute(d).baseValueAttribute(m).bandwidthAttribute(b).definedAttribute(_),v=function(R,D){return!1},p=Vn,w=[],T=null,E=null,S=function(R){if(s.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(s.orient()));var D=p(s.xScale()),L=p(s.yScale()),$=!v(w,R);$&&(w=R,b.value(function(F,V){return s.bandwidth()(F,V)}).data(R),_.value(function(F,V){return s.defined()(F,V)}).data(R)),($||D.scale!==T)&&(T=D.scale,c.value(function(F,V){return D.scale(s.crossValue()(F,V))}).data(R)),($||L.scale!==E)&&(E=L.scale,m.value(function(F,V){return L.scale(s.baseValue()(F,V))}).data(R),d.value(function(F,V){return L.scale(s.mainValue()(F,V))}).data(R)),h.xScale(D.webglScale).yScale(L.webglScale).decorate(function(F){return s.decorate()(F,R,0)}),h(R.length)};return S.equals=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],S):v},S.scaleMapper=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],S):p},B(S,s,P("align")),N(S,h,"context","pixelRatio"),S},Qo=function(){var s=function(p){return p.high},c=function(p){return p.low},d=function(p){return p.cross},m="vertical",b="center",_=function(){return 5},h=rr({decorate:function(){},defined:function(p,w){return oi(c,s,d)(p,w)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return h.values=function(v,p){var w=_(v,p),T=si(b,w),E=h.xScale(),S=h.yScale();if(m==="vertical"){var O=S(s(v,p));return{origin:[E(d(v,p))+T,O],high:0,low:S(c(v,p))-O,width:w}}else{var R=E(c(v,p));return{origin:[R,S(d(v,p))+T],high:E(s(v,p))-R,low:0,width:w}}},h.xValues=function(){return m==="vertical"?[d]:[s,c]},h.yValues=function(){return m!=="vertical"?[d]:[s,c]},h.orient=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.lowValue=function(){return arguments.length?(c=Jt(arguments.length<=0?void 0:arguments[0]),h):c},h.highValue=function(){return arguments.length?(s=Jt(arguments.length<=0?void 0:arguments[0]),h):s},h.crossValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),h):d},h.bandwidth=function(){return arguments.length?(_=Jt(arguments.length<=0?void 0:arguments[0]),h):_},h.align=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h},Dv=function(){var s=Qo(),c=Wt("g","error-bar"),d=Fo().value(0),m=function(v){return function(p){return se(v)?p.transition(v):p}},b=function(v){return"translate("+v.origin[0]+", "+v.origin[1]+")"},_=function(v){se(v)&&c.transition(v);var p=m(v);v.each(function(w,T,E){var S=w.filter(s.defined()),O=S.map(s.values),R=c(f.select(E[T]),S);R.enter().attr("stroke",ne.black).attr("fill",ne.gray).attr("transform",function(D,L){return b(s.values(D,L))+" scale(1e-6, 1)"}).append("path"),d.orient(s.orient()),R.each(function(D,L,$){var F=O[L];d.high(F.high).low(F.low).width(F.width),p(f.select($[L])).attr("transform",b(F)+" scale(1)").select("path").attr("d",d([D]))}),s.decorate()(R,w,T)})};return B(_,s),N(_,c,"key"),_},Rv=function(){var s=Qo(),c=Fo().value(0),d=function(b){var _=b.filter(s.defined()),h=c.context();c.orient(s.orient()),_.forEach(function(v,p){h.save();var w=s.values(v,p);h.translate(w.origin[0],w.origin[1]),h.beginPath(),h.strokeStyle=ne.black,h.fillStyle=ne.gray,s.decorate()(h,v,p),c.high(w.high).width(w.width).low(w.low)([v]),h.fill(),h.stroke(),h.closePath(),h.restore()})};return B(d,s),N(d,c,"context"),d},Cv=function(){var s=Qo(),c=Lt(),d=Lt(),m=Lt(),b=Lt().type(Vt.UNSIGNED_SHORT),_=Lt().type(Vt.UNSIGNED_BYTE),h=ol().crossValueAttribute(c).highValueAttribute(d).lowValueAttribute(m).bandwidthAttribute(b).definedAttribute(_),v=function(R,D){return!1},p=Vn,w=[],T=null,E=null,S=function(R){if(s.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(s.orient()));var D=p(s.xScale()),L=p(s.yScale()),$=!v(w,R);$&&(w=R,b.value(function(F,V){return s.bandwidth()(F,V)}).data(R),_.value(function(F,V){return s.defined()(F,V)}).data(R)),($||D.scale!==T)&&(T=D.scale,c.value(function(F,V){return D.scale(s.crossValue()(F,V))}).data(R)),($||L.scale!==E)&&(E=L.scale,d.value(function(F,V){return L.scale(s.highValue()(F,V))}).data(R),m.value(function(F,V){return L.scale(s.lowValue()(F,V))}).data(R)),h.xScale(D.webglScale).yScale(L.webglScale).decorate(function(F){return s.decorate()(F,R,0)}),h(R.length)};return S.equals=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],S):v},S.scaleMapper=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],S):p},B(S,s,P("align")),N(S,h,"context","lineWidth","pixelRatio"),S},Lv=function(){var s=He(),c=g.area(),d=Wt("path","area"),m=function(_){se(_)&&d.transition(_),c.defined(s.defined()),_.each(function(h,v,p){var w=h.map(s.values);c.x(function(S,O){return w[O].transposedX}).y(function(S,O){return w[O].transposedY});var T=s.orient()==="vertical"?"y":"x";c[T+"0"](function(S,O){return w[O].y0}),c[T+"1"](function(S,O){return w[O].y});var E=d(f.select(p[v]),[h]);E.enter().attr("fill",ne.gray),E.attr("d",c),s.decorate()(E,h,v)})};return B(m,s,P("bandwidth","align")),N(m,d,"key"),N(m,c,"curve"),m},Iv=function(){var s=He(),c=g.area(),d=function(b){var _=c.context();c.defined(s.defined());var h=b.map(s.values);c.x(function(p,w){return h[w].transposedX}).y(function(p,w){return h[w].transposedY});var v=s.orient()==="vertical"?"y":"x";c[v+"0"](function(p,w){return h[w].y0}),c[v+"1"](function(p,w){return h[w].y}),_.beginPath(),_.fillStyle=ne.gray,_.strokeStyle="transparent",s.decorate()(_,b),c(b),_.fill(),_.stroke(),_.closePath()};return B(d,s,P("bandwidth","align")),N(d,c,"curve","context"),d},Bv=function(){var s=He(),c=Wn(0,1),d=c.offset(1),m=Wn(0,1),b=m.offset(1),_=Wn(0,1),h=_.offset(1),v=Wn(0,1).type(Vt.UNSIGNED_BYTE),p=v.offset(1),w=tl().crossValueAttribute(c).crossNextValueAttribute(d).mainValueAttribute(m).mainNextValueAttribute(b).baseValueAttribute(_).baseNextValueAttribute(h).definedAttribute(v).definedNextAttribute(p),T=function($,F){return!1},E=Vn,S=[],O=null,R=null,D=function($){if(s.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(s.orient()));var F=E(s.xScale()),V=E(s.yScale()),H=!T(S,$);H&&(S=$,v.value(function(tt,bt){return s.defined()(tt,bt)}).data($)),(H||F.scale!==O)&&(O=F.scale,c.value(function(tt,bt){return F.scale(s.crossValue()(tt,bt))}).data($)),(H||V.scale!==R)&&(R=V.scale,_.value(function(tt,bt){return V.scale(s.baseValue()(tt,bt))}).data($),m.value(function(tt,bt){return V.scale(s.mainValue()(tt,bt))}).data($)),w.xScale(F.webglScale).yScale(V.webglScale).decorate(function(tt){return s.decorate()(tt,$,0)}),w($.length)};return D.equals=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],D):T},D.scaleMapper=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],D):E},B(D,s,P("bandwidth","align")),N(D,w,"context","pixelRatio"),D},Ko=function(){var s,c=function(T){return T.date},d=function(T){return T.open},m=function(T){return T.high},b=function(T){return T.low},_=function(T){return T.close},h=function(){return 5},v="center",p=function(T,E){return s.xScale()(c(T,E))};return s=rr({decorate:function(){},defined:function(T,E){return oi(c,d,b,m,_)(T,E)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()}),s.values=function(w,T){var E=_(w,T),S=d(w,T),O=h(w,T),R=si(v,O),D="";return E>S?D="up":E<S&&(D="down"),{cross:p(w,T)+R,open:s.yScale()(S),high:s.yScale()(m(w,T)),low:s.yScale()(b(w,T)),close:s.yScale()(E),width:O,direction:D}},s.xValues=function(){return[c]},s.yValues=function(){return[d,m,b,_]},s.crossValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],s):c},s.openValue=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],s):d},s.highValue=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],s):m},s.lowValue=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],s):b},s.yValue=s.closeValue=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],s):_},s.bandwidth=function(){return arguments.length?(h=Jt(arguments.length<=0?void 0:arguments[0]),s):h},s.align=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],s):v},s},pl=function(s,c){var d=Ko(),m=Wt("g",c),b=function(p){return"translate("+p.cross+", "+p.high+")"},_=function(p){return function(w){return se(p)?w.transition(p):w}},h=function(p){se(p)&&m.transition(p);var w=_(p);p.each(function(T,E,S){var O=T.filter(d.defined()),R=m(f.select(S[E]),O);R.enter().attr("transform",function(D,L){return b(d.values(D,L))+" scale(1e-6, 1)"}).append("path"),R.each(function(D,L,$){var F=d.values(D,L),V=F.direction==="up"?ne.green:ne.red,H=w(f.select($[L])).attr("class",c+" "+F.direction).attr("stroke",V).attr("fill",V).attr("transform",function(){return b(F)+" scale(1)"});s.x(0).width(F.width).open(function(){return F.open-F.high}).high(0).low(function(){return F.low-F.high}).close(function(){return F.close-F.high}),H.select("path").attr("d",s([D]))}),d.decorate()(R,T,E)})};return N(h,m,"key"),B(h,d),h},kv=function(){return pl(Vo(),"candlestick")},bl=function(s){var c=Ko(),d=function(b){var _=b.filter(c.defined()),h=s.context();_.forEach(function(v,p){h.save();var w=c.values(v,p);h.translate(w.cross,w.high),h.beginPath(),s.x(0).open(function(){return w.open-w.high}).width(w.width).high(0).low(function(){return w.low-w.high}).close(function(){return w.close-w.high})([v]);var T=w.direction==="up"?ne.green:ne.red;h.strokeStyle=T,h.fillStyle=T,c.decorate()(h,v,p),h.fill(),h.stroke(),h.closePath(),h.restore()})};return N(d,s,"context"),B(d,c),d},Pv=function(){return bl(Vo())},yl=function(s){var c=Ko(),d=Lt(),m=Lt(),b=Lt(),_=Lt(),h=Lt(),v=Lt().type(Vt.UNSIGNED_SHORT),p=Lt().type(Vt.UNSIGNED_BYTE);s.crossValueAttribute(d).openValueAttribute(m).highValueAttribute(b).lowValueAttribute(_).closeValueAttribute(h).bandwidthAttribute(v).definedAttribute(p);var w=function(L,$){return!1},T=Vn,E=[],S=null,O=null,R=function(L){var $=T(c.xScale()),F=T(c.yScale()),V=!w(E,L);V&&(E=L,v.value(function(H,tt){return c.bandwidth()(H,tt)}).data(L),p.value(function(H,tt){return c.defined()(H,tt)}).data(L)),(V||$.scale!==S)&&(S=$.scale,d.value(function(H,tt){return $.scale(c.crossValue()(H,tt))}).data(L)),(V||F.scale!==O)&&(O=F.scale,m.value(function(H,tt){return F.scale(c.openValue()(H,tt))}).data(L),b.value(function(H,tt){return F.scale(c.highValue()(H,tt))}).data(L),_.value(function(H,tt){return F.scale(c.lowValue()(H,tt))}).data(L),h.value(function(H,tt){return F.scale(c.closeValue()(H,tt))}).data(L)),s.xScale($.webglScale).yScale(F.webglScale).decorate(function(H){return c.decorate()(H,L,0)}),s(L.length)};return R.equals=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],R):w},R.scaleMapper=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],R):T},B(R,c,P("align")),N(R,s,"context","lineWidth","pixelRatio"),R},$v=function(){return yl(sl())},ts=function(){var s=function(E){return E.upperQuartile},c=function(E){return E.lowerQuartile},d=function(E){return E.high},m=function(E){return E.low},b=function(E){return E.value},_=function(E){return E.median},h="vertical",v="center",p=function(){return 5},w=rr({decorate:function(){},defined:function(E,S){return oi(m,d,c,s,b,_)(E,S)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return w.values=function(T,E){var S=p(T,E),O=si(v,S),R=w.xScale(),D=w.yScale();if(h==="vertical"){var L=D(d(T,E));return{origin:[R(b(T,E))+O,L],high:0,upperQuartile:D(s(T,E))-L,median:D(_(T,E))-L,lowerQuartile:D(c(T,E))-L,low:D(m(T,E))-L,width:S}}else{var $=R(m(T,E));return{origin:[$,D(b(T,E))+O],high:R(d(T,E))-$,upperQuartile:R(s(T,E))-$,median:R(_(T,E))-$,lowerQuartile:R(c(T,E))-$,low:0,width:S}}},w.xValues=function(){return h==="vertical"?[b]:[s,c,d,m,_]},w.yValues=function(){return h!=="vertical"?[b]:[s,c,d,m,_]},w.orient=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.lowerQuartileValue=function(){return arguments.length?(c=Jt(arguments.length<=0?void 0:arguments[0]),w):c},w.upperQuartileValue=function(){return arguments.length?(s=Jt(arguments.length<=0?void 0:arguments[0]),w):s},w.lowValue=function(){return arguments.length?(m=Jt(arguments.length<=0?void 0:arguments[0]),w):m},w.highValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),w):d},w.crossValue=function(){return arguments.length?(b=Jt(arguments.length<=0?void 0:arguments[0]),w):b},w.medianValue=function(){return arguments.length?(_=Jt(arguments.length<=0?void 0:arguments[0]),w):_},w.bandwidth=function(){return arguments.length?(p=Jt(arguments.length<=0?void 0:arguments[0]),w):p},w.align=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w},Wv=function(){var s=ts(),c=Wt("g","box-plot"),d=zo().value(0),m=function(v){return function(p){return se(v)?p.transition(v):p}},b=function(v){return"translate("+v.origin[0]+", "+v.origin[1]+")"},_=function(v){se(v)&&c.transition(v);var p=m(v);v.each(function(w,T,E){var S=w.filter(s.defined()),O=c(f.select(E[T]),S);O.enter().attr("stroke",ne.black).attr("fill",ne.gray).attr("transform",function(R,D){return b(s.values(R,D))+" scale(1e-6, 1)"}).append("path"),d.orient(s.orient()),O.each(function(R,D,L){var $=s.values(R,D);d.median($.median).upperQuartile($.upperQuartile).lowerQuartile($.lowerQuartile).width($.width).high($.high).low($.low),p(f.select(L[D])).attr("transform",b($)).select("path").attr("d",d([R]))}),s.decorate()(O,w,T)})};return B(_,s),N(_,c,"key"),N(_,d,"cap"),_},Vv=function(){var s=ts(),c=zo().value(0),d=function(b){var _=b.filter(s.defined()),h=c.context();c.orient(s.orient()),_.forEach(function(v,p){h.save();var w=s.values(v,p);h.translate(w.origin[0],w.origin[1]),h.beginPath(),h.fillStyle=ne.gray,h.strokeStyle=ne.black,s.decorate()(h,v,p),c.median(w.median).upperQuartile(w.upperQuartile).lowerQuartile(w.lowerQuartile).high(w.high).width(w.width).low(w.low)([v]),h.fill(),h.stroke(),h.closePath(),h.restore()})};return B(d,s),N(d,c,"cap","context"),d},zv=function(){var s=ts(),c=Lt(),d=Lt(),m=Lt(),b=Lt(),_=Lt(),h=Lt(),v=Lt().type(Vt.UNSIGNED_SHORT),p=Lt().type(Vt.UNSIGNED_SHORT),w=Lt().type(Vt.UNSIGNED_BYTE),T=ul().crossValueAttribute(c).highValueAttribute(d).upperQuartileValueAttribute(m).medianValueAttribute(b).lowerQuartileValueAttribute(_).lowValueAttribute(h).bandwidthAttribute(v).capAttribute(p).definedAttribute(w),E=function(V,H){return!1},S=Vn,O=[],R=null,D=null,L=Jt(20),$=function(V){if(s.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(s.orient()));var H=S(s.xScale()),tt=S(s.yScale()),bt=!E(O,V);bt&&(O=V,v.value(function(wt,yt){return s.bandwidth()(wt,yt)}).data(V),p.value(function(wt,yt){return L(wt,yt)}).data(V),w.value(function(wt,yt){return s.defined()(wt,yt)}).data(V)),(bt||H.scale!==R)&&(R=H.scale,c.value(function(wt,yt){return H.scale(s.crossValue()(wt,yt))}).data(V)),(bt||tt.scale!==D)&&(D=tt.scale,d.value(function(wt,yt){return tt.scale(s.highValue()(wt,yt))}).data(V),m.value(function(wt,yt){return tt.scale(s.upperQuartileValue()(wt,yt))}).data(V),b.value(function(wt,yt){return tt.scale(s.medianValue()(wt,yt))}).data(V),_.value(function(wt,yt){return tt.scale(s.lowerQuartileValue()(wt,yt))}).data(V),h.value(function(wt,yt){return tt.scale(s.lowValue()(wt,yt))}).data(V)),T.xScale(H.webglScale).yScale(tt.webglScale).decorate(function(wt){return s.decorate()(wt,V,0)}),T(V.length)};return $.cap=function(){return arguments.length?(L=Jt(arguments.length<=0?void 0:arguments[0]),$):L},$.equals=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],$):E},$.scaleMapper=function(){return arguments.length?(S=arguments.length<=0?void 0:arguments[0],$):S},B($,s,P("align")),N($,T,"context","lineWidth","pixelRatio"),$},Fv=function(){return pl(Wo(),"ohlc")},Uv=function(){return bl(Wo())},Yv=function(){return yl(il())},es=function(){var s=[],c=function(_){return _},d=function(_,h){return h},m=rr({decorate:function(){},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.xValues=function(){return s.map(function(b){return b.xValues()}).reduce(function(b,_){return b.concat(_)})},m.yValues=function(){return s.map(function(b){return b.yValues()}).reduce(function(b,_){return b.concat(_)})},m.mapping=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.key=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},m.series=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m):s},m},ns=function(){var s=es(),c=Wt("g"),d=Wt("g","multi"),m=function(_){se(_)&&(d.transition(_),c.transition(_));var h=s.mapping(),v=s.series(),p=s.xScale(),w=s.yScale();_.each(function(T,E,S){var O=d(f.select(S[E]),v);O.each(function(R,D,L){R.xScale(p).yScale(w);var $=h(T,D,v),F=c(f.select(L[D]),[$]);F.call(R)}),O.selection().order(),s.decorate()(O,T,E)})};return B(m,s),N(m,d,"key"),m},rs=function(){var s=null,c=es(),d=function(b){var _=c.mapping(),h=c.series(),v=c.xScale(),p=c.yScale();h.forEach(function(w,T){var E=_(b,T,h);w.context(s).xScale(v).yScale(p);var S;w.decorate?(S=w.decorate(),w.decorate(function(O,R,D){c.decorate()(O,b,T),S(O,R,D)})):c.decorate()(s,b,T),w(E),S&&w.decorate(S)})};return d.context=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},B(d,c),d},_l=function(){var s=null,c=1,d=es(),m=function(_){var h=d.mapping(),v=d.series(),p=d.xScale(),w=d.yScale();v.forEach(function(T,E){var S=h(_,E,v);T.context(s).pixelRatio(c).xScale(p).yScale(w);var O;T.decorate?(O=T.decorate(),T.decorate(function(R,D,L){d.decorate()(R,_,E),O(R,D,L)})):d.decorate()(s,_,E),T(S),O&&T.decorate(O)})};return m.context=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m):s},m.pixelRatio=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},B(m,d),m},wl=function(s){var c=function(){return 50},d="center",m=i.scaleBand(),b=rr({decorate:function(){},xScale:i.scaleLinear(),yScale:i.scaleLinear()});return b.offsetScaleForDatum=function(_,h,v){var p=c(h,v),w=si(d,p),T=p/2;return m.domain(r.range(0,_.length)).range([-T+w,T+w])},b.bandwidth=function(){return arguments.length?(c=Jt(arguments.length<=0?void 0:arguments[0]),b):c},b.align=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},B(b,m,q({paddingInner:"paddingOuter"})),b},Hv=function(s){var c=wl(),d=Wt("g","grouped"),m=function(_){se(_)&&d.transition(_),_.each(function(h,v,p){var w=d(f.select(p[v]),h);w.enter().append("g"),w.select("g").each(function(T,E,S){var O=f.select(S[E]),R=s.orient()!=="horizontal",D=function($,F){var V=c.offsetScaleForDatum(h,$,F),H=R?c.xScale():c.yScale();return H($)+V(E)+V.bandwidth()/2};R?(s.xScale(D),s.yScale(c.yScale())):(s.yScale(D),s.xScale(c.xScale())),s.bandwidth&&s.bandwidth(function(L,$){return c.offsetScaleForDatum(h,L,$).bandwidth()}),s.decorate(function(L,$){return c.decorate()(L,$,E)}),O.call(s)})})};return B(m,s,P("decorate","xScale","yScale")),B(m,c,P("offsetScaleForDatum")),m};function Xv(s){var c=wl(),d=function(b){b.forEach(function(_,h){var v=s.orient()!=="horizontal",p=function(T,E){var S=c.offsetScaleForDatum(b,T,E),O=v?c.xScale():c.yScale();return O(T)+S(h)+S.bandwidth()/2};v?(s.xScale(p),s.yScale(c.yScale())):(s.yScale(p),s.xScale(c.xScale())),s.bandwidth&&s.bandwidth(function(w,T){return c.offsetScaleForDatum(b,w,T).bandwidth()}),s.decorate(function(w,T){return c.decorate()(w,T,h)}),s(_)})};return B(d,s,P("decorate","xScale","yScale")),B(d,c,P("offsetScaleForDatum")),d}var qv=function(){var s="vertical",c=Go(),d=ns(),m=function(_){return _.each(function(h,v,p){s==="vertical"?d.series(h[0].map(function(w){return c})).mapping(function(w,T){return w.map(function(E){return E[T]})}):d.series(h.map(function(w){return c})).mapping(function(w,T){return w[T]}),f.select(p[v]).call(d)})};return m.series=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.orient=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m):s},B(m,d,P("series","mapping")),m},Gv=function(){var s="vertical",c=jo(),d=rs(),m=function(_){s==="vertical"?d.series(_[0].map(function(h){return c})).mapping(function(h,v){return h.map(function(p){return p[v]})}):d.series(_.map(function(h){return c})).mapping(function(h,v){return h[v]}),d(_)};return m.series=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.orient=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m):s},B(m,d,P("series","mapping")),m},jv=function(){var s="vertical",c=function(){return gl()},d=_l(),m=[],b=function(h){if(s==="vertical"){var v=m;m=h[0].map(function(w,T){return T<v.length?v[T]:c()}),d.series(m).mapping(function(w,T){return w.map(function(E){return E[T]})})}else{var p=m;m=h.map(function(w,T){return T<p.length?p[T]:c()}),d.series(m).mapping(function(w,T){return w[T]})}d(h)};return b.series=function(){for(var _=arguments.length,h=new Array(_),v=0;v<_;v++)h[v]=arguments[v];return h.length?(typeof h[0].xScale=="function"&&typeof h[0].yScale=="function"?c=function(){return h[0]}:c=h[0],m=[],b):c},b.orient=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m=[],b):s},B(b,d,P("series","mapping")),b},Jv=function(c){return c.sort(r.ascending).filter(function(d,m,b){return b.indexOf(d,m+1)===-1})},Zv=function(s){var c=.75,d=function(h){if(h.length<=1)return 10;h=Jv(h);var v=r.pairs(h).map(function(w){return Math.abs(w[0]-w[1])}),p=r.min(v);return c*p},m=function(h,v,p){if(h.bandwidth)return h.bandwidth();var w,T=Array.isArray(v)?(w=[]).concat.apply(w,ie(v)):v,E=T.filter(s.defined()).map(p()).map(h),S=d(E);return S},b=function(h){var v=function(w){if(s.xBandwidth&&s.yBandwidth)s.xBandwidth(m(s.xScale(),w,s.xValue)),s.yBandwidth(m(s.yScale(),w,s.yValue));else{var T=s.orient&&s.orient()==="horizontal"?s.yScale():s.xScale();s.bandwidth(m(T,w,s.crossValue))}};h instanceof f.selection?h.each(function(p,w,T){v(p),s(f.select(T[w]))}):(v(h),s(h))};return B(b,s),b.widthFraction=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b},xl=function(){var s=function(p){return p.x},c=function(p){return p.y},d=function(p){return p.color},m=function(){return 5},b=function(){return 5},_=y.interpolateViridis,h=rr({decorate:function(){},defined:function(p,w){return oi(s,c,d)(p,w)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return h.pathGenerator=Dr().x(0).y(0),h.colorScale=function(v){var p=v.map(d);return i.scaleLinear().domain([r.min(p),r.max(p)])},h.values=function(v,p){return{x:h.xScale()(s(v,p)),y:h.yScale()(c(v,p)),colorValue:d(v,p),width:b(v,p),height:m(v,p)}},h.xValues=function(){return[s]},h.yValues=function(){return[c]},h.xValue=function(){return arguments.length?(s=Jt(arguments.length<=0?void 0:arguments[0]),h):s},h.yValue=function(){return arguments.length?(c=Jt(arguments.length<=0?void 0:arguments[0]),h):c},h.colorValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),h):d},h.colorInterpolate=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],h):_},h.xBandwidth=function(){return arguments.length?(b=Jt(arguments.length<=0?void 0:arguments[0]),h):b},h.yBandwidth=function(){return arguments.length?(m=Jt(arguments.length<=0?void 0:arguments[0]),h):m},B(h,h.pathGenerator,q({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),h},Qv=function(){var s=xl(),c=Wt("g","box"),d=function(_){return"translate("+_.x+", "+_.y+")"},m=function(_){_.each(function(h,v,p){var w=h.filter(s.defined()),T=s.colorValue(),E=s.colorInterpolate(),S=s.colorScale(w),O=c(f.select(p[v]),w);O.enter().append("path").attr("stroke","transparent"),O.attr("transform",function(R,D){return d(s.values(R,D))}).select("path").attr("d",function(R,D){return s.pathGenerator.width(s.values(R,D).width).height(s.values(R,D).height)([R])}).attr("fill",function(R,D){return E(S(T(R,D)))}),s.decorate()(O,h,v)})};return B(m,s),m},Kv=function(){var s=xl(),c=function(m){var b=m.filter(s.defined()),_=s.colorInterpolate(),h=s.colorScale(b),v=s.pathGenerator.context();b.forEach(function(p,w){v.save(),v.beginPath();var T=s.values(p,w);v.translate(T.x,T.y),v.fillStyle=_(h(T.colorValue)),v.strokeStyle="transparent",s.decorate()(v,p,w),s.pathGenerator.height(T.height).width(T.width)([p]),v.fill(),v.stroke(),v.closePath(),v.restore()})};return N(c,s.pathGenerator,"context"),B(c,s),c},zn=function(s){return typeof s=="function"?s:function(){return s}},tp=function(){var s=i.scaleIdentity(),c=i.scaleIdentity(),d="horizontal",m=function(T){return T.from},b=function(T){return T.to},_=function(){},h=Wt("g","annotation-band"),v=Dr().horizontalAlign("center").verticalAlign("center").x(0).y(0),p=function(T){if(se(T)&&h.transition(T),d!=="horizontal"&&d!=="vertical")throw new Error("Invalid orientation");var E=d==="horizontal",S=E?function(H,tt){return"translate(".concat(H,", ").concat(tt,")")}:function(H,tt){return"translate(".concat(tt,", ").concat(H,")")},O=E?s:c,R=E?c:s,D=O.range(),L=D[1]-D[0],$=E?"height":"width",F=E?"width":"height",V=function(){return S((D[1]+D[0])/2,(R(b.apply(void 0,arguments))+R(m.apply(void 0,arguments)))/2)};v[F](L),v[$](function(){return R(b.apply(void 0,arguments))-R(m.apply(void 0,arguments))}),T.each(function(H,tt,bt){var wt=h(f.select(bt[tt]),H);wt.enter().attr("transform",V).append("path").classed("band",!0),wt.attr("class","annotation-band ".concat(d)).attr("transform",V).select("path").attr("d",function(yt,Bt){return v([yt],Bt)}),_(wt,H,tt)})};return p.xScale=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],p):s},p.yScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],p):c},p.orient=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],p):d},p.decorate=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],p):_},p.fromValue=function(){return arguments.length?(m=zn(arguments.length<=0?void 0:arguments[0]),p):m},p.toValue=function(){return arguments.length?(b=zn(arguments.length<=0?void 0:arguments[0]),p):b},p},ep=function(){var s=i.scaleIdentity(),c=i.scaleIdentity(),d="horizontal",m=function(w){return w.from},b=function(w){return w.to},_=function(){},h=Dr().horizontalAlign("right").verticalAlign("top"),v=function(w){if(d!=="horizontal"&&d!=="vertical")throw new Error("Invalid orientation");var T=h.context(),E=d==="horizontal",S=E?s:c,O=E?c:s,R=S.range(),D=R[1]-R[0],L=E?"x":"y",$=E?"y":"x",F=E?"height":"width",V=E?"width":"height";w.forEach(function(H,tt){T.save(),T.beginPath(),T.strokeStyle="transparent",h[$](O(m(H))),h[L](R[0]),h[V](D),h[F](O(b(H))-O(m(H))),_(T,H,tt),h.context(T)([H],tt),T.fill(),T.stroke(),T.closePath(),T.restore()})};return v.xScale=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],v):s},v.yScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.orient=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],v):d},v.decorate=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],v):_},v.fromValue=function(){return arguments.length?(m=zn(arguments.length<=0?void 0:arguments[0]),v):m},v.toValue=function(){return arguments.length?(b=zn(arguments.length<=0?void 0:arguments[0]),v):b},N(v,h,"context"),v},is=function(){var s=i.scaleIdentity(),c=i.scaleIdentity(),d=function(w){return w},m=d,b=function(){},_="horizontal",h=Wt("g","annotation-line"),v=function(w){if(se(w)&&h.transition(w),_!=="horizontal"&&_!=="vertical")throw new Error("Invalid orientation");var T=_==="horizontal",E=T?function(yt,Bt){return"translate(".concat(yt,", ").concat(Bt,")")}:function(yt,Bt){return"translate(".concat(Bt,", ").concat(yt,")")},S=T?"x2":"y2",O=T?s:c,R=T?c:s,D=T?"left-handle":"bottom-handle",L=T?"right-handle":"top-handle",$=T?"9":"0",F=T?"0":"9",V=T?"0.32em":"0.71em",H=T?"start":"middle",tt=O.range(),bt=function(){return E(tt[0],R(d.apply(void 0,arguments)))},wt=tt[1]-tt[0];w.each(function(yt,Bt,ge){var Fe=h(f.select(ge[Bt]),yt),cn=Fe.enter().attr("transform",bt).style("stroke","#bbb");cn.append("line").attr(S,wt),cn.append("g").classed(D,!0).style("stroke","none"),cn.append("g").classed(L,!0).style("stroke","none").attr("transform",E(wt,0)).append("text").attr("text-anchor",H).attr("x",$).attr("y",F).attr("dy",V),Fe.attr("class","annotation-line ".concat(_)),Fe.attr("transform",bt),Fe.select("line").attr(S,wt),Fe.select("g."+L).attr("transform",E(wt,0)),Fe.select("text").text(m),b(Fe,yt,Bt)})};return v.xScale=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],v):s},v.yScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.value=function(){return arguments.length?(d=zn(arguments.length<=0?void 0:arguments[0]),v):d},v.label=function(){return arguments.length?(m=zn(arguments.length<=0?void 0:arguments[0]),v):m},v.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],v):b},v.orient=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],v):_},v};function np(){var s=function(D){return D.x},c=function(D){return D.y},d=i.scaleIdentity(),m=i.scaleIdentity(),b=function(){},_=Wt("g","annotation-crosshair"),h=ml(),v=is(),p=is().orient("vertical"),w=i.scaleIdentity(),T=i.scaleIdentity(),E=ns().series([v,p,h]).xScale(w).yScale(T).mapping(function(R){return[R]}),S=function(D){se(D)&&_.transition(D),D.each(function(L,$,F){var V=_(f.select(F[$]),L);V.enter().style("pointer-events","none"),w.range(d.range()),T.range(m.range()),h.crossValue(s).mainValue(c),v.value(c),p.value(s),V.call(E),b(V,L,$)})};S.x=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],S):s},S.y=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],S):c},S.xScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],S):d},S.yScale=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],S):m},S.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],S):b};var O=X("label");return B(S,v,O,K("y")),B(S,p,O,K("x")),S}var as=function(){var s=i.scaleIdentity(),c=i.scaleIdentity(),d=function(w){return w},m=d,b=function(){},_="horizontal",h=g.line(),v=function(w){if(_!=="horizontal"&&_!=="vertical")throw new Error("Invalid orientation");var T=_==="horizontal",E=h.context(),S=T?s:c,O=T?c:s,R=S.domain(),D=T?9:0,L=T?0:9,$=T?"left":"center",F=T?"middle":"hanging";w.forEach(function(V,H){E.save(),E.beginPath(),E.strokeStyle="#bbb",E.fillStyle="#000",E.textAlign=$,E.textBaseline=F,b(E,V,H),h.context(E)(R.map(function(wt){var yt=[S(wt),O(d(V))];return T?yt:yt.reverse()}));var tt=T?S(R[1]):O(d(V)),bt=T?O(d(V)):S(R[1]);E.fillText(m(V),tt+D,bt+L),E.fill(),E.stroke(),E.closePath(),E.restore()})};return v.xScale=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],v):s},v.yScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.value=function(){return arguments.length?(d=zn(arguments.length<=0?void 0:arguments[0]),v):d},v.label=function(){return arguments.length?(m=zn(arguments.length<=0?void 0:arguments[0]),v):m},v.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],v):b},v.orient=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],v):_},N(v,h,"context"),v},rp=function(){var s=function(O){return O.x},c=function(O){return O.y},d=i.scaleIdentity(),m=i.scaleIdentity(),b=vl(),_=as(),h=as().orient("vertical"),v=i.scaleIdentity(),p=i.scaleIdentity(),w=rs().series([_,h,b]).xScale(v).yScale(p).mapping(function(S){return[S]}),T=function(O){O.forEach(function(R){v.range(d.range()),p.range(m.range()),b.crossValue(s).mainValue(c),_.value(c),h.value(s),w(R)})};T.x=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],T):s},T.y=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],T):c},T.xScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],T):d},T.yScale=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],T):m};var E=X("label","decorate");return B(T,_,E,K("y")),B(T,h,E,K("x")),N(T,b,"decorate"),N(T,w,"context"),T},aa=function(){var s=i.scaleIdentity(),c=[10],d=null,m=function(){var _;return d??(s.ticks?(_=s).ticks.apply(_,ie(c)):s.domain())};return m.scale=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],m):s},m.ticks=function(){for(var b=arguments.length,_=new Array(b),h=0;h<b;h++)_[h]=arguments[h];return c=_,m},m.tickArguments=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.tickValues=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},m},Tl=function(c){return c},ip=function(){var s=function(){},c=function(){},d=aa(),m=aa(),b=Wt("line","gridline-y").key(Tl),_=Wt("line","gridline-x").key(Tl),h=function(p){se(p)&&(b.transition(p),_.transition(p)),p.each(function(w,T,E){var S=E[T],O=f.select(E[T]),R=d.scale(),D=m.scale(),L=S.__x_scale__||R;S.__x_scale__=R.copy();var $=d(),F=b(O,$);F.enter().attr("x1",L).attr("x2",L).attr("y1",D.range()[0]).attr("y2",D.range()[1]).attr("stroke","#bbb"),F.attr("x1",R).attr("x2",R).attr("y1",D.range()[0]).attr("y2",D.range()[1]),F.exit().attr("x1",R).attr("x2",R),s(F,$,T);var V=S.__y_scale__||D;S.__y_scale__=D.copy();var H=m(),tt=_(O,H);tt.enter().attr("y1",V).attr("y2",V).attr("x1",R.range()[0]).attr("x2",R.range()[1]).attr("stroke","#bbb"),tt.attr("y1",D).attr("y2",D).attr("x1",R.range()[0]).attr("x2",R.range()[1]),tt.exit().attr("y1",D).attr("y2",D),c(tt,H,T)})};return h.yDecorate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.xDecorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],h):s},B(h,b,q({key:"xKey"})),B(h,_,q({key:"yKey"})),B(h,d,K("x")),B(h,m,K("y")),h},ap=function(){var s=function(){},c=function(){},d=aa(),m=aa(),b=g.line(),_=function(){var v=b.context(),p=d.scale(),w=m.scale();d().forEach(function(T,E){v.save(),v.beginPath(),v.strokeStyle="#bbb",v.fillStyle="transparent",s(v,T,E),b.context(v)(w.domain().map(function(S){return[p(T),w(S)]})),v.fill(),v.stroke(),v.closePath(),v.restore()}),m().forEach(function(T,E){v.save(),v.beginPath(),v.strokeStyle="#bbb",v.fillStyle="transparent",c(v,T,E),b.context(v)(p.domain().map(function(S){return[p(S),w(T)]})),v.fill(),v.stroke(),v.closePath(),v.restore()})};return _.yDecorate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.xDecorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],_):s},B(_,d,K("x")),B(_,m,K("y")),N(_,b,"context"),_},op=function(c){return c},Al=function(c,d,m,b){return c[d]?c[d].apply(c,m):b},El=function(c){var d;return(d=c.tickValues())!==null&&d!==void 0?d:Al(c.scale(),"ticks",c.tickArguments(),c.scale().domain())},Sl=function(c){var d;return(d=c.tickFormat())!==null&&d!==void 0?d:Al(c.scale(),"tickFormat",c.tickArguments(),op)},sp=function(c){return c},Ml=function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=[10],_=null,h=function(){},v=null,p=6,w=6,T=3,E=g.line(),S=Wt("g","tick").key(sp),O=Wt("path","domain"),R=function(){return{offset:[0,w+T]}},D=function(){return{path:[[0,0],[0,w]]}},L=m.labelOffset||R,$=m.tickPath||D,F=function(yt,Bt){var ge=0;return yt.bandwidth&&(ge=yt.bandwidth()/2,yt.round()&&(ge=Math.round(ge))),function(Fe){return Bt(yt(Fe)+ge,0)}},V=function(yt,Bt){return tt()?"translate(".concat(Bt,", ").concat(yt,")"):"translate(".concat(yt,", ").concat(Bt,")")},H=function(yt){return tt()?yt.map(function(Bt){return[Bt[1],Bt[0]]}):yt},tt=function(){return c==="left"||c==="right"},bt=function(yt){se(yt)&&(S.transition(yt),O.transition(yt)),yt.each(function(Bt,ge,Fe){var cn=Fe[ge],di=f.select(cn);cn.__scale__||di.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",c==="right"?"start":c==="left"?"end":"middle");var ds=cn.__scale__||d;cn.__scale__=d.copy();var ar=El(bt),hs=Sl(bt),hi=c==="bottom"||c==="right"?1:-1,It=function(Ft){var Pt=pt(Ft,2),ae=Pt[0],Kt=Pt[1];return[ae,hi*Kt]},or=d.range(),ke=H([[or[0],hi*p],[or[0],0],[or[1],0],[or[1],hi*p]]),Fn=O(di,[Bt]);Fn.enter().attr("stroke","#000"),Fn.attr("d",E(ke));var Se=S(di,ar),ue=ar.map(function(Me,Ft){return L(Me,Ft,ar)}),gi=ar.map(function(Me,Ft){return $(Me,Ft,ar)});Se.enter().attr("transform",F(ds,V)).append("path").attr("stroke","#000"),Se.enter().append("text").attr("transform",function(Me,Ft){return V.apply(void 0,ie(It(ue[Ft].offset)))}).attr("fill","#000"),Se.exit().attr("transform",F(d,V)),Se.select("path").attr("visibility",function(Me,Ft){return gi[Ft].hidden&&"hidden"}).attr("d",function(Me,Ft){return E(H(gi[Ft].path.map(It)))}),Se.select("text").attr("visibility",function(Me,Ft){return ue[Ft].hidden&&"hidden"}).attr("transform",function(Me,Ft){return V.apply(void 0,ie(It(ue[Ft].offset)))}).attr("dy",function(){var Me="0em";return tt()?Me="0.32em":c==="bottom"&&(Me="0.71em"),Me}).text(hs),Se.attr("transform",F(d,V)),h(Se,Bt,ge)})};return bt.tickFormat=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],bt):v},bt.tickSize=function(){return arguments.length?(w=p=Number(arguments.length<=0?void 0:arguments[0]),bt):w},bt.tickSizeInner=function(){return arguments.length?(w=Number(arguments.length<=0?void 0:arguments[0]),bt):w},bt.tickSizeOuter=function(){return arguments.length?(p=Number(arguments.length<=0?void 0:arguments[0]),bt):p},bt.tickPadding=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],bt):T},bt.decorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],bt):h},bt.scale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],bt):d},bt.ticks=function(){for(var wt=arguments.length,yt=new Array(wt),Bt=0;Bt<wt;Bt++)yt[Bt]=arguments[Bt];return b=[].concat(yt),bt},bt.tickArguments=function(){return arguments.length?(b=(arguments.length<=0?void 0:arguments[0])==null?[]:ie(arguments.length<=0?void 0:arguments[0]),bt):b!==null?b.slice():null},bt.tickValues=function(){return arguments.length?(_=(arguments.length<=0?void 0:arguments[0])==null?[]:ie(arguments.length<=0?void 0:arguments[0]),bt):_!==null?_.slice():null},bt.orient=function(){return c},bt},oa=function(c,d){var m=!1,b=function(p,w,T){var E=0,S=_.tickSizeInner()+_.tickPadding(),O=!1;if(m){var R=d(p),D=w<T.length-1?d(T[w+1]):d.range()[1];E=(D-R)/2,S=_.tickPadding(),O=w===T.length-1&&R===D}return{offset:[E,S],hidden:O}},_=Ml(c,d,{labelOffset:b}),h=function(p){return _(p)};return h.tickCenterLabel=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},B(h,_),h},Nl=function(c){return oa("top",c)},Ol=function(c){return oa("bottom",c)},Dl=function(c){return oa("left",c)},Rl=function(c){return oa("right",c)},sa=function(c,d){var m=null,b=function(T,E,S){if(d.step)return d.step();var O=d(T);return E<S.length-1?d(S[E+1])/O:(d.range()[1]-O)*2},_=function(T,E,S){var O=0;return m?O=m(T,E):O=b(T,E,S)/2,{path:[[O,0],[O,v.tickSizeInner()]],hidden:E===S.length-1}},h=function(){return{offset:[0,v.tickPadding()]}},v=Ml(c,d,{labelOffset:h,tickPath:_}),p=function(T){v(T)};return p.tickOffset=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],p):m},B(p,v),p},up=function(c){return sa("top",c)},cp=function(c){return sa("bottom",c)},lp=function(c){return sa("left",c)},fp=function(c){return sa("right",c)},Cl=function(s){var c=function(m){var b=El(s),_=Sl(s),h=b.map(_),v=m.append("text"),p=h.map(function(E){return v.text(E).node().getBBox()}),w=Math.max.apply(Math,ie(p.map(function(E){return E.height}))),T=Math.max.apply(Math,ie(p.map(function(E){return E.width})));return v.remove(),{maxHeight:w,maxWidth:T,labelCount:h.length}};return c},dp=function(s){var c="auto",d=function(){},m=function(){return s.orient()==="left"||s.orient()==="right"},b=function(){return s.orient()==="top"||s.orient()==="left"?-1:1},_=function(){switch(s.orient()){case"top":case"right":return"start";default:return"end"}},h=function(T){var E=Cl(s)(T),S=E.maxHeight,O=E.maxWidth,R=E.labelCount,D=R*O,L;if(c==="auto"){var $=s.scale().range()[1];L=$<D?90*Math.min(1,(D/$-.8)/2):0}else L=c;return{rotate:m()?Math.floor(b()*(90-L)):Math.floor(-L),maxHeight:S,maxWidth:O,anchor:L?_():"middle"}},v=function(T){var E=h(T),S=E.rotate,O=E.maxHeight,R=E.anchor,D=T.select("text"),L=D.attr("transform"),$=b()*Math.floor(O/2),F=m()?"translate(".concat($,", 0)"):"translate(0, ".concat($,")");D.style("text-anchor",R).attr("transform","".concat(L," ").concat(F," rotate(").concat(S," 0 0)"))},p=function(T){s(T)};return s.decorate(function(w){v(w),d(w)}),p.decorate=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],p):d},p.labelRotate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],p):c},B(p,s,P("decorate")),p},hp=function(s){var c="auto",d=function(){},m=function(){return s.orient()==="left"||s.orient()==="right"},b=function(){return s.orient()==="top"||s.orient()==="left"?-1:1},_=function(p){var w=Cl(s)(p),T=w.maxHeight,E=w.maxWidth,S=w.labelCount,O=s.scale().range()[1],R=c==="auto"?Math.floor((m()?T:E)*S/O)+1:c,D=p.select("text"),L=D.attr("transform"),$=function(V){return m()?"translate(".concat(V%R*E*b(),", 0)"):"translate(0, ".concat(V%R*T*b(),")")};D.attr("transform",function(F,V){return"".concat(L," ").concat($(V))})},h=function(p){return s(p)};return s.decorate(function(v){_(v),d(v)}),h.decorate=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},h.labelOffsetDepth=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},B(h,s,P("decorate")),h},os="__d3fc-elements__",ci=function(c){return c[os]||{}},Ll=function(c,d){return void(c[os]=d)},gp=function(c){return delete c[os]},mp=function(c){return c.tagName==="D3FC-GROUP"?[c].concat(ie(c.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[c]},vp=function(c){var d=ci(c),m=d.width,b=d.height,_=c.useDevicePixelRatio&&window.devicePixelRatio!=null?window.devicePixelRatio:1,h=c.clientWidth*_,v=c.clientHeight*_,p=h!==m||v!==b,w=c.children[0];Ll(c,{pixelRatio:_,width:h,height:v,resized:p,child:w})};if(typeof CustomEvent!="function")throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var pp=function(c){var d=ci(c),m=new CustomEvent("measure",{detail:d});c.dispatchEvent(m)},bp=function(c){var d=ci(c),m=new CustomEvent("draw",{detail:d});c.dispatchEvent(m)},yp=function(s){var c=s.map(mp).reduce(function(d,m){return d.concat(m)});c.forEach(vp),c.forEach(pp),c.forEach(bp)},Il=function(c){return ci(c.ownerDocument).queue||[]},_p=function(c,d){var m=ci(c.ownerDocument),b=m.requestId;b==null&&(b=requestAnimationFrame(function(){var _=Il(c);yp(_),wp(c)})),Ll(c.ownerDocument,{queue:d,requestId:b})},wp=function(c){return gp(c.ownerDocument)},Bl=function(c,d){var m=c;do if(m.parentNode===d)return!0;while(m=m.parentNode);return!1},ss=function(s){var c=Il(s),d=c.indexOf(s)>-1;if(!d){var m=c.some(function(_){return Bl(s,_)});if(!m){var b=c.filter(function(_){return!Bl(_,s)});b.push(s),_p(s,b)}}};if(typeof HTMLElement!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var xp=function(c){c.__measureListener__==null&&(c.__measureListener__=function(d){return c.setMeasurements(d.detail)},c.addEventListener("measure",c.__measureListener__))},Tp=function(c){c.__measureListener__!=null&&(c.removeEventListener("measure",c.__measureListener__),c.__measureListener__=null)},kl=function(s,c){return function(d){function m(){return it(this,m),Q(this,m,arguments)}return Dt(m,d),Mt(m,[{key:"attributeChangedCallback",value:function(_){switch(_){case"use-device-pixel-ratio":this.requestRedraw();break}}},{key:"connectedCallback",value:function(){this.childNodes.length===0&&this.appendChild(s()),xp(this)}},{key:"disconnectedCallback",value:function(){Tp(this)}},{key:"setMeasurements",value:function(_){var h=_.width,v=_.height,p=te(this.childNodes),w=p[0],T=p.slice(1);if(T.length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");c(this,w,{width:h,height:v})}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&this.getAttribute("use-device-pixel-ratio")!=="false"},set:function(_){_&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!_&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}},{key:"requestRedraw",value:function(){ss(this)}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}])}(ta(HTMLElement))},Ap=function(s){function c(){return it(this,c),Q(this,c,arguments)}return Dt(c,s),Mt(c,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&this.getAttribute("set-webgl-viewport")!=="false"},set:function(m){m&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!m&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}])}(kl(function(){return document.createElement("canvas")},function(s,c,d){var m=d.width,b=d.height;if(c.setAttribute("width",m),c.setAttribute("height",b),s.setWebglViewport){var _=c.getContext("webgl");_.viewport(0,0,m,b)}})),us=function(c){c.autoResize?Ep(c):Pl(c)},Ep=function(c){c.__autoResizeListener__==null&&(c.__autoResizeListener__=function(){return ss(c)},addEventListener("resize",c.__autoResizeListener__))},Pl=function(c){c.__autoResizeListener__!=null&&(removeEventListener("resize",c.__autoResizeListener__),c.__autoResizeListener__=null)},Sp=function(s){function c(){return it(this,c),Q(this,c,arguments)}return Dt(c,s),Mt(c,[{key:"connectedCallback",value:function(){us(this)}},{key:"disconnectedCallback",value:function(){Pl(this)}},{key:"requestRedraw",value:function(){ss(this)}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&this.getAttribute("auto-resize")!=="false"},set:function(m){m&&!this.autoResize?this.setAttribute("auto-resize",""):!m&&this.autoResize&&this.removeAttribute("auto-resize"),us(this)}},{key:"attributeChangedCallback",value:function(m){switch(m){case"auto-resize":us(this);break}}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}])}(ta(HTMLElement)),Mp=kl(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")},function(s,c,d){var m=d.width,b=d.height;c.setAttribute("viewBox","0 0 ".concat(m," ").concat(b))}),$l="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",li=document.createElement("style");if(li.setAttribute("type","text/css"),document.querySelector("head").appendChild(li),li.styleSheet?li.styleSheet.cssText+=$l:li.textContent+=$l,(typeof customElements>"u"?"undefined":Qi(customElements))!=="object"||typeof customElements.define!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Wl=[],cs=function(c,d){customElements.get(c)?Wl.push(c):customElements.define(c,d)};cs("d3fc-canvas",Ap),cs("d3fc-group",Sp),cs("d3fc-svg",Mp),Wl.length>0;var Np=function(){var s=x.dispatch("point");function c(b){var _=f.pointer(b);s.call("point",this,[{x:_[0],y:_[1]}])}function d(){s.call("point",this,[])}var m=function(_){_.on("mouseenter.pointer",c).on("mousemove.pointer",c).on("mouseleave.pointer",d)};return N(m,s,"on"),m},Op=function(){var s="",c="vertical",d=function(v,p){return Number(v[p])},m=function(v){return Object.keys(v[0]).filter(function(p){return p!==s}).map(function(p){var w=v.filter(function(T){return T[p]}).map(function(T){var E=[T[s],d(T,p)];return E.data=T,E});return w.key=p,w})},b=function(v){return v.map(function(p){var w=Object.keys(p).filter(function(T){return T!==s}).map(function(T){var E=[T,d(p,T)];return E.data=p,E});return w.key=p[s],w})},_=function(v){return c==="vertical"?m(v):b(v)};return _.key=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],_):s},_.value=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},_.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_},Vl=function(){for(var s={},c=function(w){for(var T=0,E=Object.keys(s);T<E.length;T++){var S=E[T];w[S].apply(null,s[S])}return w},d=arguments.length,m=new Array(d),b=0;b<d;b++)m[b]=arguments[b];for(var _=function(){var w=v[h];c[w]=function(){for(var T=arguments.length,E=new Array(T),S=0;S<T;S++)E[S]=arguments[S];return E.length?(s[w]=E,c):s[w]}},h=0,v=m;h<v.length;h++)_();return c},zl=`d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}
d3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}
d3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}
d3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}
d3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}
d3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}`,fi=document.createElement("style");fi.setAttribute("type","text/css"),document.querySelector("head").appendChild(fi),fi.styleSheet?fi.styleSheet.cssText+=zl:fi.textContent+=zl;var Be=function(c){return typeof c=="function"?c:function(){return c}},Fl=function(){var s=Dp.apply(void 0,arguments),c=s.xScale,d=s.yScale,m=s.xAxis,b=s.yAxis,_=Be(""),h=Be(""),v=Be(""),p=Be(null),w=Be(null),T=Be("right"),E=Be("bottom"),S=null,O=null,R=null,D=null,L=!1,$=!0,F=Vl("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),V=function(){},H=Vl("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),tt=function(){},bt=function(){},wt=Wt("d3fc-group","cartesian-chart"),yt=Wt("d3fc-canvas","webgl-plot-area"),Bt=Wt("d3fc-canvas","canvas-plot-area"),ge=Wt("d3fc-svg","svg-plot-area"),Fe=Wt("d3fc-svg","annotation-plot-area"),cn=Wt("d3fc-svg","x-axis").key(function(ke){return ke}),di=Wt("d3fc-svg","y-axis").key(function(ke){return ke}),ds=Wt("div","chart-label"),ar=Wt("div","x-label").key(function(ke){return ke}),hs=Wt("div","y-label").key(function(ke){return ke}),hi=function(Fn){return function(Se){return se(Fn)?Se.transition(Fn):Se}},It=function(Fn){var Se=hi(Fn);Fn.each(function(ue,gi,Me){var Ft=wt(f.select(Me[gi]),[ue]);Ft.enter().attr("auto-resize",""),ds(Ft,[E(ue)]).attr("class",function(Pt){return Pt==="top"?"chart-label bottom-label":"chart-label top-label"}).style("margin-bottom",function(Pt){return Pt==="top"?0:"1em"}).style("margin-top",function(Pt){return Pt==="top"?"1em":0}).text(_(ue)),ar(Ft,[E(ue)]).attr("class",function(Pt){return"x-label ".concat(Pt,"-label")}).text(h(ue)),hs(Ft,[T(ue)]).attr("class",function(Pt){return"y-label ".concat(Pt,"-label")}).text(v(ue)),yt(Ft,S?[ue]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",$).on("draw",function(Pt,ae){var Kt=Pt.detail,Ne=Kt.child,ln=Kt.pixelRatio;S.context(L?null:Ne.getContext("webgl")).pixelRatio(ln).xScale(c).yScale(d),S(ae)}),Ft.select(".webgl-plot-area>canvas").on("webglcontextlost",function(Pt){Pt.preventDefault(),L=!0,Ft.node().requestRedraw()}).on("webglcontextrestored",function(){L=!1,Ft.node().requestRedraw()}),Bt(Ft,O?[ue]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",$).on("draw",function(Pt,ae){var Kt=Pt.detail,Ne=Kt.child,ln=Kt.pixelRatio,Un=Ne.getContext("2d");Un.save(),$&&Un.scale(ln,ln),O.context(Un).xScale(c).yScale(d),O(ae),Un.restore()}),ge(Ft,R?[ue]:[]).classed("plot-area",!0).on("draw",function(Pt,ae){var Kt=Pt.detail.child;R.xScale(c).yScale(d),Se(f.select(Kt).datum(ae)).call(R)}),Fe(Ft,D?[ue]:[]).classed("plot-area",!0).classed("annotations",!0).on("draw",function(Pt,ae){var Kt=Pt.detail.child;D.xScale(c).yScale(d),Se(f.select(Kt).datum(ae)).call(D)}),cn(Ft,[E(ue)]).attr("class",function(Pt){return"x-axis ".concat(Pt,"-axis")}).style("height",p(ue)).on("measure",function(Pt,ae){var Kt=Pt.detail,Ne=Kt.width,ln=Kt.height,Un=Kt.child;ae==="top"&&f.select(Un).attr("viewBox","0 ".concat(-ln," ").concat(Ne," ").concat(ln)),c.range([0,Ne])}).on("draw",function(Pt,ae){var Kt=Pt.detail.child,Ne=ae==="top"?m.top(c):m.bottom(c);Ne.decorate(V),Se(f.select(Kt).datum(ae)).call(F(Ne))}),di(Ft,[T(ue)]).attr("class",function(Pt){return"y-axis ".concat(Pt,"-axis")}).style("width",w(ue)).on("measure",function(Pt,ae){var Kt=Pt.detail,Ne=Kt.width,ln=Kt.height,Un=Kt.child;ae==="left"&&f.select(Un).attr("viewBox","".concat(-Ne," 0 ").concat(Ne," ").concat(ln)),d.range([ln,0])}).on("draw",function(Pt,ae){var Kt=Pt.detail.child,Ne=ae==="left"?b.left(d):b.right(d);Ne.decorate(tt),Se(f.select(Kt).datum(ae)).call(H(Ne))}),Ft.each(function(Pt,ae,Kt){return Kt[ae].requestRedraw()}),bt(Ft,ue,gi)})},or=P(/range\w*/,/tickFormat/);return B(It,c,or,K("x")),B(It,d,or,K("y")),B(It,F,K("x")),B(It,H,K("y")),It.xOrient=function(){return arguments.length?(E=Be(arguments.length<=0?void 0:arguments[0]),It):E},It.yOrient=function(){return arguments.length?(T=Be(arguments.length<=0?void 0:arguments[0]),It):T},It.xDecorate=function(){return arguments.length?(V=arguments.length<=0?void 0:arguments[0],It):V},It.yDecorate=function(){return arguments.length?(tt=arguments.length<=0?void 0:arguments[0],It):tt},It.chartLabel=function(){return arguments.length?(_=Be(arguments.length<=0?void 0:arguments[0]),It):_},It.xLabel=function(){return arguments.length?(h=Be(arguments.length<=0?void 0:arguments[0]),It):h},It.yLabel=function(){return arguments.length?(v=Be(arguments.length<=0?void 0:arguments[0]),It):v},It.xAxisHeight=function(){return arguments.length?(p=Be(arguments.length<=0?void 0:arguments[0]),It):p},It.yAxisWidth=function(){return arguments.length?(w=Be(arguments.length<=0?void 0:arguments[0]),It):w},It.webglPlotArea=function(){return arguments.length?(S=arguments.length<=0?void 0:arguments[0],It):S},It.canvasPlotArea=function(){return arguments.length?(O=arguments.length<=0?void 0:arguments[0],It):O},It.svgPlotArea=function(){return arguments.length?(R=arguments.length<=0?void 0:arguments[0],It):R},It.svgAnnotationPlotArea=function(){return arguments.length?(D=arguments.length<=0?void 0:arguments[0],It):D},It.decorate=function(){return arguments.length?(bt=arguments.length<=0?void 0:arguments[0],It):bt},It.useDevicePixelRatio=function(){return arguments.length?($=arguments.length<=0?void 0:arguments[0],It):$},It},Dp=function(){for(var c={xScale:i.scaleIdentity(),yScale:i.scaleIdentity(),xAxis:{bottom:Ol,top:Nl},yAxis:{right:Rl,left:Dl}},d=arguments.length,m=new Array(d),b=0;b<d;b++)m[b]=arguments[b];return m.length===1&&!m[0].domain&&!m[0].range?Object.assign(c,m[0]):Object.assign(c,{xScale:m[0]||c.xScale,yScale:m[1]||c.yScale})},Ul=function(c){return typeof c=="function"?c:function(){return c}},Yl=function(s,c){return function(){var d=Ul(""),m=c,b=function(){},_=Fl.apply(void 0,arguments),h=function(p){s(_,m),_.decorate(function(w,T,E){w.enter().select(".x-label").style("height","1em").style("line-height","1em");var S=_.yOrient()(T);w.enter().append("div").attr("class","y-label-container").style("grid-column",S==="left"?1:5).style("-ms-grid-column",S==="left"?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),w.select(".y-label-container>.y-label").text(d),b(w,T,E)}),p.call(_)};return B(h,_,X(/^x/,/^y/,"chartLabel")),h.yLabel=function(){return arguments.length?(d=Ul(arguments.length<=0?void 0:arguments[0]),h):d},h.plotArea=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h}},Rp=Yl(function(s,c){return s.svgPlotArea(c)},Go),Cp=Yl(function(s,c){return s.canvasPlotArea(c)},jo),Lp=function(c){switch(c){case"x":return A.brushX();case"y":return A.brushY();case"xy":return A.brush()}},ls=function(c){return[c[1],c[0]]},fs=function(c){var d=Lp(c),m=x.dispatch("brush","start","end"),b=i.scaleIdentity(),_=i.scaleIdentity(),h=Wt("g","brush"),v=function(D,L,$){switch(c){case"x":return D.map(L);case"y":return D.map($);case"xy":return[[L(D[0][0]),$(D[0][1])],[L(D[1][0]),$(D[1][1])]]}},p=function(D){return v(D,i.scaleLinear().domain(b.range()).invert,i.scaleLinear().domain(ls(_.range())).invert)},w=function(D){return v(D,i.scaleLinear().domain(b.range()),i.scaleLinear().domain(ls(_.range())))},T=function(D){var L=i.scaleLinear().domain(b.domain());if(c==="x")return D.map(L.invert);if(c==="xy")return[L.invert(D[0][0]),L.invert(D[1][0])]},E=function(D){var L=i.scaleLinear().domain(ls(_.domain()));if(c==="y")return[D[1],D[0]].map(L.invert);if(c==="xy")return[L.invert(D[1][1]),L.invert(D[0][1])]},S=function(D){if(!(D.sourceEvent&&D.sourceEvent.type==="draw"))if(D.selection){var L=w(D.selection);m.call(D.type,{},{selection:L,xDomain:T(L),yDomain:E(L)})}else m.call(D.type,{},{})},O=function(D){D.each(function(L,$,F){d.extent([[b.range()[0],_.range()[1]],[b.range()[1],_.range()[0]]]),d.on("end",function(H){return S(H)}).on("brush",function(H){return S(H)}).on("start",function(H){return S(H)});var V=h(f.select(F[$]),[L]);V.call(d).call(d.move,L?p(L):null)})};return O.xScale=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],O):b},O.yScale=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],O):_},N(O,m,"on"),N(O,d,"filter","handleSize"),O},Ip=function(){return fs("x")},Bp=function(){return fs("y")},kp=function(){return fs("xy")},Hl=function(c,d){if(c==null&&d==null)return!0;var m=c.domain(),b=d.domain();return m.length===b.length&&m.every(function(_,h){var v;return(_==null?void 0:_.valueOf())===((v=b[h])===null||v===void 0?void 0:v.valueOf())})},Pp=function(c,d){return M.zoomIdentity.scale(c.k/d.k).translate(c.x-d.x,c.y-d.y)},ua=Symbol("d3fc-domain-zoom"),$p=function(){var s=x.dispatch("zoom"),c=M.zoom().on("zoom",function(m){var b=m.transform,_=this,h=b,v=_[ua],p=v.originalXScale,w=v.previousXScale,T=v.xScale,E=v.originalYScale,S=v.previousYScale,O=v.yScale,R=v.previousTransform;(!Hl(w,T)||!Hl(S,O))&&(p=T==null?void 0:T.copy(),E=O==null?void 0:O.copy(),h=Pp(b,R)),T!=null&&(w=h.rescaleX(p.range(T.range())),T.domain(w.domain())),O!=null&&(S=h.rescaleY(E.range(O.range())),O.domain(S.domain())),R=h,_[ua]={originalXScale:p,previousXScale:w,xScale:T,originalYScale:E,previousYScale:S,yScale:O,previousTransform:R},h!==b&&c.transform(f.select(_),h),s.call("zoom",this,m)}),d=function(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;_==null&&h==null,b.each(function(v,p,w){var T=w[p][ua];T!=null&&T.xScale===_&&T.yScale;var E=_==null?void 0:_.copy(),S=h==null?void 0:h.copy();w[p][ua]={originalXScale:E,previousXScale:E,xScale:_,originalYScale:S,previousYScale:S,yScale:h,previousTransform:M.zoomIdentity}}).call(c)};return N(d,s,"on"),N(d,c,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate","scaleExtent","translateExtent"),d};n.annotationCanvasBand=ep,n.annotationCanvasCrosshair=rp,n.annotationCanvasGridline=ap,n.annotationCanvasLine=as,n.annotationSvgBand=tp,n.annotationSvgCrosshair=np,n.annotationSvgGridline=ip,n.annotationSvgLine=is,n.autoBandwidth=Zv,n.axisBottom=Ol,n.axisLabelOffset=hp,n.axisLabelRotate=dp,n.axisLeft=Dl,n.axisOrdinalBottom=cp,n.axisOrdinalLeft=lp,n.axisOrdinalRight=fp,n.axisOrdinalTop=up,n.axisRight=Rl,n.axisTop=Nl,n.brush=kp,n.brushX=Ip,n.brushY=Bp,n.bucket=na,n.chartCanvasCartesian=Cp,n.chartCartesian=Fl,n.chartSvgCartesian=Rp,n.dataJoin=Wt,n.discontinuityIdentity=cc,n.discontinuityRange=D0,n.discontinuitySkipUtcWeekends=O0,n.discontinuitySkipUtcWeeklyPattern=P0,n.discontinuitySkipWeekends=N0,n.discontinuitySkipWeeklyPattern=B0,n.effectivelyZero=Yo,n.exclude=P,n.extentDate=vc,n.extentLinear=mc,n.extentTime=vc,n.feedGdax=z0,n.group=Op,n.include=X,n.includeMap=q,n.indicatorBollingerBands=W,n.indicatorElderRay=S0,n.indicatorEnvelope=E0,n.indicatorExponentialMovingAverage=Z,n.indicatorForceIndex=A0,n.indicatorMacd=U,n.indicatorMovingAverage=uc,n.indicatorRelativeStrengthIndex=x0,n.indicatorStochasticOscillator=T0,n.isTransition=se,n.largestTriangleOneBucket=F0,n.largestTriangleThreeBucket=U0,n.layoutAnnealing=Z0,n.layoutBoundingBox=tv,n.layoutGreedy=j0,n.layoutLabel=H0,n.layoutRemoveOverlaps=K0,n.layoutTextLabel=X0,n.modeMedian=Y0,n.pointer=Np,n.prefix=K,n.randomFinancial=W0,n.randomGeometricBrownianMotion=pc,n.randomSkipWeekends=V0,n.rebind=N,n.rebindAll=B,n.scaleDiscontinuous=lc,n.seriesCanvasArea=Iv,n.seriesCanvasBar=Nv,n.seriesCanvasBoxPlot=Vv,n.seriesCanvasCandlestick=Pv,n.seriesCanvasErrorBar=Rv,n.seriesCanvasGrouped=Xv,n.seriesCanvasHeatmap=Kv,n.seriesCanvasLine=jo,n.seriesCanvasMulti=rs,n.seriesCanvasOhlc=Uv,n.seriesCanvasPoint=vl,n.seriesCanvasRepeat=Gv,n.seriesSvgArea=Lv,n.seriesSvgBar=Mv,n.seriesSvgBoxPlot=Wv,n.seriesSvgCandlestick=kv,n.seriesSvgErrorBar=Dv,n.seriesSvgGrouped=Hv,n.seriesSvgHeatmap=Qv,n.seriesSvgLine=Go,n.seriesSvgMulti=ns,n.seriesSvgOhlc=Fv,n.seriesSvgPoint=ml,n.seriesSvgRepeat=qv,n.seriesWebglArea=Bv,n.seriesWebglBar=Ov,n.seriesWebglBoxPlot=zv,n.seriesWebglCandlestick=$v,n.seriesWebglErrorBar=Cv,n.seriesWebglLine=gl,n.seriesWebglMulti=_l,n.seriesWebglOhlc=Yv,n.seriesWebglPoint=Sv,n.seriesWebglRepeat=jv,n.shapeBar=Dr,n.shapeBoxPlot=zo,n.shapeCandlestick=Vo,n.shapeErrorBar=Fo,n.shapeOhlc=Wo,n.webglAdjacentAttribute=Wn,n.webglAttribute=Lt,n.webglBaseAttribute=ra,n.webglBufferBuilder=wc,n.webglElementIndices=ir,n.webglFillColor=Av,n.webglProgramBuilder=wn,n.webglScaleLinear=ia,n.webglScaleLog=cl,n.webglScaleMapper=Vn,n.webglScalePow=ll,n.webglSeriesArea=tl,n.webglSeriesBar=al,n.webglSeriesBoxPlot=ul,n.webglSeriesCandlestick=sl,n.webglSeriesErrorBar=ol,n.webglSeriesLine=rl,n.webglSeriesOhlc=il,n.webglSeriesPoint=nl,n.webglShaderBuilder=Ht,n.webglStrokeColor=Ev,n.webglSymbolMapper=dl,n.webglTypes=Vt,n.webglUniform=ze,n.zoom=$p,Object.defineProperty(n,"__esModule",{value:!0})})}(Ei,Ei.exports)),Ei.exports}var oe=XS(),uu="http://www.w3.org/1999/xhtml";const fd={svg:"http://www.w3.org/2000/svg",xhtml:uu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function km(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),fd.hasOwnProperty(e)?{space:fd[e],local:t}:t}function qS(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===uu&&e.documentElement.namespaceURI===uu?e.createElement(t):e.createElementNS(n,t)}}function GS(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Pm(t){var e=km(t);return(e.local?GS:qS)(e)}function jS(){}function $m(t){return t==null?jS:function(){return this.querySelector(t)}}function JS(t){typeof t!="function"&&(t=$m(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,u=r[i]=new Array(o),l,f,g=0;g<o;++g)(l=a[g])&&(f=t.call(l,l.__data__,g,a))&&("__data__"in l&&(f.__data__=l.__data__),u[g]=f);return new Qe(r,this._parents)}function ZS(){return[]}function QS(t){return t==null?ZS:function(){return this.querySelectorAll(t)}}function KS(t){typeof t!="function"&&(t=QS(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],u=o.length,l,f=0;f<u;++f)(l=o[f])&&(r.push(t.call(l,l.__data__,f,o)),i.push(l));return new Qe(r,i)}function tM(t){return function(){return this.matches(t)}}function eM(t){typeof t!="function"&&(t=tM(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,u=r[i]=[],l,f=0;f<o;++f)(l=a[f])&&t.call(l,l.__data__,f,a)&&u.push(l);return new Qe(r,this._parents)}function Wm(t){return new Array(t.length)}function nM(){return new Qe(this._enter||this._groups.map(Wm),this._parents)}function no(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}no.prototype={constructor:no,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function rM(t){return function(){return t}}var dd="$";function iM(t,e,n,r,i,a){for(var o=0,u,l=e.length,f=a.length;o<f;++o)(u=e[o])?(u.__data__=a[o],r[o]=u):n[o]=new no(t,a[o]);for(;o<l;++o)(u=e[o])&&(i[o]=u)}function aM(t,e,n,r,i,a,o){var u,l,f={},g=e.length,y=a.length,x=new Array(g),A;for(u=0;u<g;++u)(l=e[u])&&(x[u]=A=dd+o.call(l,l.__data__,u,e),A in f?i[u]=l:f[A]=l);for(u=0;u<y;++u)A=dd+o.call(t,a[u],u,a),(l=f[A])?(r[u]=l,l.__data__=a[u],f[A]=null):n[u]=new no(t,a[u]);for(u=0;u<g;++u)(l=e[u])&&f[x[u]]===l&&(i[u]=l)}function oM(t,e){if(!t)return A=new Array(this.size()),f=-1,this.each(function(q){A[++f]=q}),A;var n=e?aM:iM,r=this._parents,i=this._groups;typeof t!="function"&&(t=rM(t));for(var a=i.length,o=new Array(a),u=new Array(a),l=new Array(a),f=0;f<a;++f){var g=r[f],y=i[f],x=y.length,A=t.call(g,g&&g.__data__,f,r),M=A.length,C=u[f]=new Array(M),N=o[f]=new Array(M),I=l[f]=new Array(x);n(g,y,C,N,I,A,e);for(var B=0,z=0,P,X;B<M;++B)if(P=C[B]){for(B>=z&&(z=B+1);!(X=N[z])&&++z<M;);P._next=X||null}}return o=new Qe(o,r),o._enter=u,o._exit=l,o}function sM(){return new Qe(this._exit||this._groups.map(Wm),this._parents)}function uM(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function cM(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var l=e[u],f=n[u],g=l.length,y=o[u]=new Array(g),x,A=0;A<g;++A)(x=l[A]||f[A])&&(y[A]=x);for(;u<r;++u)o[u]=e[u];return new Qe(o,this._parents)}function lM(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function fM(t){t||(t=dM);function e(y,x){return y&&x?t(y.__data__,x.__data__):!y-!x}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,l=i[a]=new Array(u),f,g=0;g<u;++g)(f=o[g])&&(l[g]=f);l.sort(e)}return new Qe(i,this._parents).order()}function dM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function gM(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function mM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function vM(){var t=0;return this.each(function(){++t}),t}function pM(){return!this.node()}function bM(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&t.call(u,u.__data__,a,i);return this}function yM(t){return function(){this.removeAttribute(t)}}function _M(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wM(t,e){return function(){this.setAttribute(t,e)}}function xM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function TM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function AM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function EM(t,e){var n=km(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?_M:yM:typeof e=="function"?n.local?AM:TM:n.local?xM:wM)(n,e))}function Vm(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function SM(t){return function(){this.style.removeProperty(t)}}function MM(t,e,n){return function(){this.style.setProperty(t,e,n)}}function NM(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function OM(t,e,n){return arguments.length>1?this.each((e==null?SM:typeof e=="function"?NM:MM)(t,e,n??"")):DM(this.node(),t)}function DM(t,e){return t.style.getPropertyValue(e)||Vm(t).getComputedStyle(t,null).getPropertyValue(e)}function RM(t){return function(){delete this[t]}}function CM(t,e){return function(){this[t]=e}}function LM(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function IM(t,e){return arguments.length>1?this.each((e==null?RM:typeof e=="function"?LM:CM)(t,e)):this.node()[t]}function zm(t){return t.trim().split(/^|\s+/)}function ic(t){return t.classList||new Fm(t)}function Fm(t){this._node=t,this._names=zm(t.getAttribute("class")||"")}Fm.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Um(t,e){for(var n=ic(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ym(t,e){for(var n=ic(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function BM(t){return function(){Um(this,t)}}function kM(t){return function(){Ym(this,t)}}function PM(t,e){return function(){(e.apply(this,arguments)?Um:Ym)(this,t)}}function $M(t,e){var n=zm(t+"");if(arguments.length<2){for(var r=ic(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?PM:e?BM:kM)(n,e))}function WM(){this.textContent=""}function VM(t){return function(){this.textContent=t}}function zM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function FM(t){return arguments.length?this.each(t==null?WM:(typeof t=="function"?zM:VM)(t)):this.node().textContent}function UM(){this.innerHTML=""}function YM(t){return function(){this.innerHTML=t}}function HM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function XM(t){return arguments.length?this.each(t==null?UM:(typeof t=="function"?HM:YM)(t)):this.node().innerHTML}function qM(){this.nextSibling&&this.parentNode.appendChild(this)}function GM(){return this.each(qM)}function jM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function JM(){return this.each(jM)}function ZM(t){var e=typeof t=="function"?t:Pm(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function QM(){return null}function KM(t,e){var n=typeof t=="function"?t:Pm(t),r=e==null?QM:typeof e=="function"?e:$m(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tN(){var t=this.parentNode;t&&t.removeChild(this)}function eN(){return this.each(tN)}function nN(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function rN(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function iN(t){return this.select(t?rN:nN)}function aN(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Hm={},pe=null;if(typeof document<"u"){var oN=document.documentElement;"onmouseenter"in oN||(Hm={mouseenter:"mouseover",mouseleave:"mouseout"})}function sN(t,e,n){return t=Xm(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function Xm(t,e,n){return function(r){var i=pe;pe=r;try{t.call(this,this.__data__,e,n)}finally{pe=i}}}function uN(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function cN(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function lN(t,e,n){var r=Hm.hasOwnProperty(t.type)?sN:Xm;return function(i,a,o){var u=this.__on,l,f=r(e,a,o);if(u){for(var g=0,y=u.length;g<y;++g)if((l=u[g]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=f,l.capture=n),l.value=e;return}}this.addEventListener(t.type,f,n),l={type:t.type,name:t.name,value:e,listener:f,capture:n},u?u.push(l):this.__on=[l]}}function fN(t,e,n){var r=uN(t+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,f=u.length,g;l<f;++l)for(i=0,g=u[l];i<a;++i)if((o=r[i]).type===g.type&&o.name===g.name)return g.value}return}for(u=e?lN:cN,n==null&&(n=!1),i=0;i<a;++i)this.each(u(r[i],e,n));return this}function qm(t,e,n){var r=Vm(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dN(t,e){return function(){return qm(this,t,e)}}function hN(t,e){return function(){return qm(this,t,e.apply(this,arguments))}}function gN(t,e){return this.each((typeof e=="function"?hN:dN)(t,e))}var mN=[null];function Qe(t,e){this._groups=t,this._parents=e}Qe.prototype={constructor:Qe,select:JS,selectAll:KS,filter:eM,data:oM,enter:nM,exit:sM,join:uM,merge:cM,order:lM,sort:fM,call:hM,nodes:gM,node:mM,size:vM,empty:pM,each:bM,attr:EM,style:OM,property:IM,classed:$M,text:FM,html:XM,raise:GM,lower:JM,append:ZM,insert:KM,remove:eN,clone:iN,datum:aN,on:fN,dispatch:gN};function Io(t){return typeof t=="string"?new Qe([[document.querySelector(t)]],[document.documentElement]):new Qe([[t]],mN)}var vN=0;function hd(){this._="@"+(++vN).toString(36)}hd.prototype={constructor:hd,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var pN={value:function(){}};function Gm(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Sa(n)}function Sa(t){this._=t}function bN(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Sa.prototype=Gm.prototype={constructor:Sa,on:function(t,e){var n=this._,r=bN(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=yN(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=gd(n[i],t.name,e);else if(e==null)for(i in n)n[i]=gd(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Sa(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function yN(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function gd(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=pN,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var cu="http://www.w3.org/1999/xhtml";const md={svg:"http://www.w3.org/2000/svg",xhtml:cu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jm(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),md.hasOwnProperty(e)?{space:md[e],local:t}:t}function _N(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===cu&&e.documentElement.namespaceURI===cu?e.createElement(t):e.createElementNS(n,t)}}function wN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Jm(t){var e=jm(t);return(e.local?wN:_N)(e)}function xN(){}function Zm(t){return t==null?xN:function(){return this.querySelector(t)}}function TN(t){typeof t!="function"&&(t=Zm(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,u=r[i]=new Array(o),l,f,g=0;g<o;++g)(l=a[g])&&(f=t.call(l,l.__data__,g,a))&&("__data__"in l&&(f.__data__=l.__data__),u[g]=f);return new Ke(r,this._parents)}function AN(){return[]}function EN(t){return t==null?AN:function(){return this.querySelectorAll(t)}}function SN(t){typeof t!="function"&&(t=EN(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],u=o.length,l,f=0;f<u;++f)(l=o[f])&&(r.push(t.call(l,l.__data__,f,o)),i.push(l));return new Ke(r,i)}function MN(t){return function(){return this.matches(t)}}function NN(t){typeof t!="function"&&(t=MN(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,u=r[i]=[],l,f=0;f<o;++f)(l=a[f])&&t.call(l,l.__data__,f,a)&&u.push(l);return new Ke(r,this._parents)}function Qm(t){return new Array(t.length)}function ON(){return new Ke(this._enter||this._groups.map(Qm),this._parents)}function ro(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ro.prototype={constructor:ro,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function DN(t){return function(){return t}}var vd="$";function RN(t,e,n,r,i,a){for(var o=0,u,l=e.length,f=a.length;o<f;++o)(u=e[o])?(u.__data__=a[o],r[o]=u):n[o]=new ro(t,a[o]);for(;o<l;++o)(u=e[o])&&(i[o]=u)}function CN(t,e,n,r,i,a,o){var u,l,f={},g=e.length,y=a.length,x=new Array(g),A;for(u=0;u<g;++u)(l=e[u])&&(x[u]=A=vd+o.call(l,l.__data__,u,e),A in f?i[u]=l:f[A]=l);for(u=0;u<y;++u)A=vd+o.call(t,a[u],u,a),(l=f[A])?(r[u]=l,l.__data__=a[u],f[A]=null):n[u]=new ro(t,a[u]);for(u=0;u<g;++u)(l=e[u])&&f[x[u]]===l&&(i[u]=l)}function LN(t,e){if(!t)return A=new Array(this.size()),f=-1,this.each(function(q){A[++f]=q}),A;var n=e?CN:RN,r=this._parents,i=this._groups;typeof t!="function"&&(t=DN(t));for(var a=i.length,o=new Array(a),u=new Array(a),l=new Array(a),f=0;f<a;++f){var g=r[f],y=i[f],x=y.length,A=t.call(g,g&&g.__data__,f,r),M=A.length,C=u[f]=new Array(M),N=o[f]=new Array(M),I=l[f]=new Array(x);n(g,y,C,N,I,A,e);for(var B=0,z=0,P,X;B<M;++B)if(P=C[B]){for(B>=z&&(z=B+1);!(X=N[z])&&++z<M;);P._next=X||null}}return o=new Ke(o,r),o._enter=u,o._exit=l,o}function IN(){return new Ke(this._exit||this._groups.map(Qm),this._parents)}function BN(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function kN(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var l=e[u],f=n[u],g=l.length,y=o[u]=new Array(g),x,A=0;A<g;++A)(x=l[A]||f[A])&&(y[A]=x);for(;u<r;++u)o[u]=e[u];return new Ke(o,this._parents)}function PN(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function $N(t){t||(t=WN);function e(y,x){return y&&x?t(y.__data__,x.__data__):!y-!x}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,l=i[a]=new Array(u),f,g=0;g<u;++g)(f=o[g])&&(l[g]=f);l.sort(e)}return new Ke(i,this._parents).order()}function WN(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function VN(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function zN(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function FN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function UN(){var t=0;return this.each(function(){++t}),t}function YN(){return!this.node()}function HN(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&t.call(u,u.__data__,a,i);return this}function XN(t){return function(){this.removeAttribute(t)}}function qN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function GN(t,e){return function(){this.setAttribute(t,e)}}function jN(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function JN(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ZN(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function QN(t,e){var n=jm(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?qN:XN:typeof e=="function"?n.local?ZN:JN:n.local?jN:GN)(n,e))}function Km(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function KN(t){return function(){this.style.removeProperty(t)}}function tO(t,e,n){return function(){this.style.setProperty(t,e,n)}}function eO(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function nO(t,e,n){return arguments.length>1?this.each((e==null?KN:typeof e=="function"?eO:tO)(t,e,n??"")):rO(this.node(),t)}function rO(t,e){return t.style.getPropertyValue(e)||Km(t).getComputedStyle(t,null).getPropertyValue(e)}function iO(t){return function(){delete this[t]}}function aO(t,e){return function(){this[t]=e}}function oO(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function sO(t,e){return arguments.length>1?this.each((e==null?iO:typeof e=="function"?oO:aO)(t,e)):this.node()[t]}function t0(t){return t.trim().split(/^|\s+/)}function ac(t){return t.classList||new e0(t)}function e0(t){this._node=t,this._names=t0(t.getAttribute("class")||"")}e0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function n0(t,e){for(var n=ac(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function r0(t,e){for(var n=ac(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function uO(t){return function(){n0(this,t)}}function cO(t){return function(){r0(this,t)}}function lO(t,e){return function(){(e.apply(this,arguments)?n0:r0)(this,t)}}function fO(t,e){var n=t0(t+"");if(arguments.length<2){for(var r=ac(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?lO:e?uO:cO)(n,e))}function dO(){this.textContent=""}function hO(t){return function(){this.textContent=t}}function gO(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function mO(t){return arguments.length?this.each(t==null?dO:(typeof t=="function"?gO:hO)(t)):this.node().textContent}function vO(){this.innerHTML=""}function pO(t){return function(){this.innerHTML=t}}function bO(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function yO(t){return arguments.length?this.each(t==null?vO:(typeof t=="function"?bO:pO)(t)):this.node().innerHTML}function _O(){this.nextSibling&&this.parentNode.appendChild(this)}function wO(){return this.each(_O)}function xO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function TO(){return this.each(xO)}function AO(t){var e=typeof t=="function"?t:Jm(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function EO(){return null}function SO(t,e){var n=typeof t=="function"?t:Jm(t),r=e==null?EO:typeof e=="function"?e:Zm(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function MO(){var t=this.parentNode;t&&t.removeChild(this)}function NO(){return this.each(MO)}function OO(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function DO(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function RO(t){return this.select(t?DO:OO)}function CO(t){return arguments.length?this.property("__data__",t):this.node().__data__}var i0={},Zt=null;if(typeof document<"u"){var LO=document.documentElement;"onmouseenter"in LO||(i0={mouseenter:"mouseover",mouseleave:"mouseout"})}function IO(t,e,n){return t=a0(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function a0(t,e,n){return function(r){var i=Zt;Zt=r;try{t.call(this,this.__data__,e,n)}finally{Zt=i}}}function BO(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function kO(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function PO(t,e,n){var r=i0.hasOwnProperty(t.type)?IO:a0;return function(i,a,o){var u=this.__on,l,f=r(e,a,o);if(u){for(var g=0,y=u.length;g<y;++g)if((l=u[g]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=f,l.capture=n),l.value=e;return}}this.addEventListener(t.type,f,n),l={type:t.type,name:t.name,value:e,listener:f,capture:n},u?u.push(l):this.__on=[l]}}function $O(t,e,n){var r=BO(t+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,f=u.length,g;l<f;++l)for(i=0,g=u[l];i<a;++i)if((o=r[i]).type===g.type&&o.name===g.name)return g.value}return}for(u=e?PO:kO,n==null&&(n=!1),i=0;i<a;++i)this.each(u(r[i],e,n));return this}function pd(t,e,n,r){var i=Zt;t.sourceEvent=Zt,Zt=t;try{return e.apply(n,r)}finally{Zt=i}}function o0(t,e,n){var r=Km(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function WO(t,e){return function(){return o0(this,t,e)}}function VO(t,e){return function(){return o0(this,t,e.apply(this,arguments))}}function zO(t,e){return this.each((typeof e=="function"?VO:WO)(t,e))}var FO=[null];function Ke(t,e){this._groups=t,this._parents=e}Ke.prototype={constructor:Ke,select:TN,selectAll:SN,filter:NN,data:LN,enter:ON,exit:IN,join:BN,merge:kN,order:PN,sort:$N,call:VN,nodes:zN,node:FN,size:UN,empty:YN,each:HN,attr:QN,style:nO,property:sO,classed:fO,text:mO,html:yO,raise:wO,lower:TO,append:AO,insert:SO,remove:NO,clone:RO,datum:CO,on:$O,dispatch:zO};function io(t){return typeof t=="string"?new Ke([[document.querySelector(t)]],[document.documentElement]):new Ke([[t]],FO)}function s0(){for(var t=Zt,e;e=t.sourceEvent;)t=e;return t}function u0(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function UO(t){var e=s0();return e.changedTouches&&(e=e.changedTouches[0]),u0(t,e)}function YO(t,e,n){arguments.length<3&&(n=e,e=s0().changedTouches);for(var r=0,i=e?e.length:0,a;r<i;++r)if((a=e[r]).identifier===n)return u0(t,a);return null}function Is(){Zt.stopImmediatePropagation()}function zr(){Zt.preventDefault(),Zt.stopImmediatePropagation()}function HO(t){var e=t.document.documentElement,n=io(t).on("dragstart.drag",zr,!0);"onselectstart"in e?n.on("selectstart.drag",zr,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function XO(t,e){var n=t.document.documentElement,r=io(t).on("dragstart.drag",null);e&&(r.on("click.drag",zr,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ba(t){return function(){return t}}function lu(t,e,n,r,i,a,o,u,l,f){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=u,this.dy=l,this._=f}lu.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function qO(){return!Zt.button}function GO(){return this.parentNode}function jO(t){return t??{x:Zt.x,y:Zt.y}}function JO(){return"ontouchstart"in this}function c0(){var t=qO,e=GO,n=jO,r=JO,i={},a=Gm("start","drag","end"),o=0,u,l,f,g,y=0;function x(P){P.on("mousedown.drag",A).filter(r).on("touchstart.drag",N).on("touchmove.drag",I).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(){if(!(g||!t.apply(this,arguments))){var P=z("mouse",e.apply(this,arguments),UO,this,arguments);P&&(io(Zt.view).on("mousemove.drag",M,!0).on("mouseup.drag",C,!0),HO(Zt.view),Is(),f=!1,u=Zt.clientX,l=Zt.clientY,P("start"))}}function M(){if(zr(),!f){var P=Zt.clientX-u,X=Zt.clientY-l;f=P*P+X*X>y}i.mouse("drag")}function C(){io(Zt.view).on("mousemove.drag mouseup.drag",null),XO(Zt.view,f),zr(),i.mouse("end")}function N(){if(t.apply(this,arguments)){var P=Zt.changedTouches,X=e.apply(this,arguments),q=P.length,lt,K;for(lt=0;lt<q;++lt)(K=z(P[lt].identifier,X,YO,this,arguments))&&(Is(),K("start"))}}function I(){var P=Zt.changedTouches,X=P.length,q,lt;for(q=0;q<X;++q)(lt=i[P[q].identifier])&&(zr(),lt("drag"))}function B(){var P=Zt.changedTouches,X=P.length,q,lt;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),q=0;q<X;++q)(lt=i[P[q].identifier])&&(Is(),lt("end"))}function z(P,X,q,lt,K){var nt=q(X,P),mt,ft,J,G=a.copy();if(pd(new lu(x,"beforestart",mt,P,o,nt[0],nt[1],0,0,G),function(){return(Zt.subject=mt=n.apply(lt,K))==null?!1:(ft=mt.x-nt[0]||0,J=mt.y-nt[1]||0,!0)}))return function W(Z){var U=nt,et;switch(Z){case"start":i[P]=W,et=o++;break;case"end":delete i[P],--o;case"drag":nt=q(X,P),et=o;break}pd(new lu(x,Z,mt,P,et,nt[0]+ft,nt[1]+J,nt[0]-U[0],nt[1]-U[1],G),G.apply,G,[Z,lt,K])}}return x.filter=function(P){return arguments.length?(t=typeof P=="function"?P:ba(!!P),x):t},x.container=function(P){return arguments.length?(e=typeof P=="function"?P:ba(P),x):e},x.subject=function(P){return arguments.length?(n=typeof P=="function"?P:ba(P),x):n},x.touchable=function(P){return arguments.length?(r=typeof P=="function"?P:ba(!!P),x):r},x.on=function(){var P=a.on.apply(a,arguments);return P===a?x:P},x.clickDistance=function(P){return arguments.length?(y=(P=+P)*P,x):Math.sqrt(y)},x}var ZO={value:function(){}};function l0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new Ma(n)}function Ma(t){this._=t}function QO(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ma.prototype=l0.prototype={constructor:Ma,on:function(t,e){var n=this._,r=QO(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=KO(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=bd(n[i],t.name,e);else if(e==null)for(i in n)n[i]=bd(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ma(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function KO(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function bd(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ZO,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var tD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ai=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ve=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},En=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},oc=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},sc=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},eD=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)},nD=function(){function t(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.nx,u=e.ny,l=e.dy,f=l===void 0?0:l,g=e.dx,y=g===void 0?0:g,x=e.color,A=x===void 0?"grey":x,M=e.data,C=e.type,N=e.subject,I=e.connector,B=e.note,z=e.disable,P=e.id,X=e.className;ii(this,t),this._dx=o!==void 0?o-r:y,this._dy=u!==void 0?u-a:f,this._x=r,this._y=a,this._color=A,this.id=P,this._className=X||"",this._type=C||"",this.data=M,this.note=B||{},this.connector=I||{},this.subject=N||{},this.disable=z||[]}return ai(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),this.type.connector.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(n){this._className=n,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(n){this._type=n,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(n){this._x=n,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(n){this._color=n,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(n){this._dx=n,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(n){this._dy=n,this.updateOffset()}},{key:"nx",set:function(n){this._dx=n-this._x,this.updateOffset()}},{key:"ny",set:function(n){this._dy=n-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(n){var r=n.x,i=n.y;this._dx=r,this._dy=i,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(n){var r=n.x,i=n.y;this._x=r,this._y=i,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var n={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(n.data=this.data),this.type&&(n.type=this.type),this._className&&(n.className=this._className),Object.keys(this.connector).length>0&&(n.connector=this.connector),Object.keys(this.subject).length>0&&(n.subject=this.subject),Object.keys(this.note).length>0&&(n.note=this.note),n}}]),t}(),rD=function(){function t(e){var n=e.annotations,r=e.accessors,i=e.accessorsInverse;ii(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return ai(t,[{key:"clearTypes",value:function(n){this.annotations.forEach(function(r){r.type=void 0,r.subject=n&&n.subject||r.subject,r.connector=n&&n.connector||r.connector,r.note=n&&n.note||r.note})}},{key:"setPositionWithAccessors",value:function(){var n=this;this.annotations.forEach(function(r){r.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.editMode=n,r.type.updateEditMode())})}},{key:"updateDisable",value:function(n){this.annotations.forEach(function(r){r.disable=n,r.type&&n.forEach(function(i){r.type[i]&&(r.type[i].remove&&r.type[i].remove(),r.type[i]=void 0)})})}},{key:"updateTextWrap",value:function(n){this.annotations.forEach(function(r){r.type&&r.type.updateTextWrap&&r.type.updateTextWrap(n)})}},{key:"updateText",value:function(){this.annotations.forEach(function(n){n.type&&n.type.drawText&&n.type.drawText()})}},{key:"updateNotePadding",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.notePadding=n)})}},{key:"json",get:function(){var n=this;return this.annotations.map(function(r){var i=r.json;return n.accessorsInverse&&r.data&&(i.data={},Object.keys(n.accessorsInverse).forEach(function(a){i.data[a]=n.accessorsInverse[a]({x:r.x,y:r.y})})),i})}},{key:"noteNodes",get:function(){return this.annotations.map(function(n){return Ve({},n.type.getNoteBBoxOffset(),{positionX:n.x,positionY:n.y})})}}]),t}(),iD=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i;return{move:{x:r,y:a}}},aD=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r1,u=e.r2,l=e.padding,f={move:{x:r,y:a}};return o!==void 0&&(f.r1={x:r+o/Math.sqrt(2),y:a+o/Math.sqrt(2)}),u!==void 0&&(f.r2={x:r+u/Math.sqrt(2),y:a+u/Math.sqrt(2)}),l!==void 0&&(f.padding={x:r+o+l,y:a}),f},oD=function(e){var n=e.group,r=e.handles,i=e.r,a=i===void 0?10:i,o=n.selectAll("circle.handle").data(r);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(c0().container(Io("g.annotations").node()).on("start",function(u){return u.start&&u.start(u)}).on("drag",function(u){return u.drag&&u.drag(u)}).on("end",function(u){return u.end&&u.end(u)})),n.selectAll("circle.handle").attr("cx",function(u){return u.x}).attr("cy",function(u){return u.y}).attr("r",function(u){return u.r||a}).attr("class",function(u){return"handle "+(u.className||"")}),o.exit().remove()},f0=function(e,n){return(e==="dynamic"||e==="left"||e==="right")&&(n<0?e="top":e="bottom"),e},d0=function(e,n){return(e==="dynamic"||e==="top"||e==="bottom")&&(n<0?e="right":e="left"),e},sD=["topBottom","top","bottom"],uD=["leftRight","left","right"],cD=function(t){var e=t.padding,n=e===void 0?0:e,r=t.bbox,i=r===void 0?{x:0,width:0,height:0}:r,a=t.align,o=t.orientation,u=t.offset,l=u===void 0?{x:0,y:0}:u,f=-i.x,g=0;return sD.indexOf(o)!==-1?(a=d0(a,l.x),l.y<0&&o==="topBottom"||o==="top"?g-=i.height+n:g+=n,a==="middle"?f-=i.width/2:a==="right"&&(f-=i.width)):uD.indexOf(o)!==-1&&(a=f0(a,l.y),l.x<0&&o==="leftRight"||o==="left"?f-=i.width+n:f+=n,a==="middle"?g-=i.height/2:a==="top"&&(g-=i.height)),{x:f,y:g}},bn=function(e){var n=e.data,r=e.curve,i=r===void 0?Zi:r,a=e.canvasContext,o=e.className,u=e.classID,l=Ro().curve(i),f={type:"path",className:o,classID:u,data:n};return a?(l.context(a),f.pathMethods=l):f.attrs={d:l(n)},f},ao=function(e){var n=e.data,r=e.canvasContext,i=e.className,a=e.classID,o={type:"path",className:i,classID:a,data:n},u=um().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return r?(u.context(r),o.pathMethods=lineGen):o.attrs={d:u()},o},lD=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.bbox,u=t.offset;e=f0(e,u.y),e==="top"?a-=o.height:e==="middle"&&(a-=o.height/2);var l=[[r,a],[r,a+o.height]];return{components:[bn({data:l,className:"note-line"})]}},fD=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.offset,u=t.bbox;e=d0(e,o.x),e==="right"?r-=u.width:e==="middle"&&(r-=u.width/2);var l=[[r,a],[r+u.width,a]];return{components:[bn({data:l,className:"note-line"})]}},h0=function(e){var n=e.type,r=e.subjectType,i=n.annotation,a=i.position,o=i.x-a.x,u=o+i.dx,l=i.y-a.y,f=l+i.dy,g=i.subject;if(r==="circle"&&(g.outerRadius||g.radius)){var y=Math.sqrt((o-u)*(o-u)+(l-f)*(l-f)),x=Math.asin(-f/y),A=g.outerRadius||g.radius+(g.radiusPadding||0);o=Math.abs(Math.cos(x)*A)*(u<0?-1:1),l=Math.abs(Math.sin(x)*A)*(f<0?-1:1)}if(r==="rect"){var M=g.width,C=g.height;(M>0&&i.dx>0||M<0&&i.dx<0)&&(Math.abs(M)>Math.abs(i.dx)?o=M/2:o=M),(C>0&&i.dy>0||C<0&&i.dy<0)&&(Math.abs(C)>Math.abs(i.dy)?l=C/2:l=C),o===M/2&&l===C/2&&(o=u,l=f)}return[[o,l],[u,f]]},dD=function(t){var e=h0(t);return{components:[bn({data:e,className:"connector"})]}},hD=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,a=r.x-i.x,o=a+r.dx,u=r.y-i.y,l=u+r.dy,f=r.subject;if(n==="rect"){var g=f.width,y=f.height;(g>0&&r.dx>0||g<0&&r.dx<0)&&(Math.abs(g)>Math.abs(r.dx)?a=g/2:a=g),(y>0&&r.dy>0||y<0&&r.dy<0)&&(Math.abs(y)>Math.abs(r.dy)?u=y/2:u=y),a===g/2&&u===y/2&&(a=o,u=l)}var x=[[a,u],[o,l]],A=l-u,M=o-a,C=o,N=l,I=l<u&&o>a||o<a&&l>u?-1:1;if(Math.abs(M)<Math.abs(A)?(C=o,N=u+M*I):(N=l,C=a+A*I),n==="circle"&&(f.outerRadius||f.radius)){var B=(f.outerRadius||f.radius)+(f.radiusPadding||0),z=B/Math.sqrt(2);if(Math.abs(M)>z&&Math.abs(A)>z)a=z*(o<0?-1:1),u=z*(l<0?-1:1),x=[[a,u],[C,N],[o,l]];else if(Math.abs(M)>Math.abs(A)){var P=Math.asin(-l/B);a=Math.abs(Math.cos(P)*B)*(o<0?-1:1),x=[[a,l],[o,l]]}else{var X=Math.acos(o/B);u=Math.abs(Math.sin(X)*B)*(l<0?-1:1),x=[[o,u],[o,l]]}}else x=[[a,u],[C,N],[o,l]];return{components:[bn({data:x,className:"connector"})]}},gD=function(t){var e=t.type,n=t.connectorData,r=t.subjectType;n||(n={}),(!n.points||typeof n.points=="number")&&(n.points=mD(e.annotation.offset,n.points)),n.curve||(n.curve=Mm);var i=[];if(e.editMode){var a=n.points.map(function(f,g){return Ve({},iD({cx:f[0],cy:f[1]}),{index:g})}),o=function(g){n.points[g][0]+=pe.dx,n.points[g][1]+=pe.dy,e.redrawConnector()};i=e.mapHandles(a.map(function(f){return Ve({},f.move,{drag:o.bind(e,f.index)})}))}var u=h0({type:e,subjectType:r});u=[u[0]].concat(eD(n.points),[u[1]]);var l=[bn({data:u,curve:n.curve,className:"connector"})];return{components:l,handles:i}},mD=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r={x:e.x/(n+1),y:e.y/(n+1)},i=[],a=1;a<=n;a++)i.push([r.x*a+a%2*20,r.y*a-a%2*20]);return i},vD=function(t){var e=t.annotation,n=t.start,r=t.end,i=t.scale,a=i===void 0?1:i,o=e.position;n?n=[-r[0]+n[0],-r[1]+n[1]]:n=[e.dx,e.dy],r||(r=[e.x-o.x,e.y-o.y]);var u=r[0],l=r[1],f=n[0],g=n[1],y=10*a,x=16/180*Math.PI,A=Math.atan(g/f);f<0&&(A+=Math.PI);var M=[[u,l],[Math.cos(A+x)*y+u,Math.sin(A+x)*y+l],[Math.cos(A-x)*y+u,Math.sin(A-x)*y+l],[u,l]];return{components:[bn({data:M,className:"connector-end connector-arrow",classID:"connector-end"})]}},pD=function(t){var e=t.line,n=t.scale,r=n===void 0?1:n,i=ao({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[i]}},bD=function(t){var e=t.subjectData,n=t.type;!e.radius&&!e.outerRadius&&(e.radius=20);var r=[],i=ao({data:e,className:"subject"});if(n.editMode){var a=aD({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:e.radiusPadding}),o=function(f){var g=e[f]+pe.dx*Math.sqrt(2);e[f]=g,n.redrawSubject(),n.redrawConnector()},u=[Ve({},a.r1,{drag:o.bind(n,e.outerRadius!==void 0?"outerRadius":"radius")})];e.innerRadius&&u.push(Ve({},a.r2,{drag:o.bind(n,"innerRadius")})),r=n.mapHandles(u)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},yD=function(t){var e=t.subjectData,n=t.type;e.width||(e.width=100),e.height||(e.height=100);var r=[],i=e.width,a=e.height,o=[[0,0],[i,0],[i,a],[0,a],[0,0]],u=bn({data:o,className:"subject"});if(n.editMode){var l=function(){e.width=pe.x,n.redrawSubject(),n.redrawConnector()},f=function(){e.height=pe.y,n.redrawSubject(),n.redrawConnector()},g=[{x:i,y:a/2,drag:l.bind(n)},{x:i/2,y:a,drag:f.bind(n)}];r=n.mapHandles(g)}return u.attrs["fill-opacity"]=.1,{components:[u],handles:r}},_D=function(t){var e=t.subjectData,n=t.type,r=n.annotation.position,i=(e.x1!==void 0?e.x1:r.x)-r.x,a=(e.x2!==void 0?e.x2:r.x)-r.x,o=(e.y1!==void 0?e.y1:r.y)-r.y,u=(e.y2!==void 0?e.y2:r.y)-r.y,l=[[i,o],[a,u]];return{components:[bn({data:l,className:"subject"})]}},wD=function(t){var e=t.subjectData,n=e===void 0?{}:e,r=t.type,i=r===void 0?{}:r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.typeSettings&&i.typeSettings.subject;n.radius||(o&&o.radius?n.radius=o.radius:n.radius=14),n.x||o&&o.x&&(n.x=o.x),n.y||o&&o.y&&(n.y=o.y);var u=[],l=[],f=n.radius,g=f*.7,y=0,x=0,A=Math.sqrt(2)*f,M={xleftcorner:-f,xrightcorner:f,ytopcorner:-f,ybottomcorner:f,xleft:-A,xright:A,ytop:-A,ybottom:A};n.x&&!n.y?y=M["x"+n.x]:n.y&&!n.x?x=M["y"+n.y]:n.x&&n.y&&(y=M["x"+n.x+"corner"],x=M["y"+n.y+"corner"]);var C="translate("+y+", "+x+")",N=ao({className:"subject",data:{radius:f}});N.attrs.transform=C,N.attrs.fill=a.color,N.attrs["stroke-linecap"]="round",N.attrs["stroke-width"]="3px";var I=ao({className:"subject-ring",data:{outerRadius:f,innerRadius:g}});I.attrs.transform=C,I.attrs["stroke-width"]="3px",I.attrs.fill="white";var B=void 0;if(y&&x||!y&&!x)B=bn({className:"subject-pointer",data:[[0,0],[y||0,0],[0,x||0],[0,0]]});else if(y||x){var z=function(K){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return K&&K/Math.sqrt(2)/Math.sqrt(2)||nt*f/Math.sqrt(2)};B=bn({className:"subject-pointer",data:[[0,0],[z(y),z(x)],[z(y,-1),z(x,-1)],[0,0]]})}if(B&&(B.attrs.fill=a.color,B.attrs["stroke-linecap"]="round",B.attrs["stroke-width"]="3px",l.push(B)),i.editMode){var P=function(){n.x=pe.x<-f*2?"left":pe.x>f*2?"right":void 0,n.y=pe.y<-f*2?"top":pe.y>f*2?"bottom":void 0,i.redrawSubject()},X={x:y*2,y:x*2,drag:P.bind(i)};!X.x&&!X.y&&(X.y=-f),u=i.mapHandles([X])}var q=void 0;return n.text&&(q={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:y,y:x}}),l.push(N),l.push(I),l.push(q),{components:l,handles:u}},g0=function(){function t(e){var n=e.a,r=e.annotation,i=e.editMode,a=e.dispatcher,o=e.notePadding,u=e.accessors;if(ii(this,t),this.a=n,this.note=r.disable.indexOf("note")===-1&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=r.disable.indexOf("connector")===-1&&n.select("g.annotation-connector"),this.subject=r.disable.indexOf("subject")===-1&&n.select("g.annotation-subject"),this.dispatcher=a,a){var l=AD.bind(null,a,r);l({component:this.note,name:"note"}),l({component:this.connector,name:"connector"}),l({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=o!==void 0?o:3,this.offsetCornerX=0,this.offsetCornerY=0,u&&r.data&&this.init(u)}return ai(t,[{key:"init",value:function(n){this.annotation.x||this.mapX(n),this.annotation.y||this.mapY(n)}},{key:"mapY",value:function(n){n.y&&(this.annotation.y=n.y(this.annotation.data))}},{key:"mapX",value:function(n){n.x&&(this.annotation.x=n.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(n,r){var i=this;Array.isArray(r)||(r=[r]),r.filter(function(a){return a}).forEach(function(a){var o=a.type,u=a.className,l=a.attrs,f=a.handles,g=a.classID;if(o==="handle")oD({group:n,r:l&&l.r,handles:f});else{dn(n,[i.annotation],o,u,g);for(var y=n.select(o+"."+(g||u)),x=Object.keys(l),A=[],M=y.node().attributes,C=M.length-1;C>=0;C--){var N=M[C].name;x.indexOf(N)===-1&&N!=="class"&&A.push(N)}x.forEach(function(I){I==="text"?y.text(l[I]):y.attr(I,l[I])}),A.forEach(function(I){return y.attr(I,null)})}})}},{key:"getNoteBBox",value:function(){return _d(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var n=_d(this.note,".annotation-note-content"),r=this.noteContent.attr("transform").split(/\(|\,|\)/g);return n.offsetCornerX=parseFloat(r[1])+this.annotation.dx,n.offsetCornerY=parseFloat(r[2])+this.annotation.dy,n.offsetX=this.annotation.dx,n.offsetY=this.annotation.dy,n}},{key:"drawSubject",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.subject,a=r.type,o={type:this,subjectData:i},u={};a==="circle"?u=bD(o):a==="rect"?u=yD(o):a==="threshold"?u=_D(o):a==="badge"&&(u=wD(o,this.annotation));var l=u,f=l.components,g=f===void 0?[]:f,y=l.handles,x=y===void 0?[]:y;return g.forEach(function(A){A&&A.attrs&&!A.attrs.stroke&&(A.attrs.stroke=n.annotation.color)}),this.editMode&&(x=x.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),g.push({type:"handle",handles:x})),g}},{key:"drawConnector",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.connector,a=i.type||r.type,o={type:this,connectorData:i};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var u={};a==="curve"?u=gD(o):a==="elbow"?u=hD(o):u=dD(o);var l=u,f=l.components,g=f===void 0?[]:f,y=l.handles,x=y===void 0?[]:y,A=g[0];A&&(A.attrs.stroke=this.annotation.color,A.attrs.fill="none");var M=i.end||r.end,C={};if(M==="arrow"){var N=A.data[1],I=A.data[0],B=Math.sqrt(Math.pow(N[0]-I[0],2)+Math.pow(N[1]-I[1],2));B<5&&A.data[2]&&(N=A.data[2]),C=vD({annotation:this.annotation,start:N,end:I,scale:i.endScale})}else M==="dot"?C=pD({line:A,scale:i.endScale}):(!M||M==="none")&&this.connector&&this.connector.select(".connector-end").remove();return C.components&&(C.components.forEach(function(z){z.attrs.fill=n.annotation.color,z.attrs.stroke=n.annotation.color}),g=g.concat(C.components)),this.editMode&&x.length!==0&&g.push({type:"handle",handles:x}),g}},{key:"drawNote",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.note,a=i.align||r.align||"dynamic",o={bbox:r.bbox,align:a,offset:this.annotation.offset},u=i.lineType||r.lineType,l={};u==="vertical"?l=lD(o):u==="horizontal"&&(l=fD(o));var f=l,g=f.components,y=g===void 0?[]:g,x=f.handles,A=x===void 0?[]:x;if(y.forEach(function(I){I.attrs.stroke=n.annotation.color}),this.editMode){A=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),y.push({type:"handle",handles:A});var M=this.dragNote.bind(this),C=this.dragstarted.bind(this),N=this.dragended.bind(this);this.note.call(c0().container(Io("g.annotations").node()).on("start",function(I){return C(I)}).on("drag",function(I){return M(I)}).on("end",function(I){return N(I)}))}else this.note.on("mousedown.drag",null);return y}},{key:"drawNoteContent",value:function(n){var r=this.annotation.note,i=r.padding!==void 0?r.padding:this.notePadding,a=r.orientation||n.orientation||"topBottom",o=r.lineType||n.lineType,u=r.align||n.align||"dynamic";o==="vertical"?a="leftRight":o==="horizontal"&&(a="topBottom");var l={padding:i,bbox:n.bbox,offset:this.annotation.offset,orientation:a,align:u},f=cD(l),g=f.x,y=f.y;return this.offsetCornerX=g+this.annotation.dx,this.offsetCornerY=y+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+g+", "+y+")"),[]}},{key:"drawOnScreen",value:function(n,r){return this.drawOnSVG(n,r)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function(){var n=this.annotation.position;this.a.attr("transform","translate("+n.x+", "+n.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var n=this.annotation.offset;this.note.attr("transform","translate("+n.x+", "+n.y+")")}}},{key:"setPositionWithAccessors",value:function(n){n&&this.annotation.data&&(this.mapX(n),this.mapY(n)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){pe.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var n=this.annotation.position;n.x+=pe.dx,n.y+=pe.dy,this.annotation.position=n}},{key:"dragNote",value:function(){var n=this.annotation.offset;n.x+=pe.dx,n.y+=pe.dy,this.annotation.offset=n}},{key:"mapHandles",value:function(n){var r=this;return n.map(function(i){return Ve({},i,{start:r.dragstarted.bind(r),end:r.dragended.bind(r)})})}}]),t}(),er=function(e,n,r){return function(i){oc(a,i);function a(o){ii(this,a);var u=sc(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return u.typeSettings=n,n.disable&&n.disable.forEach(function(l){u[l]&&u[l].remove(),u[l]=void 0,l==="note"&&(u.noteContent=void 0)}),u}return ai(a,[{key:"className",value:function(){return""+(n.className||En(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this)&&En(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(u){return this.typeSettings.subject=Ve({},n.subject,this.typeSettings.subject),En(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawSubject",this).call(this,Ve({},u,this.typeSettings.subject))}},{key:"drawConnector",value:function(u){return this.typeSettings.connector=Ve({},n.connector,this.typeSettings.connector),En(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawConnector",this).call(this,Ve({},u,n.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(u){return this.typeSettings.note=Ve({},n.note,this.typeSettings.note),En(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNote",this).call(this,Ve({},u,n.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(u){return En(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNoteContent",this).call(this,Ve({},u,n.note,this.typeSettings.note))}}],[{key:"init",value:function(u,l){return En(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,u,l),r&&(u=r(u,l)),u}}]),a}(e)},Bo=function(t){oc(e,t);function e(n){ii(this,e);var r=sc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.textWrap=n.textWrap||120,r.drawText(),r}return ai(e,[{key:"updateTextWrap",value:function(r){this.textWrap=r,this.drawText()}},{key:"drawText",value:function(){if(this.note){dn(this.note,[this.annotation],"g","annotation-note-content");var r=this.note.select("g.annotation-note-content");dn(r,[this.annotation],"rect","annotation-note-bg"),dn(r,[this.annotation],"text","annotation-note-label"),dn(r,[this.annotation],"text","annotation-note-title");var i={height:0},a=this.a.select("text.annotation-note-label"),o=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,u=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,l=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,f={top:0,bottom:0,left:0,right:0};if(typeof l=="number"?f={top:l,bottom:l,left:l,right:l}:l&&(typeof l>"u"?"undefined":tD(l))==="object"&&(f=Ve(f,l)),this.annotation.note.title){var g=this.a.select("text.annotation-note-title");g.text(this.annotation.note.title),g.attr("fill",this.annotation.color),g.attr("font-weight","bold"),g.call(yd,o,u),i=g.node().getBBox()}a.text(this.annotation.note.label).attr("dx","0"),a.call(yd,o,u),a.attr("y",i.height*1.1||0),a.attr("fill",this.annotation.color);var y=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",y.width+f.left+f.right).attr("height",y.height+f.top+f.bottom).attr("x",y.x-f.left).attr("y",-f.top).attr("fill","white").attr("fill-opacity",0)}}}]),e}(g0);er(Bo,{className:"label",note:{align:"middle"}});var ko=er(Bo,{className:"callout",note:{lineType:"horizontal"}});er(ko,{className:"callout elbow",connector:{type:"elbow"}});er(ko,{className:"callout curve",connector:{type:"curve"}});er(g0,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});er(Bo,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});er(Bo,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var xD=function(t){oc(e,t);function e(){return ii(this,e),sc(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ai(e,[{key:"mapY",value:function(r){En(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,r);var i=this.annotation;(i.subject.x1||i.subject.x2)&&i.data&&r.y&&(i.y=r.y(i.data)),(i.subject.x1||i.subject.x2)&&!i.x&&(i.x=i.subject.x1||i.subject.x2)}},{key:"mapX",value:function(r){En(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,r);var i=this.annotation;(i.subject.y1||i.subject.y2)&&i.data&&r.x&&(i.x=r.x(i.data)),(i.subject.y1||i.subject.y2)&&!i.y&&(i.y=i.subject.y1||i.subject.y2)}}]),e}(ko),TD=er(xD,{className:"callout xythreshold",subject:{type:"threshold"}}),dn=function(e,n,r,i,a){var o=e.selectAll(r+"."+(a||i)).data(n);return o.enter().append(r).merge(o).attr("class",i),o.exit().remove(),e},AD=function(e,n,r){var i=r.component,a=r.name;i&&i.on("mouseover.annotations",function(){e.call(a+"over",i,n)}).on("mouseout.annotations",function(){return e.call(a+"out",i,n)}).on("click.annotations",function(){return e.call(a+"click",i,n)})},yd=function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1.2;e.each(function(){for(var a=Io(this),o=a.text().split(r||/[ \t\r\n]+/).reverse().filter(function(g){return g!==""}),u=void 0,l=[],f=a.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");u=o.pop();)l.push(u),f.text(l.join(" ")),f.node().getComputedTextLength()>n&&l.length>1&&(l.pop(),f.text(l.join(" ")),l=[u],f=a.append("tspan").attr("x",0).attr("dy",i+"em").text(u))})},_d=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:":not(.handle)";return e?e.selectAll(n).nodes().reduce(function(r,i){var a=i.getBBox();r.x=Math.min(r.x,a.x),r.y=Math.min(r.y,a.y),r.width=Math.max(r.width,a.width);var o=i&&i.attributes&&i.attributes.y;return r.height=Math.max(r.height,(o&&parseFloat(o.value)||0)+a.height),r},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function ED(){var t=[],e=void 0,n=void 0,r=[],i={},a={},o=!1,u=void 0,l=ko,f=void 0,g=void 0,y=l0("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),x=void 0,A=function(C){x=C,o||C.selectAll("circle.handle").remove();var N=t.map(function(P){return P.type||(P.type=l),P.disable||(P.disable=r),new nD(P)});e=e||new rD({annotations:N,accessors:i,accessorsInverse:a,ids:u});var I=C.selectAll("g").data([e]);I.enter().append("g").attr("class","annotations");var B=C.select("g.annotations");dn(B,e.annotations,"g","annotation");var z=B.selectAll("g.annotation");z.each(function(P){var X=Io(this);X.attr("class","annotation"),dn(X,[P],"g","annotation-connector"),dn(X,[P],"g","annotation-subject"),dn(X,[P],"g","annotation-note"),dn(X.select("g.annotation-note"),[P],"g","annotation-note-content"),P.type=P.type.toString()==="[object Object]"?P.type:new P.type({a:X,annotation:P,textWrap:f,notePadding:g,editMode:o,dispatcher:y,accessors:i}),P.type.draw(),P.type.drawText&&P.type.drawText()})};return A.json=function(){return window.copy(JSON.stringify(e.json.map(function(M){return delete M.type,M}))),A},A.update=function(){return t&&e&&(t=e.annotations.map(function(M){return M.type.draw(),M})),A},A.updateText=function(){return e&&(e.updateText(f),t=e.annotations),A},A.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,A},A.disable=function(M){return arguments.length?(r=M,e&&(e.updateDisable(r),t=e.annotations),A):r},A.textWrap=function(M){return arguments.length?(f=M,e&&(e.updateTextWrap(f),t=e.annotations),A):f},A.notePadding=function(M){return arguments.length?(g=M,e&&(e.updateNotePadding(g),t=e.annotations),A):g},A.type=function(M,C){return arguments.length?(l=M,e&&(e.annotations.map(function(N){N.type.note&&N.type.note.selectAll("*:not(.annotation-note-content)").remove(),N.type.noteContent&&N.type.noteContent.selectAll("*").remove(),N.type.subject&&N.type.subject.selectAll("*").remove(),N.type.connector&&N.type.connector.selectAll("*").remove(),N.type.typeSettings={},N.type=l,N.subject=C&&C.subject||N.subject,N.connector=C&&C.connector||N.connector,N.note=C&&C.note||N.note}),t=e.annotations),A):l},A.annotations=function(M){if(!arguments.length)return e&&e.annotations||t;if(t=M,e&&e.annotations){var C=t.some(function(N){return!N.type||N.type.toString()!=="[object Object]"});C?(e=null,A(x)):e.annotations=t}return A},A.context=function(M){return arguments.length?(n=M,A):n},A.accessors=function(M){return arguments.length?(i=M,A):i},A.accessorsInverse=function(M){return arguments.length?(a=M,A):a},A.ids=function(M){return arguments.length?(u=M,A):u},A.editMode=function(M){return arguments.length?(o=M,x&&x.selectAll("g.annotation").classed("editable",o),e&&(e.editMode(o),t=e.annotations),A):o},A.collection=function(M){return arguments.length?(e=M,A):e},A.on=function(){var M=y.on.apply(y,arguments);return M===y?A:M},A}function SD(){const t=ED();let e=Ze(),n=Ze();const r=oe.dataJoin("g","annotation"),i=a=>{a.each((o,u,l)=>{const f=o.map(g=>({...g,x:e(g.x),y:n(g.y)}));t.annotations(f),r(de(l[u]),f).call(t)})};return i.xScale=(...a)=>a.length?(e=a[0],i):e,i.yScale=(...a)=>a.length?(n=a[0],i):n,oe.rebindAll(i,t),i}const MD=(t,e,n)=>{const r=e[n];if(typeof r!="function")throw new Error(`Attempt to rebind ${n} which isn't a function on the source object`);return(...i)=>{var a=r.apply(e,i);return a===e?t:a}},ND=t=>e=>t.reduce((n,r)=>n&&r(n),e),OD=(t,e,...n)=>{const r=ND(n);for(const i of Object.keys(e)){const a=r(i);a&&(t[a]=MD(t,e,i))}return t},DD=t=>t.map(e=>typeof e=="string"?new RegExp(`^${e}$`):e),RD=(...t)=>(t=DD(t),e=>t.every(n=>!n.test(e))&&e),CD=t=>t,m0=(t,e,n,r)=>t[e]?t[e].apply(t,n):r,LD=t=>t.tickValues()??m0(t.scale(),"ticks",t.tickArguments(),t.scale().domain()),ID=t=>t.tickFormat()??m0(t.scale(),"tickFormat",t.tickArguments(),CD),BD=t=>n=>{const r=LD(t),i=ID(t),a=r.map(i),o=n.append("text"),u=a.map(g=>o.text(g).node().getBBox()),l=Math.max(...u.map(g=>g.height)),f=Math.max(...u.map(g=>g.width));return o.remove(),{maxHeight:l,maxWidth:f,labelCount:a.length}},wd=t=>{let e=o=>{},n=null;const r=()=>t.orient()==="left"||t.orient()==="right",i=o=>{const{maxHeight:u,maxWidth:l,labelCount:f}=BD(t)(o),g=r(),y=t.scale().range()[g?0:1],x=t.scale().domain(),A=Math.floor((g?u:l)*f/y)+1;o.select("text").attr("visibility",(M,C)=>{const N=M>=x[0]&&M<=x[1],I=C%A===0;return N&&I?"visible":"hidden"}),o.select("path").attr("visibility",M=>M>=x[0]&&M<=x[1]?"visible":"hidden"),n&&g&&n.yAxisWidth(`max(${Math.ceil(l)+10+2}px, 3rem)`)},a=o=>t(o);return t.decorate(o=>{i(o),e(o)}),a.decorate=(...o)=>o.length?(e=o[0],a):e,a.series=(...o)=>o.length?(n=o[0],a):n,OD(a,t,RD("decorate","series")),a},Hn=class Hn extends qp{constructor(){super(...arguments),this.containerRef=Pr(),this.annotations=[],this.resizeObserver=new ResizeObserver(e=>{const[n]=e;n.contentRect.width&&n.contentRect.height&&this.redraw()})}get plotData(){return this.props.plotData}getCSSColorByIdx(e){const n=this.plotData.length;let r;if(n<=8)r=["#00E58D","#0093E5","#E56000","#007F8C","#159500","#DE1135","#9E1FDA","#E59700"][e];else if(n<=10)r=Rg[e];else{const i=e/(n-1)*.96+.04;r=am(i)}return r}getWebglColorFromCSS(e){var n;if(Hn.cssColors!==void 0)return((n=Jn(Hn.cssColors.getPropertyValue(e)))==null?void 0:n.rgb())??void 0}getWebGLColor(e){const n=typeof e=="string"?this.getWebglColorFromCSS(e):e;if(n!==void 0)return[n.r/255,n.g/255,n.b/255,n.opacity]}getWebglColorByIdx(e){const n=[1,0,0,1];if(this.plotData===void 0)return n;const r=this.getCSSColorByIdx(e);return this.getWebGLColor(yr(r))??n}redraw(){de(this.containerRef.current).datum({annotations:this.annotations,data:this.plotData}).call(this.series),de(this.containerRef.current).select("rect.annotation-note-bg").attr("rx",2).attr("ry",2);const e=de(this.containerRef.current).select(".svg-plot-area svg"),n=e.select("clipPath");if(n.empty()){const i=crypto.randomUUID();e.append("clipPath").attr("id",i).html('<rect x="0" y="0" width="100%" height="100%" />')}else{const i=n.attr("id");e.select("g.multi > g:not(g .annotation)").attr("clip-path",`url(#${i})`),e.select("g.multi > g:has(g .annotation)").attr("clip-path",null)}const{useClick:r}=this.props;if(r){const i=r();i&&e.on("click",()=>{const[a]=this.annotations;if(!a)return;const{x:o,y:u}=a,l=this._findClosestPoint(o,u);l&&i(l)})}}_webglMapping(e,n,r){return e.data[n]}_svgMapping(e,n,r,i){return i?e.annotations:e.data[n]}_createWebglSeries(){return[]}_createSvgSeries(){return[]}_findClosestPoint(e,n){return null}_annotationData(e){return null}_annotationOrientation(){return"vertical"}_addAnnotation(e){var g;if(!e){this.redraw();return}const n=this._annotationData(e);if(!n){this.redraw();return}const r=this.xScale.domain(),i=this.yScale.domain(),a=this._annotationOrientation()==="vertical"?{y1:this.yScale.range()[0],y2:this.yScale.range()[1]}:{x1:this.xScale.range()[0],x2:this.xScale.range()[1]},o=Math.max(Math.min(n.x,r[1]),r[0]);let u=o<(r[1]+r[0])/2?20:-20;const l=Math.max(Math.min(n.y,i[1]),i[0]),f=(g=this.annotationSvgElement)==null?void 0:g.getBoundingClientRect();if(f){const y=this.xScale(o),x=document.body.getBoundingClientRect(),A=y+f.left,M=.3,C=400;u!==-20&&A>Math.min(x.width*(1-M),Math.max(x.width/2,x.width-C))?u=-20:u!==20&&A<Math.max(x.width*M,Math.min(x.width/2,C))&&(u=20)}this.annotations.push({x:o,y:l,dx:u,dy:(l-i[0])/(i[1]-i[0])>=.5?15:-15,note:{title:n.title,label:n.note,wrapSplitter:`
`,bgPadding:5},subject:a}),this.redraw()}_createPointer(){const e=this.props.onPoint??(([n])=>{if(this.annotations.pop(),!n){this.redraw();return}const r=this.xScale.invert(n.x),i=this.yScale.invert(n.y),a=this._findClosestPoint(r,i);this._addAnnotation(a)});return oe.pointer().on("point",e)}_createZoom(){let e=!1,n=1,r,i;return sm().on("zoom",a=>{r=a.transform.rescaleX(this.xScaleBase).domain(),i=a.transform.rescaleY(this.yScaleBase).domain();const o=a.transform.k,u=this.xScale.domain(),l=this.yScale.domain();r[0]<this._xScaleInitial.domain()[0]&&(r[0]=this._xScaleInitial.domain()[0],e=!0,n===o&&(r[1]=r[0]+(u[1]-u[0]))),i[0]<this._yScaleInitial.domain()[0]&&(i[0]=this._yScaleInitial.domain()[0],e=!0,n===o&&(i[1]=i[0]+(l[1]-l[0]))),i[1]>this._yScaleInitial.domain()[1]&&(i[1]=this._yScaleInitial.domain()[1],e=!0,n===o&&(i[0]=i[1]-(l[1]-l[0]))),this.xScale.domain(r),this.yScale.domain(i),n=o,this.redraw()}).on("end",a=>{e&&(this.xScaleBase.domain(r),this.yScaleBase.domain(i),this.d3fcSvgNode.__zoom=new je(1,0,0)),this.redraw(),this.props.onZoomEnd&&this.props.onZoomEnd()})}setScale({xDomain:e,yDomain:n}){e&&this.xScale.domain(e),n&&this.yScale.domain(n),(e||n)&&(this.xScaleBase.domain(this.xScale.domain()),this.yScaleBase.domain(this.yScale.domain()),this.d3fcSvgNode.__zoom=new je(1,0,0),this.redraw())}_createAnnotations(){return SD().notePadding(15).type(TD)}_xLabel(){return null}_yLabel(){return null}_xTickValues(){return null}_yTickValues(){return null}_xTickFormat(){return e=>e}_yTickFormat(){return null}_createSeries(){const e=this._createZoom(),n=this._createPointer(),r=this._createWebglSeries(),i=this._createSvgSeries(),a=this._createAnnotations();this.series=oe.chartCartesian({xScale:this.xScale,yScale:this.yScale,xAxis:{bottom:y=>wd(oe.axisBottom(y))},yAxis:{left:y=>wd(oe.axisLeft(y)).series(this.series)}}).yOrient("left").xTickFormat(this._xTickFormat()).decorate(y=>{const x=y.enter().select(i.length>0?"d3fc-svg.plot-area":"d3fc-canvas.plot-area").on("measure.range",A=>{this.xScaleBase.range([0,A.detail.width]),this.yScaleBase.range([A.detail.height,0])});e&&x.call(e),n&&x.call(n)});const o=this._xTickValues();o&&this.series.xTickValues(o);const u=this._yTickValues();u&&this.series.yTickValues(u);const l=this._yTickFormat();l&&this.series.yTickFormat(l);const f=this._xLabel();f&&this.series.xLabel(f);const g=this._yLabel();g&&this.series.yLabel(g),r.length>0&&this.series.webglPlotArea(oe.seriesWebglMulti().series(r).mapping(this._webglMapping.bind(this))),i.length>0&&this.series.svgPlotArea(oe.seriesSvgMulti().series(i).mapping((y,x,A)=>this._svgMapping(y,x,A,x>=i.length))),a&&this.series.svgAnnotationPlotArea(oe.seriesSvgMulti().series([a]).mapping(y=>y.annotations))}createChart(){this.containerRef.current!==void 0&&(this.xScale=this._createXScale(),this.yScale=this._createYScale(),this.xScaleBase=this.xScale.copy(),this.yScaleBase=this.yScale.copy(),this._xScaleInitial=this.xScale.copy(),this._yScaleInitial=this.yScale.copy(),this._createSeries(),this.redraw())}originalDomain(){return{xDomain:this._xScaleInitial.domain(),yDomain:this._yScaleInitial.domain()}}componentDidMount(){var a,o;Hn.cssColors??(Hn.cssColors=window.getComputedStyle(document.documentElement)),this.createChart();for(const u of((a=this.containerRef.current)==null?void 0:a.getElementsByClassName("plot-area"))??[])if(u.tagName==="D3FC-SVG"||u.tagName==="D3FC-CANVAS"){this.d3fcSvgNode=u;break}this.annotationSvgElement=(o=this.containerRef.current)==null?void 0:o.getElementsByClassName("annotation-plot-area")[0];const{onTimestampHover:e,onFrameHover:n,onFrameSelect:r,onProfileChange:i}=this.props;e&&Di.subscribe(e),n&&lr.subscribe(n),r&&Oa.subscribe(r),i&&hn.subscribe(i)}componentDidUpdate(){this.redraw()}componentWillUnmount(){var a;(a=this.containerRef.current)==null||a.remove();const{onTimestampHover:e,onFrameHover:n,onFrameSelect:r,onProfileChange:i}=this.props;e&&Di.unsubscribe(e),n&&lr.unsubscribe(n),r&&Oa.unsubscribe(r),i&&hn.unsubscribe(i)}render(){Er(()=>(this.containerRef.current!==null&&this.resizeObserver.observe(this.containerRef.current),()=>this.resizeObserver.disconnect()),[]);const e={width:"100%",height:"100%"};return k("div",{ref:this.containerRef,style:e})}};Hn.cssColors=void 0;let oo=Hn;class Po extends oo{_annotationNote(e){return{title:"Data",note:`X ${this._xAccess(e).toFixed(2)}
Y ${this._yAccess(e).toFixed(2)}
`}}_createXScale(){return Ze().domain(oe.extentLinear().include([0]).accessors([e=>this._xAccess(e)])(this.props.plotData.flat()))}_createYScale(){return Ze().domain(oe.extentLinear().pad([.5,.5]).accessors([e=>this._yAccess(e)])(this.props.plotData.flat()))}_findClosestPoint(e,n){const r=this.props.plotData.map(g=>Ua(g,y=>Math.abs(this._xAccess(y)-e))).filter(Boolean),[i,a]=this._xScaleInitial.domain(),o=g=>(g-i)/(a-i),[u,l]=this._yScaleInitial.domain(),f=g=>(g-u)/(l-u);return Ua(r,g=>{const[y,x]=[this._xAccess(g),this._yAccess(g)];return(o(y)-o(e))**2+(f(x)-f(n))**2})}_annotationData(e){const n=this._xAccess(e),r=this._yAccess(e);return{x:n,y:r,...this._annotationNote(e)}}_createWebglSeries(){const e=n=>oe.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(r=>this._xAccess(r)).mainValue(r=>this._yAccess(r)).lineWidth(1.5).defined(()=>!0).decorate((r,i)=>{oe.webglStrokeColor().value(a=>n).data(i)(r)});return this.props.plotData.map((n,r)=>e(this.getWebglColorByIdx(r)))}}class kD extends Po{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.cpu_load/10}_createYScale(){return Ze().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Load [%]"}_annotationNote(e){return{title:"CPU Load",note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Load ${this._yAccess(e).toFixed(2)}%
`}}}const PD=t=>()=>{const{current:e}=t;if(!e)return null;e.annotations.pop();const n=Di.get();if(!n){e.redraw();return}const{x:r,yProc:i}=n,[a,o]=e.yScale.domain(),u=e._findClosestPoint(r,a+(o-a)*i);e._addAnnotation(u)},$D=t=>([e])=>{const{current:n}=t;if(!n)return null;if(!e){Di.set(null);return}const r=n.xScale.invert(e.x),i=n.yScale.invert(e.y),[a,o]=n.yScale.domain();Di.set({x:r,yProc:(i-a)/(o-a)})},$o=t=>({onPoint:$D(t),onTimestampHover:PD(t)}),WD=Ar(({fullData:t})=>{const e=St(null);return k(kn,{children:k(kD,{ref:e,plotData:[t],...$o(e)})})});Qn(WD,"CPU Load",{dataProvider:Qb,additionalProps:{contentClassName:Sr,minWidth:150,minHeight:150}});function VD(){const t=Ln.get(),e=new Map;if((t??[]).filter(n=>n.name===kb).forEach(n=>{n.args.die_temp.forEach((r,i)=>{var a;e.get(i)===void 0&&e.set(i,[]),(a=e.get(i))==null||a.push({ts:+n.ts.toFixed(3),temp:r,sensor:`die-temp${i}`})})}),e.size!==0)return e.forEach((n,r)=>{const i=new Set(n.map(a=>a.temp));i.size===1&&i.values().next().value===null&&e.delete(r)}),{fullData:Array.from(e.values())}}class zD extends Po{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.temp}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Temperature [℃]"}_annotationNote(e){const n=this._yAccess(e),r=n?`${n.toFixed(2)}℃`:"not provided";return{title:e.sensor,note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Temp ${r}
`}}}const FD=Ar(({fullData:t})=>{const e=St(null);return k(kn,{children:k(zD,{ref:e,plotData:t,...$o(e)})})});Qn(FD,"DIE temperature",{dataProvider:VD,additionalProps:{contentClassName:Sr,minHeight:150,minWidth:150}});var v0=(t=>(t.X="x",t.Y="y",t))(v0||{});const xd=t=>Object.values(v0).find(e=>e!==t);class p0 extends oo{constructor(){super(...arguments),this.orient=this.props.orient??"horizontal",this._mainAxis=this.orient==="vertical"?"y":"x",this._axisType={x:this._getAxisType("x"),y:this._getAxisType("y")},this._plotData=this._sortPlotData()}get plotData(){return this._plotData}_getAxisType(e){const[n]=this.props.plotData,[r]=n,a=typeof this._accessValue(r,e);return a==="number"||a==="bigint"?"number":"string"}_access(e,n,r){switch(this._axisType[r]){case"number":return this._accessValue(e,r);case"string":const i=this._accessValue(e,r);return n.findIndex(a=>i===this._accessValue(a,r))}}_sortPlotData(){if(!this.props.order)return this.props.plotData;const e=this.props.order==="descending"?1:0,n=Math.pow(-1,1+e),i=[...this.props.plotData[0]];i.sort((f,g)=>{const[y,x]=[f,g].map(A=>this._accessValue(A,this._mainAxis));return(x-y)*n});const a=xd(this._mainAxis),o=i.map(f=>[this._accessValue(f,a),this._accessValue(f,this._mainAxis)]),u=Object.fromEntries(o),l=this.props.plotData.slice(1).map(f=>[...f].sort((g,y)=>{const[x,A]=[g,y].map(M=>this._accessValue(M,a)).map(M=>u[M]??1/0*n);return(A-x)*n}));return[i,...l]}_tickValues(e){switch(this._axisType[e]){case"number":return e==="x"?super._xTickValues():super._yTickValues();case"string":const[n]=this.plotData;return yu(0,n.length)}}_tickFormat(e){switch(this._axisType[e]){case"number":return e==="x"?super._xTickFormat():super._yTickFormat();case"string":const[n]=this.plotData;return r=>this._accessValue(n[r],e)}}_xTickFormat(){return this._tickFormat("x")}_yTickFormat(){return this._tickFormat("y")}_xTickValues(){return this._tickValues("x")}_yTickValues(){return this._tickValues("y")}_xLabel(){return this._getLabel("x")}_yLabel(){return this._getLabel("y")}_createScale(e){switch(this._axisType[e]){case"number":return Ze().domain(oe.extentLinear().include([0]).pad([0,.05]).accessors([r=>this._accessValue(r,e)])(this.plotData.flat()));case"string":const n=[-.5,this.plotData.reduce((r,i)=>r+i.length-1,0)+.5];return Ze().domain(n)}}_createXScale(){return this._createScale("x")}_createYScale(){return this._createScale("y")}_findClosestPoint(e,n){const[r,i]=this.orient==="vertical"?[e,"x"]:[n,"y"],a=this.plotData.map(u=>u.map(l=>[l,u])).flat(),[o]=Ua(a,([u,l])=>Math.abs(this._access(u,l,i)-r));return o}_annotationData(e){const[n]=this.plotData,r={x:this._access(e,n,"x"),y:this._access(e,n,"y")};return r[this._mainAxis]/=2,{...r,...this._annotationNote(e)}}_annotationOrientation(){return this.props.orient??super._annotationOrientation()}_createSvgSeries(){const e=this.props.decorateSvgSeries??(r=>i=>{i.select("path").attr("fill",r)}),n=(r,i)=>oe.autoBandwidth(oe.seriesSvgBar()).xScale(this.xScale).yScale(this.yScale).orient(this.orient).crossValue(a=>this._access(a,r,xd(this._mainAxis))).mainValue(a=>this._access(a,r,this._mainAxis)).defined(()=>this.xScale.range().some(Boolean)&&this.yScale.range().some(Boolean)).decorate(e(i));return this.plotData.map((r,i)=>n(r,this.getCSSColorByIdx(i)))}}class b0 extends p0{constructor(){super(...arguments),this.formatter=new Gp("microseconds")}_accessValue(e,n){return n===this._mainAxis?e.duration.average/1e3:e.name}_getLabel(e){return e===this._mainAxis?"Time [ms]":"Operator Name"}_annotationNote(e){const n=e.name,r=this.formatter.format(e.duration.total),i=this.formatter.format(e.duration.average);return{title:n.toString(),note:`Average time: ${i}
Total time: ${r}`}}}function UD({plotData:t}){const e=Ed(),n=St(null);return k(kn,{children:k(b0,{ref:n,plotData:t,orient:"horizontal",order:"ascending",theme:e,...zd(n)})})}Qn(UD,"OP Execution Time",{dataProvider:Wb,additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});function YD({plotData:t}){return k(kn,{children:k(b0,{plotData:t,orient:"horizontal",order:"ascending"})})}Qn(YD,"OP Type Execution Time",{dataProvider:Vb,additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});class HD extends p0{_accessValue(e,n){return n===this._mainAxis?e.size:e.name}_getLabel(e){return e===this._mainAxis?"Size [B]":"Operator Name"}_annotationNote(e){return{title:e.name,note:`Size: ${e.size}B`}}}function XD({plotData:t}){const e=Ed(),n=St(null);return k(kn,{children:k(HD,{ref:n,plotData:t,orient:"horizontal",order:"ascending",theme:e,...zd(n)})})}Qn(XD,"OP Size",{dataProvider:zb,additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});const qD="_title_lcydk_74",GD="_selected_lcydk_81",jD="_legend_lcydk_87",JD="_square_lcydk_99",ZD="_divider_lcydk_131",We={"ram-overview-content":"_ram-overview-content_lcydk_41","ram-overview-selectors":"_ram-overview-selectors_lcydk_50","range-selector":"_range-selector_lcydk_60",title:qD,selected:GD,legend:jD,square:JD,"memory-usage-content":"_memory-usage-content_lcydk_104","memory-usage-legend":"_memory-usage-legend_lcydk_111",divider:ZD};class QD extends Po{_xAccess(e){return e.ts}_yAccess(e){return e.percentage}_createYScale(){return Ze().domain([0,100])}_annotationNote(e){return{title:this.props.memoryNameFunc(e.address,!1,!1),note:`Timestamp: ${e.ts.toFixed(2)}ms
Used: ${e.used}B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused}B
Size: ${e.used+e.unused}B`}}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Usage [%]"}constructor(e){super(e)}}class KD extends Po{_createXScale(){return Ze().domain(oe.extentLinear().include([0]).accessors([e=>e.ts])(this.props.plotData.flat()))}_createYScale(){return Ze().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return`Usage [%] (${this.props.totalMemory} B total)`}_webglMapping(e,n){if(n>=e.data.length){const r=Object.values(this.props.addrToRange)[n%e.data.length][0];return[{ts:this._xScaleInitial.domain()[0],base:r},{ts:this._xScaleInitial.domain()[1],base:r}]}return e.data[n]}_createWebglSeries(){const e=i=>oe.seriesWebglArea().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).baseValue(a=>a.base/this.props.totalMemory*100).mainValue(a=>(a.base+a.used)/this.props.totalMemory*100).defined(()=>!0).decorate((a,o)=>{oe.webglFillColor().value(u=>typeof i=="string"?this.getWebGLColor(i)??[1,0,0,1]:i).data(o)(a)}),n=i=>oe.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).mainValue(a=>a.base).lineWidth(1.5).defined(()=>!0).decorate((a,o)=>{oe.webglStrokeColor().value(u=>this.getWebGLColor(i)??[1,0,0,1]).data(o)(a)}),r={0:"--colors-lime",1:"--colors-orange"};return this.props.plotData.map((i,a)=>e(a in r?r[a]:"--colors-red")).concat(Object.values(this.props.addrToRange).map(i=>n("--colors-black")))}_findClosestPoint(e,n){let r=-1;if(n<this.props.assignedMemory/this.props.totalMemory*100?r=1:n>=this._yScaleInitial.domain()[1]?r=this.props.plotData.length-1:(r=Object.values(this.props.addrToRange).findIndex(l=>l[0]<=n&&n<l[1]),r+=2),r===-1)return null;const i=this.props.plotData[r],a=Hi(l=>l.ts).left(i,e),o=i[a===0?a:a-1],u=i[a>=i.length?i.length-1:a];return e-o.ts>u.ts-e?u:o}_annotationData(e){return{x:e.ts,y:(e.base+e.used)/this.props.totalMemory*100,title:e.address!==-1?this.props.memoryNameFunc(e.address,!1,!1):"Statically allocated memory",note:(e.address!==-1?`Timestamp: ${e.ts.toFixed(2)}ms
Used: ${e.used}B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused}B
`:"")+`Size: ${e.used+e.unused}B`}}}function y0(t){return`0x${t.toString(16)}`}const Td=Ar(t=>{const e=St(null),n=[];return t.percent&&n.push(`${t.percent.toFixed(2)}%`),t.addr&&n.push(y0(t.addr)),k("button",{ref:e,className:We["range-selector"]+" "+(t.additionalClass??""),onClick:r=>{t.onClick(r),t.selectButton(e)},children:[k("span",{className:We.title,children:t.name}),n.length>0?k("span",{children:n.join(", ")}):void 0]})}),tR=Ar(({assignedMemory:t,addrToRange:e,addrToProps:n,plotData:r,totalMemory:i,memoryRegionName:a})=>{const o=St(null),u=St(null),l=y=>{const x=o.current;x!==void 0&&x.setScale({yDomain:e[y]})},f=y=>{var x;g(),(x=y.current)==null||x.classList.add(We.selected)},g=()=>{var x;const y=We.selected;for(const A of((x=u.current)==null?void 0:x.getElementsByClassName(y))??[])A.classList.remove(y)};return k(kn,{children:[k("div",{className:We["ram-overview-content"],children:[k(KD,{ref:o,plotData:r,addrToRange:e,assignedMemory:t,totalMemory:i,memoryNameFunc:a,onZoomEnd:()=>g(),...$o(o)}),k("div",{ref:u,className:We["ram-overview-selectors"],children:[k(Td,{name:"whole graph",percent:100,onClick:()=>{var y,x;(x=o.current)==null||x.setScale(((y=o.current)==null?void 0:y.originalDomain())??{})},selectButton:f,additionalClass:We.selected}),k("div",{className:We.divider}),Object.keys(n).map(y=>Number.parseInt(y)).sort().reverse().map(y=>k(Td,{name:n[y].threadName?`${n[y].threadName} thread`:n[y].symbol??n[y].region??y0(y),addr:y,percent:n[y].ramPercent,onClick:()=>l(y),selectButton:f}))]})]}),k("div",{className:We.legend,children:[k("span",{children:[k("div",{className:We.square,style:{backgroundColor:"var(--colors-lime)"}})," free"]}),k("span",{children:[k("div",{className:We.square,style:{backgroundColor:"var(--colors-red)"}})," allocated"]}),k("span",{children:[k("div",{className:We.square,style:{backgroundColor:"var(--colors-orange)"}})," statically allocated"]})]})]})});Qn(tR,"RAM Overview",{dataProvider:_0,additionalProps:{contentClassName:Sr,minHeight:460,minWidth:350}});function eR({color:t,strokeWidth:e="1rem",width:n="1rem"}){return k("svg",{width:n,height:"1rem",viewBox:"0 0 100 10",children:k("line",{x1:"0",x2:"100",y1:"5",y2:"5",style:{stroke:t,"stroke-width":e}})})}function nR({data:t,assignedMemory:e,addrToRange:n,plotData:r,memoryRegionName:i}){const a=St(),o=St(null),[u,l]=Xn(),f=y=>{const x=a.current,A="#FFFFFF";if(x===void 0)return A;const[M,C,N,I]=x.getWebglColorByIdx(y);return yr(M*255,C*255,N*255,1).formatHex()};if(e===-1)return;const g=Array.from(new Set(t.map(y=>y.memory_addr)).values()).sort();return Er(()=>{l(g.map((y,x)=>k("p",{children:[k(eR,{color:f(x),strokeWidth:"1.5rem"})," ",i(y,!0,!1)," "]})))},[a]),k(kn,{children:k("div",{className:We["memory-usage-content"],children:[k(QD,{ref:a,plotData:r.slice(2),addrToRange:n,assignedMemory:e,memoryNameFunc:i,...$o(a)}),k("div",{ref:o,className:We["memory-usage-legend"],children:u})]})})}Qn(nR,"Memory usage",{dataProvider:_0,additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});function rR(t,e){const n=t.sort((g,y)=>{const x=g.memory_addr-y.memory_addr;return x===0?g.ts-y.ts:x}),r=new Set;let i=e;n.forEach(g=>{r.has(g.memory_addr)||(i+=g.used+g.unused,r.add(g.memory_addr))});const a={},o=Math.max(...n.map(g=>g.ts))/1e3,u=[[{ts:0,used:i-e,unused:0,base:e,percentage:100,address:-1},{ts:o,used:i-e,unused:0,base:e,percentage:100,address:-1}],[{ts:0,used:e,unused:0,base:0,percentage:100,address:-1},{ts:o,used:e,unused:0,base:0,percentage:100,address:-1}]];let l=[],f=u[1];return n.forEach((g,y,x)=>{l.push({ts:g.ts/1e3,base:f[0].base+f[0].used+f[0].unused,used:g.used,unused:g.unused,percentage:g.used/(g.used+g.unused)*100,address:g.memory_addr}),(y+1>=x.length||g.memory_addr!==x[y+1].memory_addr)&&(a[g.memory_addr]=[l[0].base/i*100,(l[0].base+l[0].used+l[0].unused)/i*100],u.push(l),l=[],f=u[u.length-1])}),{data:u,totalMemory:i,addrToRange:a}}function iR(t,e,n,r,i,a=!0,o=!0){const u=[];o&&u.push(`${(i[t][1]-i[t][0]).toFixed(2)}% of RAM`),a&&u.push(`0x${t.toString(16)}`);let l="";u.length>0&&(l=` (${u.join(", ")})`);const f=e.find(g=>g.memory_addr===t);return f!=null&&f.for_thread_id&&f.for_thread_id in n?`${n[f.for_thread_id]} thread${l}`:t in r?`${r[t]}${l}`:`${f==null?void 0:f.memory_region}${l}`}function aR(){var g,y,x;const t=Ln.get(),e=(t??[]).filter(A=>A.name===hu).map(A=>({name:A.name,ts:+A.ts.toFixed(3),...A.args})),n=new Set;e.forEach(A=>n.add(`${A.memory_region};${A.memory_addr};${A.for_thread_id}`));let r=Array.from(n).map(A=>{const[M,C,N]=A.split(";");return{memory_region:M,memory_addr:+C,for_thread_id:+N}});const i=((g=t==null?void 0:t.find(A=>A.name===Cb))==null?void 0:g.args)??{},a=((y=t==null?void 0:t.find(A=>A.name===Lb))==null?void 0:y.args)??0,o=t==null?void 0:t.filter(A=>A.name===Ib).reduce((A,M,C,N)=>(A[M.tid]=M.args.name,A),{});if(o){const A=(x=Object.entries(o).find(([C,N])=>N==="main"))==null?void 0:x[0],M=r.findIndex(C=>C.for_thread_id===+(A??-1));M!==-1&&(r=[r[M]].concat(r.filter((C,N)=>N!==M)))}if(!e||e.length===0)return;const{data:u,addrToRange:l,totalMemory:f}=rR(e,a);return{fullData:e,plotData:u,threadNameData:o,memorySymbols:i,addrToRange:l,staticallyAssignedMem:a,totalMemory:f}}let Bs=null,kr=null;function _0(){if(kr!==null&&Bs!==null&&Ln.get()===Bs)return kr;Bs=Ln.get();const t=aR();if(!t)return kr=void 0,kr;const{fullData:e,plotData:n,threadNameData:r,memorySymbols:i,addrToRange:a,staticallyAssignedMem:o,totalMemory:u}=t,l=(y,x=!0,A=!0)=>iR(y,e,r??{},i,a,x,A),f=Array.from(new Set(e.map(y=>y.memory_addr))).sort().reverse(),g={};return f.forEach(y=>{const x=e.find(M=>M.memory_addr===y),A=x==null?void 0:x.for_thread_id;g[y]={range:y in a?a[y]:void 0,threadName:r&&A?r[A]:void 0,symbol:i[y],ramPercent:y in a?a[y][1]-a[y][0]:void 0,region:x==null?void 0:x.memory_region}}),kr={data:e,plotData:n,assignedMemory:o,addrToProps:g,totalMemory:u,addrToRange:a,memoryRegionName:l},kr}const oR=Ar(({children:t})=>k("div",{className:ks["tiling-panel"],children:[t,k("div",{className:ks.background})]})),Oi=Zb,sR={global:{splitterSize:4,tabEnableRename:!1},borders:[],layout:{type:"row",children:[{type:"row",children:[{type:"tabset",children:[Mi.createJSONNode()]},{type:"tabset",children:[Oi.createJSONNode()]}]}]}};[Mi,Oi].forEach(t=>t.instances.set(1));const uR=3,fR=Ar(({tilingRef:t})=>{jp(t,()=>({addNode:o,removeNode:u,getRef:()=>e}),[]);const e=St(),n=Ue.fromJson(sR);let r,i;n.visitNodes((x,A)=>{if(!(x instanceof Qt))return;const M=x.getAttr("component");M===Oi.title?r=x:M===Mi.title&&(i=x)});let a=null;function o(x){var I;let A=n.getNodeById(r.getId())&&i.getWindowId()===r.getWindowId()?r:i;for(;A&&(A.getType()==="tab"||(A==null?void 0:A.getOrientation())!==Ct.HORZ);)A=A==null?void 0:A.getParent();if(n.getRoot().getId()===(A==null?void 0:A.getId())&&(A=r.getParent()),!A)return;const M=A.getChildren(),C=(M.length??0)>=uR;x.incrInstances();const N=n.doAction(Ot.addNode(x.createJSONNode(),C?M[M.length-1].getId():A.getId(),C?vt.CENTER:vt.RIGHT,-1,!0));N&&C&&a===null&&(a=((I=N.getParent())==null?void 0:I.getChildren()[0].getId())??null)}function u(x){n.visitNodes(A=>{A.getAttr("component")===x.title&&(x.decrInstances(),n.doAction(Ot.deleteTab(A.getId())))})}const l=x=>{const A=x.getComponent();if(A===void 0)return;const M=ca(A),C=M==null?void 0:M.component;if(C)return x.setEventListener("visibility",()=>{var N;if(x.isVisible()){const I=new Event("resize",{bubbles:!0});(N=x.getMoveableElement())==null||N.dispatchEvent(I)}}),k(oR,{children:k(C,{...x.getConfig()??{}})})};Gl.subscribe(()=>{Gl.get()||(jl().filter(x=>![Mi,Oi].includes(x)).forEach(u),a=null,jl().filter(x=>![Mi,Oi].includes(x)&&x.available.get()).forEach(o),a&&n.doAction(Ot.selectTab(a)))});const f=x=>{var C;const A=Qp();if(!A)return;const M=(C=ca(A))==null?void 0:C.createJSONNode();if(M)return{json:M}},g=x=>{if(x.type===Ot.ADD_NODE&&"component"in x.data.json){const A=ca(x.data.json.component);A&&A.incrInstances()}else if(x.type===Ot.DELETE_TAB){const A=n.getNodeById(x.data.node),M=ca(A==null?void 0:A.getAttr("component"));M&&M.decrInstances()}else if(x.type===Ot.MAXIMIZE_TOGGLE){const A=n.getNodeById(x.data.node);if(A===void 0)return x;A.isMaximized()?A.updateAttrs({enableDrag:!0}):A.updateAttrs({enableDrag:!1})}return x},y=(x,A)=>{A.leading=k(Kp,{})};return k("div",{id:ks["tiling-layout"],children:k(Sb,{ref:e,icons:{close:k(Zp,{}),maximize:k(Jp,{})},model:n,factory:l,popoutWindowName:"Zephelin Trace Viewer",realtimeResize:!0,onExternalDrag:f,onAction:g,onRenderTab:y})})},(t,e)=>!0);export{fR as default};
