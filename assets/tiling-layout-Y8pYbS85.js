import{u as I,b as qv,n as Gv,x as du,a as kr,$ as Ca,k as mn,M as Ar,A as St,_ as un,d as In,y as Er,g as fo,T as Nd,C as jv,c as Od,e as hu,f as ho,m as xa,s as La,p as ze,V as dr,F as Jv,h as Zv,i as Qv,j as Kv,v as Dd,l as lr,o as Jl,q as tb,r as eb,t as Zl,w as Qn,z as en,S as nb,B as Ri,D as Sr,E as rb,G as Rd,H as Cd,I as Ws,J as ib,K as Ni,L as Ql,N as Kl,O as ab,P as da,Q as ob}from"./index-DL0ZYfQV.js";function sb({color:t="#9E9EA4"}){return I("div",{className:"panel-icon",children:I("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:I("path",{d:"M2.66666 8H13.3333M2.66666 4H13.3333M2.66666 12H13.3333",stroke:t,"stroke-width":"0.666667","stroke-linecap":"round","stroke-linejoin":"round"})})})}function ub(t){return{render:function(e){Gv(e,t)},unmount:function(){qv(t)}}}var cb=Object.defineProperty,lb=(t,e,n)=>e in t?cb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e,n)=>lb(t,typeof e!="symbol"?e+"":e,n);const Ci=class Ta{constructor(e){H(this,"_name"),this._name=e}static flip(e){return e===Ta.HORZ?Ta.VERT:Ta.HORZ}getName(){return this._name}toString(){return this._name}};H(Ci,"HORZ",new Ci("horz"));H(Ci,"VERT",new Ci("vert"));let Ct=Ci;class Et{constructor(e,n,r,i){H(this,"x"),H(this,"y"),H(this,"width"),H(this,"height"),this.x=e,this.y=n,this.width=r,this.height=i}static empty(){return new Et(0,0,0,0)}static fromJson(e){return new Et(e.x,e.y,e.width,e.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(e){this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this.width=Math.round(this.width/e)*e,this.height=Math.round(this.height/e)*e}static getBoundingClientRect(e){const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();return new Et(n,r,i,a)}static getContentRect(e){const n=e.getBoundingClientRect(),r=window.getComputedStyle(e),i=parseFloat(r.paddingLeft),a=parseFloat(r.paddingRight),o=parseFloat(r.paddingTop),s=parseFloat(r.paddingBottom),c=parseFloat(r.borderLeftWidth),f=parseFloat(r.borderRightWidth),g=parseFloat(r.borderTopWidth),_=parseFloat(r.borderBottomWidth),x=n.width-c-i-a-f,A=n.height-g-o-s-_;return new Et(n.left+c+i,n.top+g+o,x,A)}static fromDomRect(e){return new Et(e.x,e.y,e.width,e.height)}relativeTo(e){return new Et(this.x-e.x,this.y-e.y,this.width,this.height)}clone(){return new Et(this.x,this.y,this.width,this.height)}equals(e){return this.x===(e==null?void 0:e.x)&&this.y===(e==null?void 0:e.y)&&this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}equalSize(e){return this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,n){this.styleWithPosition(e.style,n)}styleWithPosition(e,n="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=n,e}contains(e,n){return this.x<=e&&e<=this.getRight()&&this.y<=n&&n<=this.getBottom()}removeInsets(e){return new Et(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let n=this.width;return e===Ct.VERT&&(n=this.height),n}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}const Ze=class re{constructor(e,n,r){H(this,"name"),H(this,"orientation"),H(this,"indexPlus"),this.name=e,this.orientation=n,this.indexPlus=r,re.values.set(this.name,this)}static getByName(e){return re.values.get(e)}static getLocation(e,n,r){if(n=(n-e.x)/e.width,r=(r-e.y)/e.height,n>=.25&&n<.75&&r>=.25&&r<.75)return re.CENTER;const i=r>=n,a=r>=1-n;return i?a?re.BOTTOM:re.LEFT:a?re.RIGHT:re.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(e){return this===re.TOP?new Et(e.x,e.y,e.width,e.height/2):this===re.BOTTOM?new Et(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===re.LEFT?new Et(e.x,e.y,e.width/2,e.height):this===re.RIGHT?new Et(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,n){if(this===re.TOP){const r=new Et(e.x,e.y,e.width,n),i=new Et(e.x,e.y+n,e.width,e.height-n);return{start:r,end:i}}else if(this===re.LEFT){const r=new Et(e.x,e.y,n,e.height),i=new Et(e.x+n,e.y,e.width-n,e.height);return{start:r,end:i}}if(this===re.RIGHT){const r=new Et(e.getRight()-n,e.y,n,e.height),i=new Et(e.x,e.y,e.width-n,e.height);return{start:r,end:i}}else{const r=new Et(e.x,e.getBottom()-n,e.width,n),i=new Et(e.x,e.y,e.width,e.height-n);return{start:r,end:i}}}reflect(){return this===re.TOP?re.BOTTOM:this===re.LEFT?re.RIGHT:this===re.RIGHT?re.LEFT:re.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};H(Ze,"values",new Map);H(Ze,"TOP",new Ze("top",Ct.VERT,0));H(Ze,"BOTTOM",new Ze("bottom",Ct.VERT,1));H(Ze,"LEFT",new Ze("left",Ct.HORZ,0));H(Ze,"RIGHT",new Ze("right",Ct.HORZ,1));H(Ze,"CENTER",new Ze("center",Ct.VERT,0));let pt=Ze;var Ae=(t=>(t.Close_Tab="Close",t.Close_Tabset="Close tab set",t.Active_Tabset="Active tab set",t.Move_Tabset="Move tab set",t.Move_Tabs="Move tabs(?)",t.Maximize="Maximize tab set",t.Restore="Restore tab set",t.Popout_Tab="Popout selected tab",t.Overflow_Menu_Tooltip="Hidden tabs",t.Error_rendering_component="Error rendering component",t.Error_rendering_component_retry="Retry",t))(Ae||{}),j=(t=>(t.FLEXLAYOUT__BORDER="flexlayout__border",t.FLEXLAYOUT__BORDER_="flexlayout__border_",t.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",t.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",t.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",t.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",t.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",t.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",t.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",t.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",t.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",t.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",t.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",t.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",t.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",t.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",t.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",t.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",t.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",t.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",t.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",t.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",t.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",t.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",t.FLEXLAYOUT__LAYOUT="flexlayout__layout",t.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",t.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",t.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",t.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",t.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",t.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",t.FLEXLAYOUT__SPLITTER="flexlayout__splitter",t.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",t.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",t.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",t.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",t.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",t.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",t.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",t.FLEXLAYOUT__ROW="flexlayout__row",t.FLEXLAYOUT__TAB="flexlayout__tab",t.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",t.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",t.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",t.FLEXLAYOUT__TABSET="flexlayout__tabset",t.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",t.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",t.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",t.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",t.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",t.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",t.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",t.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",t.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",t.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",t.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",t.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",t.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",t.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",t.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",t.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",t.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",t.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",t.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",t.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",t.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",t.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",t.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",t.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",t.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",t.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",t.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",t.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",t.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",t.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",t))(j||{});class _e{constructor(e,n){H(this,"type"),H(this,"data"),this.type=e,this.data=n}}const be=class me{static addNode(e,n,r,i,a){return new _e(me.ADD_NODE,{json:e,toNode:n,location:r.getName(),index:i,select:a})}static moveNode(e,n,r,i,a){return new _e(me.MOVE_NODE,{fromNode:e,toNode:n,location:r.getName(),index:i,select:a})}static deleteTab(e){return new _e(me.DELETE_TAB,{node:e})}static deleteTabset(e){return new _e(me.DELETE_TABSET,{node:e})}static renameTab(e,n){return new _e(me.RENAME_TAB,{node:e,text:n})}static selectTab(e){return new _e(me.SELECT_TAB,{tabNode:e})}static setActiveTabset(e,n){return new _e(me.SET_ACTIVE_TABSET,{tabsetNode:e,windowId:n})}static adjustWeights(e,n){return new _e(me.ADJUST_WEIGHTS,{nodeId:e,weights:n})}static adjustBorderSplit(e,n){return new _e(me.ADJUST_BORDER_SPLIT,{node:e,pos:n})}static maximizeToggle(e,n){return new _e(me.MAXIMIZE_TOGGLE,{node:e,windowId:n})}static updateModelAttributes(e){return new _e(me.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,n){return new _e(me.UPDATE_NODE_ATTRIBUTES,{node:e,json:n})}static popoutTab(e){return new _e(me.POPOUT_TAB,{node:e})}static popoutTabset(e){return new _e(me.POPOUT_TABSET,{node:e})}static closeWindow(e){return new _e(me.CLOSE_WINDOW,{windowId:e})}static createWindow(e,n){return new _e(me.CREATE_WINDOW,{layout:e,rect:n})}};H(be,"ADD_NODE","FlexLayout_AddNode");H(be,"MOVE_NODE","FlexLayout_MoveNode");H(be,"DELETE_TAB","FlexLayout_DeleteTab");H(be,"DELETE_TABSET","FlexLayout_DeleteTabset");H(be,"RENAME_TAB","FlexLayout_RenameTab");H(be,"SELECT_TAB","FlexLayout_SelectTab");H(be,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset");H(be,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights");H(be,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit");H(be,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle");H(be,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes");H(be,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes");H(be,"POPOUT_TAB","FlexLayout_PopoutTab");H(be,"POPOUT_TABSET","FlexLayout_PopoutTabset");H(be,"CLOSE_WINDOW","FlexLayout_CloseWindow");H(be,"CREATE_WINDOW","FlexLayout_CreateWindow");let Ot=be;class rt{constructor(e,n,r,i){H(this,"name"),H(this,"alias"),H(this,"modelName"),H(this,"pairedAttr"),H(this,"pairedType"),H(this,"defaultValue"),H(this,"alwaysWriteJson"),H(this,"type"),H(this,"required"),H(this,"fixed"),H(this,"description"),this.name=e,this.alias=void 0,this.modelName=n,this.defaultValue=r,this.alwaysWriteJson=i,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setAlias(e){return this.alias=e,this}setDescription(e){this.description=e}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(e){this.pairedAttr=e}setPairedType(e){this.pairedType=e}}H(rt,"NUMBER","number");H(rt,"STRING","string");H(rt,"BOOLEAN","boolean");class Xi{constructor(){H(this,"attributes"),H(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(e,n,r,i){const a=new rt(e,n,r,i);return this.attributes.push(a),this.nameToAttribute.set(e,a),a}addInherited(e,n){return this.addWithAll(e,n,void 0,!1)}add(e,n,r){return this.addWithAll(e,void 0,n,r)}getAttributes(){return this.attributes}getModelName(e){const n=this.nameToAttribute.get(e);if(n!==void 0)return n.modelName}toJson(e,n){for(const r of this.attributes){const i=n[r.name];(r.alwaysWriteJson||i!==r.defaultValue)&&(e[r.name]=i)}}fromJson(e,n){for(const r of this.attributes){let i=e[r.name];i===void 0&&r.alias&&(i=e[r.alias]),i===void 0?n[r.name]=r.defaultValue:n[r.name]=i}}update(e,n){for(const r of this.attributes)if(Object.prototype.hasOwnProperty.call(e,r.name)){const i=e[r.name];i===void 0?delete n[r.name]:n[r.name]=i}}setDefaults(e){for(const n of this.attributes)e[n.name]=n.defaultValue}pairAttributes(e,n){for(const r of n.attributes)if(r.modelName&&this.nameToAttribute.has(r.modelName)){const i=this.nameToAttribute.get(r.modelName);i.setpairedAttr(r),r.setpairedAttr(i),i.setPairedType(e)}}toTypescriptInterface(e,n){var r,i;const a=[],o=this.attributes.sort((s,c)=>s.name.localeCompare(c.name));a.push("export interface I"+e+"Attributes {");for(let s=0;s<o.length;s++){const c=o[s];let f=c.type,g,_=c,x;_.defaultValue!==void 0?g=_.defaultValue:_.modelName!==void 0&&n!==void 0&&n.nameToAttribute.get(_.modelName)!==void 0&&(x=_.modelName,_=n.nameToAttribute.get(x),g=_.defaultValue,f=_.type);const A=JSON.stringify(g),E=_.required?"":"?";let D=`	/**
	  `;c.description?D+=c.description:c.pairedType&&((r=c.pairedAttr)!=null&&r.description)&&(D+=`Value for ${c.pairedType} attribute ${c.pairedAttr.name} if not overridden`,D+=`

	  `,D+=(i=c.pairedAttr)==null?void 0:i.description),D+=`

	  `,c.fixed?D+=`Fixed value: ${A}`:x?D+=`Default: inherited from Global attribute ${c.modelName} (default ${A})`:D+=`Default: ${A}`,D+=`
	 */`,a.push(D),a.push("	"+c.name+E+": "+f+`;
`)}return a.push("}"),a.join(`
`)}}class Oe{constructor(e,n,r,i,a){H(this,"node"),H(this,"rect"),H(this,"location"),H(this,"index"),H(this,"className"),this.node=e,this.rect=n,this.location=r,this.index=i,this.className=a}}class Ia{constructor(e){H(this,"borders"),H(this,"borderMap"),H(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(e,n){const r=new Ia(n);r.borders=e.map(i=>De.fromJson(i,n));for(const i of r.borders)r.borderMap.set(i.getLocation(),i);return r}toJson(){return this.borders.map(e=>e.toJson())}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(e){for(const n of this.borders){e(n,0);for(const r of n.getChildren())r.forEachNode(e,1)}}setPaths(){for(const e of this.borders){const n="/border/"+e.getLocation().getName();e.setPath(n);let r=0;for(const i of e.getChildren())i.setPath(n+"/t"+r),r++}}findDropTargetNode(e,n,r){for(const i of this.borders)if(i.isShowing()){const a=i.canDrop(e,n,r);if(a!==void 0)return a}}}class go{constructor(e){H(this,"model"),H(this,"attributes"),H(this,"parent"),H(this,"children"),H(this,"rect"),H(this,"path"),H(this,"listeners"),this.model=e,this.attributes={},this.children=[],this.rect=Et.empty(),this.listeners=new Map,this.path=""}getId(){let e=this.attributes.id;return e!==void 0||(e=this.model.nextUniqueId(),this.setId(e)),e}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return this.parent===void 0?this.model.isRootOrientationVertical()?Ct.VERT:Ct.HORZ:Ct.flip(this.parent.getOrientation())}setEventListener(e,n){this.listeners.set(e,n)}removeEventListener(e){this.listeners.delete(e)}setId(e){this.attributes.id=e}fireEvent(e,n){this.listeners.has(e)&&this.listeners.get(e)(n)}getAttr(e){let n=this.attributes[e];if(n===void 0){const r=this.getAttributeDefinitions().getModelName(e);r!==void 0&&(n=this.model.getAttribute(r))}return n}forEachNode(e,n){e(this,n),n++;for(const r of this.children)r.forEachNode(e,n)}setPaths(e){let n=0;for(const r of this.children){let i=e;r.getType()==="row"?i+="/r"+n:r.getType()==="tabset"?i+="/ts"+n:r.getType()==="tab"&&(i+="/t"+n),r.path=i,r.setPaths(i),n++}}setParent(e){this.parent=e}setRect(e){this.rect=e}setPath(e){this.path=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}findDropTargetNode(e,n,r,i){let a;if(this.rect.contains(r,i)){if(this.model.getMaximizedTabset(e)!==void 0)a=this.model.getMaximizedTabset(e).canDrop(n,r,i);else if(a=this.canDrop(n,r,i),a===void 0&&this.children.length!==0){for(const o of this.children)if(a=o.findDropTargetNode(e,n,r,i),a!==void 0)break}}return a}canDrop(e,n,r){}canDockInto(e,n){if(n!=null){if(n.location===pt.CENTER&&n.node.isEnableDrop()===!1||n.location===pt.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||n.location!==pt.CENTER&&n.node.isEnableDivide()===!1)return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(e,n)}return!0}removeChild(e){const n=this.children.indexOf(e);return n!==-1&&this.children.splice(n,1),n}addChild(e,n){return n!=null?this.children.splice(n,0,e):(this.children.push(e),n=this.children.length-1),e.parent=this,n}removeAll(){this.children=[]}styleWithPosition(e){return e==null&&(e={}),this.rect.styleWithPosition(e)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"	")}}const Ba=class Hn extends go{constructor(e,n,r=!0){super(e),H(this,"tabRect",Et.empty()),H(this,"moveableElement"),H(this,"tabStamp"),H(this,"renderedName"),H(this,"extra"),H(this,"visible"),H(this,"rendered"),H(this,"scrollTop"),H(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,Hn.attributeDefinitions.fromJson(n,this.attributes),r===!0&&e.addNode(this)}static fromJson(e,n,r=!0){return new Hn(n,e,r)}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof Gt?this.parent.getWindowId():Ye.MAIN_WINDOW_ID}getWindow(){const e=this.model.getwindowsMap().get(this.getWindowId());if(e)return e.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==Ye.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){const e={};return Hn.attributeDefinitions.toJson(e,this.attributes),e}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame(()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)})}setRect(e){e.equals(this.rect)||(this.fireEvent("resize",{rect:e}),this.rect=e)}setVisible(e){e!==this.visible&&(this.visible=e,this.fireEvent("visibility",{visible:e}))}getScrollTop(){return this.scrollTop}setScrollTop(e){this.scrollTop=e}getScrollLeft(){return this.scrollLeft}setScrollLeft(e){this.scrollLeft=e}isRendered(){return this.rendered}setRendered(e){this.rendered=e}getTabRect(){return this.tabRect}setTabRect(e){this.tabRect=e}getTabStamp(){return this.tabStamp}setTabStamp(e){this.tabStamp=e}getMoveableElement(){return this.moveableElement}setMoveableElement(e){this.moveableElement=e}setRenderedName(e){this.renderedName=e}getNameForOverflowMenu(){const e=this.getAttr("altName");return e!==void 0?e:this.renderedName}setName(e){this.attributes.name=e}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(e){Hn.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return Hn.attributeDefinitions}setBorderWidth(e){this.attributes.borderWidth=e}setBorderHeight(e){this.attributes.borderHeight=e}static getAttributeDefinitions(){return Hn.attributeDefinitions}static createAttributeDefinitions(){const e=new Xi;return e.add("type",Hn.TYPE,!0).setType(rt.STRING).setFixed(),e.add("id",void 0).setType(rt.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),e.add("name","[Unnamed Tab]").setType(rt.STRING).setDescription("name of tab to be displayed in the tab button"),e.add("altName",void 0).setType(rt.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),e.add("helpText",void 0).setType(rt.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),e.add("component",void 0).setType(rt.STRING).setDescription("string identifying which component to run (for factory)"),e.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),e.add("tabsetClassName",void 0).setType(rt.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),e.add("enableWindowReMount",!1).setType(rt.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),e.addInherited("enableClose","tabEnableClose").setType(rt.BOOLEAN).setDescription("allow user to close tab via close button"),e.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(rt.BOOLEAN).setDescription("allow user to drag tab to new location"),e.addInherited("enableRename","tabEnableRename").setType(rt.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),e.addInherited("className","tabClassName").setType(rt.STRING).setDescription("class applied to tab button"),e.addInherited("contentClassName","tabContentClassName").setType(rt.STRING).setDescription("class applied to tab content"),e.addInherited("icon","tabIcon").setType(rt.STRING).setDescription("the tab icon"),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(rt.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),e.addInherited("enablePopout","tabEnablePopout").setType(rt.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),e.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(rt.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),e.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(rt.BOOLEAN).setDescription(`if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)
            then enabling this option will gray out this tab`),e.addInherited("borderWidth","tabBorderWidth").setType(rt.NUMBER).setDescription("width when added to border, -1 will use border size"),e.addInherited("borderHeight","tabBorderHeight").setType(rt.NUMBER).setDescription("height when added to border, -1 will use border size"),e.addInherited("minWidth","tabMinWidth").setType(rt.NUMBER).setDescription("the min width of this tab"),e.addInherited("minHeight","tabMinHeight").setType(rt.NUMBER).setDescription("the min height of this tab"),e.addInherited("maxWidth","tabMaxWidth").setType(rt.NUMBER).setDescription("the max width of this tab"),e.addInherited("maxHeight","tabMaxHeight").setType(rt.NUMBER).setDescription("the max height of this tab"),e}};H(Ba,"TYPE","tab");H(Ba,"attributeDefinitions",Ba.createAttributeDefinitions());let Qt=Ba;function Ld(){return typeof window<"u"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}function gu(t,e,n){let r;const i=e.getName(),a=e.getName();n===void 0&&(n=0),r===void 0&&e.getIcon()!==void 0&&(n!==0?r=I("img",{style:{width:"1em",height:"1em",transform:"rotate("+n+"deg)"},src:e.getIcon(),alt:"leadingContent"}):r=I("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const s={leading:r,content:i,name:a,buttons:[]};return t.customizeTab(e,s),e.setRenderedName(s.name),s}function Li(t){let e=!1;return t.nativeEvent instanceof MouseEvent&&(t.nativeEvent.button!==0||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)&&(e=!0),e}function Vs(t,e){const n=[...tf("iframe",e),...tf("webview",e)];for(const r of n)r.style.pointerEvents=t?"auto":"none"}function tf(t,e){return[...e.getElementsByTagName(t)]}function Id(t,e,n,r,i){e.preventDefault();const a=c=>{c.preventDefault(),n(c.clientX,c.clientY)},o=c=>{c.preventDefault(),i()},s=()=>{t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",s),t.removeEventListener("pointercancel",o),r()};t.addEventListener("pointermove",a),t.addEventListener("pointerup",s),t.addEventListener("pointercancel",o)}function Bd(t){if(t instanceof Qt)return t.isEnablePopout();if(t instanceof Gt){for(const e of t.getChildren())if(e.isEnablePopout()===!1)return!1;return!0}return!1}function ef(t,e){const n=t.getAttribute("style"),r=e.getAttribute("style");return n===r?!1:(n?e.setAttribute("style",n):e.removeAttribute("style"),!0)}function fb(){const t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Chromium")}function ka(t,e){if(t!==void 0&&(t instanceof Gt||t instanceof De)){const n=t.getSelected();n!==-1&&(e===n&&t.getChildren().length>0?e>=t.getChildren().length&&t.setSelected(t.getChildren().length-1):e<n?t.setSelected(n-1):e>n||t.setSelected(-1))}}function gi(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}const Pa=class hn extends go{constructor(e,n){super(e),H(this,"tabStripRect",Et.empty()),H(this,"contentRect",Et.empty()),H(this,"calculatedMinHeight"),H(this,"calculatedMinWidth"),H(this,"calculatedMaxHeight"),H(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,hn.attributeDefinitions.fromJson(n,this.attributes),e.addNode(this)}static fromJson(e,n,r){const i=new hn(n,e);if(e.children!=null)for(const a of e.children){const o=Qt.fromJson(a,n);i.addChild(o)}return i.children.length===0&&i.setSelected(-1),e.maximized&&e.maximized===!0&&(r.maximizedTabSet=i),e.active&&e.active===!0&&(r.activeTabSet=i),i}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){const e=this.attributes.selected;return e!==void 0?e:-1}getSelectedNode(){const e=this.getSelected();if(e!==-1)return this.children[e]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(e){return e===Ct.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(e){return e===Ct.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){const e={};return hn.attributeDefinitions.toJson(e,this.attributes),e.children=this.children.map(n=>n.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}calcMinMaxSize(){this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth();for(const e of this.children){const n=e;this.calculatedMinWidth=Math.max(this.calculatedMinWidth,n.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,n.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,n.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,n.getMaxHeight())}this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset(this.getWindowId())===this?!0:!(this.getParent()===this.getModel().getRoot(this.getWindowId())&&this.getModel().getRoot(this.getWindowId()).getChildren().length===1):!1}setContentRect(e){this.contentRect=e}getContentRect(){return this.contentRect}setTabStripRect(e){this.tabStripRect=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}getWindowId(){return this.parent.getWindowId()}canDrop(e,n,r){let i;if(e===this){const a=pt.CENTER,o=this.tabStripRect;i=new Oe(this,o,a,-1,j.FLEXLAYOUT__OUTLINE_RECT)}else{if(this.getWindowId()!==Ye.MAIN_WINDOW_ID&&!Bd(e))return;if(this.contentRect.contains(n,r)){let a=pt.CENTER;this.model.getMaximizedTabset(this.parent.getWindowId())===void 0&&(a=pt.getLocation(this.contentRect,n,r));const o=a.getDockRect(this.rect);i=new Oe(this,o,a,-1,j.FLEXLAYOUT__OUTLINE_RECT)}else if(this.tabStripRect!=null&&this.tabStripRect.contains(n,r)){let a,o,s;if(this.children.length===0)a=this.tabStripRect.clone(),o=a.y+3,s=a.height-4,a.width=2;else{let c=this.children[0];a=c.getTabRect(),o=a.y,s=a.height;let f=this.tabStripRect.x,g=0;for(let _=0;_<this.children.length;_++){if(c=this.children[_],a=c.getTabRect(),a.y!==o&&(o=a.y,f=this.tabStripRect.x),g=a.x+a.width/2,f<=n&&n<g&&a.y<r&&r<a.getBottom()){const x=pt.CENTER,A=new Et(a.x-2,a.y,3,a.height);if(this.rect.x<a.x&&a.x<this.rect.getRight()){i=new Oe(this,A,x,_,j.FLEXLAYOUT__OUTLINE_RECT);break}else return}f=g}}if(i==null&&a.getRight()<this.rect.getRight()){const c=pt.CENTER,f=new Et(a.getRight()-2,o,3,s);i=new Oe(this,f,c,this.children.length,j.FLEXLAYOUT__OUTLINE_RECT)}}}if(e.canDockInto(e,i))return i}delete(){this.parent.removeChild(this)}remove(e){const n=this.removeChild(e);this.model.tidy(),ka(this,n)}drop(e,n,r,i){const a=n;if(this===e)return;let o=e.getParent(),s=0;if(o!==void 0&&(s=o.removeChild(e),o instanceof De&&o.getSelected()===s?o.setSelected(-1):ka(o,s)),e instanceof Qt&&o===this&&s<r&&r>0&&r--,a===pt.CENTER){let c=r;if(c===-1&&(c=this.children.length),e instanceof Qt)this.addChild(e,c),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(c);else if(e instanceof pe)e.forEachNode((f,g)=>{f instanceof Qt&&(this.addChild(f,c),c++)},0);else{for(let f=0;f<e.getChildren().length;f++){const g=e.getChildren()[f];this.addChild(g,c),c++}this.getSelected()===-1&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let c=e;if(e instanceof Qt){const _=this.model.getOnCreateTabSet();c=new hn(this.model,_?_(e):{}),c.addChild(e),o=c}else if(e instanceof pe){const _=this.getParent();if(e.getOrientation()===_.getOrientation()&&(n.getOrientation()===_.getOrientation()||n===pt.CENTER)){const x=new pe(this.model,this.getWindowId(),{});x.addChild(e),c=x}}else c=e;const f=this.parent,g=f.getChildren().indexOf(this);if(f.getOrientation()===a.orientation)c.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),f.addChild(c,g+a.indexPlus);else{const _=new pe(this.model,this.getWindowId(),{});_.setWeight(this.getWeight()),_.addChild(this),this.setWeight(50),c.setWeight(50),_.addChild(c,a.indexPlus),f.removeChild(this),f.addChild(_,g)}c instanceof hn&&this.model.setActiveTabset(c,this.getWindowId())}this.model.tidy()}updateAttrs(e){hn.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return hn.attributeDefinitions}static getAttributeDefinitions(){return hn.attributeDefinitions}static createAttributeDefinitions(){const e=new Xi;return e.add("type",hn.TYPE,!0).setType(rt.STRING).setFixed(),e.add("id",void 0).setType(rt.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),e.add("weight",100).setType(rt.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),e.add("selected",0).setType(rt.NUMBER).setDescription("index of selected/visible tab in tabset"),e.add("name",void 0).setType(rt.STRING),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),e.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),e.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),e.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),e.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),e.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),e.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),e.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),e.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),e.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),e.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),e.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),e.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),e.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(rt.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),e.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(rt.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),e.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(rt.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};H(Pa,"TYPE","tabset");H(Pa,"attributeDefinitions",Pa.createAttributeDefinitions());let Gt=Pa;const $a=class fe extends go{constructor(e,n,r){super(e),H(this,"windowId"),H(this,"minHeight"),H(this,"minWidth"),H(this,"maxHeight"),H(this,"maxWidth"),this.windowId=n,this.minHeight=On,this.minWidth=On,this.maxHeight=Dn,this.maxWidth=Dn,fe.attributeDefinitions.fromJson(r,this.attributes),this.normalizeWeights(),e.addNode(this)}static fromJson(e,n,r){const i=new fe(n,r.windowId,e);if(e.children!=null)for(const a of e.children)if(a.type===Gt.TYPE){const o=Gt.fromJson(a,n,r);i.addChild(o)}else{const o=fe.fromJson(a,n,r);i.addChild(o)}return i}getWeight(){return this.attributes.weight}toJson(){const e={};fe.attributeDefinitions.toJson(e,this.attributes),e.children=[];for(const n of this.children)e.children.push(n.toJson());return e}getWindowId(){return this.windowId}setWindowId(e){this.windowId=e}setWeight(e){this.attributes.weight=e}getSplitterBounds(e){const n=this.getOrientation()===Ct.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=r[0].getRect(),o=r[r.length-1].getRect();let s=n?[a.x,o.getRight()]:[a.y,o.getBottom()];const c=n?[a.x,o.getRight()]:[a.y,o.getBottom()];for(let f=0;f<e;f++){const g=r[f];s[0]+=n?g.getMinWidth():g.getMinHeight(),c[0]+=n?g.getMaxWidth():g.getMaxHeight(),f>0&&(s[0]+=i,c[0]+=i)}for(let f=r.length-1;f>=e;f--){const g=r[f];s[1]-=(n?g.getMinWidth():g.getMinHeight())+i,c[1]-=(n?g.getMaxWidth():g.getMaxHeight())+i}return s=[Math.max(c[1],s[0]),Math.min(c[0],s[1])],s}getSplitterInitials(e){const n=this.getOrientation()===Ct.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=[];let o=0;for(let f=0;f<r.length;f++){const _=r[f].getRect(),x=n?_.width:_.height;a.push(x),o+=x}const s=r[e].getRect(),c=(n?s.x:s.y)-i;return{initialSizes:a,sum:o,startPosition:c}}calculateSplit(e,n,r,i,a){const o=this.getOrientation()===Ct.HORZ,s=this.getChildren(),c=s[e],f=o?c.getMaxWidth():c.getMaxHeight(),g=[...r];if(n<a){let x=a-n,A=0;g[e]+x>f?(A=g[e]+x-f,g[e]=f):g[e]+=x;for(let E=e-1;E>=0;E--){const D=s[E],M=o?D.getMinWidth():D.getMinHeight();if(g[E]-x>M){g[E]-=x;break}else x-=g[E]-M,g[E]=M}for(let E=e+1;E<s.length;E++){const D=s[E],M=o?D.getMaxWidth():D.getMaxHeight();if(g[E]+A<M){g[E]+=A;break}else A-=M-g[E],g[E]=M}}else{let x=n-a,A=0;g[e-1]+x>f?(A=g[e-1]+x-f,g[e-1]=f):g[e-1]+=x;for(let E=e;E<s.length;E++){const D=s[E],M=o?D.getMinWidth():D.getMinHeight();if(g[E]-x>M){g[E]-=x;break}else x-=g[E]-M,g[E]=M}for(let E=e-1;E>=0;E--){const D=s[E],M=o?D.getMaxWidth():D.getMaxHeight();if(g[E]+A<M){g[E]+=A;break}else A-=M-g[E],g[E]=M}}return g.map(x=>Math.max(.1,x)*100/i)}getMinSize(e){return e===Ct.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(e){return e===Ct.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=On,this.minWidth=On,this.maxHeight=Dn,this.maxWidth=Dn;let e=!0;for(const n of this.children){const r=n;r.calcMinMaxSize(),this.getOrientation()===Ct.VERT?(this.minHeight+=r.getMinHeight(),this.maxHeight+=r.getMaxHeight(),e||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,r.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,r.getMaxWidth())):(this.minWidth+=r.getMinWidth(),this.maxWidth+=r.getMaxWidth(),e||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,r.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,r.getMaxHeight())),e=!1}}tidy(){let e=0;for(;e<this.children.length;){const n=this.children[e];if(n instanceof fe){n.tidy();const r=n.getChildren();if(r.length===0)this.removeChild(n);else if(r.length===1){const i=r[0];if(this.removeChild(n),i instanceof fe){let a=0;const o=i.getChildren();for(const s of o)a+=s.getWeight();for(let s=0;s<o.length;s++){const c=o[s];c.setWeight(n.getWeight()*c.getWeight()/a),this.addChild(c,e+s)}}else i.setWeight(n.getWeight()),this.addChild(i,e)}else e++}else n instanceof Gt&&n.getChildren().length===0&&n.isEnableDeleteWhenEmpty()?(this.removeChild(n),n===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):e++}if(this===this.model.getRoot(this.windowId)&&this.children.length===0){const n=this.model.getOnCreateTabSet();let r=n?n():{};r={...r,selected:-1};const i=new Gt(this.model,r);this.model.setActiveTabset(i,this.windowId),this.addChild(i)}}canDrop(e,n,r){const i=r-this.rect.y,a=n-this.rect.x,o=this.rect.width,s=this.rect.height,c=10,f=50;let g;if(!(this.getWindowId()!==Ye.MAIN_WINDOW_ID&&!Bd(e))){if(this.model.isEnableEdgeDock()&&this.parent===void 0){if(n<this.rect.x+c&&i>s/2-f&&i<s/2+f){const _=pt.LEFT,x=_.getDockRect(this.rect);x.width=x.width/2,g=new Oe(this,x,_,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n>this.rect.getRight()-c&&i>s/2-f&&i<s/2+f){const _=pt.RIGHT,x=_.getDockRect(this.rect);x.width=x.width/2,x.x+=x.width,g=new Oe(this,x,_,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r<this.rect.y+c&&a>o/2-f&&a<o/2+f){const _=pt.TOP,x=_.getDockRect(this.rect);x.height=x.height/2,g=new Oe(this,x,_,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r>this.rect.getBottom()-c&&a>o/2-f&&a<o/2+f){const _=pt.BOTTOM,x=_.getDockRect(this.rect);x.height=x.height/2,x.y+=x.height,g=new Oe(this,x,_,-1,j.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(g!==void 0&&!e.canDockInto(e,g))return}return g}}drop(e,n,r){const i=n,a=e.getParent();a&&a.removeChild(e),a!==void 0&&a instanceof Gt&&a.setSelected(0),a!==void 0&&a instanceof De&&a.setSelected(-1);let o;if(e instanceof Gt||e instanceof fe)o=e,o instanceof fe&&o.getOrientation()===this.getOrientation()&&(n.getOrientation()===this.getOrientation()||n===pt.CENTER)&&(o=new fe(this.model,this.windowId,{}),o.addChild(e));else{const f=this.model.getOnCreateTabSet();o=new Gt(this.model,f?f(e):{}),o.addChild(e)}let s=this.children.reduce((f,g)=>f+g.getWeight(),0);s===0&&(s=100),o.setWeight(s/3);const c=!this.model.isRootOrientationVertical();if(i===pt.CENTER)r===-1?this.addChild(o,this.children.length):this.addChild(o,r);else if(c&&i===pt.LEFT||!c&&i===pt.TOP)this.addChild(o,0);else if(c&&i===pt.RIGHT||!c&&i===pt.BOTTOM)this.addChild(o);else if(c&&i===pt.TOP||!c&&i===pt.LEFT){const f=new fe(this.model,this.windowId,{}),g=new fe(this.model,this.windowId,{});g.setWeight(75),o.setWeight(25);for(const _ of this.children)g.addChild(_);this.removeAll(),f.addChild(o),f.addChild(g),this.addChild(f)}else if(c&&i===pt.BOTTOM||!c&&i===pt.RIGHT){const f=new fe(this.model,this.windowId,{}),g=new fe(this.model,this.windowId,{});g.setWeight(75),o.setWeight(25);for(const _ of this.children)g.addChild(_);this.removeAll(),f.addChild(g),f.addChild(o),this.addChild(f)}o instanceof Gt&&this.model.setActiveTabset(o,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return fe.attributeDefinitions}updateAttrs(e){fe.attributeDefinitions.update(e,this.attributes)}static getAttributeDefinitions(){return fe.attributeDefinitions}normalizeWeights(){let e=0;for(const n of this.children)e+=n.getWeight();e===0&&(e=1);for(const n of this.children){const r=n;r.setWeight(Math.max(.001,100*r.getWeight()/e))}}static createAttributeDefinitions(){const e=new Xi;return e.add("type",fe.TYPE,!0).setType(rt.STRING).setFixed(),e.add("id",void 0).setType(rt.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),e.add("weight",100).setType(rt.NUMBER).setDescription("relative weight for sizing of this row in parent row"),e}};H($a,"TYPE","row");H($a,"attributeDefinitions",$a.createAttributeDefinitions());let pe=$a;class cr{constructor(e,n){H(this,"_windowId"),H(this,"_layout"),H(this,"_rect"),H(this,"_window"),H(this,"_root"),H(this,"_maximizedTabSet"),H(this,"_activeTabSet"),H(this,"_toScreenRectFunction"),this._windowId=e,this._rect=n,this._toScreenRectFunction=r=>r}visitNodes(e){this.root.forEachNode(e,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(e){this._rect=e}set layout(e){this._layout=e}set window(e){this._window=e}set root(e){this._root=e}set maximizedTabSet(e){this._maximizedTabSet=e}set activeTabSet(e){this._activeTabSet=e}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(e){this._toScreenRectFunction=e}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new Et(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(e,n,r){const i=n.getwindowsMap().size,a=e.rect?Et.fromJson(e.rect):new Et(50+50*i,50+50*i,600,400);a.snap(10);const o=new cr(r,a);return o.root=pe.fromJson(e.layout,n,o),o}}const On=0,Dn=99999,Wa=class Xt{constructor(){H(this,"attributes"),H(this,"idMap"),H(this,"changeListeners"),H(this,"borders"),H(this,"onAllowDrop"),H(this,"onCreateTabSet"),H(this,"windows"),H(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new Ia(this),this.windows=new Map,this.rootWindow=new cr(Xt.MAIN_WINDOW_ID,Et.empty()),this.windows.set(Xt.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(e){var n;let r;switch(e.type){case Ot.ADD_NODE:{const i=new Qt(this,e.data.json,!0),a=this.idMap.get(e.data.toNode);(a instanceof Gt||a instanceof De||a instanceof pe)&&(a.drop(i,pt.getByName(e.data.location),e.data.index,e.data.select),r=i);break}case Ot.MOVE_NODE:{const i=this.idMap.get(e.data.fromNode);if(i instanceof Qt||i instanceof Gt||i instanceof pe){if(i===this.getMaximizedTabset(i.getWindowId())){const o=this.windows.get(i.getWindowId());o.maximizedTabSet=void 0}const a=this.idMap.get(e.data.toNode);(a instanceof Gt||a instanceof De||a instanceof pe)&&a.drop(i,pt.getByName(e.data.location),e.data.index,e.data.select)}this.removeEmptyWindows();break}case Ot.DELETE_TAB:{const i=this.idMap.get(e.data.node);i instanceof Qt&&i.delete(),this.removeEmptyWindows();break}case Ot.DELETE_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof Gt){const a=[...i.getChildren()];for(let o=0;o<a.length;o++){const s=a[o];s.isEnableClose()&&s.delete()}i.getChildren().length===0&&i.delete(),this.tidy()}this.removeEmptyWindows();break}case Ot.POPOUT_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof Gt){const a=i.isMaximized(),o=this.windows.get(i.getWindowId()),s=gi(),c=new cr(s,o.toScreenRectFunction(i.getRect())),f={type:"row",children:[]},g=pe.fromJson(f,this,c);c.root=g,this.windows.set(s,c),g.drop(i,pt.CENTER,0),a&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case Ot.POPOUT_TAB:{const i=this.idMap.get(e.data.node);if(i instanceof Qt){const a=gi();let o=Et.empty();i.getParent()instanceof Gt?o=i.getParent().getRect():o=i.getParent().getContentRect();const s=this.windows.get(i.getWindowId()),c=new cr(a,s.toScreenRectFunction(o)),f=gi(),g={type:"row",children:[{type:"tabset",id:f}]},_=pe.fromJson(g,this,c);c.root=_,this.windows.set(a,c),this.idMap.get(f).drop(i,pt.CENTER,0,!0)}this.removeEmptyWindows();break}case Ot.CLOSE_WINDOW:{const i=this.windows.get(e.data.windowId);i&&((n=this.rootWindow.root)==null||n.drop(i.root,pt.CENTER,-1),this.rootWindow.visitNodes((a,o)=>{a instanceof pe&&a.setWindowId(Xt.MAIN_WINDOW_ID)}),this.windows.delete(e.data.windowId));break}case Ot.CREATE_WINDOW:{const i=gi(),a=new cr(i,Et.fromJson(e.data.rect)),o=pe.fromJson(e.data.layout,this,a);a.root=o,this.windows.set(i,a),r=i;break}case Ot.RENAME_TAB:{const i=this.idMap.get(e.data.node);i instanceof Qt&&i.setName(e.data.text);break}case Ot.SELECT_TAB:{const i=this.idMap.get(e.data.tabNode),a=e.data.windowId?e.data.windowId:Xt.MAIN_WINDOW_ID,o=this.windows.get(a);if(i instanceof Qt){const s=i.getParent(),c=s.getChildren().indexOf(i);s instanceof De?s.getSelected()===c?s.setSelected(-1):s.setSelected(c):s instanceof Gt&&(s.getSelected()!==c&&s.setSelected(c),o.activeTabSet=s)}break}case Ot.SET_ACTIVE_TABSET:{const i=e.data.windowId?e.data.windowId:Xt.MAIN_WINDOW_ID,a=this.windows.get(i);if(e.data.tabsetNode===void 0)a.activeTabSet=void 0;else{const o=this.idMap.get(e.data.tabsetNode);o instanceof Gt&&(a.activeTabSet=o)}break}case Ot.ADJUST_WEIGHTS:{const a=this.idMap.get(e.data.nodeId).getChildren();for(let o=0;o<a.length;o++)a[o].setWeight(e.data.weights[o]);break}case Ot.ADJUST_BORDER_SPLIT:{const i=this.idMap.get(e.data.node);i instanceof De&&i.setSize(e.data.pos);break}case Ot.MAXIMIZE_TOGGLE:{const i=e.data.windowId?e.data.windowId:Xt.MAIN_WINDOW_ID,a=this.windows.get(i),o=this.idMap.get(e.data.node);o instanceof Gt&&(o===a.maximizedTabSet?a.maximizedTabSet=void 0:(a.maximizedTabSet=o,a.activeTabSet=o));break}case Ot.UPDATE_MODEL_ATTRIBUTES:{this.updateAttrs(e.data.json);break}case Ot.UPDATE_NODE_ATTRIBUTES:{this.idMap.get(e.data.node).updateAttrs(e.data.json);break}}this.updateIdMap();for(const i of this.changeListeners)i(e);return r}getActiveTabset(e=Xt.MAIN_WINDOW_ID){const n=this.windows.get(e);if(n&&n.activeTabSet&&this.getNodeById(n.activeTabSet.getId()))return n.activeTabSet}getMaximizedTabset(e=Xt.MAIN_WINDOW_ID){return this.windows.get(e).maximizedTabSet}getRoot(e=Xt.MAIN_WINDOW_ID){return this.windows.get(e).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(e){this.borders.forEachNode(e);for(const[n,r]of this.windows)r.root.forEachNode(e,0)}visitWindowNodes(e,n){this.windows.has(e)&&(e===Xt.MAIN_WINDOW_ID&&this.borders.forEachNode(n),this.windows.get(e).visitNodes(n))}getNodeById(e){return this.idMap.get(e)}getFirstTabSet(e=this.windows.get(Xt.MAIN_WINDOW_ID).root){const n=e.getChildren()[0];return n instanceof Gt?n:this.getFirstTabSet(n)}static fromJson(e){const n=new Xt;if(Xt.attributeDefinitions.fromJson(e.global,n.attributes),e.borders&&(n.borders=Ia.fromJson(e.borders,n)),e.popouts)for(const r in e.popouts){const i=e.popouts[r],a=cr.fromJson(i,n,r);n.windows.set(r,a)}return n.rootWindow.root=pe.fromJson(e.layout,n,n.getwindowsMap().get(Xt.MAIN_WINDOW_ID)),n.tidy(),n}toJson(){const e={};Xt.attributeDefinitions.toJson(e,this.attributes),this.visitNodes(r=>{r.fireEvent("save",{})});const n={};for(const[r,i]of this.windows)r!==Xt.MAIN_WINDOW_ID&&(n[r]=i.toJson());return{global:e,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:n}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(e){this.onAllowDrop=e}setOnCreateTabSet(e){this.onCreateTabSet=e}addChangeListener(e){this.changeListeners.push(e)}removeChangeListener(e){const n=this.changeListeners.findIndex(r=>r===e);n!==-1&&this.changeListeners.splice(n,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){const e=new Set;for(const[n]of this.windows)if(n!==Xt.MAIN_WINDOW_ID){let r=0;this.visitWindowNodes(n,i=>{i instanceof Qt&&r++}),r===0&&e.add(n)}for(const n of e)this.windows.delete(n)}setActiveTabset(e,n){const r=this.windows.get(n);r&&(e?r.activeTabSet=e:r.activeTabSet=void 0)}setMaximizedTabset(e,n){const r=this.windows.get(n);r&&(e?r.maximizedTabSet=e:r.maximizedTabSet=void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes(e=>{this.idMap.set(e.getId(),e)})}addNode(e){const n=e.getId();if(this.idMap.has(n))throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);this.idMap.set(n,e)}findDropTargetNode(e,n,r,i){let a=this.windows.get(e).root.findDropTargetNode(e,n,r,i);return a===void 0&&e===Xt.MAIN_WINDOW_ID&&(a=this.borders.findDropTargetNode(n,r,i)),a}tidy(){for(const[e,n]of this.windows)n.root.tidy()}updateAttrs(e){Xt.attributeDefinitions.update(e,this.attributes)}nextUniqueId(){return"#"+gi()}getAttribute(e){return this.attributes[e]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){Xt.attributeDefinitions.pairAttributes("RowNode",pe.getAttributeDefinitions()),Xt.attributeDefinitions.pairAttributes("TabSetNode",Gt.getAttributeDefinitions()),Xt.attributeDefinitions.pairAttributes("TabNode",Qt.getAttributeDefinitions()),Xt.attributeDefinitions.pairAttributes("BorderNode",De.getAttributeDefinitions());const e=[];e.push(Xt.attributeDefinitions.toTypescriptInterface("Global",void 0)),e.push(pe.getAttributeDefinitions().toTypescriptInterface("Row",Xt.attributeDefinitions)),e.push(Gt.getAttributeDefinitions().toTypescriptInterface("TabSet",Xt.attributeDefinitions)),e.push(Qt.getAttributeDefinitions().toTypescriptInterface("Tab",Xt.attributeDefinitions)),e.push(De.getAttributeDefinitions().toTypescriptInterface("Border",Xt.attributeDefinitions))}static createAttributeDefinitions(){const e=new Xi;return e.add("enableEdgeDock",!0).setType(rt.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),e.add("rootOrientationVertical",!1).setType(rt.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),e.add("enableRotateBorderIcons",!0).setType(rt.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),e.add("splitterSize",8).setType(rt.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),e.add("splitterExtra",0).setType(rt.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),e.add("splitterEnableHandle",!1).setType(rt.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),e.add("tabEnableClose",!0).setType(rt.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnablePopout",!1).setType(rt.BOOLEAN).setAlias("tabEnableFloat"),e.add("tabEnablePopoutIcon",!0).setType(rt.BOOLEAN),e.add("tabEnablePopoutOverlay",!1).setType(rt.BOOLEAN),e.add("tabEnableDrag",!0).setType(rt.BOOLEAN),e.add("tabEnableRename",!0).setType(rt.BOOLEAN),e.add("tabContentClassName",void 0).setType(rt.STRING),e.add("tabClassName",void 0).setType(rt.STRING),e.add("tabIcon",void 0).setType(rt.STRING),e.add("tabEnableRenderOnDemand",!0).setType(rt.BOOLEAN),e.add("tabDragSpeed",.3).setType(rt.NUMBER),e.add("tabBorderWidth",-1).setType(rt.NUMBER),e.add("tabBorderHeight",-1).setType(rt.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(rt.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(rt.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(rt.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(rt.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(rt.BOOLEAN),e.add("tabSetEnableClose",!1).setType(rt.BOOLEAN),e.add("tabSetEnableSingleTabStretch",!1).setType(rt.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(rt.BOOLEAN),e.add("tabSetEnableActiveIcon",!1).setType(rt.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(rt.STRING),e.add("tabSetEnableTabStrip",!0).setType(rt.BOOLEAN),e.add("tabSetEnableTabWrap",!1).setType(rt.BOOLEAN),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabMinWidth",On).setType(rt.NUMBER),e.add("tabMinHeight",On).setType(rt.NUMBER),e.add("tabSetMinWidth",On).setType(rt.NUMBER),e.add("tabSetMinHeight",On).setType(rt.NUMBER),e.add("tabMaxWidth",Dn).setType(rt.NUMBER),e.add("tabMaxHeight",Dn).setType(rt.NUMBER),e.add("tabSetMaxWidth",Dn).setType(rt.NUMBER),e.add("tabSetMaxHeight",Dn).setType(rt.NUMBER),e.add("tabSetEnableTabScrollbar",!1).setType(rt.BOOLEAN),e.add("borderSize",200).setType(rt.NUMBER),e.add("borderMinSize",On).setType(rt.NUMBER),e.add("borderMaxSize",Dn).setType(rt.NUMBER),e.add("borderEnableDrop",!0).setType(rt.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(rt.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(rt.BOOLEAN),e.add("borderClassName",void 0).setType(rt.STRING),e.add("borderEnableAutoHide",!1).setType(rt.BOOLEAN),e.add("borderEnableTabScrollbar",!1).setType(rt.BOOLEAN),e}};H(Wa,"MAIN_WINDOW_ID","__main_window_id__");H(Wa,"attributeDefinitions",Wa.createAttributeDefinitions());let Ye=Wa;const Va=class Sn extends go{constructor(e,n,r){super(r),H(this,"contentRect",Et.empty()),H(this,"tabHeaderRect",Et.empty()),H(this,"location"),this.location=e,this.attributes.id=`border_${e.getName()}`,Sn.attributeDefinitions.fromJson(n,this.attributes),r.addNode(this)}static fromJson(e,n){const r=pt.getByName(e.location),i=new Sn(r,e,n);return e.children&&(i.children=e.children.map(a=>{const o=Qt.fromJson(a,n);return o.setParent(i),o})),i}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===Ct.HORZ}getSize(){const e=this.getAttr("size"),n=this.getSelected();if(n===-1)return e;{const r=this.children[n],i=this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight");return i===-1?e:i}}getMinSize(){const e=this.getSelectedNode();let n=this.getAttr("minSize");if(e){const r=this.isHorizontal()?e.getMinWidth():e.getMinHeight();n=Math.max(n,r)}return n}getMaxSize(){const e=this.getSelectedNode();let n=this.getAttr("maxSize");if(e){const r=this.isHorizontal()?e.getMaxWidth():e.getMaxHeight();n=Math.min(n,r)}return n}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(this.getSelected()!==-1)return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){const e={};return Sn.attributeDefinitions.toJson(e,this.attributes),e.location=this.location.getName(),e.children=this.children.map(n=>n.toJson()),e}isAutoSelectTab(e){return e==null&&(e=this.getSelected()!==-1),e?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(e){this.attributes.selected=e}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(e){this.tabHeaderRect=e}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(e){this.contentRect=e}isEnableDrop(){return this.getAttr("enableDrop")}setSize(e){const n=this.getSelected();if(n===-1)this.attributes.size=e;else{const r=this.children[n];(this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight"))===-1?this.attributes.size=e:this.isHorizontal()?r.setBorderWidth(e):r.setBorderHeight(e)}}updateAttrs(e){Sn.attributeDefinitions.update(e,this.attributes)}remove(e){const n=this.removeChild(e);this.getSelected()!==-1&&ka(this,n)}canDrop(e,n,r){if(!(e instanceof Qt))return;let i;const a=pt.CENTER;if(this.tabHeaderRect.contains(n,r)){if(this.location.orientation===Ct.VERT)if(this.children.length>0){let o=this.children[0],s=o.getTabRect();const c=s.y,f=s.height;let g=this.tabHeaderRect.x,_=0;for(let x=0;x<this.children.length;x++){if(o=this.children[x],s=o.getTabRect(),_=s.x+s.width/2,n>=g&&n<_){const A=new Et(s.x-2,c,3,f);i=new Oe(this,A,a,x,j.FLEXLAYOUT__OUTLINE_RECT);break}g=_}if(i==null){const x=new Et(s.getRight()-2,c,3,f);i=new Oe(this,x,a,this.children.length,j.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Et(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18);i=new Oe(this,o,a,0,j.FLEXLAYOUT__OUTLINE_RECT)}else if(this.children.length>0){let o=this.children[0],s=o.getTabRect();const c=s.x,f=s.width;let g=this.tabHeaderRect.y,_=0;for(let x=0;x<this.children.length;x++){if(o=this.children[x],s=o.getTabRect(),_=s.y+s.height/2,r>=g&&r<_){const A=new Et(c,s.y-2,f,3);i=new Oe(this,A,a,x,j.FLEXLAYOUT__OUTLINE_RECT);break}g=_}if(i==null){const x=new Et(c,s.getBottom()-2,f,3);i=new Oe(this,x,a,this.children.length,j.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Et(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3);i=new Oe(this,o,a,0,j.FLEXLAYOUT__OUTLINE_RECT)}if(!e.canDockInto(e,i))return}else if(this.getSelected()!==-1&&this.contentRect.contains(n,r)){const o=this.contentRect;if(i=new Oe(this,o,a,-1,j.FLEXLAYOUT__OUTLINE_RECT),!e.canDockInto(e,i))return}return i}drop(e,n,r,i){let a=0;const o=e.getParent();o!==void 0&&(a=o.removeChild(e),o!==this&&o instanceof Sn&&o.getSelected()===a?o.setSelected(-1):ka(o,a)),e instanceof Qt&&o===this&&a<r&&r>0&&r--;let s=r;s===-1&&(s=this.children.length),e instanceof Qt&&this.addChild(e,s),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(s),this.model.tidy()}getSplitterBounds(e,n=!1){const r=[0,0],i=n?this.getMinSize():0,a=n?this.getMaxSize():99999,o=this.model.getRoot(Ye.MAIN_WINDOW_ID),s=o.getRect(),c=this.model.getSplitterSize();if(this.location===pt.TOP){r[0]=this.tabHeaderRect.getBottom()+i;const f=this.tabHeaderRect.getBottom()+a;r[1]=Math.max(r[0],s.getBottom()-o.getMinHeight()-c),r[1]=Math.min(r[1],f)}else if(this.location===pt.LEFT){r[0]=this.tabHeaderRect.getRight()+i;const f=this.tabHeaderRect.getRight()+a;r[1]=Math.max(r[0],s.getRight()-o.getMinWidth()-c),r[1]=Math.min(r[1],f)}else if(this.location===pt.BOTTOM){r[1]=this.tabHeaderRect.y-i-c;const f=this.tabHeaderRect.y-a-c;r[0]=Math.min(r[1],s.y+o.getMinHeight()),r[0]=Math.max(r[0],f)}else if(this.location===pt.RIGHT){r[1]=this.tabHeaderRect.x-i-c;const f=this.tabHeaderRect.x-a-c;r[0]=Math.min(r[1],s.x+o.getMinWidth()),r[0]=Math.max(r[0],f)}return r}calculateSplit(e,n){const r=this.getSplitterBounds(n);return this.location===pt.BOTTOM||this.location===pt.RIGHT?Math.max(0,r[1]-n):Math.max(0,n-r[0])}getAttributeDefinitions(){return Sn.attributeDefinitions}static getAttributeDefinitions(){return Sn.attributeDefinitions}static createAttributeDefinitions(){const e=new Xi;return e.add("type",Sn.TYPE,!0).setType(rt.STRING).setFixed(),e.add("selected",-1).setType(rt.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),e.add("show",!0).setType(rt.BOOLEAN).setDescription("show/hide this border"),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDrop","borderEnableDrop").setType(rt.BOOLEAN).setDescription("whether tabs can be dropped into this border"),e.addInherited("className","borderClassName").setType(rt.STRING).setDescription("class applied to tab button"),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(rt.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(rt.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),e.addInherited("size","borderSize").setType(rt.NUMBER).setDescription("size of the tab area when selected"),e.addInherited("minSize","borderMinSize").setType(rt.NUMBER).setDescription("the minimum size of the tab area"),e.addInherited("maxSize","borderMaxSize").setType(rt.NUMBER).setDescription("the maximum size of the tab area"),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(rt.BOOLEAN).setDescription("hide border if it has zero tabs"),e.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(rt.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};H(Va,"TYPE","border");H(Va,"attributeDefinitions",Va.createAttributeDefinitions());let De=Va,Oi=!1;const zs=t=>{const{layout:e,node:n,index:r,horizontal:i}=t,[a,o]=In(!1),s=St(null),c=St(null),f=St([]),g=St(void 0),_=St(void 0),x=St(0),A=St(0),E=St({initialSizes:[],sum:0,startPosition:0}),D=n.getModel().getSplitterSize();let M=n.getModel().getSplitterExtra();Ld()||(M=Math.max(20,M+D)-D),Er(()=>{var J,G;return(J=s.current)==null||J.addEventListener("touchstart",k,{passive:!1}),(G=c.current)==null||G.addEventListener("touchstart",k,{passive:!1}),()=>{var W,Z;(W=s.current)==null||W.removeEventListener("touchstart",k),(Z=c.current)==null||Z.removeEventListener("touchstart",k)}},[]);const k=J=>{J.preventDefault(),J.stopImmediatePropagation()},B=J=>{var G;J.stopPropagation(),n instanceof pe&&(E.current=n.getSplitterInitials(r)),Vs(!1,e.getCurrentDocument()),Id(J.currentTarget.ownerDocument,J,P,U,V),f.current=n.getSplitterBounds(r,!0);const W=e.getRootDiv();g.current=e.getCurrentDocument().createElement("div"),g.current.style.flexDirection=i?"row":"column",g.current.className=e.getClassName(j.FLEXLAYOUT__SPLITTER_DRAG),g.current.style.cursor=n.getOrientation()===Ct.VERT?"ns-resize":"ew-resize",n.getModel().isSplitterEnableHandle()&&(_.current=e.getCurrentDocument().createElement("div"),_.current.className=K(j.FLEXLAYOUT__SPLITTER_HANDLE)+" "+K(i?j.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:j.FLEXLAYOUT__SPLITTER_HANDLE_VERT),g.current.appendChild(_.current));const Z=(G=s.current)==null?void 0:G.getBoundingClientRect(),Y=new Et(Z.x-e.getDomRect().x,Z.y-e.getDomRect().y,Z.width,Z.height);x.current=J.clientX-Z.x,A.current=J.clientY-Z.y,Y.positionElement(g.current),W&&W.appendChild(g.current),o(!0),Oi=!0},V=()=>{const J=e.getRootDiv();J&&g.current&&J.removeChild(g.current),g.current=void 0,o(!1),Oi=!1},P=(J,G)=>{if(g.current){const W=e.getDomRect();if(!W)return;n.getOrientation()===Ct.VERT?g.current.style.top=ot(G-W.y-A.current)+"px":g.current.style.left=ot(J-W.x-x.current)+"px",e.isRealtimeResize()&&q()}},U=()=>{if(g.current){q();const J=e.getRootDiv();J&&g.current&&J.removeChild(g.current),g.current=void 0}Vs(!0,e.getCurrentDocument()),o(!1),Oi=!1},q=J=>{(()=>{if(g.current){let W=0;if(n.getOrientation()===Ct.VERT?W=g.current.offsetTop:W=g.current.offsetLeft,n instanceof De){const Z=n.calculateSplit(n,W);e.doAction(Ot.adjustBorderSplit(n.getId(),Z))}else{const Z=E.current,Y=n.calculateSplit(r,W,Z.initialSizes,Z.sum,Z.startPosition);e.doAction(Ot.adjustWeights(n.getId(),Y))}}})()},ot=J=>{const G=f.current;let W=J;return J<G[0]&&(W=G[0]),J>G[1]&&(W=G[1]),W},K=e.getClassName,nt={cursor:i?"ew-resize":"ns-resize",flexDirection:i?"column":"row"};let mt=K(j.FLEXLAYOUT__SPLITTER)+" "+K(j.FLEXLAYOUT__SPLITTER_+n.getOrientation().getName());n instanceof De?mt+=" "+K(j.FLEXLAYOUT__SPLITTER_BORDER):n.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(nt.display="none"),i?(nt.width=D+"px",nt.minWidth=D+"px"):(nt.height=D+"px",nt.minHeight=D+"px");let ft;if(!a&&n.getModel().isSplitterEnableHandle()&&(ft=I("div",{className:K(j.FLEXLAYOUT__SPLITTER_HANDLE)+" "+K(i?j.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:j.FLEXLAYOUT__SPLITTER_HANDLE_VERT)})),M===0)return I("div",{className:mt,style:nt,ref:s,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:B,children:ft});{const J={};n.getOrientation()===Ct.HORZ?(J.height="100%",J.width=D+M+"px",J.cursor="ew-resize"):(J.height=D+M+"px",J.width="100%",J.cursor="ns-resize");const G=K(j.FLEXLAYOUT__SPLITTER_EXTRA);return I("div",{className:mt,style:nt,ref:s,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:B,children:I("div",{style:J,ref:c,className:G,onPointerDown:B})})}};function db(t){const{layout:e,border:n,show:r}=t,i=St(null),a=St(void 0);un(()=>{const f=e.getBoundingClientRect(i.current);!isNaN(f.x)&&f.width>0&&(n.getContentRect().equals(f)||(n.setContentRect(f),Oi?(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e.redrawInternal("border content rect "+f),a.current=void 0},50)):e.redrawInternal("border content rect "+f)))});let o=!0;const s={};n.getOrientation()===Ct.HORZ?(s.width=n.getSize(),s.minWidth=n.getMinSize(),s.maxWidth=n.getMaxSize()):(s.height=n.getSize(),s.minHeight=n.getMinSize(),s.maxHeight=n.getMaxSize(),o=!1),s.display=r?"flex":"none";const c=e.getClassName(j.FLEXLAYOUT__BORDER_TAB_CONTENTS);return n.getLocation()===pt.LEFT||n.getLocation()===pt.TOP?I(mn,{children:[I("div",{ref:i,style:s,className:c}),r&&I(zs,{layout:e,node:n,index:0,horizontal:o})]}):I(mn,{children:[r&&I(zs,{layout:e,node:n,index:0,horizontal:o}),I("div",{ref:i,style:s,className:c})]})}var Ii=(t=>(t[t.Visible=1]="Visible",t[t.Always=2]="Always",t[t.Selected=3]="Selected",t))(Ii||{});const hb=t=>{const{layout:e,node:n,selected:r,border:i,icons:a,path:o}=t,s=St(null),c=St(null),f=nt=>{n.isEnableDrag()?(nt.stopPropagation(),e.setDragNode(nt.nativeEvent,n)):nt.preventDefault()},g=nt=>{nt.stopPropagation(),e.clearDragMain()},_=nt=>{Li(nt)&&e.auxMouseClick(n,nt)},x=nt=>{e.showContextMenu(n,nt)},A=()=>{e.doAction(Ot.selectTab(n.getId()))},E=()=>{const nt=n.getCloseType();return!!(r||nt===Ii.Always||nt===Ii.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},D=nt=>{E()&&(e.doAction(Ot.deleteTab(n.getId())),nt.stopPropagation())},M=nt=>{nt.stopPropagation()};un(()=>{n.setTabRect(e.getBoundingClientRect(s.current)),e.getEditingTab()===n&&c.current.select()});const k=nt=>{nt.stopPropagation()},B=nt=>{nt.code==="Escape"?e.setEditingTab(void 0):(nt.code==="Enter"||nt.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Ot.renameTab(n.getId(),nt.target.value)))},V=e.getClassName;let P=V(j.FLEXLAYOUT__BORDER_BUTTON)+" "+V(j.FLEXLAYOUT__BORDER_BUTTON_+i);r?P+=" "+V(j.FLEXLAYOUT__BORDER_BUTTON__SELECTED):P+=" "+V(j.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),n.getClassName()!==void 0&&(P+=" "+n.getClassName());let U=0;n.getModel().isEnableRotateBorderIcons()===!1&&(i==="left"?U=90:i==="right"&&(U=-90));const q=gu(e,n,U);let ot=q.content?I("div",{className:V(j.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:q.content}):null;const K=q.leading?I("div",{className:V(j.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:q.leading}):null;if(e.getEditingTab()===n&&(ot=I("input",{ref:c,className:V(j.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":o+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:B,onPointerDown:k})),n.isEnableClose()){const nt=e.i18nName(Ae.Close_Tab);q.buttons.push(I("div",{"data-layout-path":o+"/button/close",title:nt,className:V(j.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:M,onClick:D,children:typeof a.close=="function"?a.close(n):a.close},"close"))}return I("div",{ref:s,"data-layout-path":o,className:P,onClick:A,onAuxClick:_,onContextMenu:x,title:n.getHelpText(),draggable:!0,onDragStart:f,onDragEnd:g,children:[K,ot,q.buttons]})},za=t=>{const{layout:e,node:n}=t,r=e.getClassName,i=r(j.FLEXLAYOUT__TAB_BUTTON_STAMP),a=gu(e,n),o=a.content?I("div",{className:r(j.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:a.content}):n.getNameForOverflowMenu(),s=a.leading?I("div",{className:r(j.FLEXLAYOUT__TAB_BUTTON_LEADING),children:a.leading}):null;return I("div",{className:i,title:n.getHelpText(),children:[s,o]})};function kd(t,e,n,r,i){const a=i.getRootDiv(),o=i.getClassName,s=t.ownerDocument,c=t.getBoundingClientRect(),f=(a==null?void 0:a.getBoundingClientRect())??new DOMRect(0,0,100,100),g=s.createElement("div");g.className=o(j.FLEXLAYOUT__POPUP_MENU_CONTAINER),c.left<f.left+f.width/2?g.style.left=c.left-f.left+"px":g.style.right=f.right-c.right+"px",c.top<f.top+f.height/2?g.style.top=c.top-f.top+"px":g.style.bottom=f.bottom-c.bottom+"px",i.showOverlay(!0),a&&a.appendChild(g);const _=()=>{i.hideControlInPortal(),i.showOverlay(!1),a&&a.removeChild(g),g.removeEventListener("pointerdown",x),s.removeEventListener("pointerdown",A)},x=E=>{E.stopPropagation()},A=E=>{_()};g.addEventListener("pointerdown",x),s.addEventListener("pointerdown",A),i.showControlInPortal(I(gb,{currentDocument:s,parentNode:e,onSelect:r,onHide:_,items:n,classNameMapper:o,layout:i}),g)}const gb=t=>{const{parentNode:e,items:n,onHide:r,onSelect:i,classNameMapper:a,layout:o}=t,s=St(null);Er(()=>{s.current&&s.current.focus()},[]);const c=(A,E)=>{i(A),r(),E.stopPropagation()},f=(A,E)=>{A.stopPropagation(),o.setDragNode(A.nativeEvent,E),setTimeout(()=>{r()},0)},g=A=>{o.clearDragMain()},_=A=>{A.key==="Escape"&&r()},x=n.map((A,E)=>{let D=a(j.FLEXLAYOUT__POPUP_MENU_ITEM);return e.getSelected()===A.index&&(D+=" "+a(j.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),I("div",{className:D,"data-layout-path":"/popup-menu/tb"+E,onClick:M=>c(A,M),draggable:!0,onDragStart:M=>f(M,A.node),onDragEnd:g,title:A.node.getHelpText(),children:I(za,{node:A.node,layout:o})},A.index)});return I("div",{className:a(j.FLEXLAYOUT__POPUP_MENU),ref:s,tabIndex:0,onKeyDown:_,"data-layout-path":"/popup-menu",children:x})},Pd=(t,e,n,r,i,a)=>{const[o,s]=In([]),[c,f]=In(!1),[g,_]=In(!1),x=St(null),A=St(!1),E=St(void 0),D=St([]),M=St(0),k=St(!1);D.current=o,un(()=>{r.current&&ut(0)},[e.getId()]),un(()=>{A.current=!1},[e.getSelectedNode(),e.getRect().width,e.getRect().height]),un(()=>{ft(),A.current===!1&&V(),P(),U()}),Er(()=>{var Q;return(Q=x.current)==null||Q.addEventListener("wheel",B,{passive:!1}),()=>{var it;(it=x.current)==null||it.removeEventListener("wheel",B)}},[x.current]);const B=Q=>{Q.preventDefault()};function V(){const Q=e.getSelectedNode();if(Q&&r.current){const it=t.getBoundingClientRect(r.current),ct=Q.getTabRect();let ht=W(it)-W(ct);ht>0||et(ct)>et(it)?(ut(gt(r.current)-ht),k.current=!0):(ht=Z(ct)-Z(it),ht>0&&(ut(gt(r.current)+ht),k.current=!0))}}const P=()=>{if(r.current&&i.current){const Q=r.current,it=i.current,ct=Y(Q),ht=dt(Q),Mt=gt(Q);if(ht>ct&&ht>0){let At=ct*ct/ht,xt=0;At<20&&(xt=20-At,At=20);const Dt=Mt*(ct-xt)/ht;n===Ct.HORZ?(it.style.width=At+"px",it.style.left=Dt+"px"):(it.style.height=At+"px",it.style.top=Dt+"px"),it.style.display="block"}else it.style.display="none";n===Ct.HORZ?it.style.bottom="0px":it.style.right="0px"}},U=()=>{const it=J().length>0;it!==c&&f(it),E.current===void 0&&(E.current=setTimeout(()=>{const ct=J();mb(ct,D.current)||s(ct),E.current=void 0},100))},q=()=>{k.current||(A.current=!0),k.current=!1,P(),U()},ot=Q=>{var it;Q.stopPropagation(),i.current.setPointerCapture(Q.pointerId);const ct=(it=i.current)==null?void 0:it.getBoundingClientRect();n===Ct.HORZ?M.current=Q.clientX-ct.x:M.current=Q.clientY-ct.y,Id(Q.currentTarget.ownerDocument,Q,K,nt,mt)},K=(Q,it)=>{if(r.current&&i.current){const ct=r.current,ht=i.current,Mt=Y(ct),At=dt(ct),xt=Y(ht),Dt=ct.getBoundingClientRect();let lt=0;if(n===Ct.HORZ?lt=Q-Dt.x-M.current:lt=it-Dt.y-M.current,lt=Math.max(0,Math.min(At-xt,lt)),Mt>0){const _t=lt*At/Mt;ut(_t)}}},nt=()=>{},mt=()=>{},ft=()=>{if(r.current){const it=r.current.firstElementChild,ct=g?10:0,ht=Y(it)+ct>Y(r.current);ht!==g&&_(ht)}},J=()=>{const Q=[];if(r.current){const it=r.current,ct=it.getBoundingClientRect(),ht=W(ct)-1,Mt=Z(ct)+1,At=it.firstElementChild;let xt=0;Array.from(At.children).forEach(Dt=>{const lt=Dt.getBoundingClientRect();Dt.classList.contains(a)&&((W(lt)<ht||Z(lt)>Mt)&&Q.push(xt),xt++)})}return Q},G=Q=>{if(r.current){if(e.getChildren().length===0)return;let it=0;if(Math.abs(Q.deltaY)>0){it=-Q.deltaY,Q.deltaMode===1&&(it*=40);const ct=gt(r.current)-it,ht=dt(r.current)-Y(r.current),Mt=Math.max(0,Math.min(ht,ct));ut(Mt),Q.stopPropagation()}}},W=Q=>n===Ct.HORZ?Q.x:Q.y,Z=Q=>n===Ct.HORZ?Q.right:Q.bottom,Y=Q=>n===Ct.HORZ?Q.clientWidth:Q.clientHeight,et=Q=>n===Ct.HORZ?Q.width:Q.height,dt=Q=>n===Ct.HORZ?Q.scrollWidth:Q.scrollHeight,ut=Q=>{n===Ct.HORZ?r.current.scrollLeft=Q:r.current.scrollTop=Q},gt=Q=>n===Ct.HORZ?Q.scrollLeft:Q.scrollTop;return{selfRef:x,userControlledPositionRef:A,onScroll:q,onScrollPointerDown:ot,hiddenTabs:o,onMouseWheel:G,isDockStickyButtons:g,isShowHiddenTabs:c}};function mb(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])}const pb=t=>{const{border:e,layout:n,size:r}=t,i=St(null),a=St(null),o=St(null),s=St(null),c=St(null),f=n.getIcons();un(()=>{e.setTabHeaderRect(n.getBoundingClientRect(g.current))});const{selfRef:g,userControlledPositionRef:_,onScroll:x,onScrollPointerDown:A,hiddenTabs:E,onMouseWheel:D,isDockStickyButtons:M,isShowHiddenTabs:k}=Pd(n,e,Ct.flip(e.getOrientation()),c,a,n.getClassName(j.FLEXLAYOUT__BORDER_BUTTON)),B=ct=>{Li(ct)&&n.auxMouseClick(e,ct)},V=ct=>{n.showContextMenu(e,ct)},P=ct=>{ct.stopPropagation()},U=ct=>{const ht=n.getShowOverflowMenu(),Mt=E.map(At=>({index:At,node:e.getChildren()[At]}));if(ht!==void 0)ht(e,ct,Mt,q);else{const At=o.current;kd(At,e,Mt,q,n)}ct.stopPropagation()},q=ct=>{n.doAction(Ot.selectTab(ct.node.getId())),_.current=!1},ot=ct=>{const ht=e.getChildren()[e.getSelected()];ht!==void 0&&n.doAction(Ot.popoutTab(ht.getId())),ct.stopPropagation()},K=n.getClassName,nt=[],mt=ct=>{const ht=e.getSelected()===ct,Mt=e.getChildren()[ct];nt.push(I(hb,{layout:n,border:e.getLocation().getName(),node:Mt,path:e.getPath()+"/tb"+ct,selected:ht,icons:f},Mt.getId())),ct<e.getChildren().length-1&&nt.push(I("div",{className:K(j.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+ct))};for(let ct=0;ct<e.getChildren().length;ct++)mt(ct);let ft=K(j.FLEXLAYOUT__BORDER)+" "+K(j.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(ft+=" "+e.getClassName());let J,G=[],W=[];const Z={leading:J,buttons:G,stickyButtons:W,overflowPosition:void 0};if(n.customizeTabSet(e,Z),J=Z.leading,W=Z.stickyButtons,G=Z.buttons,Z.overflowPosition===void 0&&(Z.overflowPosition=W.length),W.length>0&&(M?G=[...W,...G]:nt.push(I("div",{ref:s,onPointerDown:P,onDragStart:ct=>{ct.preventDefault()},className:K(j.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:W},"sticky_buttons_container"))),k){const ct=n.i18nName(Ae.Overflow_Menu_Tooltip);let ht;if(typeof f.more=="function"){const Mt=E.map(At=>({index:At,node:e.getChildren()[At]}));ht=f.more(e,Mt)}else ht=I(mn,{children:[f.more,I("div",{className:K(j.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:E.length>0?E.length:""})]});G.splice(Math.min(Z.overflowPosition,G.length),0,I("button",{ref:o,className:K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:ct,onClick:U,onPointerDown:P,children:ht},"overflowbutton"))}const Y=e.getSelected();if(Y!==-1){const ct=e.getChildren()[Y];if(ct!==void 0&&n.isSupportsPopout()&&ct.isEnablePopout()){const ht=n.i18nName(Ae.Popout_Tab);G.push(I("button",{title:ht,className:K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:ot,onPointerDown:P,children:typeof f.popout=="function"?f.popout(ct):f.popout},"popout"))}}const et=I("div",{ref:i,className:K(j.FLEXLAYOUT__BORDER_TOOLBAR)+" "+K(j.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName()),children:G},"toolbar");let dt={},ut={};const gt=r-1;e.getLocation()===pt.LEFT?(dt={right:"100%",top:0},ut={width:gt,overflowY:"auto"}):e.getLocation()===pt.RIGHT?(dt={left:"100%",top:0},ut={width:gt,overflowY:"auto"}):(dt={left:0},ut={height:gt,overflowX:"auto"});let Q;e.isEnableTabScrollbar()&&(Q=I("div",{ref:a,className:K(j.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:A}));let it;return J&&(it=I("div",{className:K(j.FLEXLAYOUT__BORDER_LEADING),children:J})),I("div",{ref:g,style:{display:"flex",flexDirection:e.getOrientation()===Ct.VERT?"row":"column"},className:ft,"data-layout-path":e.getPath(),onClick:B,onAuxClick:B,onContextMenu:V,onWheel:D,children:[it,I("div",{className:K(j.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[I("div",{ref:c,className:K(j.FLEXLAYOUT__BORDER_INNER)+" "+K(j.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName()),style:ut,onScroll:x,children:I("div",{style:dt,className:K(j.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+K(j.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName()),children:nt})}),Q]}),et]})},vb=t=>{const{layout:e,node:n}=t,r=St(null);Er(()=>{n.setTabStamp(r.current)},[n,r.current]);const i=e.getClassName,a=i(j.FLEXLAYOUT__DRAG_RECT);return I("div",{ref:r,className:a,children:I(za,{layout:e,node:n},n.getId())})},bb=t=>{const{title:e,layout:n,layoutWindow:r,url:i,onCloseWindow:a,onSetWindow:o,children:s}=t,c=St(null),[f,g]=In(void 0),_=new Map;return un(()=>{if(!c.current){const x=r.windowId,A=r.rect;c.current=window.open(i,x,`left=${A.x},top=${A.y},width=${A.width},height=${A.height}`),c.current?(r.window=c.current,o(r,c.current),window.addEventListener("beforeunload",()=>{if(c.current){const E=c.current;c.current=null,E.close()}}),c.current.addEventListener("load",()=>{if(c.current){c.current.focus(),c.current.resizeTo(A.width,A.height),c.current.moveTo(A.x,A.y);const E=c.current.document;E.title=e;const D=E.createElement("div");D.className=j.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,E.body.appendChild(D),_b(E,_).then(()=>{g(D)});const M=new MutationObserver(k=>yb(k,E,_));M.observe(document.head,{childList:!0}),c.current.addEventListener("beforeunload",()=>{c.current&&(a(r),c.current=null,M.disconnect())})}})):a(r)}return()=>{var x;n.getModel().getwindowsMap().has(r.windowId)||((x=c.current)==null||x.close(),c.current=null)}},[]),f!==void 0?Ca(s,f):null};function yb(t,e,n){for(const r of t)if(r.type==="childList"){for(const i of r.addedNodes)(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement)&&$d(e,i,n);for(const i of r.removedNodes)if(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement){const a=n.get(i);a&&e.head.removeChild(a)}}}function _b(t,e){const n=[],r=document.querySelectorAll('style, link[rel="stylesheet"]');for(const i of r)$d(t,i,e,n);return Promise.all(n)}function $d(t,e,n,r){if(e instanceof HTMLLinkElement){const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i),r&&r.push(new Promise(a=>{i.onload=()=>a(!0)}))}else if(e instanceof HTMLStyleElement)try{const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i)}catch{}}const Qr={width:"1em",height:"1em",display:"flex",alignItems:"center"},nf=()=>I("svg",{xmlns:"http://www.w3.org/2000/svg",style:Qr,viewBox:"0 0 24 24",children:[I("path",{fill:"none",d:"M0 0h24v24H0z"}),I("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),wb=()=>I("svg",{xmlns:"http://www.w3.org/2000/svg",style:Qr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[I("path",{d:"M0 0h24v24H0z",fill:"none"}),I("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),xb=()=>I("svg",{xmlns:"http://www.w3.org/2000/svg",style:Qr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[I("path",{d:"M0 0h24v24H0z",fill:"none"}),I("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),Tb=()=>I("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:I("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),Ab=()=>I("svg",{xmlns:"http://www.w3.org/2000/svg",style:Qr,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[I("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),I("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),Eb=()=>I("svg",{xmlns:"http://www.w3.org/2000/svg",style:Qr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[I("path",{d:"M0 0h24v24H0z",fill:"none"}),I("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),Sb=()=>I("svg",{xmlns:"http://www.w3.org/2000/svg",style:Qr,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:I("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),Mb=t=>{const{layout:e,show:n}=t;return I("div",{className:e.getClassName(j.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:n?"flex":"none"}})},Nb=t=>{const{layout:e,node:n,selected:r,path:i}=t,a=St(null),o=St(null),s=e.getIcons();un(()=>{n.setTabRect(e.getBoundingClientRect(a.current)),e.getEditingTab()===n&&o.current.select()});const c=G=>{n.isEnableDrag()?(G.stopPropagation(),e.setDragNode(G.nativeEvent,n)):G.preventDefault()},f=G=>{e.clearDragMain()},g=G=>{Li(G)&&e.auxMouseClick(n,G)},_=G=>{e.showContextMenu(n,G)},x=()=>{e.doAction(Ot.selectTab(n.getId()))},A=G=>{n.isEnableRename()&&(E(),G.stopPropagation())},E=()=>{e.setEditingTab(n),e.getCurrentDocument().body.addEventListener("pointerdown",D)},D=G=>{G.target!==o.current&&(e.getCurrentDocument().body.removeEventListener("pointerdown",D),e.setEditingTab(void 0))},M=()=>{const G=n.getCloseType();return!!(r||G===Ii.Always||G===Ii.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},k=G=>{M()&&(e.doAction(Ot.deleteTab(n.getId())),G.stopPropagation())},B=G=>{G.stopPropagation()},V=G=>{G.stopPropagation()},P=G=>{G.code==="Escape"?e.setEditingTab(void 0):(G.code==="Enter"||G.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Ot.renameTab(n.getId(),G.target.value)))},U=e.getClassName,q=n.getParent(),ot=q.isEnableSingleTabStretch()&&q.getChildren().length===1,K=ot?j.FLEXLAYOUT__TAB_BUTTON_STRETCH:j.FLEXLAYOUT__TAB_BUTTON;let nt=U(K);nt+=" "+U(K+"_"+q.getTabLocation()),ot||(r?nt+=" "+U(K+"--selected"):nt+=" "+U(K+"--unselected")),n.getClassName()!==void 0&&(nt+=" "+n.getClassName());const mt=gu(e,n);let ft=mt.content?I("div",{className:U(j.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:mt.content}):null;const J=mt.leading?I("div",{className:U(j.FLEXLAYOUT__TAB_BUTTON_LEADING),children:mt.leading}):null;if(e.getEditingTab()===n&&(ft=I("input",{ref:o,className:U(j.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":i+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:P,onPointerDown:V})),n.isEnableClose()&&!ot){const G=e.i18nName(Ae.Close_Tab);mt.buttons.push(I("div",{"data-layout-path":i+"/button/close",title:G,className:U(j.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:B,onClick:k,children:typeof s.close=="function"?s.close(n):s.close},"close"))}return I("div",{ref:a,"data-layout-path":i,className:nt,onClick:x,onAuxClick:g,onContextMenu:_,title:n.getHelpText(),draggable:!0,onDragStart:c,onDragEnd:f,onDoubleClick:A,children:[J,ft,mt.buttons]})},Ob=t=>{const{node:e,layout:n}=t,r=St(null),i=St(null),a=St(null),o=St(null),s=St(null),c=St(null),f=St(null),g=St(void 0),_=n.getIcons();un(()=>{e.setRect(n.getBoundingClientRect(x.current)),r.current&&e.setTabStripRect(n.getBoundingClientRect(r.current));const st=n.getBoundingClientRect(o.current);!e.getContentRect().equals(st)&&!isNaN(st.x)&&(e.setContentRect(st),Oi?(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{n.redrawInternal("border content rect "+st),g.current=void 0},50)):n.redrawInternal("border content rect "+st))});const{selfRef:x,userControlledPositionRef:A,onScroll:E,onScrollPointerDown:D,hiddenTabs:M,onMouseWheel:k,isDockStickyButtons:B,isShowHiddenTabs:V}=Pd(n,e,Ct.HORZ,a,i,n.getClassName(j.FLEXLAYOUT__TAB_BUTTON)),P=st=>{const Yt=n.getShowOverflowMenu(),qt=M.map(vt=>({index:vt,node:e.getChildren()[vt]}));if(Yt!==void 0)Yt(e,st,qt,U);else{const vt=c.current;kd(vt,e,qt,U,n)}st.stopPropagation()},U=st=>{n.doAction(Ot.selectTab(st.node.getId())),A.current=!1},q=st=>{n.getEditingTab()?st.preventDefault():e.isEnableDrag()?(st.stopPropagation(),n.setDragNode(st.nativeEvent,e)):st.preventDefault()},ot=st=>{Li(st)||n.doAction(Ot.setActiveTabset(e.getId(),n.getWindowId()))},K=st=>{Li(st)&&n.auxMouseClick(e,st)},nt=st=>{n.showContextMenu(e,st)},mt=st=>{st.stopPropagation()},ft=st=>{e.canMaximize()&&n.maximize(e),st.stopPropagation()},J=st=>{n.doAction(Ot.deleteTabset(e.getId())),st.stopPropagation()},G=st=>{n.doAction(Ot.deleteTab(e.getChildren()[0].getId())),st.stopPropagation()},W=st=>{et!==void 0&&n.doAction(Ot.popoutTab(et.getId())),st.stopPropagation()},Z=st=>{e.canMaximize()&&n.maximize(e)},Y=n.getClassName,et=e.getSelectedNode(),dt=e.getPath(),ut=[];if(e.isEnableTabStrip())for(let st=0;st<e.getChildren().length;st++){const Yt=e.getChildren()[st],qt=e.getSelected()===st;ut.push(I(Nb,{layout:n,node:Yt,path:dt+"/tb"+st,selected:qt},Yt.getId())),st<e.getChildren().length-1&&ut.push(I("div",{className:Y(j.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+st))}let gt,Q=[],it=[];const ct={leading:gt,stickyButtons:Q,buttons:it,overflowPosition:void 0};n.customizeTabSet(e,ct),gt=ct.leading,Q=ct.stickyButtons,it=ct.buttons;const ht=e.isEnableSingleTabStretch()&&e.getChildren().length===1,Mt=ht&&e.getChildren()[0].isEnableClose()||e.isEnableClose();if(ct.overflowPosition===void 0&&(ct.overflowPosition=Q.length),Q.length>0&&(!e.isEnableTabWrap()&&(B||ht)?it=[...Q,...it]:ut.push(I("div",{ref:f,onPointerDown:mt,onDragStart:st=>{st.preventDefault()},className:Y(j.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:Q},"sticky_buttons_container"))),!e.isEnableTabWrap()&&V){const st=n.i18nName(Ae.Overflow_Menu_Tooltip);let Yt;if(typeof _.more=="function"){const qt=M.map(vt=>({index:vt,node:e.getChildren()[vt]}));Yt=_.more(e,qt)}else Yt=I(mn,{children:[_.more,I("div",{className:Y(j.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:M.length>0?M.length:""})]});it.splice(Math.min(ct.overflowPosition,it.length),0,I("button",{"data-layout-path":dt+"/button/overflow",ref:c,className:Y(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(j.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:st,onClick:P,onPointerDown:mt,children:Yt},"overflowbutton"))}if(et!==void 0&&n.isSupportsPopout()&&et.isEnablePopout()&&et.isEnablePopoutIcon()){const st=n.i18nName(Ae.Popout_Tab);it.push(I("button",{"data-layout-path":dt+"/button/popout",title:st,className:Y(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:W,onPointerDown:mt,children:typeof _.popout=="function"?_.popout(et):_.popout},"popout"))}if(e.canMaximize()){const st=n.i18nName(Ae.Restore),Yt=n.i18nName(Ae.Maximize);it.push(I("button",{"data-layout-path":dt+"/button/max",title:e.isMaximized()?st:Yt,className:Y(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:ft,onPointerDown:mt,children:e.isMaximized()?typeof _.restore=="function"?_.restore(e):_.restore:typeof _.maximize=="function"?_.maximize(e):_.maximize},"max"))}if(!e.isMaximized()&&Mt){const st=ht?n.i18nName(Ae.Close_Tab):n.i18nName(Ae.Close_Tabset);it.push(I("button",{"data-layout-path":dt+"/button/close",title:st,className:Y(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(j.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:ht?G:J,onPointerDown:mt,children:typeof _.closeTabset=="function"?_.closeTabset(e):_.closeTabset},"close"))}if(e.isActive()&&e.isEnableActiveIcon()){const st=n.i18nName(Ae.Active_Tabset);it.push(I("div",{"data-layout-path":dt+"/button/active",title:st,className:Y(j.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:typeof _.activeTabset=="function"?_.activeTabset(e):_.activeTabset},"active"))}const At=I("div",{ref:s,className:Y(j.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:mt,onDragStart:st=>{st.preventDefault()},children:it},"buttonbar");let xt,Dt=Y(j.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(Dt+=" "+e.getClassNameTabStrip()),Dt+=" "+j.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&(Dt+=" "+Y(j.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(Dt+=" "+Y(j.FLEXLAYOUT__TABSET_MAXIMIZED)),ht){const st=e.getChildren()[0];st.getTabSetClassName()!==void 0&&(Dt+=" "+st.getTabSetClassName())}let lt;if(gt&&(lt=I("div",{className:Y(j.FLEXLAYOUT__TABSET_LEADING),children:gt})),e.isEnableTabWrap())e.isEnableTabStrip()&&(xt=I("div",{className:Dt,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:r,"data-layout-path":dt+"/tabstrip",onPointerDown:ot,onDoubleClick:Z,onContextMenu:nt,onClick:K,onAuxClick:K,draggable:!0,onDragStart:q,children:[lt,ut,I("div",{style:{flexGrow:1}}),At]}));else if(e.isEnableTabStrip()){let st;e.isEnableTabScrollbar()&&(st=I("div",{ref:i,className:Y(j.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:D})),xt=I("div",{className:Dt,ref:r,"data-layout-path":dt+"/tabstrip",onPointerDown:ot,onDoubleClick:Z,onContextMenu:nt,onClick:K,onAuxClick:K,draggable:!0,onWheel:k,onDragStart:q,children:[lt,I("div",{className:Y(j.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[I("div",{ref:a,className:Y(j.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+Y(j.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:E,children:I("div",{style:{width:ht?"100%":"none"},className:Y(j.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+Y(j.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation()),children:ut})}),st]}),At]})}let _t;if(e.getChildren().length===0){const st=n.getTabSetPlaceHolderCallback();st&&(_t=st(e))}let Nt=I("div",{ref:o,className:Y(j.FLEXLAYOUT__TABSET_CONTENT),children:_t});e.getTabLocation()==="top"?Nt=I(mn,{children:[xt,Nt]}):Nt=I(mn,{children:[Nt,xt]});const at={flexGrow:Math.max(1,e.getWeight()*1e3),minWidth:e.getMinWidth(),minHeight:e.getMinHeight(),maxWidth:e.getMaxWidth(),maxHeight:e.getMaxHeight()};e.getModel().getMaximizedTabset(n.getWindowId())!==void 0&&!e.isMaximized()&&(at.display="none");const Ut=I("div",{ref:x,className:Y(j.FLEXLAYOUT__TABSET_CONTAINER),style:at,children:I("div",{className:Y(j.FLEXLAYOUT__TABSET),"data-layout-path":dt,children:Nt})});return e.isMaximized()&&n.getMainElement()?Ca(I("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:Ut}),n.getMainElement()):Ut},Wd=t=>{const{layout:e,node:n}=t,r=St(null),i=n.getOrientation()===Ct.HORZ;un(()=>{n.setRect(e.getBoundingClientRect(r.current))});const a=[];let o=0;for(const c of n.getChildren())o>0&&a.push(I(zs,{layout:e,node:n,index:o,horizontal:i},"splitter"+o)),c instanceof pe?a.push(I(Wd,{layout:e,node:c},c.getId())):c instanceof Gt&&a.push(I(Ob,{layout:e,node:c},c.getId())),o++;const s={flexGrow:Math.max(1,n.getWeight()*1e3),minWidth:n.getMinWidth(),minHeight:n.getMinHeight(),maxWidth:n.getMaxWidth(),maxHeight:n.getMaxHeight()};return i?s.flexDirection="row":s.flexDirection="column",I("div",{ref:r,className:e.getClassName(j.FLEXLAYOUT__ROW),style:s,children:a})},Db=t=>{const{layout:e,selected:n,node:r,path:i}=t,a=St(null),o=St(!0),s=r.getParent(),c=s.getContentRect();un(()=>{const E=r.getMoveableElement();a.current.appendChild(E),r.setMoveableElement(E);const D=()=>{r.saveScrollPosition()};return E.addEventListener("scroll",D),a.current.addEventListener("pointerdown",f),()=>{E.removeEventListener("scroll",D),a.current&&a.current.removeEventListener("pointerdown",f),r.setVisible(!1)}},[]),Er(()=>{r.isSelected()&&o.current&&(r.restoreScrollPosition(),o.current=!1)});const f=()=>{const E=r.getParent();E instanceof Gt&&(E.isActive()||e.doAction(Ot.setActiveTabset(E.getId(),e.getWindowId())))};r.setRect(c);const g=e.getClassName,_={};c.styleWithPosition(_);let x=null;if(n){if(r.setVisible(!0),document.hidden&&r.isEnablePopoutOverlay()){const E={};c.styleWithPosition(E),x=I("div",{style:E,className:g(j.FLEXLAYOUT__TAB_OVERLAY)})}}else _.display="none",r.setVisible(!1);s instanceof Gt&&r.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(s.isMaximized()?_.zIndex=10:_.display="none"),s instanceof De&&(s.isShowing()||(_.display="none"));let A=g(j.FLEXLAYOUT__TAB);return s instanceof De&&(A+=" "+g(j.FLEXLAYOUT__TAB_BORDER),A+=" "+g(j.FLEXLAYOUT__TAB_BORDER_+s.getLocation().getName())),r.getContentClassName()!==void 0&&(A+=" "+r.getContentClassName()),I(mn,{children:[x,I("div",{ref:a,style:_,className:A,"data-layout-path":i})]})};class Rb extends du{constructor(e){super(e),H(this,"retry",()=>{this.setState({hasError:!1})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){}render(){return this.state.hasError?I("div",{className:j.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:I("div",{className:j.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:I("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,I("p",{children:I("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}const Cb=Ar(({layout:t,node:e})=>I(Rb,{message:t.i18nName(Ae.Error_rendering_component),retryText:t.i18nName(Ae.Error_rendering_component_retry),children:t.props.factory(e)}),Lb);function Lb(t,e){return!(e.visible&&(!t.rect.equalSize(e.rect)||t.forceRevision!==e.forceRevision||t.tabsRevision!==e.tabsRevision))}class Ib extends du{constructor(e){super(e),H(this,"selfRef"),H(this,"revision"),this.selfRef=kr(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(e,n){return this.selfRef.current.addTabToTabSet(e,n)}addTabWithDragAndDrop(e,n,r){this.selfRef.current.addTabWithDragAndDrop(e,n,r)}moveTabWithDragAndDrop(e,n){this.selfRef.current.moveTabWithDragAndDrop(e,n)}addTabToActiveTabSet(e){return this.selfRef.current.addTabToActiveTabSet(e)}setDragComponent(e,n,r,i){this.selfRef.current.setDragComponent(e,n,r,i)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return I(Bb,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}const Vd=class Pe extends du{constructor(e){super(e),H(this,"selfRef"),H(this,"moveablesRef"),H(this,"findBorderBarSizeRef"),H(this,"mainRef"),H(this,"previousModel"),H(this,"orderedTabIds"),H(this,"orderedTabMoveableIds"),H(this,"moveableElementMap",new Map),H(this,"dropInfo"),H(this,"outlineDiv"),H(this,"currentDocument"),H(this,"currentWindow"),H(this,"supportsPopout"),H(this,"popoutURL"),H(this,"icons"),H(this,"resizeObserver"),H(this,"dragEnterCount",0),H(this,"dragging",!1),H(this,"windowId"),H(this,"layoutWindow"),H(this,"mainLayout"),H(this,"isMainWindow"),H(this,"isDraggingOverWindow"),H(this,"styleObserver"),H(this,"popoutWindowName"),H(this,"updateLayoutMetrics",()=>{if(this.findBorderBarSizeRef.current){const n=this.findBorderBarSizeRef.current.getBoundingClientRect().height;n!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:n})}}),H(this,"onModelChange",n=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,n)}),H(this,"updateRect",()=>{if(this.selfRef.current){const n=Et.fromDomRect(this.selfRef.current.getBoundingClientRect());!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&(this.setState({rect:n}),this.windowId!==Ye.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}}),H(this,"getClassName",n=>this.props.classNameMapper===void 0?n:this.props.classNameMapper(n)),H(this,"onCloseWindow",n=>{this.doAction(Ot.closeWindow(n.windowId))}),H(this,"onSetWindow",(n,r)=>{}),H(this,"showControlInPortal",(n,r)=>{const i=Ca(n,r);this.setState({portal:i})}),H(this,"hideControlInPortal",()=>{this.setState({portal:void 0})}),H(this,"getIcons",()=>this.icons),H(this,"setDragNode",(n,r)=>{if(Pe.dragState=new ys(this.mainLayout,"internal",r,void 0,void 0),n.dataTransfer.setData("text/plain","--flexlayout--"),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.dropEffect="move",this.dragEnterCount=0,r instanceof Gt){let i=!1,a=this.i18nName(Ae.Move_Tabset);if(r.getChildren().length>0&&(a=this.i18nName(Ae.Move_Tabs).replace("?",String(r.getChildren().length))),this.props.onRenderDragRect){const o=this.props.onRenderDragRect(a,r,void 0);o&&(this.setDragComponent(n,o,10,10),i=!0)}i||this.setDragComponent(n,a,10,10)}else{const a=n.target.getBoundingClientRect(),o=n.clientX-a.left,s=n.clientY-a.top,c=r==null?void 0:r.getParent(),f=c instanceof De&&c.getOrientation()===Ct.HORZ,g=f?10:o,_=f?10:s;let x=!1;if(this.props.onRenderDragRect){const A=I(za,{layout:this,node:r},r.getId()),E=this.props.onRenderDragRect(A,r,void 0);E&&(this.setDragComponent(n,E,g,_),x=!0)}x||(fb()?this.setDragComponent(n,I(za,{node:r,layout:this}),g,_):n.dataTransfer.setDragImage(r.getTabStamp(),g,_))}}),H(this,"onDragEnterRaw",n=>{this.dragEnterCount++,this.dragEnterCount===1&&this.onDragEnter(n)}),H(this,"onDragLeaveRaw",n=>{this.dragEnterCount--,this.dragEnterCount===0&&this.onDragLeave(n)}),H(this,"onDragEnter",n=>{if(!Pe.dragState&&this.props.onExternalDrag){const r=this.props.onExternalDrag(n);if(r){const i=Qt.fromJson(r.json,this.props.model,!1);Pe.dragState=new ys(this.mainLayout,"external",i,r.json,r.onDrop)}}if(Pe.dragState){if(this.windowId!==Ye.MAIN_WINDOW_ID&&Pe.dragState.mainLayout===this.mainLayout&&Pe.dragState.mainLayout.setDraggingOverWindow(!0),Pe.dragState.mainLayout!==this.mainLayout)return;n.preventDefault(),this.dropInfo=void 0;const r=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(j.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";const i=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${i}s, left ${i}s, width ${i}s, height ${i}s`,r.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),!this.isDraggingOverWindow&&this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()});const a=this.selfRef.current.getBoundingClientRect();new Et(n.clientX-a.left,n.clientY-a.top,1,1).positionElement(this.outlineDiv)}}),H(this,"onDragOver",n=>{var r;if(this.dragging&&!this.isDraggingOverWindow){n.preventDefault();const i=(r=this.selfRef.current)==null?void 0:r.getBoundingClientRect(),a={x:n.clientX-((i==null?void 0:i.left)??0),y:n.clientY-((i==null?void 0:i.top)??0)};this.checkForBorderToShow(a.x,a.y);const o=this.props.model.findDropTargetNode(this.windowId,Pe.dragState.dragNode,a.x,a.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}}),H(this,"onDragLeave",n=>{this.dragging&&(this.windowId!==Ye.MAIN_WINDOW_ID&&Pe.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())}),H(this,"onDrop",n=>{if(this.dragging){n.preventDefault();const r=Pe.dragState;if(this.dropInfo)if(r.dragJson!==void 0){const i=this.doAction(Ot.addNode(r.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));r.fnNewNodeDropped!==void 0&&r.fnNewNodeDropped(i,n)}else r.dragNode!==void 0&&this.doAction(Ot.moveNode(r.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.mainLayout.clearDragMain()}this.dragEnterCount=0}),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=kr(),this.moveablesRef=kr(),this.mainRef=kr(),this.findBorderBarSizeRef=kr(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:Pb,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons={...kb,...e.icons},this.windowId=e.windowId?e.windowId:Ye.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:Et.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:pt.CENTER},this.isMainWindow=this.windowId===Ye.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{this.updateRect()})}),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",()=>{this.updateRect()});const e=this.props.mainLayout.getRootDiv(),n=this.selfRef.current;ef(e,n),this.styleObserver=new MutationObserver(()=>{ef(e,n)&&this.redraw("mutation observer")}),this.styleObserver.observe(e,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",()=>{for(const[e,n]of this.props.model.getwindowsMap())n.layout&&this.redraw("visibility change")})}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var e,n;this.selfRef.current&&((e=this.resizeObserver)==null||e.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),(n=this.styleObserver)==null||n.disconnect()}render(){if(!this.selfRef.current)return I("div",{ref:this.selfRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT),children:[I("div",{ref:this.moveablesRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});const e=this.props.model;e.getRoot(this.windowId).calcMinMaxSize(),e.getRoot(this.windowId).setPaths(""),e.getBorderSet().setPaths();const n=this.renderLayout(),r=this.renderBorders(n),i=this.renderTabs(),a=this.reorderComponents(i,this.orderedTabIds);let o=null,s=null,c=null,f=null;if(this.isMainWindow){o=this.renderWindows(),f=this.renderMetricsElements();const g=this.renderTabMoveables();s=this.reorderComponents(g,this.orderedTabMoveableIds),c=I("div",{className:this.getClassName(j.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return I("div",{ref:this.selfRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[I("div",{ref:this.moveablesRef,className:this.getClassName(j.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),f,I(Mb,{layout:this,show:this.state.showOverlay},"__overlay__"),r,a,s,c,this.state.portal,o]})}renderBorders(e){const n=this.getClassName(j.FLEXLAYOUT__LAYOUT_MAIN),r=this.props.model.getBorderSet().getBorderMap();if(this.isMainWindow&&r.size>0){e=I("div",{className:n,ref:this.mainRef,children:e});const i=new Map,a=new Map;for(const[c,f]of pt.values){const g=r.get(f);g&&g.isShowing()&&(!g.isAutoHide()||g.isAutoHide()&&(g.getChildren().length>0||this.state.showHiddenBorder===f))&&(i.set(f,I(pb,{layout:this,border:g,size:this.state.calculatedBorderBarSize})),a.set(f,I(db,{layout:this,border:g,show:g.getSelected()!==-1})))}const o=this.getClassName(j.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),s=this.getClassName(j.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){const c=I("div",{className:s,style:{flexDirection:"column"},children:[a.get(pt.TOP),I("div",{className:s,style:{flexDirection:"row"},children:[a.get(pt.LEFT),e,a.get(pt.RIGHT)]}),a.get(pt.BOTTOM)]});return I("div",{className:o,style:{flexDirection:"column"},children:[i.get(pt.TOP),I("div",{className:s,style:{flexDirection:"row"},children:[i.get(pt.LEFT),c,i.get(pt.RIGHT)]}),i.get(pt.BOTTOM)]})}else{const c=I("div",{className:s,style:{flexDirection:"row"},children:[a.get(pt.LEFT),I("div",{className:s,style:{flexDirection:"column"},children:[a.get(pt.TOP),e,a.get(pt.BOTTOM)]}),a.get(pt.RIGHT)]});return I("div",{className:o,style:{flexDirection:"row"},children:[i.get(pt.LEFT),I("div",{className:s,style:{flexDirection:"column"},children:[i.get(pt.TOP),c,i.get(pt.BOTTOM)]}),i.get(pt.RIGHT)]})}}else return I("div",{className:n,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:e})}renderLayout(){return I(mn,{children:[I(Wd,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){const e=[],n=this.icons.edgeArrow;if(this.state.showEdges){const r=this.props.model.getRoot(this.windowId).getRect(),i=bs,a=rf,o=bs/2,s=this.getClassName(j.FLEXLAYOUT__EDGE_RECT),c=50;e.push(I("div",{style:{top:0,left:r.width/2-o,width:i,height:a,borderBottomLeftRadius:c,borderBottomRightRadius:c},className:s+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_TOP),children:I("div",{style:{transform:"rotate(180deg)"},children:n})},"North")),e.push(I("div",{style:{top:r.height/2-o,left:0,width:a,height:i,borderTopRightRadius:c,borderBottomRightRadius:c},className:s+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_LEFT),children:I("div",{style:{transform:"rotate(90deg)"},children:n})},"West")),e.push(I("div",{style:{top:r.height-a,left:r.width/2-o,width:i,height:a,borderTopLeftRadius:c,borderTopRightRadius:c},className:s+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:I("div",{children:n})},"South")),e.push(I("div",{style:{top:r.height/2-o,left:r.width-a,width:a,height:i,borderTopLeftRadius:c,borderBottomLeftRadius:c},className:s+" "+this.getClassName(j.FLEXLAYOUT__EDGE_RECT_RIGHT),children:I("div",{style:{transform:"rotate(-90deg)"},children:n})},"East"))}return e}renderWindows(){const e=[];if(this.supportsPopout){const n=this.props.model.getwindowsMap();let r=1;for(const[i,a]of n)i!==Ye.MAIN_WINDOW_ID&&(e.push(I(bb,{layout:this,title:this.popoutWindowName+" "+r,layoutWindow:a,url:this.popoutURL+"?id="+i,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:I("div",{className:this.props.popoutClassName,children:I(Pe,{...this.props,windowId:i,mainLayout:this})})},i)),r++)}return e}renderTabMoveables(){const e=new Map;return this.props.model.visitNodes(n=>{if(n instanceof Qt){const r=n,i=this.getMoveableElement(r.getId());r.setMoveableElement(i);const a=r.isSelected(),o=r.getParent().getContentRect(),s=a||!r.isEnableRenderOnDemand(),c=r.isRendered()||s&&o.width>0&&o.height>0;if(c){const f=r.getId()+(r.isEnableWindowReMount()?r.getWindowId():"");e.set(n.getId(),Ca(I(Cb,{layout:this,node:r,rect:o,visible:s,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},f),i)),r.setRendered(c)}}}),e}renderTabStamps(){const e=[];return this.props.model.visitNodes(n=>{if(n instanceof Qt){const r=n;e.push(I(vb,{layout:this,node:r},r.getId()))}}),e}renderTabs(){const e=new Map;return this.props.model.visitWindowNodes(this.windowId,n=>{if(n instanceof Qt){const r=n,i=r.isSelected(),a=r.getPath();(r.isRendered()||i||!r.isEnableRenderOnDemand())&&e.set(r.getId(),I(Db,{layout:this,path:a,node:r,selected:i},r.getId()))}}),e}renderMetricsElements(){return I("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(j.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(e,n){const r=this.getBoundingClientRect(this.mainRef.current),i=r.getCenter(),a=rf,o=bs/2;let s=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===pt.CENTER&&(n>i.y-o&&n<i.y+o||e>i.x-o&&e<i.x+o)&&(s=!0);let c=pt.CENTER;s||(e<=r.x+a?c=pt.LEFT:e>=r.getRight()-a?c=pt.RIGHT:n<=r.y+a?c=pt.TOP:n>=r.getBottom()-a&&(c=pt.BOTTOM)),c!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:c})}tidyMoveablesMap(){const e=new Map;this.props.model.visitNodes((n,r)=>{n instanceof Qt&&e.set(n.getId(),n)});for(const[n,r]of this.moveableElementMap)e.has(n)||(r.remove(),this.moveableElementMap.delete(n))}reorderComponents(e,n){const r=[],i=new Set;let a=[];for(const o of n)e.get(o)&&(r.push(o),i.add(o));n.splice(0,n.length,...r);for(const[o,s]of e)i.has(o)||n.push(o);return a=n.map(o=>e.get(o)),a}redraw(e){this.mainLayout.setState((n,r)=>({forceRevision:n.forceRevision+1}))}redrawInternal(e){this.mainLayout.setState((n,r)=>({layoutRevision:n.layoutRevision+1}))}doAction(e){if(this.props.onAction!==void 0){const n=this.props.onAction(e);return n!==void 0?this.props.model.doAction(n):void 0}else return this.props.model.doAction(e)}getBoundingClientRect(e){const n=this.getDomRect();return n?Et.getBoundingClientRect(e).relativeTo(n):Et.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(e){let n=this.moveableElementMap.get(e);return n===void 0&&(n=document.createElement("div"),this.moveablesRef.current.appendChild(n),n.className=j.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(e,n)),n}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current?Et.fromDomRect(this.selfRef.current.getBoundingClientRect()):Et.empty()}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(e){const n=e.clone(),r=this.getDomRect(),i=60,a=2;return n.x=this.currentWindow.screenX+this.currentWindow.scrollX+a/2+r.x+n.x,n.y=this.currentWindow.screenY+this.currentWindow.scrollY+(i-a/2)+r.y+n.y,n.height+=i,n.width+=a,n}addTabToTabSet(e,n){if(this.props.model.getNodeById(e)!==void 0)return this.doAction(Ot.addNode(n,e,pt.CENTER,-1))}addTabToActiveTabSet(e){const n=this.props.model.getActiveTabset(this.windowId);if(n!==void 0)return this.doAction(Ot.addNode(e,n.getId(),pt.CENTER,-1))}maximize(e){this.doAction(Ot.maximizeToggle(e.getId(),this.getWindowId()))}customizeTab(e,n){this.props.onRenderTab&&this.props.onRenderTab(e,n)}customizeTabSet(e,n){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,n)}i18nName(e,n){let r;return this.props.i18nMapper&&(r=this.props.i18nMapper(e,n)),r===void 0&&(r=e+(n===void 0?"":n)),r}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,n){this.props.onContextMenu&&this.props.onContextMenu(e,n)}auxMouseClick(e,n){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,n)}showOverlay(e){this.setState({showOverlay:e}),Vs(!e,this.currentDocument)}addTabWithDragAndDrop(e,n,r){const i=Qt.fromJson(n,this.props.model,!1);Pe.dragState=new ys(this.mainLayout,"add",i,n,r)}moveTabWithDragAndDrop(e,n){this.setDragNode(e,n)}setDragComponent(e,n,r,i){const a=I("div",{style:{position:"unset"},className:this.getClassName(j.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(j.FLEXLAYOUT__DRAG_RECT),children:n}),o=this.currentDocument.createElement("div");o.setAttribute("data-layout-path","/drag-rectangle"),o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",this.currentDocument.body.appendChild(o),ub(o).render(a),e.dataTransfer.setDragImage(o,r,i),setTimeout(()=>{this.currentDocument.body.removeChild(o)},0)}setDraggingOverWindow(e){this.isDraggingOverWindow!==e&&(this.outlineDiv&&(this.outlineDiv.style.visibility=e?"hidden":"visible"),e?this.setState({showEdges:!1}):this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=e)}clearDragMain(){Pe.dragState=void 0,this.windowId===Ye.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1);for(const[,e]of this.props.model.getwindowsMap())e.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};H(Vd,"dragState");let Bb=Vd;const kb={close:I(nf,{}),closeTabset:I(nf,{}),popout:I(Ab,{}),maximize:I(wb,{}),restore:I(Eb,{}),more:I(xb,{}),edgeArrow:I(Tb,{}),activeTabset:I(Sb,{})},Pb=Ld(),bs=100,rf=10;class ys{constructor(e,n,r,i,a){H(this,"mainLayout"),H(this,"dragSource"),H(this,"dragNode"),H(this,"dragJson"),H(this,"fnNewNodeDropped"),this.mainLayout=e,this.dragSource=n,this.dragNode=r,this.dragJson=i,this.fnNewNodeDropped=a}}const on={"panel-element":"_panel-element_uehl9_41","panel-header":"_panel-header_uehl9_49","selectors-wrapper":"_selectors-wrapper_uehl9_62","selector-container":"_selector-container_uehl9_68","legend-indicator":"_legend-indicator_uehl9_84","group-select":"_group-select_uehl9_91","remove-button":"_remove-button_uehl9_103","add-button":"_add-button_uehl9_123","section-content":"_section-content_uehl9_139","no-padding":"_no-padding_uehl9_149","generic-info":"_generic-info_uehl9_157"};function ee(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zd(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qi(t){let e,n,r;t.length!==2?(e=ee,n=(s,c)=>ee(t(s),c),r=(s,c)=>t(s)-c):(e=t===ee||t===zd?t:$b,n=t,r=t);function i(s,c,f=0,g=s.length){if(f<g){if(e(c,c)!==0)return g;do{const _=f+g>>>1;n(s[_],c)<0?f=_+1:g=_}while(f<g)}return f}function a(s,c,f=0,g=s.length){if(f<g){if(e(c,c)!==0)return g;do{const _=f+g>>>1;n(s[_],c)<=0?f=_+1:g=_}while(f<g)}return f}function o(s,c,f=0,g=s.length){const _=i(s,c,f,g-1);return _>f&&r(s[_-1],c)>-r(s[_],c)?_-1:_}return{left:i,center:o,right:a}}function $b(){return 0}function Fa(t){return t===null?NaN:+t}function*Wb(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Fd=qi(ee),jn=Fd.right,Vb=Fd.left,zb=qi(Fa).center;function Fb(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=mu(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const Ub=Ud(mu),Yb=Ud(Hb);function Ud(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const s=n&&t(n),c=r&&t(r),f=i.slice();return s&&c?(Rr(s,f,i,a,o),Rr(s,i,f,a,o),Rr(s,f,i,a,o),Cr(c,i,f,a,o),Cr(c,f,i,a,o),Cr(c,i,f,a,o)):s?(Rr(s,i,f,a,o),Rr(s,f,i,a,o),Rr(s,i,f,a,o)):c&&(Cr(c,i,f,a,o),Cr(c,f,i,a,o),Cr(c,i,f,a,o)),e}}function Rr(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function Cr(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function Hb(t){const e=mu(t);return(n,r,i,a,o)=>{i<<=2,a<<=2,o<<=2,e(n,r,i+0,a+0,o),e(n,r,i+1,a+1,o),e(n,r,i+2,a+2,o),e(n,r,i+3,a+3,o)}}function mu(t){const e=Math.floor(t);if(e===t)return Xb(t);const n=t-e,r=2*t+1;return(i,a,o,s,c)=>{if(!((s-=c)>=o))return;let f=e*a[o];const g=c*e,_=g+c;for(let x=o,A=o+g;x<A;x+=c)f+=a[Math.min(s,x)];for(let x=o,A=s;x<=A;x+=c)f+=a[Math.min(s,x+g)],i[x]=(f+n*(a[Math.max(o,x-_)]+a[Math.min(s,x+_)]))/r,f-=a[Math.max(o,x-g)]}}function Xb(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*r[i];const c=o*t;for(let f=i,g=i+c;f<g;f+=o)s+=r[Math.min(a,f)];for(let f=i,g=a;f<=g;f+=o)s+=r[Math.min(a,f+c)],n[f]=s/e,s-=r[Math.max(i,f-c)]}}function mo(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function qb(t){return t.length|0}function Gb(t){return!(t>0)}function jb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Jb(t){return e=>t(...e)}function Zb(...t){const e=typeof t[t.length-1]=="function"&&Jb(t.pop());t=t.map(jb);const n=t.map(qb),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(Gb))return a;for(;;){a.push(i.map((s,c)=>t[c][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}}function Qb(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function Yd(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function Hd(t,e){const n=Yd(t,e);return n&&Math.sqrt(n)}function Aa(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class pu{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function Kb(t,e){const n=new pu;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function ty(t,e){const n=new pu;let r=-1;return Float64Array.from(t,e===void 0?i=>n.add(+i||0):i=>n.add(+e(i,++r,t)||0))}class Bi extends Map{constructor(e,n=Gd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Fs(this,e))}has(e){return super.has(Fs(this,e))}set(e,n){return super.set(Xd(this,e),n)}delete(e){return super.delete(qd(this,e))}}class mr extends Set{constructor(e,n=Gd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Fs(this,e))}add(e){return super.add(Xd(this,e))}delete(e){return super.delete(qd(this,e))}}function Fs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xd({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function qd({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Gd(t){return t!==null&&typeof t=="object"?t.valueOf():t}function zr(t){return t}function jd(t,...e){return Kr(t,zr,zr,e)}function Jd(t,...e){return Kr(t,Array.from,zr,e)}function Zd(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function ey(t,...e){return Zd(Jd(t,...e),e)}function ny(t,e,...n){return Zd(Kd(t,e,...n),n)}function Qd(t,e,...n){return Kr(t,zr,e,n)}function Kd(t,e,...n){return Kr(t,Array.from,e,n)}function ry(t,...e){return Kr(t,zr,th,e)}function iy(t,...e){return Kr(t,Array.from,th,e)}function th(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function Kr(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new Bi,c=r[o++];let f=-1;for(const g of a){const _=c(g,++f,a),x=s.get(_);x?x.push(g):s.set(_,[g])}for(const[g,_]of s)s.set(g,i(_,o));return e(s)}(t,0)}function eh(t,e){return Array.from(e,n=>t[n])}function Us(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const s=Fr(o[i],o[a]);if(s)return s}})):(n=t.map(n),r.sort((i,a)=>Fr(n[i],n[a]))),eh(t,r)}return t.sort(vu(n))}function vu(t=ee){if(t===ee)return Fr;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Fr(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function ay(t,e,n){return(e.length!==2?Us(Qd(t,e,n),([r,i],[a,o])=>ee(i,o)||ee(r,a)):Us(jd(t,n),([r,i],[a,o])=>e(i,o)||ee(r,a))).map(([r])=>r)}var oy=Array.prototype,sy=oy.slice;function _s(t){return()=>t}const uy=Math.sqrt(50),cy=Math.sqrt(10),ly=Math.sqrt(2);function Ua(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=uy?10:a>=cy?5:a>=ly?2:1;let s,c,f;return i<0?(f=Math.pow(10,-i)/o,s=Math.round(t*f),c=Math.round(e*f),s/f<t&&++s,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*o,s=Math.round(t/f),c=Math.round(e/f),s*f<t&&++s,c*f>e&&--c),c<s&&.5<=n&&n<2?Ua(t,e,n*2):[s,c,f]}function ki(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?Ua(e,t,n):Ua(t,e,n);if(!(a>=i))return[];const s=a-i+1,c=new Array(s);if(r)if(o<0)for(let f=0;f<s;++f)c[f]=(a-f)/-o;else for(let f=0;f<s;++f)c[f]=(a-f)*o;else if(o<0)for(let f=0;f<s;++f)c[f]=(i+f)/-o;else for(let f=0;f<s;++f)c[f]=(i+f)*o;return c}function pr(t,e,n){return e=+e,t=+t,n=+n,Ua(t,e,n)[2]}function Ya(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?pr(e,t,n):pr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function nh(t,e,n){let r;for(;;){const i=pr(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function rh(t){return Math.max(1,Math.ceil(Math.log(mo(t))/Math.LN2)+1)}function af(){var t=zr,e=Aa,n=rh;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,c,f=new Array(o);for(a=0;a<o;++a)f[a]=t(i[a],a,i);var g=e(f),_=g[0],x=g[1],A=n(f,_,x);if(!Array.isArray(A)){const V=x,P=+A;if(e===Aa&&([_,x]=nh(_,x,P)),A=ki(_,x,P),A[0]<=_&&(c=pr(_,x,P)),A[A.length-1]>=x)if(V>=x&&e===Aa){const U=pr(_,x,P);isFinite(U)&&(U>0?x=(Math.floor(x/U)+1)*U:U<0&&(x=(Math.ceil(x*-U)+1)/-U))}else A.pop()}for(var E=A.length,D=0,M=E;A[D]<=_;)++D;for(;A[M-1]>x;)--M;(D||M<E)&&(A=A.slice(D,M),E=M-D);var k=new Array(E+1),B;for(a=0;a<=E;++a)B=k[a]=[],B.x0=a>0?A[a-1]:_,B.x1=a<E?A[a]:x;if(isFinite(c)){if(c>0)for(a=0;a<o;++a)(s=f[a])!=null&&_<=s&&s<=x&&k[Math.min(E,Math.floor((s-_)/c))].push(i[a]);else if(c<0){for(a=0;a<o;++a)if((s=f[a])!=null&&_<=s&&s<=x){const V=Math.floor((_-s)*c);k[Math.min(E,V+(A[V]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=f[a])!=null&&_<=s&&s<=x&&k[jn(A,s,0,E)].push(i[a]);return k}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:_s(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:_s([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:_s(Array.isArray(i)?sy.call(i):i),r):n},r}function Ha(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function bu(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Xa(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function yu(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function po(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Fr:vu(i);r>n;){if(r-n>600){const c=r-n+1,f=e-n+1,g=Math.log(c),_=.5*Math.exp(2*g/3),x=.5*Math.sqrt(g*_*(c-_)/c)*(f-c/2<0?-1:1),A=Math.max(n,Math.floor(e-f*_/c+x)),E=Math.min(r,Math.floor(e+(c-f)*_/c+x));po(t,e,A,E,i)}const a=t[e];let o=n,s=r;for(mi(t,n,e),i(t[r],a)>0&&mi(t,n,r);o<s;){for(mi(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?mi(t,n,s):(++s,mi(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function mi(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ih(t,e=ee){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?ee(o,i)>0:ee(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Pi(t,e,n){if(t=Float64Array.from(Wb(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Xa(t);if(e>=1)return Ha(t);var r,i=(r-1)*e,a=Math.floor(i),o=Ha(po(t,a).subarray(0,a+1)),s=Xa(t.subarray(a+1));return o+(s-o)*(i-a)}}function ah(t,e,n=Fa){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function oh(t,e,n=Fa){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(s,c)=>Fa(n(t[c],c,t))),e<=0)return yu(r);if(e>=1)return bu(r);var r,i=Uint32Array.from(t,(s,c)=>c),a=r.length-1,o=Math.floor(a*e);return po(i,o,0,a,(s,c)=>Fr(r[s],r[c])),o=ih(i.subarray(0,o+1),s=>r[s]),o>=0?o:-1}}function fy(t,e,n){const r=mo(t),i=Pi(t,.75)-Pi(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function dy(t,e,n){const r=mo(t),i=Hd(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function hy(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function gy(t,e){return Pi(t,.5,e)}function my(t,e){return oh(t,.5,e)}function*py(t){for(const e of t)yield*e}function vy(t){return Array.from(py(t))}function by(t,e){const n=new Bi;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function yy(t,e=_y){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function _y(t,e){return[t,e]}function _u(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function wy(t,e=ee){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=ee);const i=(s,c)=>e(n[s],n[c]);let a,o;return t=Uint32Array.from(n,(s,c)=>c),t.sort(e===ee?(s,c)=>Fr(n[s],n[c]):vu(i)),t.forEach((s,c)=>{const f=i(s,a===void 0?s:a);f>=0?((a===void 0||f>0)&&(a=s,o=c),r[s]=o):r[s]=NaN}),r}function qa(t,e=ee){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?ee(o,i)<0:ee(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)<0:e(i,i)===0)&&(n=i,r=!0);return n}function sh(t,e=ee){if(e.length===1)return yu(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)<0)&&(n=a,r=i);return r}function xy(t,e=ee){if(e.length===1)return bu(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)>0)&&(n=a,r=i);return r}function Ty(t,e){const n=sh(t,e);return n<0?void 0:n}const Ay=uh(Math.random);function uh(t){return function(n,r=0,i=n.length){let a=i-(r=+r);for(;a;){const o=t()*a--|0,s=n[a+r];n[a+r]=n[o+r],n[o+r]=s}return n}}function Ey(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function ch(t){if(!(a=t.length))return[];for(var e=-1,n=Xa(t,Sy),r=new Array(n);++e<n;)for(var i=-1,a,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r}function Sy(t){return t.length}function My(){return ch(arguments)}function Ny(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Oy(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Dy(t,e){if(typeof e!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function Ry(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function Cy(t,e,n){if(typeof e!="function")throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++o}for(;{done:i,value:a}=r.next(),!i;)n=e(n,a,++o,t);return n}function Ly(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Iy(t,...e){t=new mr(t);for(const n of e)for(const r of n)t.delete(r);return t}function By(t,e){const n=e[Symbol.iterator](),r=new mr;for(const i of t){if(r.has(i))return!1;let a,o;for(;({value:a,done:o}=n.next())&&!o;){if(Object.is(i,a))return!1;r.add(a)}}return!0}function ky(t,...e){t=new mr(t),e=e.map(Py);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function Py(t){return t instanceof mr?t:new mr(t)}function lh(t,e){const n=t[Symbol.iterator](),r=new Set;for(const i of e){const a=of(i);if(r.has(a))continue;let o,s;for(;{value:o,done:s}=n.next();){if(s)return!1;const c=of(o);if(r.add(c),Object.is(a,c))break}}return!0}function of(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $y(t,e){return lh(e,t)}function Wy(...t){const e=new mr;for(const n of t)for(const r of n)e.add(r);return e}const Vy=Object.freeze(Object.defineProperty({__proto__:null,Adder:pu,InternMap:Bi,InternSet:mr,ascending:ee,bin:af,bisect:jn,bisectCenter:zb,bisectLeft:Vb,bisectRight:jn,bisector:qi,blur:Fb,blur2:Ub,blurImage:Yb,count:mo,cross:Zb,cumsum:Qb,descending:zd,deviation:Hd,difference:Iy,disjoint:By,every:Ny,extent:Aa,fcumsum:ty,filter:Dy,flatGroup:ey,flatRollup:ny,fsum:Kb,greatest:ih,greatestIndex:xy,group:jd,groupSort:ay,groups:Jd,histogram:af,index:ry,indexes:iy,intersection:ky,least:qa,leastIndex:sh,map:Ry,max:Ha,maxIndex:bu,mean:hy,median:gy,medianIndex:my,merge:vy,min:Xa,minIndex:yu,mode:by,nice:nh,pairs:yy,permute:eh,quantile:Pi,quantileIndex:oh,quantileSorted:ah,quickselect:po,range:_u,rank:wy,reduce:Cy,reverse:Ly,rollup:Qd,rollups:Kd,scan:Ty,shuffle:Ay,shuffler:uh,some:Oy,sort:Us,subset:$y,sum:Ey,superset:lh,thresholdFreedmanDiaconis:fy,thresholdScott:dy,thresholdSturges:rh,tickIncrement:pr,tickStep:Ya,ticks:ki,transpose:ch,union:Wy,variance:Yd,zip:My},Symbol.toStringTag,{value:"Module"}));var zy={value:()=>{}};function Gi(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ea(n)}function Ea(t){this._=t}function Fy(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ea.prototype=Gi.prototype={constructor:Ea,on:function(t,e){var n=this._,r=Fy(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Uy(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=sf(n[i],t.name,e);else if(e==null)for(i in n)n[i]=sf(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ea(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Uy(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function sf(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=zy,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const Yy=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Gi},Symbol.toStringTag,{value:"Module"}));var Ys="http://www.w3.org/1999/xhtml";const Hs={svg:"http://www.w3.org/2000/svg",xhtml:Ys,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ji(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Hs.hasOwnProperty(e)?{space:Hs[e],local:t}:t}function Hy(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ys&&e.documentElement.namespaceURI===Ys?e.createElement(t):e.createElementNS(n,t)}}function Xy(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function vo(t){var e=ji(t);return(e.local?Xy:Hy)(e)}function qy(){}function bo(t){return t==null?qy:function(){return this.querySelector(t)}}function Gy(t){typeof t!="function"&&(t=bo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,f,g=0;g<o;++g)(c=a[g])&&(f=t.call(c,c.__data__,g,a))&&("__data__"in c&&(f.__data__=c.__data__),s[g]=f);return new Ce(r,this._parents)}function fh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function jy(){return[]}function wu(t){return t==null?jy:function(){return this.querySelectorAll(t)}}function Jy(t){return function(){return fh(t.apply(this,arguments))}}function Zy(t){typeof t=="function"?t=Jy(t):t=wu(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,f=0;f<s;++f)(c=o[f])&&(r.push(t.call(c,c.__data__,f,o)),i.push(c));return new Ce(r,i)}function xu(t){return function(){return this.matches(t)}}function dh(t){return function(e){return e.matches(t)}}var Qy=Array.prototype.find;function Ky(t){return function(){return Qy.call(this.children,t)}}function t_(){return this.firstElementChild}function e_(t){return this.select(t==null?t_:Ky(typeof t=="function"?t:dh(t)))}var n_=Array.prototype.filter;function r_(){return Array.from(this.children)}function i_(t){return function(){return n_.call(this.children,t)}}function a_(t){return this.selectAll(t==null?r_:i_(typeof t=="function"?t:dh(t)))}function o_(t){typeof t!="function"&&(t=xu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,f=0;f<o;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&s.push(c);return new Ce(r,this._parents)}function hh(t){return new Array(t.length)}function s_(){return new Ce(this._enter||this._groups.map(hh),this._parents)}function Ga(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ga.prototype={constructor:Ga,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function u_(t){return function(){return t}}function c_(t,e,n,r,i,a){for(var o=0,s,c=e.length,f=a.length;o<f;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Ga(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function l_(t,e,n,r,i,a,o){var s,c,f=new Map,g=e.length,_=a.length,x=new Array(g),A;for(s=0;s<g;++s)(c=e[s])&&(x[s]=A=o.call(c,c.__data__,s,e)+"",f.has(A)?i[s]=c:f.set(A,c));for(s=0;s<_;++s)A=o.call(t,a[s],s,a)+"",(c=f.get(A))?(r[s]=c,c.__data__=a[s],f.delete(A)):n[s]=new Ga(t,a[s]);for(s=0;s<g;++s)(c=e[s])&&f.get(x[s])===c&&(i[s]=c)}function f_(t){return t.__data__}function d_(t,e){if(!arguments.length)return Array.from(this,f_);var n=e?l_:c_,r=this._parents,i=this._groups;typeof t!="function"&&(t=u_(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),f=0;f<a;++f){var g=r[f],_=i[f],x=_.length,A=h_(t.call(g,g&&g.__data__,f,r)),E=A.length,D=s[f]=new Array(E),M=o[f]=new Array(E),k=c[f]=new Array(x);n(g,_,D,M,k,A,e);for(var B=0,V=0,P,U;B<E;++B)if(P=D[B]){for(B>=V&&(V=B+1);!(U=M[V])&&++V<E;);P._next=U||null}}return o=new Ce(o,r),o._enter=s,o._exit=c,o}function h_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function g_(){return new Ce(this._exit||this._groups.map(hh),this._parents)}function m_(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function p_(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),c=0;c<o;++c)for(var f=n[c],g=r[c],_=f.length,x=s[c]=new Array(_),A,E=0;E<_;++E)(A=f[E]||g[E])&&(x[E]=A);for(;c<i;++c)s[c]=n[c];return new Ce(s,this._parents)}function v_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function b_(t){t||(t=y_);function e(_,x){return _&&x?t(_.__data__,x.__data__):!_-!x}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),f,g=0;g<s;++g)(f=o[g])&&(c[g]=f);c.sort(e)}return new Ce(i,this._parents).order()}function y_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function __(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function w_(){return Array.from(this)}function x_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function T_(){let t=0;for(const e of this)++t;return t}function A_(){return!this.node()}function E_(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function S_(t){return function(){this.removeAttribute(t)}}function M_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function N_(t,e){return function(){this.setAttribute(t,e)}}function O_(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function D_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function R_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function C_(t,e){var n=ji(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?M_:S_:typeof e=="function"?n.local?R_:D_:n.local?O_:N_)(n,e))}function Tu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function L_(t){return function(){this.style.removeProperty(t)}}function I_(t,e,n){return function(){this.style.setProperty(t,e,n)}}function B_(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function k_(t,e,n){return arguments.length>1?this.each((e==null?L_:typeof e=="function"?B_:I_)(t,e,n??"")):vr(this.node(),t)}function vr(t,e){return t.style.getPropertyValue(e)||Tu(t).getComputedStyle(t,null).getPropertyValue(e)}function P_(t){return function(){delete this[t]}}function $_(t,e){return function(){this[t]=e}}function W_(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function V_(t,e){return arguments.length>1?this.each((e==null?P_:typeof e=="function"?W_:$_)(t,e)):this.node()[t]}function gh(t){return t.trim().split(/^|\s+/)}function Au(t){return t.classList||new mh(t)}function mh(t){this._node=t,this._names=gh(t.getAttribute("class")||"")}mh.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ph(t,e){for(var n=Au(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function vh(t,e){for(var n=Au(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function z_(t){return function(){ph(this,t)}}function F_(t){return function(){vh(this,t)}}function U_(t,e){return function(){(e.apply(this,arguments)?ph:vh)(this,t)}}function Y_(t,e){var n=gh(t+"");if(arguments.length<2){for(var r=Au(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?U_:e?z_:F_)(n,e))}function H_(){this.textContent=""}function X_(t){return function(){this.textContent=t}}function q_(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function G_(t){return arguments.length?this.each(t==null?H_:(typeof t=="function"?q_:X_)(t)):this.node().textContent}function j_(){this.innerHTML=""}function J_(t){return function(){this.innerHTML=t}}function Z_(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Q_(t){return arguments.length?this.each(t==null?j_:(typeof t=="function"?Z_:J_)(t)):this.node().innerHTML}function K_(){this.nextSibling&&this.parentNode.appendChild(this)}function t1(){return this.each(K_)}function e1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n1(){return this.each(e1)}function r1(t){var e=typeof t=="function"?t:vo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function i1(){return null}function a1(t,e){var n=typeof t=="function"?t:vo(t),r=e==null?i1:typeof e=="function"?e:bo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function o1(){var t=this.parentNode;t&&t.removeChild(this)}function s1(){return this.each(o1)}function u1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function c1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function l1(t){return this.select(t?c1:u1)}function f1(t){return arguments.length?this.property("__data__",t):this.node().__data__}function d1(t){return function(e){t.call(this,e,this.__data__)}}function h1(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function g1(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function m1(t,e,n){return function(){var r=this.__on,i,a=d1(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function p1(t,e,n){var r=h1(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,f=s.length,g;c<f;++c)for(i=0,g=s[c];i<a;++i)if((o=r[i]).type===g.type&&o.name===g.name)return g.value}return}for(s=e?m1:g1,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function bh(t,e,n){var r=Tu(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function v1(t,e){return function(){return bh(this,t,e)}}function b1(t,e){return function(){return bh(this,t,e.apply(this,arguments))}}function y1(t,e){return this.each((typeof e=="function"?b1:v1)(t,e))}function*_1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Eu=[null];function Ce(t,e){this._groups=t,this._parents=e}function ti(){return new Ce([[document.documentElement]],Eu)}function w1(){return this}Ce.prototype=ti.prototype={constructor:Ce,select:Gy,selectAll:Zy,selectChild:e_,selectChildren:a_,filter:o_,data:d_,enter:s_,exit:g_,join:m_,merge:p_,selection:w1,order:v_,sort:b_,call:__,nodes:w_,node:x_,size:T_,empty:A_,each:E_,attr:C_,style:k_,property:V_,classed:Y_,text:G_,html:Q_,raise:t1,lower:n1,append:r1,insert:a1,remove:s1,clone:l1,datum:f1,on:p1,dispatch:y1,[Symbol.iterator]:_1};function de(t){return typeof t=="string"?new Ce([[document.querySelector(t)]],[document.documentElement]):new Ce([[t]],Eu)}function x1(t){return de(vo(t).call(document.documentElement))}var T1=0;function yh(){return new Xs}function Xs(){this._="@"+(++T1).toString(36)}Xs.prototype=yh.prototype={constructor:Xs,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function _h(t){let e;for(;e=t.sourceEvent;)t=e;return t}function rn(t,e){if(t=_h(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function A1(t,e){return t.target&&(t=_h(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>rn(n,e))}function E1(t){return typeof t=="string"?new Ce([document.querySelectorAll(t)],[document.documentElement]):new Ce([fh(t)],Eu)}const S1=Object.freeze(Object.defineProperty({__proto__:null,create:x1,creator:vo,local:yh,matcher:xu,namespace:ji,namespaces:Hs,pointer:rn,pointers:A1,select:de,selectAll:E1,selection:ti,selector:bo,selectorAll:wu,style:vr,window:Tu},Symbol.toStringTag,{value:"Module"})),qs={capture:!0,passive:!1};function Gs(t){t.preventDefault(),t.stopImmediatePropagation()}function wh(t){var e=t.document.documentElement,n=de(t).on("dragstart.drag",Gs,qs);"onselectstart"in e?n.on("selectstart.drag",Gs,qs):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function xh(t,e){var n=t.document.documentElement,r=de(t).on("dragstart.drag",null);e&&(r.on("click.drag",Gs,qs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function yo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Su(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ei(){}var br=.7,Ur=1/br,Pr="\\s*([+-]?\\d+)\\s*",$i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M1=/^#([0-9a-f]{3,8})$/,N1=new RegExp(`^rgb\\(${Pr},${Pr},${Pr}\\)$`),O1=new RegExp(`^rgb\\(${pn},${pn},${pn}\\)$`),D1=new RegExp(`^rgba\\(${Pr},${Pr},${Pr},${$i}\\)$`),R1=new RegExp(`^rgba\\(${pn},${pn},${pn},${$i}\\)$`),C1=new RegExp(`^hsl\\(${$i},${pn},${pn}\\)$`),L1=new RegExp(`^hsla\\(${$i},${pn},${pn},${$i}\\)$`),uf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yo(ei,Jn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cf,formatHex:cf,formatHex8:I1,formatHsl:B1,formatRgb:lf,toString:lf});function cf(){return this.rgb().formatHex()}function I1(){return this.rgb().formatHex8()}function B1(){return Ah(this).formatHsl()}function lf(){return this.rgb().formatRgb()}function Jn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=M1.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ff(e):n===3?new Ee(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ha(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ha(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=N1.exec(t))?new Ee(e[1],e[2],e[3],1):(e=O1.exec(t))?new Ee(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=D1.exec(t))?ha(e[1],e[2],e[3],e[4]):(e=R1.exec(t))?ha(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=C1.exec(t))?gf(e[1],e[2]/100,e[3]/100,1):(e=L1.exec(t))?gf(e[1],e[2]/100,e[3]/100,e[4]):uf.hasOwnProperty(t)?ff(uf[t]):t==="transparent"?new Ee(NaN,NaN,NaN,0):null}function ff(t){return new Ee(t>>16&255,t>>8&255,t&255,1)}function ha(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ee(t,e,n,r)}function Th(t){return t instanceof ei||(t=Jn(t)),t?(t=t.rgb(),new Ee(t.r,t.g,t.b,t.opacity)):new Ee}function yr(t,e,n,r){return arguments.length===1?Th(t):new Ee(t,e,n,r??1)}function Ee(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yo(Ee,yr,Su(ei,{brighter(t){return t=t==null?Ur:Math.pow(Ur,t),new Ee(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new Ee(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ee(hr(this.r),hr(this.g),hr(this.b),ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:df,formatHex:df,formatHex8:k1,formatRgb:hf,toString:hf}));function df(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}`}function k1(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}${fr((isNaN(this.opacity)?1:this.opacity)*255)}`}function hf(){const t=ja(this.opacity);return`${t===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${t===1?")":`, ${t})`}`}function ja(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fr(t){return t=hr(t),(t<16?"0":"")+t.toString(16)}function gf(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new sn(t,e,n,r)}function Ah(t){if(t instanceof sn)return new sn(t.h,t.s,t.l,t.opacity);if(t instanceof ei||(t=Jn(t)),!t)return new sn;if(t instanceof sn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new sn(o,s,c,t.opacity)}function P1(t,e,n,r){return arguments.length===1?Ah(t):new sn(t,e,n,r??1)}function sn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yo(sn,P1,Su(ei,{brighter(t){return t=t==null?Ur:Math.pow(Ur,t),new sn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new sn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ee(ws(t>=240?t-240:t+120,i,r),ws(t,i,r),ws(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new sn(mf(this.h),ga(this.s),ga(this.l),ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ja(this.opacity);return`${t===1?"hsl(":"hsla("}${mf(this.h)}, ${ga(this.s)*100}%, ${ga(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mf(t){return t=(t||0)%360,t<0?t+360:t}function ga(t){return Math.max(0,Math.min(1,t||0))}function ws(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $1=Math.PI/180,W1=180/Math.PI;var Eh=-.14861,Mu=1.78277,Nu=-.29227,_o=-.90649,Wi=1.97294,pf=Wi*_o,vf=Wi*Mu,bf=Mu*Nu-_o*Eh;function V1(t){if(t instanceof gr)return new gr(t.h,t.s,t.l,t.opacity);t instanceof Ee||(t=Th(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(bf*r+pf*e-vf*n)/(bf+pf-vf),a=r-i,o=(Wi*(n-i)-Nu*a)/_o,s=Math.sqrt(o*o+a*a)/(Wi*i*(1-i)),c=s?Math.atan2(o,a)*W1-120:NaN;return new gr(c<0?c+360:c,s,i,t.opacity)}function vn(t,e,n,r){return arguments.length===1?V1(t):new gr(t,e,n,r??1)}function gr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yo(gr,vn,Su(ei,{brighter(t){return t=t==null?Ur:Math.pow(Ur,t),new gr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new gr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*$1,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ee(255*(e+n*(Eh*r+Mu*i)),255*(e+n*(Nu*r+_o*i)),255*(e+n*(Wi*r)),this.opacity)}}));function z1(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function F1(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return z1((n-r/e)*e,o,i,a,s)}}const wo=t=>()=>t;function Sh(t,e){return function(n){return t+n*e}}function U1(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Y1(t,e){var n=e-t;return n?Sh(t,n>180||n<-180?n-360*Math.round(n/360):n):wo(isNaN(t)?e:t)}function H1(t){return(t=+t)==1?$r:function(e,n){return n-e?U1(e,n,t):wo(isNaN(e)?n:e)}}function $r(t,e){var n=e-t;return n?Sh(t,n):wo(isNaN(t)?e:t)}const Ja=function t(e){var n=H1(e);function r(i,a){var o=n((i=yr(i)).r,(a=yr(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),f=$r(i.opacity,a.opacity);return function(g){return i.r=o(g),i.g=s(g),i.b=c(g),i.opacity=f(g),i+""}}return r.gamma=t,r}(1);function X1(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=yr(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=a(c),s+""}}}var q1=X1(F1);function G1(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function j1(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function J1(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Mr(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Z1(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function an(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Q1(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Mr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var js=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xs=new RegExp(js.source,"g");function K1(t){return function(){return t}}function tw(t){return function(e){return t(e)+""}}function Mh(t,e){var n=js.lastIndex=xs.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=js.exec(t))&&(i=xs.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:an(r,i)})),n=xs.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?tw(c[0].x):K1(e):(e=c.length,function(f){for(var g=0,_;g<e;++g)s[(_=c[g]).i]=_.x(f);return s.join("")})}function Mr(t,e){var n=typeof e,r;return e==null||n==="boolean"?wo(e):(n==="number"?an:n==="string"?(r=Jn(e))?(e=r,Ja):Mh:e instanceof Jn?Ja:e instanceof Date?Z1:j1(e)?G1:Array.isArray(e)?J1:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Q1:an)(t,e)}function Ou(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var yf=180/Math.PI,Js={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nh(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*yf,skewX:Math.atan(c)*yf,scaleX:o,scaleY:s}}var ma;function ew(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Js:Nh(e.a,e.b,e.c,e.d,e.e,e.f)}function nw(t){return t==null||(ma||(ma=document.createElementNS("http://www.w3.org/2000/svg","g")),ma.setAttribute("transform",t),!(t=ma.transform.baseVal.consolidate()))?Js:(t=t.matrix,Nh(t.a,t.b,t.c,t.d,t.e,t.f))}function Oh(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function a(f,g,_,x,A,E){if(f!==_||g!==x){var D=A.push("translate(",null,e,null,n);E.push({i:D-4,x:an(f,_)},{i:D-2,x:an(g,x)})}else(_||x)&&A.push("translate("+_+e+x+n)}function o(f,g,_,x){f!==g?(f-g>180?g+=360:g-f>180&&(f+=360),x.push({i:_.push(i(_)+"rotate(",null,r)-2,x:an(f,g)})):g&&_.push(i(_)+"rotate("+g+r)}function s(f,g,_,x){f!==g?x.push({i:_.push(i(_)+"skewX(",null,r)-2,x:an(f,g)}):g&&_.push(i(_)+"skewX("+g+r)}function c(f,g,_,x,A,E){if(f!==_||g!==x){var D=A.push(i(A)+"scale(",null,",",null,")");E.push({i:D-4,x:an(f,_)},{i:D-2,x:an(g,x)})}else(_!==1||x!==1)&&A.push(i(A)+"scale("+_+","+x+")")}return function(f,g){var _=[],x=[];return f=t(f),g=t(g),a(f.translateX,f.translateY,g.translateX,g.translateY,_,x),o(f.rotate,g.rotate,_,x),s(f.skewX,g.skewX,_,x),c(f.scaleX,f.scaleY,g.scaleX,g.scaleY,_,x),f=g=null,function(A){for(var E=-1,D=x.length,M;++E<D;)_[(M=x[E]).i]=M.x(A);return _.join("")}}}var rw=Oh(ew,"px, ","px)","deg)"),iw=Oh(nw,", ",")",")"),aw=1e-12;function _f(t){return((t=Math.exp(t))+1/t)/2}function ow(t){return((t=Math.exp(t))-1/t)/2}function sw(t){return((t=Math.exp(2*t))-1)/(t+1)}const uw=function t(e,n,r){function i(a,o){var s=a[0],c=a[1],f=a[2],g=o[0],_=o[1],x=o[2],A=g-s,E=_-c,D=A*A+E*E,M,k;if(D<aw)k=Math.log(x/f)/e,M=function(ot){return[s+ot*A,c+ot*E,f*Math.exp(e*ot*k)]};else{var B=Math.sqrt(D),V=(x*x-f*f+r*D)/(2*f*n*B),P=(x*x-f*f-r*D)/(2*x*n*B),U=Math.log(Math.sqrt(V*V+1)-V),q=Math.log(Math.sqrt(P*P+1)-P);k=(q-U)/e,M=function(ot){var K=ot*k,nt=_f(U),mt=f/(n*B)*(nt*sw(e*K+U)-ow(U));return[s+mt*A,c+mt*E,f*nt/_f(e*K+U)]}}return M.duration=k*1e3*e/Math.SQRT2,M}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,c=s*s;return t(o,s,c)},i}(Math.SQRT2,2,4);function Dh(t){return function e(n){n=+n;function r(i,a){var o=t((i=vn(i)).h,(a=vn(a)).h),s=$r(i.s,a.s),c=$r(i.l,a.l),f=$r(i.opacity,a.opacity);return function(g){return i.h=o(g),i.s=s(g),i.l=c(Math.pow(g,n)),i.opacity=f(g),i+""}}return r.gamma=e,r}(1)}Dh(Y1);var Du=Dh($r);function cw(t,e){e===void 0&&(e=t,t=Mr);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}var Yr=0,Ai=0,pi=0,Rh=1e3,Za,Ei,Qa=0,_r=0,xo=0,Vi=typeof performance=="object"&&performance.now?performance:Date,Ch=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ru(){return _r||(Ch(lw),_r=Vi.now()+xo)}function lw(){_r=0}function Ka(){this._call=this._time=this._next=null}Ka.prototype=Lh.prototype={constructor:Ka,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ru():+n)+(e==null?0:+e),!this._next&&Ei!==this&&(Ei?Ei._next=this:Za=this,Ei=this),this._call=t,this._time=n,Zs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zs())}};function Lh(t,e,n){var r=new Ka;return r.restart(t,e,n),r}function fw(){Ru(),++Yr;for(var t=Za,e;t;)(e=_r-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Yr}function wf(){_r=(Qa=Vi.now())+xo,Yr=Ai=0;try{fw()}finally{Yr=0,hw(),_r=0}}function dw(){var t=Vi.now(),e=t-Qa;e>Rh&&(xo-=e,Qa=t)}function hw(){for(var t,e=Za,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Za=n);Ei=t,Zs(r)}function Zs(t){if(!Yr){Ai&&(Ai=clearTimeout(Ai));var e=t-_r;e>24?(t<1/0&&(Ai=setTimeout(wf,t-Vi.now()-xo)),pi&&(pi=clearInterval(pi))):(pi||(Qa=Vi.now(),pi=setInterval(dw,Rh)),Yr=1,Ch(wf))}}function xf(t,e,n){var r=new Ka;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var gw=Gi("start","end","cancel","interrupt"),mw=[],Ih=0,Tf=1,Qs=2,Sa=3,Af=4,Ks=5,Ma=6;function To(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;pw(t,n,{name:e,index:r,group:i,on:gw,tween:mw,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ih})}function Cu(t,e){var n=cn(t,e);if(n.state>Ih)throw new Error("too late; already scheduled");return n}function wn(t,e){var n=cn(t,e);if(n.state>Sa)throw new Error("too late; already running");return n}function cn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pw(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Lh(a,0,n.time);function a(f){n.state=Tf,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var g,_,x,A;if(n.state!==Tf)return c();for(g in r)if(A=r[g],A.name===n.name){if(A.state===Sa)return xf(o);A.state===Af?(A.state=Ma,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete r[g]):+g<e&&(A.state=Ma,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete r[g])}if(xf(function(){n.state===Sa&&(n.state=Af,n.timer.restart(s,n.delay,n.time),s(f))}),n.state=Qs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Qs){for(n.state=Sa,i=new Array(x=n.tween.length),g=0,_=-1;g<x;++g)(A=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(i[++_]=A);i.length=_+1}}function s(f){for(var g=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(c),n.state=Ks,1),_=-1,x=i.length;++_<x;)i[_].call(t,g);n.state===Ks&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ma,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function Wr(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>Qs&&r.state<Ks,r.state=Ma,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function vw(t){return this.each(function(){Wr(this,t)})}function bw(t,e){var n,r;return function(){var i=wn(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function yw(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=wn(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,f=i.length;c<f;++c)if(i[c].name===e){i[c]=s;break}c===f&&i.push(s)}a.tween=i}}function _w(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=cn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?bw:yw)(n,t,e))}function Lu(t,e,n){var r=t._id;return t.each(function(){var i=wn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return cn(i,r).value[e]}}function Bh(t,e){var n;return(typeof e=="number"?an:e instanceof Jn?Ja:(n=Jn(e))?(e=n,Ja):Mh)(t,e)}function ww(t){return function(){this.removeAttribute(t)}}function xw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tw(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Aw(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Ew(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function Sw(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function Mw(t,e){var n=ji(t),r=n==="transform"?iw:Bh;return this.attrTween(t,typeof e=="function"?(n.local?Sw:Ew)(n,r,Lu(this,"attr."+t,e)):e==null?(n.local?xw:ww)(n):(n.local?Aw:Tw)(n,r,e))}function Nw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ow(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Dw(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Ow(t,a)),n}return i._value=e,i}function Rw(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Nw(t,a)),n}return i._value=e,i}function Cw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=ji(t);return this.tween(n,(r.local?Dw:Rw)(r,e))}function Lw(t,e){return function(){Cu(this,t).delay=+e.apply(this,arguments)}}function Iw(t,e){return e=+e,function(){Cu(this,t).delay=e}}function Bw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Lw:Iw)(e,t)):cn(this.node(),e).delay}function kw(t,e){return function(){wn(this,t).duration=+e.apply(this,arguments)}}function Pw(t,e){return e=+e,function(){wn(this,t).duration=e}}function $w(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?kw:Pw)(e,t)):cn(this.node(),e).duration}function Ww(t,e){if(typeof e!="function")throw new Error;return function(){wn(this,t).ease=e}}function Vw(t){var e=this._id;return arguments.length?this.each(Ww(e,t)):cn(this.node(),e).ease}function zw(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;wn(this,t).ease=n}}function Fw(t){if(typeof t!="function")throw new Error;return this.each(zw(this._id,t))}function Uw(t){typeof t!="function"&&(t=xu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,f=0;f<o;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&s.push(c);return new Bn(r,this._parents,this._name,this._id)}function Yw(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],f=n[s],g=c.length,_=o[s]=new Array(g),x,A=0;A<g;++A)(x=c[A]||f[A])&&(_[A]=x);for(;s<r;++s)o[s]=e[s];return new Bn(o,this._parents,this._name,this._id)}function Hw(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Xw(t,e,n){var r,i,a=Hw(e)?Cu:wn;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function qw(t,e){var n=this._id;return arguments.length<2?cn(this.node(),n).on.on(t):this.each(Xw(n,t,e))}function Gw(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function jw(){return this.on("end.remove",Gw(this._id))}function Jw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bo(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,f=a[o]=new Array(c),g,_,x=0;x<c;++x)(g=s[x])&&(_=t.call(g,g.__data__,x,s))&&("__data__"in g&&(_.__data__=g.__data__),f[x]=_,To(f[x],e,n,x,f,cn(g,n)));return new Bn(a,this._parents,e,n)}function Zw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wu(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],f=c.length,g,_=0;_<f;++_)if(g=c[_]){for(var x=t.call(g,g.__data__,_,c),A,E=cn(g,n),D=0,M=x.length;D<M;++D)(A=x[D])&&To(A,e,n,D,x,E);a.push(x),o.push(g)}return new Bn(a,o,e,n)}var Qw=ti.prototype.constructor;function Kw(){return new Qw(this._groups,this._parents)}function tx(t,e){var n,r,i;return function(){var a=vr(this,t),o=(this.style.removeProperty(t),vr(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function kh(t){return function(){this.style.removeProperty(t)}}function ex(t,e,n){var r,i=n+"",a;return function(){var o=vr(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function nx(t,e,n){var r,i,a;return function(){var o=vr(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),vr(this,t))),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}function rx(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var c=wn(this,t),f=c.on,g=c.value[a]==null?s||(s=kh(e)):void 0;(f!==n||i!==g)&&(r=(n=f).copy()).on(o,i=g),c.on=r}}function ix(t,e,n){var r=(t+="")=="transform"?rw:Bh;return e==null?this.styleTween(t,tx(t,r)).on("end.style."+t,kh(t)):typeof e=="function"?this.styleTween(t,nx(t,r,Lu(this,"style."+t,e))).each(rx(this._id,t)):this.styleTween(t,ex(t,r,e),n).on("end.style."+t,null)}function ax(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ox(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&ax(t,o,n)),r}return a._value=e,a}function sx(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ox(t,e,n??""))}function ux(t){return function(){this.textContent=t}}function cx(t){return function(){var e=t(this);this.textContent=e??""}}function lx(t){return this.tween("text",typeof t=="function"?cx(Lu(this,"text",t)):ux(t==null?"":t+""))}function fx(t){return function(e){this.textContent=t.call(this,e)}}function dx(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&fx(i)),e}return r._value=t,r}function hx(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,dx(t))}function gx(){for(var t=this._name,e=this._id,n=Ph(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,f=0;f<s;++f)if(c=o[f]){var g=cn(c,e);To(c,t,n,f,o,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Bn(r,this._parents,t,n)}function mx(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var f=wn(this,r),g=f.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),f.on=e}),i===0&&a()})}var px=0;function Bn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ph(){return++px}var An=ti.prototype;Bn.prototype={constructor:Bn,select:Jw,selectAll:Zw,selectChild:An.selectChild,selectChildren:An.selectChildren,filter:Uw,merge:Yw,selection:Kw,transition:gx,call:An.call,nodes:An.nodes,node:An.node,size:An.size,empty:An.empty,each:An.each,on:qw,attr:Mw,attrTween:Cw,style:ix,styleTween:sx,text:lx,textTween:hx,remove:jw,tween:_w,delay:Bw,duration:$w,ease:Vw,easeVarying:Fw,end:mx,[Symbol.iterator]:An[Symbol.iterator]};function vx(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bx={time:null,delay:0,duration:250,ease:vx};function yx(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function _x(t){var e,n;t instanceof Bn?(e=t._id,t=t._name):(e=Ph(),(n=bx).time=Ru(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,f=0;f<s;++f)(c=o[f])&&To(c,t,e,f,o,n||yx(c,e));return new Bn(r,this._parents,t,e)}ti.prototype.interrupt=vw;ti.prototype.transition=_x;const Ts=t=>()=>t;function wx(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function xx(t){t.stopImmediatePropagation()}function As(t){t.preventDefault(),t.stopImmediatePropagation()}var Ef={name:"drag"},Es={name:"space"},Lr={name:"handle"},Ir={name:"center"};const{abs:Sf,max:we,min:xe}=Math;function Mf(t){return[+t[0],+t[1]]}function tu(t){return[Mf(t[0]),Mf(t[1])]}var Na={name:"x",handles:["w","e"].map(zi),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Oa={name:"y",handles:["n","s"].map(zi),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Tx={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(zi),input:function(t){return t==null?null:tu(t)},output:function(t){return t}},En={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Nf={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Of={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ax={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ex={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function zi(t){return{type:t}}function Sx(t){return!t.ctrlKey&&!t.button}function Mx(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Nx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ss(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ox(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Dx(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Rx(){return Iu(Na)}function Cx(){return Iu(Oa)}function Lx(){return Iu(Tx)}function Iu(t){var e=Mx,n=Sx,r=Nx,i=!0,a=Gi("start","brush","end"),o=6,s;function c(M){var k=M.property("__brush",D).selectAll(".overlay").data([zi("overlay")]);k.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",En.overlay).merge(k).each(function(){var V=Ss(this).extent;de(this).attr("x",V[0][0]).attr("y",V[0][1]).attr("width",V[1][0]-V[0][0]).attr("height",V[1][1]-V[0][1])}),M.selectAll(".selection").data([zi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",En.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var B=M.selectAll(".handle").data(t.handles,function(V){return V.type});B.exit().remove(),B.enter().append("rect").attr("class",function(V){return"handle handle--"+V.type}).attr("cursor",function(V){return En[V.type]}),M.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",x).filter(r).on("touchstart.brush",x).on("touchmove.brush",A).on("touchend.brush touchcancel.brush",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(M,k,B){M.tween?M.on("start.brush",function(V){g(this,arguments).beforestart().start(V)}).on("interrupt.brush end.brush",function(V){g(this,arguments).end(V)}).tween("brush",function(){var V=this,P=V.__brush,U=g(V,arguments),q=P.selection,ot=t.input(typeof k=="function"?k.apply(this,arguments):k,P.extent),K=Mr(q,ot);function nt(mt){P.selection=mt===1&&ot===null?null:K(mt),f.call(V),U.brush()}return q!==null&&ot!==null?nt:nt(1)}):M.each(function(){var V=this,P=arguments,U=V.__brush,q=t.input(typeof k=="function"?k.apply(V,P):k,U.extent),ot=g(V,P).beforestart();Wr(V),U.selection=q===null?null:q,f.call(V),ot.start(B).brush(B).end(B)})},c.clear=function(M,k){c.move(M,null,k)};function f(){var M=de(this),k=Ss(this).selection;k?(M.selectAll(".selection").style("display",null).attr("x",k[0][0]).attr("y",k[0][1]).attr("width",k[1][0]-k[0][0]).attr("height",k[1][1]-k[0][1]),M.selectAll(".handle").style("display",null).attr("x",function(B){return B.type[B.type.length-1]==="e"?k[1][0]-o/2:k[0][0]-o/2}).attr("y",function(B){return B.type[0]==="s"?k[1][1]-o/2:k[0][1]-o/2}).attr("width",function(B){return B.type==="n"||B.type==="s"?k[1][0]-k[0][0]+o:o}).attr("height",function(B){return B.type==="e"||B.type==="w"?k[1][1]-k[0][1]+o:o})):M.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function g(M,k,B){var V=M.__brush.emitter;return V&&(!B||!V.clean)?V:new _(M,k,B)}function _(M,k,B){this.that=M,this.args=k,this.state=M.__brush,this.active=0,this.clean=B}_.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(M,k){return this.starting?(this.starting=!1,this.emit("start",M,k)):this.emit("brush",M),this},brush:function(M,k){return this.emit("brush",M,k),this},end:function(M,k){return--this.active===0&&(delete this.state.emitter,this.emit("end",M,k)),this},emit:function(M,k,B){var V=de(this.that).datum();a.call(M,this.that,new wx(M,{sourceEvent:k,target:c,selection:t.output(this.state.selection),mode:B,dispatch:a}),V)}};function x(M){if(s&&!M.touches||!n.apply(this,arguments))return;var k=this,B=M.target.__data__.type,V=(i&&M.metaKey?B="overlay":B)==="selection"?Ef:i&&M.altKey?Ir:Lr,P=t===Oa?null:Ax[B],U=t===Na?null:Ex[B],q=Ss(k),ot=q.extent,K=q.selection,nt=ot[0][0],mt,ft,J=ot[0][1],G,W,Z=ot[1][0],Y,et,dt=ot[1][1],ut,gt,Q=0,it=0,ct,ht=P&&U&&i&&M.shiftKey,Mt,At,xt=Array.from(M.touches||[M],vt=>{const te=vt.identifier;return vt=rn(vt,k),vt.point0=vt.slice(),vt.identifier=te,vt});Wr(k);var Dt=g(k,arguments,!0).beforestart();if(B==="overlay"){K&&(ct=!0);const vt=[xt[0],xt[1]||xt[0]];q.selection=K=[[mt=t===Oa?nt:xe(vt[0][0],vt[1][0]),G=t===Na?J:xe(vt[0][1],vt[1][1])],[Y=t===Oa?Z:we(vt[0][0],vt[1][0]),ut=t===Na?dt:we(vt[0][1],vt[1][1])]],xt.length>1&&Ut(M)}else mt=K[0][0],G=K[0][1],Y=K[1][0],ut=K[1][1];ft=mt,W=G,et=Y,gt=ut;var lt=de(k).attr("pointer-events","none"),_t=lt.selectAll(".overlay").attr("cursor",En[B]);if(M.touches)Dt.moved=at,Dt.ended=st;else{var Nt=de(M.view).on("mousemove.brush",at,!0).on("mouseup.brush",st,!0);i&&Nt.on("keydown.brush",Yt,!0).on("keyup.brush",qt,!0),wh(M.view)}f.call(k),Dt.start(M,V.name);function at(vt){for(const te of vt.changedTouches||[vt])for(const ae of xt)ae.identifier===te.identifier&&(ae.cur=rn(te,k));if(ht&&!Mt&&!At&&xt.length===1){const te=xt[0];Sf(te.cur[0]-te[0])>Sf(te.cur[1]-te[1])?At=!0:Mt=!0}for(const te of xt)te.cur&&(te[0]=te.cur[0],te[1]=te.cur[1]);ct=!0,As(vt),Ut(vt)}function Ut(vt){const te=xt[0],ae=te.point0;var ln;switch(Q=te[0]-ae[0],it=te[1]-ae[1],V){case Es:case Ef:{P&&(Q=we(nt-mt,xe(Z-Y,Q)),ft=mt+Q,et=Y+Q),U&&(it=we(J-G,xe(dt-ut,it)),W=G+it,gt=ut+it);break}case Lr:{xt[1]?(P&&(ft=we(nt,xe(Z,xt[0][0])),et=we(nt,xe(Z,xt[1][0])),P=1),U&&(W=we(J,xe(dt,xt[0][1])),gt=we(J,xe(dt,xt[1][1])),U=1)):(P<0?(Q=we(nt-mt,xe(Z-mt,Q)),ft=mt+Q,et=Y):P>0&&(Q=we(nt-Y,xe(Z-Y,Q)),ft=mt,et=Y+Q),U<0?(it=we(J-G,xe(dt-G,it)),W=G+it,gt=ut):U>0&&(it=we(J-ut,xe(dt-ut,it)),W=G,gt=ut+it));break}case Ir:{P&&(ft=we(nt,xe(Z,mt-Q*P)),et=we(nt,xe(Z,Y+Q*P))),U&&(W=we(J,xe(dt,G-it*U)),gt=we(J,xe(dt,ut+it*U)));break}}et<ft&&(P*=-1,ln=mt,mt=Y,Y=ln,ln=ft,ft=et,et=ln,B in Nf&&_t.attr("cursor",En[B=Nf[B]])),gt<W&&(U*=-1,ln=G,G=ut,ut=ln,ln=W,W=gt,gt=ln,B in Of&&_t.attr("cursor",En[B=Of[B]])),q.selection&&(K=q.selection),Mt&&(ft=K[0][0],et=K[1][0]),At&&(W=K[0][1],gt=K[1][1]),(K[0][0]!==ft||K[0][1]!==W||K[1][0]!==et||K[1][1]!==gt)&&(q.selection=[[ft,W],[et,gt]],f.call(k),Dt.brush(vt,V.name))}function st(vt){if(xx(vt),vt.touches){if(vt.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else xh(vt.view,ct),Nt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);lt.attr("pointer-events","all"),_t.attr("cursor",En.overlay),q.selection&&(K=q.selection),Ox(K)&&(q.selection=null,f.call(k)),Dt.end(vt,V.name)}function Yt(vt){switch(vt.keyCode){case 16:{ht=P&&U;break}case 18:{V===Lr&&(P&&(Y=et-Q*P,mt=ft+Q*P),U&&(ut=gt-it*U,G=W+it*U),V=Ir,Ut(vt));break}case 32:{(V===Lr||V===Ir)&&(P<0?Y=et-Q:P>0&&(mt=ft-Q),U<0?ut=gt-it:U>0&&(G=W-it),V=Es,_t.attr("cursor",En.selection),Ut(vt));break}default:return}As(vt)}function qt(vt){switch(vt.keyCode){case 16:{ht&&(Mt=At=ht=!1,Ut(vt));break}case 18:{V===Ir&&(P<0?Y=et:P>0&&(mt=ft),U<0?ut=gt:U>0&&(G=W),V=Lr,Ut(vt));break}case 32:{V===Es&&(vt.altKey?(P&&(Y=et-Q*P,mt=ft+Q*P),U&&(ut=gt-it*U,G=W+it*U),V=Ir):(P<0?Y=et:P>0&&(mt=ft),U<0?ut=gt:U>0&&(G=W),V=Lr),_t.attr("cursor",En[B]),Ut(vt));break}default:return}As(vt)}}function A(M){g(this,arguments).moved(M)}function E(M){g(this,arguments).ended(M)}function D(){var M=this.__brush||{selection:null};return M.extent=tu(e.apply(this,arguments)),M.dim=t,M}return c.extent=function(M){return arguments.length?(e=typeof M=="function"?M:Ts(tu(M)),c):e},c.filter=function(M){return arguments.length?(n=typeof M=="function"?M:Ts(!!M),c):n},c.touchable=function(M){return arguments.length?(r=typeof M=="function"?M:Ts(!!M),c):r},c.handleSize=function(M){return arguments.length?(o=+M,c):o},c.keyModifiers=function(M){return arguments.length?(i=!!M,c):i},c.on=function(){var M=a.on.apply(a,arguments);return M===a?c:M},c}const Ix=Object.freeze(Object.defineProperty({__proto__:null,brush:Lx,brushSelection:Dx,brushX:Rx,brushY:Cx},Symbol.toStringTag,{value:"Module"})),eu=Math.PI,nu=2*eu,sr=1e-6,Bx=nu-sr;function $h(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function kx(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $h;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Ao=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?$h:kx(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,c=r-e,f=i-n,g=o-e,_=s-n,x=g*g+_*_;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(x>sr)if(!(Math.abs(_*c-f*g)>sr)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let A=r-o,E=i-s,D=c*c+f*f,M=A*A+E*E,k=Math.sqrt(D),B=Math.sqrt(x),V=a*Math.tan((eu-Math.acos((D+x-M)/(2*k*B)))/2),P=V/B,U=V/k;Math.abs(P-1)>sr&&this._append`L${e+P*g},${n+P*_}`,this._append`A${a},${a},0,0,${+(_*A>g*E)},${this._x1=e+U*c},${this._y1=n+U*f}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),f=e+s,g=n+c,_=1^o,x=o?i-a:a-i;this._x1===null?this._append`M${f},${g}`:(Math.abs(this._x1-f)>sr||Math.abs(this._y1-g)>sr)&&this._append`L${f},${g}`,r&&(x<0&&(x=x%nu+nu),x>Bx?this._append`A${r},${r},0,1,${_},${e-s},${n-c}A${r},${r},0,1,${_},${this._x1=f},${this._y1=g}`:x>sr&&this._append`A${r},${r},0,${+(x>=eu)},${_},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Wh(){return new Ao}Wh.prototype=Ao.prototype;function Px(t=3){return new Ao(+t)}const $x=Object.freeze(Object.defineProperty({__proto__:null,Path:Ao,path:Wh,pathRound:Px},Symbol.toStringTag,{value:"Module"}));var Df={},Ms={},Ns=34,vi=10,Os=13;function Vh(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Wx(t,e){var n=Vh(t);return function(r,i){return e(n(r),i,t)}}function Rf(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function $e(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Vx(t){return t<0?"-"+$e(-t,6):t>9999?"+"+$e(t,6):$e(t,4)}function zx(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Vx(t.getUTCFullYear())+"-"+$e(t.getUTCMonth()+1,2)+"-"+$e(t.getUTCDate(),2)+(i?"T"+$e(e,2)+":"+$e(n,2)+":"+$e(r,2)+"."+$e(i,3)+"Z":r?"T"+$e(e,2)+":"+$e(n,2)+":"+$e(r,2)+"Z":n||e?"T"+$e(e,2)+":"+$e(n,2)+"Z":"")}function Bu(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(_,x){var A,E,D=i(_,function(M,k){if(A)return A(M,k-1);E=M,A=x?Wx(M,x):Vh(M)});return D.columns=E||[],D}function i(_,x){var A=[],E=_.length,D=0,M=0,k,B=E<=0,V=!1;_.charCodeAt(E-1)===vi&&--E,_.charCodeAt(E-1)===Os&&--E;function P(){if(B)return Ms;if(V)return V=!1,Df;var q,ot=D,K;if(_.charCodeAt(ot)===Ns){for(;D++<E&&_.charCodeAt(D)!==Ns||_.charCodeAt(++D)===Ns;);return(q=D)>=E?B=!0:(K=_.charCodeAt(D++))===vi?V=!0:K===Os&&(V=!0,_.charCodeAt(D)===vi&&++D),_.slice(ot+1,q-1).replace(/""/g,'"')}for(;D<E;){if((K=_.charCodeAt(q=D++))===vi)V=!0;else if(K===Os)V=!0,_.charCodeAt(D)===vi&&++D;else if(K!==n)continue;return _.slice(ot,q)}return B=!0,_.slice(ot,E)}for(;(k=P())!==Ms;){for(var U=[];k!==Df&&k!==Ms;)U.push(k),k=P();x&&(U=x(U,M++))==null||A.push(U)}return A}function a(_,x){return _.map(function(A){return x.map(function(E){return g(A[E])}).join(t)})}function o(_,x){return x==null&&(x=Rf(_)),[x.map(g).join(t)].concat(a(_,x)).join(`
`)}function s(_,x){return x==null&&(x=Rf(_)),a(_,x).join(`
`)}function c(_){return _.map(f).join(`
`)}function f(_){return _.map(g).join(t)}function g(_){return _==null?"":_ instanceof Date?zx(_):e.test(_+="")?'"'+_.replace(/"/g,'""')+'"':_}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:c,formatRow:f,formatValue:g}}var Fx=Bu(","),Ux=Fx.parse,Yx=Bu("	"),Hx=Yx.parse;function Xx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function qx(t,e){return fetch(t,e).then(Xx)}function Gx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function jx(t,e){return fetch(t,e).then(Gx)}function Jx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Eo(t,e){return fetch(t,e).then(Jx)}function zh(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Eo(e,n).then(function(i){return t(i,r)})}}function Zx(t,e,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=Bu(t);return Eo(e,n).then(function(a){return i.parse(a,r)})}var Qx=zh(Ux),Kx=zh(Hx);function tT(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function eT(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function nT(t,e){return fetch(t,e).then(eT)}function ku(t){return(e,n)=>Eo(e,n).then(r=>new DOMParser().parseFromString(r,t))}const rT=ku("application/xml");var iT=ku("text/html"),aT=ku("image/svg+xml");const oT=Object.freeze(Object.defineProperty({__proto__:null,blob:qx,buffer:jx,csv:Qx,dsv:Zx,html:iT,image:tT,json:nT,svg:aT,text:Eo,tsv:Kx,xml:rT},Symbol.toStringTag,{value:"Module"}));function sT(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function to(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Hr(t){return t=to(Math.abs(t)),t?t[1]:NaN}function uT(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function cT(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var lT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fi(t){if(!(e=lT.exec(t)))throw new Error("invalid format: "+t);var e;return new Pu({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fi.prototype=Pu.prototype;function Pu(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Pu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fT(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Fh;function dT(t,e){var n=to(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Fh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+to(t,Math.max(0,e+a-1))[0]}function Cf(t,e){var n=to(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Lf={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sT,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Cf(t*100,e),r:Cf,s:dT,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function If(t){return t}var Bf=Array.prototype.map,kf=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hT(t){var e=t.grouping===void 0||t.thousands===void 0?If:uT(Bf.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?If:cT(Bf.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(_){_=Fi(_);var x=_.fill,A=_.align,E=_.sign,D=_.symbol,M=_.zero,k=_.width,B=_.comma,V=_.precision,P=_.trim,U=_.type;U==="n"?(B=!0,U="g"):Lf[U]||(V===void 0&&(V=12),P=!0,U="g"),(M||x==="0"&&A==="=")&&(M=!0,x="0",A="=");var q=D==="$"?n:D==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",ot=D==="$"?r:/[%p]/.test(U)?o:"",K=Lf[U],nt=/[defgprs%]/.test(U);V=V===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,V)):Math.max(0,Math.min(20,V));function mt(ft){var J=q,G=ot,W,Z,Y;if(U==="c")G=K(ft)+G,ft="";else{ft=+ft;var et=ft<0||1/ft<0;if(ft=isNaN(ft)?c:K(Math.abs(ft),V),P&&(ft=fT(ft)),et&&+ft==0&&E!=="+"&&(et=!1),J=(et?E==="("?E:s:E==="-"||E==="("?"":E)+J,G=(U==="s"?kf[8+Fh/3]:"")+G+(et&&E==="("?")":""),nt){for(W=-1,Z=ft.length;++W<Z;)if(Y=ft.charCodeAt(W),48>Y||Y>57){G=(Y===46?i+ft.slice(W+1):ft.slice(W))+G,ft=ft.slice(0,W);break}}}B&&!M&&(ft=e(ft,1/0));var dt=J.length+ft.length+G.length,ut=dt<k?new Array(k-dt+1).join(x):"";switch(B&&M&&(ft=e(ut+ft,ut.length?k-G.length:1/0),ut=""),A){case"<":ft=J+ft+G+ut;break;case"=":ft=J+ut+ft+G;break;case"^":ft=ut.slice(0,dt=ut.length>>1)+J+ft+G+ut.slice(dt);break;default:ft=ut+J+ft+G;break}return a(ft)}return mt.toString=function(){return _+""},mt}function g(_,x){var A=f((_=Fi(_),_.type="f",_)),E=Math.max(-8,Math.min(8,Math.floor(Hr(x)/3)))*3,D=Math.pow(10,-E),M=kf[8+E/3];return function(k){return A(D*k)+M}}return{format:f,formatPrefix:g}}var pa,$u,Uh;gT({thousands:",",grouping:[3],currency:["$",""]});function gT(t){return pa=hT(t),$u=pa.format,Uh=pa.formatPrefix,pa}function mT(t){return Math.max(0,-Hr(Math.abs(t)))}function pT(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hr(e)/3)))*3-Hr(Math.abs(t)))}function vT(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hr(e)-Hr(t))+1}const ye=Math.random,bT=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n}(ye),yT=function t(e){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(e()*i+r)}}return n.source=t,n}(ye),Wu=function t(e){function n(r,i){var a,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var s;if(a!=null)s=a,a=null;else do a=e()*2-1,s=e()*2-1,o=a*a+s*s;while(!o||o>1);return r+i*s*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(ye),_T=function t(e){var n=Wu.source(e);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=t,r}(ye),Yh=function t(e){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,a=r;a>1;--a)i+=e();return i+a*e()}}return n.source=t,n}(ye),wT=function t(e){var n=Yh.source(e);function r(i){if((i=+i)==0)return e;var a=n(i);return function(){return a()/i}}return r.source=t,r}(ye),xT=function t(e){function n(r){return function(){return-Math.log1p(-e())/r}}return n.source=t,n}(ye),TT=function t(e){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-e(),r)}}return n.source=t,n}(ye),AT=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+r)}}return n.source=t,n}(ye),Hh=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-e())/r)})}return n.source=t,n}(ye),Vu=function t(e){var n=Wu.source(e)();function r(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-e())*a;var o=(i<1?i+1:i)-1/3,s=1/(3*Math.sqrt(o)),c=i<1?()=>Math.pow(e(),1/i):()=>1;return function(){do{do var f=n(),g=1+s*f;while(g<=0);g*=g*g;var _=1-e()}while(_>=1-.0331*f*f*f*f&&Math.log(_)>=.5*f*f+o*(1-g+Math.log(g)));return o*g*c()*a}}return r.source=t,r}(ye),Xh=function t(e){var n=Vu.source(e);function r(i,a){var o=n(i),s=n(a);return function(){var c=o();return c===0?0:c/(c+s())}}return r.source=t,r}(ye),qh=function t(e){var n=Hh.source(e),r=Xh.source(e);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var s=0,c=a,f=o;c*f>16&&c*(1-f)>16;){var g=Math.floor((c+1)*f),_=r(g,c-g+1)();_<=f?(s+=g,c-=g,f=(f-_)/(1-_)):(c=g-1,f/=_)}for(var x=f<.5,A=x?f:1-f,E=n(A),D=E(),M=0;D<=c;++M)D+=E();return s+(x?M:c-M)}}return i.source=t,i}(ye),ET=function t(e){function n(r,i,a){var o;return(r=+r)==0?o=s=>-Math.log(s):(r=1/r,o=s=>Math.pow(s,r)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-e()))}}return n.source=t,n}(ye),ST=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*e())}}return n.source=t,n}(ye),MT=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var a=e();return r+i*Math.log(a/(1-a))}}return n.source=t,n}(ye),NT=function t(e){var n=Vu.source(e),r=qh.source(e);function i(a){return function(){for(var o=0,s=a;s>16;){var c=Math.floor(.875*s),f=n(c)();if(f>s)return o+r(c-1,s/f)();o+=c,s-=f}for(var g=-Math.log1p(-e()),_=0;g<=s;++_)g-=Math.log1p(-e());return o+_}}return i.source=t,i}(ye),OT=1664525,DT=1013904223,Pf=1/4294967296;function RT(t=Math.random()){let e=(0<=t&&t<1?t/Pf:Math.abs(t))|0;return()=>(e=OT*e+DT|0,Pf*(e>>>0))}const CT=Object.freeze(Object.defineProperty({__proto__:null,randomBates:wT,randomBernoulli:AT,randomBeta:Xh,randomBinomial:qh,randomCauchy:ST,randomExponential:xT,randomGamma:Vu,randomGeometric:Hh,randomInt:yT,randomIrwinHall:Yh,randomLcg:RT,randomLogNormal:_T,randomLogistic:MT,randomNormal:Wu,randomPareto:TT,randomPoisson:NT,randomUniform:bT,randomWeibull:ET},Symbol.toStringTag,{value:"Module"}));function nn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Pn(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ru=Symbol("implicit");function zu(){var t=new Bi,e=[],n=[],r=ru;function i(a){let o=t.get(a);if(o===void 0){if(r!==ru)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Bi;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return zu(e,n).unknown(r)},nn.apply(i,arguments),i}function Fu(){var t=zu().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,c=0,f=0,g=.5;delete t.unknown;function _(){var x=e().length,A=i<r,E=A?i:r,D=A?r:i;a=(D-E)/Math.max(1,x-c+f*2),s&&(a=Math.floor(a)),E+=(D-E-a*(x-c))*g,o=a*(1-c),s&&(E=Math.round(E),o=Math.round(o));var M=_u(x).map(function(k){return E+a*k});return n(A?M.reverse():M)}return t.domain=function(x){return arguments.length?(e(x),_()):e()},t.range=function(x){return arguments.length?([r,i]=x,r=+r,i=+i,_()):[r,i]},t.rangeRound=function(x){return[r,i]=x,r=+r,i=+i,s=!0,_()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(x){return arguments.length?(s=!!x,_()):s},t.padding=function(x){return arguments.length?(c=Math.min(1,f=+x),_()):c},t.paddingInner=function(x){return arguments.length?(c=Math.min(1,x),_()):c},t.paddingOuter=function(x){return arguments.length?(f=+x,_()):f},t.align=function(x){return arguments.length?(g=Math.max(0,Math.min(1,x)),_()):g},t.copy=function(){return Fu(e(),[r,i]).round(s).paddingInner(c).paddingOuter(f).align(g)},nn.apply(_(),arguments)}function Gh(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Gh(e())},t}function LT(){return Gh(Fu.apply(null,arguments).paddingInner(1))}function IT(t){return function(){return t}}function eo(t){return+t}var $f=[0,1];function Re(t){return t}function iu(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:IT(isNaN(e)?NaN:.5)}function BT(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function kT(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=iu(i,r),a=n(o,a)):(r=iu(r,i),a=n(a,o)),function(s){return a(r(s))}}function PT(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=iu(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var c=jn(t,s,1,r)-1;return a[c](i[c](s))}}function Ji(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function So(){var t=$f,e=$f,n=Mr,r,i,a,o=Re,s,c,f;function g(){var x=Math.min(t.length,e.length);return o!==Re&&(o=BT(t[0],t[x-1])),s=x>2?PT:kT,c=f=null,_}function _(x){return x==null||isNaN(x=+x)?a:(c||(c=s(t.map(r),e,n)))(r(o(x)))}return _.invert=function(x){return o(i((f||(f=s(e,t.map(r),an)))(x)))},_.domain=function(x){return arguments.length?(t=Array.from(x,eo),g()):t.slice()},_.range=function(x){return arguments.length?(e=Array.from(x),g()):e.slice()},_.rangeRound=function(x){return e=Array.from(x),n=Ou,g()},_.clamp=function(x){return arguments.length?(o=x?!0:Re,g()):o!==Re},_.interpolate=function(x){return arguments.length?(n=x,g()):n},_.unknown=function(x){return arguments.length?(a=x,_):a},function(x,A){return r=x,i=A,g()}}function Uu(){return So()(Re,Re)}function jh(t,e,n,r){var i=Ya(t,e,n),a;switch(r=Fi(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=pT(i,o))&&(r.precision=a),Uh(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=vT(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=mT(i))&&(r.precision=a-(r.type==="%")*2);break}}return $u(r)}function Kn(t){var e=t.domain;return t.ticks=function(n){var r=e();return ki(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return jh(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],c,f,g=10;for(s<o&&(f=o,o=s,s=f,f=i,i=a,a=f);g-- >0;){if(f=pr(o,s,n),f===c)return r[i]=o,r[a]=s,e(r);if(f>0)o=Math.floor(o/f)*f,s=Math.ceil(s/f)*f;else if(f<0)o=Math.ceil(o*f)/f,s=Math.floor(s*f)/f;else break;c=f}return t},t}function Qe(){var t=Uu();return t.copy=function(){return Ji(t,Qe())},nn.apply(t,arguments),Kn(t)}function Jh(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,eo),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Jh(t).unknown(e)},t=arguments.length?Array.from(t,eo):[0,1],Kn(n)}function Zh(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Wf(t){return Math.log(t)}function Vf(t){return Math.exp(t)}function $T(t){return-Math.log(-t)}function WT(t){return-Math.exp(-t)}function VT(t){return isFinite(t)?+("1e"+t):t<0?0:t}function zT(t){return t===10?VT:t===Math.E?Math.exp:e=>Math.pow(t,e)}function FT(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function zf(t){return(e,n)=>-t(-e,n)}function Yu(t){const e=t(Wf,Vf),n=e.domain;let r=10,i,a;function o(){return i=FT(r),a=zT(r),n()[0]<0?(i=zf(i),a=zf(a),t($T,WT)):t(Wf,Vf),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const c=n();let f=c[0],g=c[c.length-1];const _=g<f;_&&([f,g]=[g,f]);let x=i(f),A=i(g),E,D;const M=s==null?10:+s;let k=[];if(!(r%1)&&A-x<M){if(x=Math.floor(x),A=Math.ceil(A),f>0){for(;x<=A;++x)for(E=1;E<r;++E)if(D=x<0?E/a(-x):E*a(x),!(D<f)){if(D>g)break;k.push(D)}}else for(;x<=A;++x)for(E=r-1;E>=1;--E)if(D=x>0?E/a(-x):E*a(x),!(D<f)){if(D>g)break;k.push(D)}k.length*2<M&&(k=ki(f,g,M))}else k=ki(x,A,Math.min(A-x,M)).map(a);return _?k.reverse():k},e.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Fi(c)).precision==null&&(c.trim=!0),c=$u(c)),s===1/0)return c;const f=Math.max(1,r*s/e.ticks().length);return g=>{let _=g/a(Math.round(i(g)));return _*r<r-.5&&(_*=r),_<=f?c(g):""}},e.nice=()=>n(Zh(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function Qh(){const t=Yu(So()).domain([1,10]);return t.copy=()=>Ji(t,Qh()).base(t.base()),nn.apply(t,arguments),t}function Ff(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Uf(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Hu(t){var e=1,n=t(Ff(e),Uf(e));return n.constant=function(r){return arguments.length?t(Ff(e=+r),Uf(e)):e},Kn(n)}function Kh(){var t=Hu(So());return t.copy=function(){return Ji(t,Kh()).constant(t.constant())},nn.apply(t,arguments)}function Yf(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function UT(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function YT(t){return t<0?-t*t:t*t}function Xu(t){var e=t(Re,Re),n=1;function r(){return n===1?t(Re,Re):n===.5?t(UT,YT):t(Yf(n),Yf(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Kn(e)}function qu(){var t=Xu(So());return t.copy=function(){return Ji(t,qu()).exponent(t.exponent())},nn.apply(t,arguments),t}function HT(){return qu.apply(null,arguments).exponent(.5)}function Hf(t){return Math.sign(t)*t*t}function XT(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function tg(){var t=Uu(),e=[0,1],n=!1,r;function i(a){var o=XT(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(Hf(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,eo)).map(Hf)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return tg(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},nn.apply(i,arguments),Kn(i)}function eg(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=ah(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[jn(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ee),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return eg().domain(t).range(e).unknown(r)},nn.apply(a,arguments)}function ng(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[jn(r,c,0,n)]:a}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,s()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},o.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return ng().domain([t,e]).range(i).unknown(a)},nn.apply(Kn(o),arguments)}function rg(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[jn(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return rg().domain(t).range(e).unknown(n)},nn.apply(i,arguments)}const Ds=new Date,Rs=new Date;function ce(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const c=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return c;let f;do c.push(f=new Date(+a)),e(a,s),t(a);while(f<a&&a<o);return c},i.filter=a=>ce(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Ds.setTime(+a),Rs.setTime(+o),t(Ds),t(Rs),Math.floor(n(Ds,Rs))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Xr=ce(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ce(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Xr);const Xf=Xr.range,Rn=1e3,je=Rn*60,Cn=je*60,kn=Cn*24,Gu=kn*7,qf=kn*30,Cs=kn*365,Ln=ce(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Rn)},(t,e)=>(e-t)/Rn,t=>t.getUTCSeconds()),Gf=Ln.range,Mo=ce(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rn)},(t,e)=>{t.setTime(+t+e*je)},(t,e)=>(e-t)/je,t=>t.getMinutes()),qT=Mo.range,No=ce(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*je)},(t,e)=>(e-t)/je,t=>t.getUTCMinutes()),GT=No.range,Oo=ce(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rn-t.getMinutes()*je)},(t,e)=>{t.setTime(+t+e*Cn)},(t,e)=>(e-t)/Cn,t=>t.getHours()),jT=Oo.range,Do=ce(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Cn)},(t,e)=>(e-t)/Cn,t=>t.getUTCHours()),JT=Do.range,ni=ce(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*je)/kn,t=>t.getDate()-1),ZT=ni.range,Zi=ce(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kn,t=>t.getUTCDate()-1),QT=Zi.range,ju=ce(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kn,t=>Math.floor(t/kn)),KT=ju.range;function Nr(t){return ce(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*je)/Gu)}const qr=Nr(0),Ui=Nr(1),ig=Nr(2),ag=Nr(3),wr=Nr(4),og=Nr(5),sg=Nr(6),jf=qr.range,t2=Ui.range,e2=ig.range,n2=ag.range,r2=wr.range,i2=og.range,a2=sg.range;function Or(t){return ce(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Gu)}const Gr=Or(0),Yi=Or(1),ug=Or(2),cg=Or(3),xr=Or(4),lg=Or(5),fg=Or(6),Jf=Gr.range,o2=Yi.range,s2=ug.range,u2=cg.range,c2=xr.range,l2=lg.range,f2=fg.range,Ro=ce(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),d2=Ro.range,Co=ce(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),h2=Co.range,bn=ce(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ce(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});const g2=bn.range,yn=ce(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ce(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});const m2=yn.range;function dg(t,e,n,r,i,a){const o=[[Ln,1,Rn],[Ln,5,5*Rn],[Ln,15,15*Rn],[Ln,30,30*Rn],[a,1,je],[a,5,5*je],[a,15,15*je],[a,30,30*je],[i,1,Cn],[i,3,3*Cn],[i,6,6*Cn],[i,12,12*Cn],[r,1,kn],[r,2,2*kn],[n,1,Gu],[e,1,qf],[e,3,3*qf],[t,1,Cs]];function s(f,g,_){const x=g<f;x&&([f,g]=[g,f]);const A=_&&typeof _.range=="function"?_:c(f,g,_),E=A?A.range(f,+g+1):[];return x?E.reverse():E}function c(f,g,_){const x=Math.abs(g-f)/_,A=qi(([,,M])=>M).right(o,x);if(A===o.length)return t.every(Ya(f/Cs,g/Cs,_));if(A===0)return Xr.every(Math.max(Ya(f,g,_),1));const[E,D]=o[x/o[A-1][2]<o[A][2]/x?A-1:A];return E.every(D)}return[s,c]}const[hg,gg]=dg(yn,Co,Gr,ju,Do,No),[mg,pg]=dg(bn,Ro,qr,ni,Oo,Mo),p2=Object.freeze(Object.defineProperty({__proto__:null,timeDay:ni,timeDays:ZT,timeFriday:og,timeFridays:i2,timeHour:Oo,timeHours:jT,timeInterval:ce,timeMillisecond:Xr,timeMilliseconds:Xf,timeMinute:Mo,timeMinutes:qT,timeMonday:Ui,timeMondays:t2,timeMonth:Ro,timeMonths:d2,timeSaturday:sg,timeSaturdays:a2,timeSecond:Ln,timeSeconds:Gf,timeSunday:qr,timeSundays:jf,timeThursday:wr,timeThursdays:r2,timeTickInterval:pg,timeTicks:mg,timeTuesday:ig,timeTuesdays:e2,timeWednesday:ag,timeWednesdays:n2,timeWeek:qr,timeWeeks:jf,timeYear:bn,timeYears:g2,unixDay:ju,unixDays:KT,utcDay:Zi,utcDays:QT,utcFriday:lg,utcFridays:l2,utcHour:Do,utcHours:JT,utcMillisecond:Xr,utcMilliseconds:Xf,utcMinute:No,utcMinutes:GT,utcMonday:Yi,utcMondays:o2,utcMonth:Co,utcMonths:h2,utcSaturday:fg,utcSaturdays:f2,utcSecond:Ln,utcSeconds:Gf,utcSunday:Gr,utcSundays:Jf,utcThursday:xr,utcThursdays:c2,utcTickInterval:gg,utcTicks:hg,utcTuesday:ug,utcTuesdays:s2,utcWednesday:cg,utcWednesdays:u2,utcWeek:Gr,utcWeeks:Jf,utcYear:yn,utcYears:m2},Symbol.toStringTag,{value:"Module"}));function Ls(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Is(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function bi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function v2(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,f=yi(i),g=_i(i),_=yi(a),x=_i(a),A=yi(o),E=_i(o),D=yi(s),M=_i(s),k=yi(c),B=_i(c),V={a:et,A:dt,b:ut,B:gt,c:null,d:nd,e:nd,f:V2,g:J2,G:Q2,H:P2,I:$2,j:W2,L:vg,m:z2,M:F2,p:Q,q:it,Q:ad,s:od,S:U2,u:Y2,U:H2,V:X2,w:q2,W:G2,x:null,X:null,y:j2,Y:Z2,Z:K2,"%":id},P={a:ct,A:ht,b:Mt,B:At,c:null,d:rd,e:rd,f:rA,g:hA,G:mA,H:tA,I:eA,j:nA,L:yg,m:iA,M:aA,p:xt,q:Dt,Q:ad,s:od,S:oA,u:sA,U:uA,V:cA,w:lA,W:fA,x:null,X:null,y:dA,Y:gA,Z:pA,"%":id},U={a:mt,A:ft,b:J,B:G,c:W,d:td,e:td,f:L2,g:Kf,G:Qf,H:ed,I:ed,j:O2,L:C2,m:N2,M:D2,p:nt,q:M2,Q:B2,s:k2,S:R2,u:x2,U:T2,V:A2,w:w2,W:E2,x:Z,X:Y,y:Kf,Y:Qf,Z:S2,"%":I2};V.x=q(n,V),V.X=q(r,V),V.c=q(e,V),P.x=q(n,P),P.X=q(r,P),P.c=q(e,P);function q(lt,_t){return function(Nt){var at=[],Ut=-1,st=0,Yt=lt.length,qt,vt,te;for(Nt instanceof Date||(Nt=new Date(+Nt));++Ut<Yt;)lt.charCodeAt(Ut)===37&&(at.push(lt.slice(st,Ut)),(vt=Zf[qt=lt.charAt(++Ut)])!=null?qt=lt.charAt(++Ut):vt=qt==="e"?" ":"0",(te=_t[qt])&&(qt=te(Nt,vt)),at.push(qt),st=Ut+1);return at.push(lt.slice(st,Ut)),at.join("")}}function ot(lt,_t){return function(Nt){var at=bi(1900,void 0,1),Ut=K(at,lt,Nt+="",0),st,Yt;if(Ut!=Nt.length)return null;if("Q"in at)return new Date(at.Q);if("s"in at)return new Date(at.s*1e3+("L"in at?at.L:0));if(_t&&!("Z"in at)&&(at.Z=0),"p"in at&&(at.H=at.H%12+at.p*12),at.m===void 0&&(at.m="q"in at?at.q:0),"V"in at){if(at.V<1||at.V>53)return null;"w"in at||(at.w=1),"Z"in at?(st=Is(bi(at.y,0,1)),Yt=st.getUTCDay(),st=Yt>4||Yt===0?Yi.ceil(st):Yi(st),st=Zi.offset(st,(at.V-1)*7),at.y=st.getUTCFullYear(),at.m=st.getUTCMonth(),at.d=st.getUTCDate()+(at.w+6)%7):(st=Ls(bi(at.y,0,1)),Yt=st.getDay(),st=Yt>4||Yt===0?Ui.ceil(st):Ui(st),st=ni.offset(st,(at.V-1)*7),at.y=st.getFullYear(),at.m=st.getMonth(),at.d=st.getDate()+(at.w+6)%7)}else("W"in at||"U"in at)&&("w"in at||(at.w="u"in at?at.u%7:"W"in at?1:0),Yt="Z"in at?Is(bi(at.y,0,1)).getUTCDay():Ls(bi(at.y,0,1)).getDay(),at.m=0,at.d="W"in at?(at.w+6)%7+at.W*7-(Yt+5)%7:at.w+at.U*7-(Yt+6)%7);return"Z"in at?(at.H+=at.Z/100|0,at.M+=at.Z%100,Is(at)):Ls(at)}}function K(lt,_t,Nt,at){for(var Ut=0,st=_t.length,Yt=Nt.length,qt,vt;Ut<st;){if(at>=Yt)return-1;if(qt=_t.charCodeAt(Ut++),qt===37){if(qt=_t.charAt(Ut++),vt=U[qt in Zf?_t.charAt(Ut++):qt],!vt||(at=vt(lt,Nt,at))<0)return-1}else if(qt!=Nt.charCodeAt(at++))return-1}return at}function nt(lt,_t,Nt){var at=f.exec(_t.slice(Nt));return at?(lt.p=g.get(at[0].toLowerCase()),Nt+at[0].length):-1}function mt(lt,_t,Nt){var at=A.exec(_t.slice(Nt));return at?(lt.w=E.get(at[0].toLowerCase()),Nt+at[0].length):-1}function ft(lt,_t,Nt){var at=_.exec(_t.slice(Nt));return at?(lt.w=x.get(at[0].toLowerCase()),Nt+at[0].length):-1}function J(lt,_t,Nt){var at=k.exec(_t.slice(Nt));return at?(lt.m=B.get(at[0].toLowerCase()),Nt+at[0].length):-1}function G(lt,_t,Nt){var at=D.exec(_t.slice(Nt));return at?(lt.m=M.get(at[0].toLowerCase()),Nt+at[0].length):-1}function W(lt,_t,Nt){return K(lt,e,_t,Nt)}function Z(lt,_t,Nt){return K(lt,n,_t,Nt)}function Y(lt,_t,Nt){return K(lt,r,_t,Nt)}function et(lt){return o[lt.getDay()]}function dt(lt){return a[lt.getDay()]}function ut(lt){return c[lt.getMonth()]}function gt(lt){return s[lt.getMonth()]}function Q(lt){return i[+(lt.getHours()>=12)]}function it(lt){return 1+~~(lt.getMonth()/3)}function ct(lt){return o[lt.getUTCDay()]}function ht(lt){return a[lt.getUTCDay()]}function Mt(lt){return c[lt.getUTCMonth()]}function At(lt){return s[lt.getUTCMonth()]}function xt(lt){return i[+(lt.getUTCHours()>=12)]}function Dt(lt){return 1+~~(lt.getUTCMonth()/3)}return{format:function(lt){var _t=q(lt+="",V);return _t.toString=function(){return lt},_t},parse:function(lt){var _t=ot(lt+="",!1);return _t.toString=function(){return lt},_t},utcFormat:function(lt){var _t=q(lt+="",P);return _t.toString=function(){return lt},_t},utcParse:function(lt){var _t=ot(lt+="",!0);return _t.toString=function(){return lt},_t}}}var Zf={"-":"",_:" ",0:"0"},he=/^\s*\d+/,b2=/^%/,y2=/[\\^$*+?|[\]().{}]/g;function zt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _2(t){return t.replace(y2,"\\$&")}function yi(t){return new RegExp("^(?:"+t.map(_2).join("|")+")","i")}function _i(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function w2(t,e,n){var r=he.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function x2(t,e,n){var r=he.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function T2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function A2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function E2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Qf(t,e,n){var r=he.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Kf(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function S2(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function M2(t,e,n){var r=he.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function N2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function td(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function O2(t,e,n){var r=he.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ed(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function D2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function R2(t,e,n){var r=he.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function C2(t,e,n){var r=he.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function L2(t,e,n){var r=he.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function I2(t,e,n){var r=b2.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function B2(t,e,n){var r=he.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function k2(t,e,n){var r=he.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function nd(t,e){return zt(t.getDate(),e,2)}function P2(t,e){return zt(t.getHours(),e,2)}function $2(t,e){return zt(t.getHours()%12||12,e,2)}function W2(t,e){return zt(1+ni.count(bn(t),t),e,3)}function vg(t,e){return zt(t.getMilliseconds(),e,3)}function V2(t,e){return vg(t,e)+"000"}function z2(t,e){return zt(t.getMonth()+1,e,2)}function F2(t,e){return zt(t.getMinutes(),e,2)}function U2(t,e){return zt(t.getSeconds(),e,2)}function Y2(t){var e=t.getDay();return e===0?7:e}function H2(t,e){return zt(qr.count(bn(t)-1,t),e,2)}function bg(t){var e=t.getDay();return e>=4||e===0?wr(t):wr.ceil(t)}function X2(t,e){return t=bg(t),zt(wr.count(bn(t),t)+(bn(t).getDay()===4),e,2)}function q2(t){return t.getDay()}function G2(t,e){return zt(Ui.count(bn(t)-1,t),e,2)}function j2(t,e){return zt(t.getFullYear()%100,e,2)}function J2(t,e){return t=bg(t),zt(t.getFullYear()%100,e,2)}function Z2(t,e){return zt(t.getFullYear()%1e4,e,4)}function Q2(t,e){var n=t.getDay();return t=n>=4||n===0?wr(t):wr.ceil(t),zt(t.getFullYear()%1e4,e,4)}function K2(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zt(e/60|0,"0",2)+zt(e%60,"0",2)}function rd(t,e){return zt(t.getUTCDate(),e,2)}function tA(t,e){return zt(t.getUTCHours(),e,2)}function eA(t,e){return zt(t.getUTCHours()%12||12,e,2)}function nA(t,e){return zt(1+Zi.count(yn(t),t),e,3)}function yg(t,e){return zt(t.getUTCMilliseconds(),e,3)}function rA(t,e){return yg(t,e)+"000"}function iA(t,e){return zt(t.getUTCMonth()+1,e,2)}function aA(t,e){return zt(t.getUTCMinutes(),e,2)}function oA(t,e){return zt(t.getUTCSeconds(),e,2)}function sA(t){var e=t.getUTCDay();return e===0?7:e}function uA(t,e){return zt(Gr.count(yn(t)-1,t),e,2)}function _g(t){var e=t.getUTCDay();return e>=4||e===0?xr(t):xr.ceil(t)}function cA(t,e){return t=_g(t),zt(xr.count(yn(t),t)+(yn(t).getUTCDay()===4),e,2)}function lA(t){return t.getUTCDay()}function fA(t,e){return zt(Yi.count(yn(t)-1,t),e,2)}function dA(t,e){return zt(t.getUTCFullYear()%100,e,2)}function hA(t,e){return t=_g(t),zt(t.getUTCFullYear()%100,e,2)}function gA(t,e){return zt(t.getUTCFullYear()%1e4,e,4)}function mA(t,e){var n=t.getUTCDay();return t=n>=4||n===0?xr(t):xr.ceil(t),zt(t.getUTCFullYear()%1e4,e,4)}function pA(){return"+0000"}function id(){return"%"}function ad(t){return+t}function od(t){return Math.floor(+t/1e3)}var Br,wg,xg;vA({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vA(t){return Br=v2(t),wg=Br.format,Br.parse,xg=Br.utcFormat,Br.utcParse,Br}function bA(t){return new Date(t)}function yA(t){return t instanceof Date?+t:+new Date(+t)}function Ju(t,e,n,r,i,a,o,s,c,f){var g=Uu(),_=g.invert,x=g.domain,A=f(".%L"),E=f(":%S"),D=f("%I:%M"),M=f("%I %p"),k=f("%a %d"),B=f("%b %d"),V=f("%B"),P=f("%Y");function U(q){return(c(q)<q?A:s(q)<q?E:o(q)<q?D:a(q)<q?M:r(q)<q?i(q)<q?k:B:n(q)<q?V:P)(q)}return g.invert=function(q){return new Date(_(q))},g.domain=function(q){return arguments.length?x(Array.from(q,yA)):x().map(bA)},g.ticks=function(q){var ot=x();return t(ot[0],ot[ot.length-1],q??10)},g.tickFormat=function(q,ot){return ot==null?U:f(ot)},g.nice=function(q){var ot=x();return(!q||typeof q.range!="function")&&(q=e(ot[0],ot[ot.length-1],q??10)),q?x(Zh(ot,q)):g},g.copy=function(){return Ji(g,Ju(t,e,n,r,i,a,o,s,c,f))},g}function _A(){return nn.apply(Ju(mg,pg,bn,Ro,qr,ni,Oo,Mo,Ln,wg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wA(){return nn.apply(Ju(hg,gg,yn,Co,Gr,Zi,Do,No,Ln,xg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Lo(){var t=0,e=1,n,r,i,a,o=Re,s=!1,c;function f(_){return _==null||isNaN(_=+_)?c:o(i===0?.5:(_=(a(_)-n)*i,s?Math.max(0,Math.min(1,_)):_))}f.domain=function(_){return arguments.length?([t,e]=_,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(_){return arguments.length?(s=!!_,f):s},f.interpolator=function(_){return arguments.length?(o=_,f):o};function g(_){return function(x){var A,E;return arguments.length?([A,E]=x,o=_(A,E),f):[o(0),o(1)]}}return f.range=g(Mr),f.rangeRound=g(Ou),f.unknown=function(_){return arguments.length?(c=_,f):c},function(_){return a=_,n=_(t),r=_(e),i=n===r?0:1/(r-n),f}}function tr(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Tg(){var t=Kn(Lo()(Re));return t.copy=function(){return tr(t,Tg())},Pn.apply(t,arguments)}function Ag(){var t=Yu(Lo()).domain([1,10]);return t.copy=function(){return tr(t,Ag()).base(t.base())},Pn.apply(t,arguments)}function Eg(){var t=Hu(Lo());return t.copy=function(){return tr(t,Eg()).constant(t.constant())},Pn.apply(t,arguments)}function Zu(){var t=Xu(Lo());return t.copy=function(){return tr(t,Zu()).exponent(t.exponent())},Pn.apply(t,arguments)}function xA(){return Zu.apply(null,arguments).exponent(.5)}function Sg(){var t=[],e=Re;function n(r){if(r!=null&&!isNaN(r=+r))return e((jn(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ee),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Pi(t,a/r))},n.copy=function(){return Sg(e).domain(t)},Pn.apply(n,arguments)}function Io(){var t=0,e=.5,n=1,r=1,i,a,o,s,c,f=Re,g,_=!1,x;function A(D){return isNaN(D=+D)?x:(D=.5+((D=+g(D))-a)*(r*D<r*a?s:c),f(_?Math.max(0,Math.min(1,D)):D))}A.domain=function(D){return arguments.length?([t,e,n]=D,i=g(t=+t),a=g(e=+e),o=g(n=+n),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,A):[t,e,n]},A.clamp=function(D){return arguments.length?(_=!!D,A):_},A.interpolator=function(D){return arguments.length?(f=D,A):f};function E(D){return function(M){var k,B,V;return arguments.length?([k,B,V]=M,f=cw(D,[k,B,V]),A):[f(0),f(.5),f(1)]}}return A.range=E(Mr),A.rangeRound=E(Ou),A.unknown=function(D){return arguments.length?(x=D,A):x},function(D){return g=D,i=D(t),a=D(e),o=D(n),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,A}}function Mg(){var t=Kn(Io()(Re));return t.copy=function(){return tr(t,Mg())},Pn.apply(t,arguments)}function Ng(){var t=Yu(Io()).domain([.1,1,10]);return t.copy=function(){return tr(t,Ng()).base(t.base())},Pn.apply(t,arguments)}function Og(){var t=Hu(Io());return t.copy=function(){return tr(t,Og()).constant(t.constant())},Pn.apply(t,arguments)}function Qu(){var t=Xu(Io());return t.copy=function(){return tr(t,Qu()).exponent(t.exponent())},Pn.apply(t,arguments)}function TA(){return Qu.apply(null,arguments).exponent(.5)}const AA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Fu,scaleDiverging:Mg,scaleDivergingLog:Ng,scaleDivergingPow:Qu,scaleDivergingSqrt:TA,scaleDivergingSymlog:Og,scaleIdentity:Jh,scaleImplicit:ru,scaleLinear:Qe,scaleLog:Qh,scaleOrdinal:zu,scalePoint:LT,scalePow:qu,scaleQuantile:eg,scaleQuantize:ng,scaleRadial:tg,scaleSequential:Tg,scaleSequentialLog:Ag,scaleSequentialPow:Zu,scaleSequentialQuantile:Sg,scaleSequentialSqrt:xA,scaleSequentialSymlog:Eg,scaleSqrt:HT,scaleSymlog:Kh,scaleThreshold:rg,scaleTime:_A,scaleUtc:wA,tickFormat:jh},Symbol.toStringTag,{value:"Module"}));function Rt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const EA=Rt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),SA=Rt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),MA=Rt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),NA=Rt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),OA=Rt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),DA=Rt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),RA=Rt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),CA=Rt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),LA=Rt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),IA=Rt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Dg=Rt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),jt=t=>q1(t[t.length-1]);var Rg=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Rt);const BA=jt(Rg);var Cg=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Rt);const kA=jt(Cg);var Lg=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Rt);const PA=jt(Lg);var Ig=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Rt);const $A=jt(Ig);var Bg=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Rt);const WA=jt(Bg);var kg=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Rt);const VA=jt(kg);var Pg=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Rt);const zA=jt(Pg);var $g=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Rt);const FA=jt($g);var Wg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Rt);const UA=jt(Wg);var Vg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Rt);const YA=jt(Vg);var zg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Rt);const HA=jt(zg);var Fg=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Rt);const XA=jt(Fg);var Ug=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Rt);const qA=jt(Ug);var Yg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Rt);const GA=jt(Yg);var Hg=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Rt);const jA=jt(Hg);var Xg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Rt);const JA=jt(Xg);var qg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Rt);const ZA=jt(qg);var Gg=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Rt);const QA=jt(Gg);var jg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Rt);const KA=jt(jg);var Jg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Rt);const tE=jt(Jg);var Zg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Rt);const eE=jt(Zg);var Qg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Rt);const nE=jt(Qg);var Kg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Rt);const rE=jt(Kg);var tm=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Rt);const iE=jt(tm);var em=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Rt);const aE=jt(em);var nm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Rt);const oE=jt(nm);var rm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Rt);const sE=jt(rm);function uE(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const cE=Du(vn(300,.5,0),vn(-240,.5,1));var lE=Du(vn(-100,.75,.35),vn(80,1.5,.8)),fE=Du(vn(260,.75,.35),vn(80,1.5,.8)),va=vn();function dE(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return va.h=360*t-100,va.s=1.5-1.5*e,va.l=.8-.9*e,va+""}var ba=yr(),hE=Math.PI/3,gE=Math.PI*2/3;function mE(t){var e;return t=(.5-t)*Math.PI,ba.r=255*(e=Math.sin(t))*e,ba.g=255*(e=Math.sin(t+hE))*e,ba.b=255*(e=Math.sin(t+gE))*e,ba+""}function im(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Bo(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const pE=Bo(Rt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var vE=Bo(Rt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),bE=Bo(Rt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),yE=Bo(Rt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const _E=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:nE,interpolateBrBG:BA,interpolateBuGn:YA,interpolateBuPu:HA,interpolateCividis:uE,interpolateCool:fE,interpolateCubehelixDefault:cE,interpolateGnBu:XA,interpolateGreens:rE,interpolateGreys:iE,interpolateInferno:bE,interpolateMagma:vE,interpolateOrRd:qA,interpolateOranges:sE,interpolatePRGn:kA,interpolatePiYG:PA,interpolatePlasma:yE,interpolatePuBu:jA,interpolatePuBuGn:GA,interpolatePuOr:$A,interpolatePuRd:JA,interpolatePurples:aE,interpolateRainbow:dE,interpolateRdBu:WA,interpolateRdGy:VA,interpolateRdPu:ZA,interpolateRdYlBu:zA,interpolateRdYlGn:FA,interpolateReds:oE,interpolateSinebow:mE,interpolateSpectral:UA,interpolateTurbo:im,interpolateViridis:pE,interpolateWarm:lE,interpolateYlGn:KA,interpolateYlGnBu:QA,interpolateYlOrBr:tE,interpolateYlOrRd:eE,schemeAccent:SA,schemeBlues:Qg,schemeBrBG:Rg,schemeBuGn:Vg,schemeBuPu:zg,schemeCategory10:EA,schemeDark2:MA,schemeGnBu:Fg,schemeGreens:Kg,schemeGreys:tm,schemeObservable10:NA,schemeOrRd:Ug,schemeOranges:rm,schemePRGn:Cg,schemePaired:OA,schemePastel1:DA,schemePastel2:RA,schemePiYG:Lg,schemePuBu:Hg,schemePuBuGn:Yg,schemePuOr:Ig,schemePuRd:Xg,schemePurples:em,schemeRdBu:Bg,schemeRdGy:kg,schemeRdPu:qg,schemeRdYlBu:Pg,schemeRdYlGn:$g,schemeReds:nm,schemeSet1:CA,schemeSet2:LA,schemeSet3:IA,schemeSpectral:Wg,schemeTableau10:Dg,schemeYlGn:jg,schemeYlGnBu:Gg,schemeYlOrBr:Jg,schemeYlOrRd:Zg},Symbol.toStringTag,{value:"Module"})),ya=t=>()=>t;function wE(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Je(t,e,n){this.k=t,this.x=e,this.y=n}Je.prototype={constructor:Je,scale:function(t){return t===1?this:new Je(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Je(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qi=new Je(1,0,0);am.prototype=Je.prototype;function am(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Qi;return t.__zoom}function Bs(t){t.stopImmediatePropagation()}function wi(t){t.preventDefault(),t.stopImmediatePropagation()}function xE(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function TE(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function sd(){return this.__zoom||Qi}function AE(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function EE(){return navigator.maxTouchPoints||"ontouchstart"in this}function SE(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function om(){var t=xE,e=TE,n=SE,r=AE,i=EE,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=uw,f=Gi("start","zoom","end"),g,_,x,A=500,E=150,D=0,M=10;function k(W){W.property("__zoom",sd).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",nt).on("dblclick.zoom",mt).filter(i).on("touchstart.zoom",ft).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(W,Z,Y,et){var dt=W.selection?W.selection():W;dt.property("__zoom",sd),W!==dt?U(W,Z,Y,et):dt.interrupt().each(function(){q(this,arguments).event(et).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},k.scaleBy=function(W,Z,Y,et){k.scaleTo(W,function(){var dt=this.__zoom.k,ut=typeof Z=="function"?Z.apply(this,arguments):Z;return dt*ut},Y,et)},k.scaleTo=function(W,Z,Y,et){k.transform(W,function(){var dt=e.apply(this,arguments),ut=this.__zoom,gt=Y==null?P(dt):typeof Y=="function"?Y.apply(this,arguments):Y,Q=ut.invert(gt),it=typeof Z=="function"?Z.apply(this,arguments):Z;return n(V(B(ut,it),gt,Q),dt,o)},Y,et)},k.translateBy=function(W,Z,Y,et){k.transform(W,function(){return n(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof Y=="function"?Y.apply(this,arguments):Y),e.apply(this,arguments),o)},null,et)},k.translateTo=function(W,Z,Y,et,dt){k.transform(W,function(){var ut=e.apply(this,arguments),gt=this.__zoom,Q=et==null?P(ut):typeof et=="function"?et.apply(this,arguments):et;return n(Qi.translate(Q[0],Q[1]).scale(gt.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof Y=="function"?-Y.apply(this,arguments):-Y),ut,o)},et,dt)};function B(W,Z){return Z=Math.max(a[0],Math.min(a[1],Z)),Z===W.k?W:new Je(Z,W.x,W.y)}function V(W,Z,Y){var et=Z[0]-Y[0]*W.k,dt=Z[1]-Y[1]*W.k;return et===W.x&&dt===W.y?W:new Je(W.k,et,dt)}function P(W){return[(+W[0][0]+ +W[1][0])/2,(+W[0][1]+ +W[1][1])/2]}function U(W,Z,Y,et){W.on("start.zoom",function(){q(this,arguments).event(et).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(et).end()}).tween("zoom",function(){var dt=this,ut=arguments,gt=q(dt,ut).event(et),Q=e.apply(dt,ut),it=Y==null?P(Q):typeof Y=="function"?Y.apply(dt,ut):Y,ct=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),ht=dt.__zoom,Mt=typeof Z=="function"?Z.apply(dt,ut):Z,At=c(ht.invert(it).concat(ct/ht.k),Mt.invert(it).concat(ct/Mt.k));return function(xt){if(xt===1)xt=Mt;else{var Dt=At(xt),lt=ct/Dt[2];xt=new Je(lt,it[0]-Dt[0]*lt,it[1]-Dt[1]*lt)}gt.zoom(null,xt)}})}function q(W,Z,Y){return!Y&&W.__zooming||new ot(W,Z)}function ot(W,Z){this.that=W,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=e.apply(W,Z),this.taps=0}ot.prototype={event:function(W){return W&&(this.sourceEvent=W),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(W,Z){return this.mouse&&W!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&W!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&W!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(W){var Z=de(this.that).datum();f.call(W,this.that,new wE(W,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:f}),Z)}};function K(W,...Z){if(!t.apply(this,arguments))return;var Y=q(this,Z).event(W),et=this.__zoom,dt=Math.max(a[0],Math.min(a[1],et.k*Math.pow(2,r.apply(this,arguments)))),ut=rn(W);if(Y.wheel)(Y.mouse[0][0]!==ut[0]||Y.mouse[0][1]!==ut[1])&&(Y.mouse[1]=et.invert(Y.mouse[0]=ut)),clearTimeout(Y.wheel);else{if(et.k===dt)return;Y.mouse=[ut,et.invert(ut)],Wr(this),Y.start()}wi(W),Y.wheel=setTimeout(gt,E),Y.zoom("mouse",n(V(B(et,dt),Y.mouse[0],Y.mouse[1]),Y.extent,o));function gt(){Y.wheel=null,Y.end()}}function nt(W,...Z){if(x||!t.apply(this,arguments))return;var Y=W.currentTarget,et=q(this,Z,!0).event(W),dt=de(W.view).on("mousemove.zoom",it,!0).on("mouseup.zoom",ct,!0),ut=rn(W,Y),gt=W.clientX,Q=W.clientY;wh(W.view),Bs(W),et.mouse=[ut,this.__zoom.invert(ut)],Wr(this),et.start();function it(ht){if(wi(ht),!et.moved){var Mt=ht.clientX-gt,At=ht.clientY-Q;et.moved=Mt*Mt+At*At>D}et.event(ht).zoom("mouse",n(V(et.that.__zoom,et.mouse[0]=rn(ht,Y),et.mouse[1]),et.extent,o))}function ct(ht){dt.on("mousemove.zoom mouseup.zoom",null),xh(ht.view,et.moved),wi(ht),et.event(ht).end()}}function mt(W,...Z){if(t.apply(this,arguments)){var Y=this.__zoom,et=rn(W.changedTouches?W.changedTouches[0]:W,this),dt=Y.invert(et),ut=Y.k*(W.shiftKey?.5:2),gt=n(V(B(Y,ut),et,dt),e.apply(this,Z),o);wi(W),s>0?de(this).transition().duration(s).call(U,gt,et,W):de(this).call(k.transform,gt,et,W)}}function ft(W,...Z){if(t.apply(this,arguments)){var Y=W.touches,et=Y.length,dt=q(this,Z,W.changedTouches.length===et).event(W),ut,gt,Q,it;for(Bs(W),gt=0;gt<et;++gt)Q=Y[gt],it=rn(Q,this),it=[it,this.__zoom.invert(it),Q.identifier],dt.touch0?!dt.touch1&&dt.touch0[2]!==it[2]&&(dt.touch1=it,dt.taps=0):(dt.touch0=it,ut=!0,dt.taps=1+!!g);g&&(g=clearTimeout(g)),ut&&(dt.taps<2&&(_=it[0],g=setTimeout(function(){g=null},A)),Wr(this),dt.start())}}function J(W,...Z){if(this.__zooming){var Y=q(this,Z).event(W),et=W.changedTouches,dt=et.length,ut,gt,Q,it;for(wi(W),ut=0;ut<dt;++ut)gt=et[ut],Q=rn(gt,this),Y.touch0&&Y.touch0[2]===gt.identifier?Y.touch0[0]=Q:Y.touch1&&Y.touch1[2]===gt.identifier&&(Y.touch1[0]=Q);if(gt=Y.that.__zoom,Y.touch1){var ct=Y.touch0[0],ht=Y.touch0[1],Mt=Y.touch1[0],At=Y.touch1[1],xt=(xt=Mt[0]-ct[0])*xt+(xt=Mt[1]-ct[1])*xt,Dt=(Dt=At[0]-ht[0])*Dt+(Dt=At[1]-ht[1])*Dt;gt=B(gt,Math.sqrt(xt/Dt)),Q=[(ct[0]+Mt[0])/2,(ct[1]+Mt[1])/2],it=[(ht[0]+At[0])/2,(ht[1]+At[1])/2]}else if(Y.touch0)Q=Y.touch0[0],it=Y.touch0[1];else return;Y.zoom("touch",n(V(gt,Q,it),Y.extent,o))}}function G(W,...Z){if(this.__zooming){var Y=q(this,Z).event(W),et=W.changedTouches,dt=et.length,ut,gt;for(Bs(W),x&&clearTimeout(x),x=setTimeout(function(){x=null},A),ut=0;ut<dt;++ut)gt=et[ut],Y.touch0&&Y.touch0[2]===gt.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===gt.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(gt=rn(gt,this),Math.hypot(_[0]-gt[0],_[1]-gt[1])<M)){var Q=de(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return k.wheelDelta=function(W){return arguments.length?(r=typeof W=="function"?W:ya(+W),k):r},k.filter=function(W){return arguments.length?(t=typeof W=="function"?W:ya(!!W),k):t},k.touchable=function(W){return arguments.length?(i=typeof W=="function"?W:ya(!!W),k):i},k.extent=function(W){return arguments.length?(e=typeof W=="function"?W:ya([[+W[0][0],+W[0][1]],[+W[1][0],+W[1][1]]]),k):e},k.scaleExtent=function(W){return arguments.length?(a[0]=+W[0],a[1]=+W[1],k):[a[0],a[1]]},k.translateExtent=function(W){return arguments.length?(o[0][0]=+W[0][0],o[1][0]=+W[1][0],o[0][1]=+W[0][1],o[1][1]=+W[1][1],k):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},k.constrain=function(W){return arguments.length?(n=W,k):n},k.duration=function(W){return arguments.length?(s=+W,k):s},k.interpolate=function(W){return arguments.length?(c=W,k):c},k.on=function(){var W=f.on.apply(f,arguments);return W===f?k:W},k.clickDistance=function(W){return arguments.length?(D=(W=+W)*W,k):Math.sqrt(D)},k.tapDistance=function(W){return arguments.length?(M=+W,k):M},k}const ME=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:Je,zoom:om,zoomIdentity:Qi,zoomTransform:am},Symbol.toStringTag,{value:"Module"})),NE=["#00E58D","#0093E5","#E56000","#007F8C","#159500","#DE1135","#9E1FDA","#E59700"];function Ku(t,e){if(e<=8)return NE[t%8];if(e<=10)return Dg[t%10];{const n=t/(e-1)*.96+.04;return im(n)}}const OE=({value:t,options:e,onUpdate:n,onRemove:r,color:i})=>I("div",{className:on["selector-container"],children:[I("span",{className:on["legend-indicator"],style:{backgroundColor:i}}),I("select",{className:on["group-select"],value:t,onChange:a=>n(a.target.value),children:[e.map(a=>I("option",{value:a,children:a},a)),";"]}),r&&I("button",{type:"button",className:on["remove-button"],onClick:r,title:"Remove source",children:I(Od,{})})]});function $n({children:t,tilingComponent:e,additionalContentClass:n,allowGroupSelection:r=!1,allowMultiplePlots:i=!1}){if(!e)return null;const[a,o]=In([e.targetGroupName]),s=fo(),c=Nd(()=>s.filter(B=>{var V;return!!((V=e.dataProvider)!=null&&V.call(e,B))}),[e,s]),f=Object.fromEntries(s.map((B,V)=>[B,Ku(V,a.length)])),g=B=>{o(B),B.length>0&&e.setTargetGroup(B[0])},_=()=>{const B=c.find(V=>!a.includes(V));B&&g([...a,B])},x=(B,V)=>{const P=[...a];P[B]=V,g(P)},A=B=>{g(a.filter((V,P)=>P!==B))},E=r&&s.length>1,D=a.length>=c.length,M=i&&!D,k=i&&a.length>1;return I("div",{className:on["panel-element"],children:[E&&I("div",{className:on["panel-header"],children:[I("label",{children:"Sources:"}),I("div",{className:on["selectors-wrapper"],children:a.map((B,V)=>{const P=c.filter(U=>U===B||!a.includes(U));return I(OE,{value:B,options:P,onUpdate:U=>x(V,U),onRemove:k?()=>A(V):void 0,color:f[B]},`${B}-${V}`)})}),M&&I("button",{type:"button",className:on["add-button"],onClick:_,children:I(jv,{})})]}),I("div",{className:on["section-content"]+` ${n??""}`,children:t(i?a:a[0])})]})}const DE="_key_17q3l_54",RE="_major_17q3l_84",Nn={"model-event-section":"_model-event-section_17q3l_41",key:DE,"model-layer-section":"_model-layer-section_17q3l_70",major:RE,"item-name":"_item-name_17q3l_91"},tc="MEMORY",CE=`${tc}::SYMBOLS`,LE=`${tc}::STATICALLY_ASSIGNED_MEM`,IE="thread_name",BE="CPU_LOAD",kE="DIE_TEMP",sm="MODEL",PE="INFERENCE",um=new RegExp(`^${sm}(?<modelNum>[0-9]*)::`);function jr(t){var e;return typeof(t==null?void 0:t.key)=="string"&&((e=t==null?void 0:t.key)==null?void 0:e.match(um))!==null}function cm(t){var e;return typeof(t==null?void 0:t.key)=="string"&&((e=t==null?void 0:t.key)==null?void 0:e.startsWith(`${PE}::`))}function lm(t){return(t==null?void 0:t.name)===sm}function $E(t,e){return e&&e!==""?e+"::":""}function qn(t){return t.replace(um,$E)}function fm(t){const e=[];return t.forEachCall(n=>{e.push(n)},()=>{}),e}function dm(t){const e=hu(t);if(!e.length)return null;const n=new Map;return e==null||e.forEach(r=>{fm(r.profile).forEach(a=>{const{frame:o}=a;if(!jr(o))return;const{name:s,args:{begin:{tag:c}}}=o,f=qn(s),g=a.getSelfWeight();n.has(c)||n.set(c,new Map);const _=n.get(c);_.has(f)||_.set(f,[]),_.get(f).push(g)},()=>{})}),n}function WE(t){const e=dm(t);if(!e)return null;const n=Array.from(e.values()).flatMap(r=>Array.from(r.entries())).map(([r,i])=>{const a=i.reduce((o,s)=>o+s,0);return{name:r,duration:{total:a,average:a/i.length}}});return n.length?{plotData:[n]}:null}function VE(t){const e=dm(t);if(!e)return null;const n=Array.from(e.entries()).map(([r,i])=>{const{count:a,total:o}=Array.from(i.values()).reduce((s,c)=>(s.count+=c.length,s.total+=c.reduce((f,g)=>f+g,0),s),{count:0,total:0});return{name:r,duration:{total:o,average:o/a}}});return n.length?{plotData:[n]}:null}function zE(t){const n=(ho(t)??[]).filter(lm).map(o=>o==null?void 0:o.args);if(!n.length)return null;const r=hu(t);if(!r.length)return null;const i=[],a=r.flatMap(o=>fm(o.profile));return n.forEach(o=>{const{tensors:s,inputs:c,outputs:f}=o;if(!s.filter(({size:P})=>P!==void 0).length)return null;const _=a.filter(({frame:P,parent:U})=>{var q,ot;return jr(P)&&(n.length===1||cm(U==null?void 0:U.frame)&&((ot=(q=U==null?void 0:U.frame.args)==null?void 0:q.begin)==null?void 0:ot.model_id)===o.id)}).map(({frame:P})=>P);let x=0;const{ops:A}=o,E=A.flatMap(P=>{const U=_.slice(x).findIndex(ot=>ot.args.begin.tag===P.op_name);if(U===-1)return[];const{name:q}=_[x];return x=x+U+1,[{...P,op_name:qn(q)}]}),D=P=>U=>(P.name_long??P.name)===U.name,M=new Set([...c.map(P=>{var U;return(U=s.find(D(P)))==null?void 0:U.index}),...f.map(P=>{var U;return(U=s.find(D(P)))==null?void 0:U.index}),...A.flatMap(({outputs:P})=>P)]),k=new Set,B=new Map(s.map(({index:P,size:U})=>[P,U])),V=P=>k.has(P)||(k.add(P),!B.has(P))?void 0:B.get(P);i.push(...E.flatMap(({op_name:P,inputs:U})=>{const q=U.filter(ot=>!M.has(ot)).map(ot=>V(ot)??0).reduce((ot,K)=>ot+K,0);return q?[{name:P,size:q}]:[]}))}),i.length?{plotData:[i]}:null}function FE({frame:t}){if((t==null?void 0:t.args)===void 0)return;const e=["subgraph_idx","op_idx","tag","runtime","thread_id","tag_len","cpu_id"],n=Object.entries(t.args.begin).filter(([r,i])=>!e.includes(r));if(n.length!==0)return I("table",{children:[I("thead",{children:I("tr",{children:[I("th",{className:Nn.key,children:"Param"}),I("th",{children:"Start"}),I("th",{children:"End"})]})}),I("tbody",{children:n.map(([r,i])=>I("tr",{children:[I("th",{className:Nn.key,children:r}),I("th",{children:i}),I("th",{children:t==null?void 0:t.args.end[r]})]}))})]})}function UE({frame:t,parent:e}){var g;const[n,r]=In(xa.get());xa.subscribe(()=>{r(xa.get())});const i=(n??[]).filter(lm);let a;if(i.length>1){const _=e==null?void 0:e.args.begin.model_id;_===void 0&&(a=i[0].args),a=(g=i.find(x=>x.args.id===_))==null?void 0:g.args}else i.length===1&&(a=i[0].args);const o=_=>{const x=a==null?void 0:a.tensors.find(E=>E.index===_&&E.subgraph_idx===(t==null?void 0:t.args.begin.subgraph_idx));if(x===void 0)return;const A=x.name.split("/").map((E,D,M)=>D===M.length-1?E:I(mn,{children:[E,"/",I("wbr",{})]}));return I("li",{children:[" ",A,": [",x.shape.join(", "),"] of ",x.dtype," "]})};if(a===void 0)return;const s=a.ops.find(_=>_.index===(t==null?void 0:t.args.begin.op_idx));if(!s)return;const c=_=>I("span",{className:Nn["item-name"],children:_.children}),f=Object.entries(s.parameters??{}).map(([_,x])=>typeof x=="string"?[_,x]:[_,JSON.stringify(x)]).map(([_,x])=>I("li",{children:[_,": ",x]}));return I("div",{className:Nn["model-layer-section"],children:[I("h3",{children:" Layer info "}),I("ul",{children:[I("li",{className:Nn.major,children:[" Operation type: ",s.op_name," "]}),I("li",{className:Nn.major,children:[I(c,{children:"Inputs"}),":",I("ol",{children:s.inputs.map(o)})]}),I("li",{className:Nn.major,children:[I(c,{children:"Outputs"}),":",I("ol",{children:s.outputs.map(o)})]}),f.length>0&&I("li",{className:Nn.major,children:[I(c,{children:"Parameters"}),":",I("ol",{children:f})]})]})]})}function YE(t){const e=FE(t),n=UE(t);return!e&&!n?I(mm,{info:"The event does not contain information to display"}):I($n,{tilingComponent:t.tilingComponent,additionalContentClass:on["no-padding"],children:()=>I("div",{className:Nn["model-event-section"],children:[e,n]})})}function hm(){const t=ze.getActiveProfile();if(!t)return null;const e=Dd.get();let n;switch(e){case dr.CHRONO_FLAME_CHART:n=t.chronoViewState;break;case dr.LEFT_HEAVY_FLAME_GRAPH:n=t.leftHeavyViewState;break;case dr.SANDWICH_VIEW:n=t.sandwichViewState;break}return{viewMode:e,activeView:n}}const ec=t=>{const e=ze.getActiveProfile(),n=e==null?void 0:e.profile;return(n==null?void 0:n.getGroupName())!==t};function HE(){const[t,e]=In(void 0);return La.subscribe(()=>{var o;const n=La.get();if(n===null){e(void 0);return}const r=hm();if(r===null){e(void 0);return}const i=(o=ze.getActiveProfile())==null?void 0:o.profile;if(i===void 0){e(void 0);return}const{viewMode:a}=r;if(a===dr.SANDWICH_VIEW&&n instanceof Jv){const c=Zv({profile:i,frame:n,flattenRecursion:Qv.get()}).getAppendOrderCalltreeRoot().children[0].children;e({frame:n,parent:c[0]})}else if(a!==dr.SANDWICH_VIEW&&n instanceof Kv)e({frame:n==null?void 0:n.frame,parent:n==null?void 0:n.parent});else{e(void 0);return}}),{frameSt:t}}function XE(t,e){return n=>{if(!n)return;const{name:r}=n,i=n.groupName??t,a=e.get(i);if(!a||a.length===0)return;let o=a.find(E=>E.nameToFrame.has(r));o||([o]=a);const{globalIndex:s,nameToFrame:c,nameToNode:f}=o;ze.setProfileIndexToView(s);const g=c.get(r);g&&ze.setSelectedFrame(g);const _=f.get(r),x=Dd.get(),A={[dr.CHRONO_FLAME_CHART]:Zl.CHRONO,[dr.LEFT_HEAVY_FLAME_GRAPH]:Zl.LEFT_HEAVY}[x];_&&A&&ze.setSelectedNode(A,_)}}const qE=(t,e)=>()=>{var s;if(!t.current)return;const{current:n}=t;if(n.annotations.pop(),ec(e)){n.redraw();return}const r=lr.get();if(!r){n.redraw();return}const i="frame"in r?r.frame:r,a=qn(i.name),o=(s=n.plotData)==null?void 0:s.flat().find(({name:c})=>c===a);o?n._addAnnotation(o):n.redraw()},GE=(t,e)=>{if(!ec(e))return n=>{var g;const{current:r}=t;if(!r)return Jl;const i=(g=ze.getActiveProfile())==null?void 0:g.profile;if(!i)return Jl;const a=tb(i),o=eb({theme:r.props.theme,frameToColorBucket:a}),s=new Map;i.forEachFrame(_=>{if(!jr(_))return;const x=qn(_.name);s.has(x)||s.set(x,_)});const c=()=>{const[_]=r.annotations;if(!_)return;const{x,y:A}=_,{name:E}=r._findClosestPoint(x,A)??{};if(E)return qn(E)},f=()=>{var A,E,D;const _=(A=hm())==null?void 0:A.activeView;if(!_)return;const x="hover"in _?(E=_.selectedNode)==null?void 0:E.frame.name:(D=_.callerCallee)==null?void 0:D.selectedFrame.name;if(x)return qn(x)};return _=>{_.select("path").attr("fill",({name:x})=>{const A=s.get(x);return A?o(A):n}).attr("stroke-width",({name:x})=>c()===x?4:f()===x?2:null).attr("stroke",({name:x})=>{const A=f()===x,E=c()===x;return A&&E?r.props.theme.selectionPrimaryColor:A?r.props.theme.selectionSecondaryColor:E?r.props.theme.fgPrimaryColor:null})}}},jE=(t,e,n)=>([r])=>{var f,g;const{current:i}=t;if(!i)return;if(i.annotations.pop(),!r){lr.set(null);return}const a=i.xScale.invert(r.x),o=i.yScale.invert(r.y),s=i._findClosestPoint(a,o);if(s){const _=(f=ze.getActiveProfile())==null?void 0:f.profile.getName(),A=(n.get(e)??[]).find(k=>k.nameToFrame.has(s.name)),E=(g=ze.get())==null?void 0:g.profiles,D=A&&E?E[A.globalIndex].profile.getName():void 0,M=D&&D!==_?D:void 0;s.sourceProfile=M}if(i._addAnnotation(s),ec(e))return;const{onFrameHover:c}=i.props;c&&lr.unsubscribe(c),lr.set(s?{name:s.name}:null),c&&lr.subscribe(c)},gm=(t,e)=>{const n=()=>{var i;return(i=t.current)==null?void 0:i.redraw()},r=Nd(()=>{const i=ze.get();if(!i)return new Map;const a=new Map;return fo().forEach(s=>{const c=hu(s),f=i.profiles,g=c.map(_=>{const x=f.indexOf(_),A=new Map,E=new Map;return _.profile.forEachFrame(D=>{if(!jr(D))return;const M=qn(D.name);A.has(M)||A.set(M,D)}),_.profile.forEachCall(D=>{if(!jr(D.frame))return;const M=qn(D.frame.name);E.has(M)||E.set(M,D)},()=>{}),{globalIndex:x,nameToFrame:A,nameToNode:E}});a.set(s,g)}),a},[]);return{onFrameSelect:n,onProfileChange:n,onFrameHover:qE(t,e),useClick:()=>XE(e,r),decorateSvgSeries:GE(t,e),onPoint:jE(t,e,r)}};function mm({info:t}){return I("p",{className:on["generic-info"],children:t})}function JE({tilingComponent:t}){const{frameSt:e}=HE();return I($n,{tilingComponent:t,children:()=>{var i;return jr(e==null?void 0:e.frame)?I(YE,{frame:e.frame,parent:cm((i=e==null?void 0:e.parent)==null?void 0:i.frame)?e.parent.frame:void 0,tilingComponent:t}):I(mm,{info:e?"The chosen event does not contain additional information":"For more info, choose an event"})}})}const ZE=Qn(JE,"Details");function QE(t){const n=(ho(t)??[]).filter(r=>r.name===BE).map(r=>({ts:+r.ts.toFixed(3),...r.args}));if(n.length!==0)return{fullData:n}}var Si={exports:{}};const KE=en(Vy),tS=en(AA),eS=en(p2),nS=en(CT),rS=en(oT),iS=en($x),aS=en(S1);var au=Math.PI,ou=2*au,ur=1e-6,oS=ou-ur;function su(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ki(){return new su}su.prototype=Ki.prototype={constructor:su,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,c=r-e,f=a-t,g=o-e,_=f*f+g*g;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(_>ur)if(!(Math.abs(g*s-c*f)>ur)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var x=n-a,A=r-o,E=s*s+c*c,D=x*x+A*A,M=Math.sqrt(E),k=Math.sqrt(_),B=i*Math.tan((au-Math.acos((E+_-D)/(2*M*k)))/2),V=B/k,P=B/M;Math.abs(V-1)>ur&&(this._+="L"+(t+V*f)+","+(e+V*g)),this._+="A"+i+","+i+",0,0,"+ +(g*x>f*A)+","+(this._x1=t+P*s)+","+(this._y1=e+P*c)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),c=t+o,f=e+s,g=1^a,_=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+f:(Math.abs(this._x1-c)>ur||Math.abs(this._y1-f)>ur)&&(this._+="L"+c+","+f),n&&(_<0&&(_=_%ou+ou),_>oS?this._+="A"+n+","+n+",0,1,"+g+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+g+","+(this._x1=c)+","+(this._y1=f):_>ur&&(this._+="A"+n+","+n+",0,"+ +(_>=au)+","+g+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function kt(t){return function(){return t}}var Te=1e-12,Tr=Math.PI,no=Tr/2,Gn=2*Tr;function sS(t){return t.innerRadius}function uS(t){return t.outerRadius}function cS(t){return t.startAngle}function lS(t){return t.endAngle}function fS(t){return t&&t.padAngle}function ud(t){return t>=1?no:t<=-1?-no:Math.asin(t)}function dS(t,e,n,r,i,a,o,s){var c=n-t,f=r-e,g=o-i,_=s-a,x=(g*(e-a)-_*(t-i))/(_*c-g*f);return[t+x*c,e+x*f]}function _a(t,e,n,r,i,a,o){var s=t-n,c=e-r,f=(o?a:-a)/Math.sqrt(s*s+c*c),g=f*c,_=-f*s,x=t+g,A=e+_,E=n+g,D=r+_,M=(x+E)/2,k=(A+D)/2,B=E-x,V=D-A,P=B*B+V*V,U=i-a,q=x*D-E*A,ot=(V<0?-1:1)*Math.sqrt(Math.max(0,U*U*P-q*q)),K=(q*V-B*ot)/P,nt=(-q*B-V*ot)/P,mt=(q*V+B*ot)/P,ft=(-q*B+V*ot)/P,J=K-M,G=nt-k,W=mt-M,Z=ft-k;return J*J+G*G>W*W+Z*Z&&(K=mt,nt=ft),{cx:K,cy:nt,x01:-g,y01:-_,x11:K*(i/U-1),y11:nt*(i/U-1)}}function pm(){var t=sS,e=uS,n=kt(0),r=null,i=cS,a=lS,o=fS,s=null;function c(){var f,g,_=+t.apply(this,arguments),x=+e.apply(this,arguments),A=i.apply(this,arguments)-no,E=a.apply(this,arguments)-no,D=Math.abs(E-A),M=E>A;if(s||(s=f=Ki()),x<_&&(g=x,x=_,_=g),!(x>Te))s.moveTo(0,0);else if(D>Gn-Te)s.moveTo(x*Math.cos(A),x*Math.sin(A)),s.arc(0,0,x,A,E,!M),_>Te&&(s.moveTo(_*Math.cos(E),_*Math.sin(E)),s.arc(0,0,_,E,A,M));else{var k=A,B=E,V=A,P=E,U=D,q=D,ot=o.apply(this,arguments)/2,K=ot>Te&&(r?+r.apply(this,arguments):Math.sqrt(_*_+x*x)),nt=Math.min(Math.abs(x-_)/2,+n.apply(this,arguments)),mt=nt,ft=nt,J,G;if(K>Te){var W=ud(K/_*Math.sin(ot)),Z=ud(K/x*Math.sin(ot));(U-=W*2)>Te?(W*=M?1:-1,V+=W,P-=W):(U=0,V=P=(A+E)/2),(q-=Z*2)>Te?(Z*=M?1:-1,k+=Z,B-=Z):(q=0,k=B=(A+E)/2)}var Y=x*Math.cos(k),et=x*Math.sin(k),dt=_*Math.cos(P),ut=_*Math.sin(P);if(nt>Te){var gt=x*Math.cos(B),Q=x*Math.sin(B),it=_*Math.cos(V),ct=_*Math.sin(V);if(D<Tr){var ht=U>Te?dS(Y,et,it,ct,gt,Q,dt,ut):[dt,ut],Mt=Y-ht[0],At=et-ht[1],xt=gt-ht[0],Dt=Q-ht[1],lt=1/Math.sin(Math.acos((Mt*xt+At*Dt)/(Math.sqrt(Mt*Mt+At*At)*Math.sqrt(xt*xt+Dt*Dt)))/2),_t=Math.sqrt(ht[0]*ht[0]+ht[1]*ht[1]);mt=Math.min(nt,(_-_t)/(lt-1)),ft=Math.min(nt,(x-_t)/(lt+1))}}q>Te?ft>Te?(J=_a(it,ct,Y,et,x,ft,M),G=_a(gt,Q,dt,ut,x,ft,M),s.moveTo(J.cx+J.x01,J.cy+J.y01),ft<nt?s.arc(J.cx,J.cy,ft,Math.atan2(J.y01,J.x01),Math.atan2(G.y01,G.x01),!M):(s.arc(J.cx,J.cy,ft,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!M),s.arc(0,0,x,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(G.cy+G.y11,G.cx+G.x11),!M),s.arc(G.cx,G.cy,ft,Math.atan2(G.y11,G.x11),Math.atan2(G.y01,G.x01),!M))):(s.moveTo(Y,et),s.arc(0,0,x,k,B,!M)):s.moveTo(Y,et),!(_>Te)||!(U>Te)?s.lineTo(dt,ut):mt>Te?(J=_a(dt,ut,gt,Q,_,-mt,M),G=_a(Y,et,it,ct,_,-mt,M),s.lineTo(J.cx+J.x01,J.cy+J.y01),mt<nt?s.arc(J.cx,J.cy,mt,Math.atan2(J.y01,J.x01),Math.atan2(G.y01,G.x01),!M):(s.arc(J.cx,J.cy,mt,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!M),s.arc(0,0,_,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(G.cy+G.y11,G.cx+G.x11),M),s.arc(G.cx,G.cy,mt,Math.atan2(G.y11,G.x11),Math.atan2(G.y01,G.x01),!M))):s.arc(0,0,_,P,V,M)}if(s.closePath(),f)return s=null,f+""||null}return c.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,g=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Tr/2;return[Math.cos(g)*f,Math.sin(g)*f]},c.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:kt(+f),c):t},c.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:kt(+f),c):e},c.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:kt(+f),c):n},c.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:kt(+f),c):r},c.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:kt(+f),c):i},c.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:kt(+f),c):a},c.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:kt(+f),c):o},c.context=function(f){return arguments.length?(s=f??null,c):s},c}function vm(t){this._context=t}vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ta(t){return new vm(t)}function bm(t){return t[0]}function ym(t){return t[1]}function ko(){var t=bm,e=ym,n=kt(!0),r=null,i=ta,a=null;function o(s){var c,f=s.length,g,_=!1,x;for(r==null&&(a=i(x=Ki())),c=0;c<=f;++c)!(c<f&&n(g=s[c],c,s))===_&&((_=!_)?a.lineStart():a.lineEnd()),_&&a.point(+t(g,c,s),+e(g,c,s));if(x)return a=null,x+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:kt(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:kt(+s),o):e},o.defined=function(s){return arguments.length?(n=typeof s=="function"?s:kt(!!s),o):n},o.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),o):i},o.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),o):r},o}function _m(){var t=bm,e=null,n=kt(0),r=ym,i=kt(!0),a=null,o=ta,s=null;function c(g){var _,x,A,E=g.length,D,M=!1,k,B=new Array(E),V=new Array(E);for(a==null&&(s=o(k=Ki())),_=0;_<=E;++_){if(!(_<E&&i(D=g[_],_,g))===M)if(M=!M)x=_,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),A=_-1;A>=x;--A)s.point(B[A],V[A]);s.lineEnd(),s.areaEnd()}M&&(B[_]=+t(D,_,g),V[_]=+n(D,_,g),s.point(e?+e(D,_,g):B[_],r?+r(D,_,g):V[_]))}if(k)return s=null,k+""||null}function f(){return ko().defined(i).curve(o).context(a)}return c.x=function(g){return arguments.length?(t=typeof g=="function"?g:kt(+g),e=null,c):t},c.x0=function(g){return arguments.length?(t=typeof g=="function"?g:kt(+g),c):t},c.x1=function(g){return arguments.length?(e=g==null?null:typeof g=="function"?g:kt(+g),c):e},c.y=function(g){return arguments.length?(n=typeof g=="function"?g:kt(+g),r=null,c):n},c.y0=function(g){return arguments.length?(n=typeof g=="function"?g:kt(+g),c):n},c.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:kt(+g),c):r},c.lineX0=c.lineY0=function(){return f().x(t).y(n)},c.lineY1=function(){return f().x(t).y(r)},c.lineX1=function(){return f().x(e).y(n)},c.defined=function(g){return arguments.length?(i=typeof g=="function"?g:kt(!!g),c):i},c.curve=function(g){return arguments.length?(o=g,a!=null&&(s=o(a)),c):o},c.context=function(g){return arguments.length?(g==null?a=s=null:s=o(a=g),c):a},c}function hS(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function gS(t){return t}function mS(){var t=gS,e=hS,n=null,r=kt(0),i=kt(Gn),a=kt(0);function o(s){var c,f=s.length,g,_,x=0,A=new Array(f),E=new Array(f),D=+r.apply(this,arguments),M=Math.min(Gn,Math.max(-Gn,i.apply(this,arguments)-D)),k,B=Math.min(Math.abs(M)/f,a.apply(this,arguments)),V=B*(M<0?-1:1),P;for(c=0;c<f;++c)(P=E[A[c]=c]=+t(s[c],c,s))>0&&(x+=P);for(e!=null?A.sort(function(U,q){return e(E[U],E[q])}):n!=null&&A.sort(function(U,q){return n(s[U],s[q])}),c=0,_=x?(M-f*V)/x:0;c<f;++c,D=k)g=A[c],P=E[g],k=D+(P>0?P*_:0)+V,E[g]={data:s[g],index:c,value:P,startAngle:D,endAngle:k,padAngle:B};return E}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:kt(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:kt(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:kt(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:kt(+s),o):a},o}var wm=nc(ta);function xm(t){this._curve=t}xm.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function nc(t){function e(n){return new xm(t(n))}return e._curve=t,e}function Mi(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(nc(n)):e()._curve},t}function pS(){return Mi(ko().curve(wm))}function vS(){var t=_m().curve(wm),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Mi(n())},delete t.lineX0,t.lineEndAngle=function(){return Mi(r())},delete t.lineX1,t.lineInnerRadius=function(){return Mi(i())},delete t.lineY0,t.lineOuterRadius=function(){return Mi(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(nc(o)):e()._curve},t}const rc={draw:function(t,e){var n=Math.sqrt(e/Tr);t.moveTo(n,0),t.arc(0,0,n,0,Gn)}},Tm={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var Am=Math.sqrt(1/3),bS=Am*2;const Em={draw:function(t,e){var n=Math.sqrt(e/bS),r=n*Am;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}};var yS=.8908130915292852,Sm=Math.sin(Tr/10)/Math.sin(7*Tr/10),_S=Math.sin(Gn/10)*Sm,wS=-Math.cos(Gn/10)*Sm;const Mm={draw:function(t,e){var n=Math.sqrt(e*yS),r=_S*n,i=wS*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Gn*a/5,s=Math.cos(o),c=Math.sin(o);t.lineTo(c*n,-s*n),t.lineTo(s*r-c*i,c*r+s*i)}t.closePath()}},Nm={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}};var ks=Math.sqrt(3);const Om={draw:function(t,e){var n=-Math.sqrt(e/(ks*3));t.moveTo(0,n*2),t.lineTo(-ks*n,-n),t.lineTo(ks*n,-n),t.closePath()}};var qe=-.5,Ge=Math.sqrt(3)/2,uu=1/Math.sqrt(12),xS=(uu/2+1)*3;const Dm={draw:function(t,e){var n=Math.sqrt(e/xS),r=n/2,i=n*uu,a=r,o=n*uu+n,s=-a,c=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,c),t.lineTo(qe*r-Ge*i,Ge*r+qe*i),t.lineTo(qe*a-Ge*o,Ge*a+qe*o),t.lineTo(qe*s-Ge*c,Ge*s+qe*c),t.lineTo(qe*r+Ge*i,qe*i-Ge*r),t.lineTo(qe*a+Ge*o,qe*o-Ge*a),t.lineTo(qe*s+Ge*c,qe*c-Ge*s),t.closePath()}};var TS=[rc,Tm,Em,Nm,Mm,Om,Dm];function AS(){var t=kt(rc),e=kt(64),n=null;function r(){var i;if(n||(n=i=Ki()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(t=typeof i=="function"?i:kt(i),r):t},r.size=function(i){return arguments.length?(e=typeof i=="function"?i:kt(+i),r):e},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Zn(){}function ro(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Po(t){this._context=t}Po.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ro(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ro(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ES(t){return new Po(t)}function Rm(t){this._context=t}Rm.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ro(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function SS(t){return new Rm(t)}function Cm(t){this._context=t}Cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ro(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function MS(t){return new Cm(t)}function Lm(t,e){this._basis=new Po(t),this._beta=e}Lm.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+c*a),this._beta*e[s]+(1-this._beta)*(i+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const NS=function t(e){function n(r){return e===1?new Po(r):new Lm(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function io(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ic(t,e){this._context=t,this._k=(1-e)/6}ic.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:io(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:io(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const OS=function t(e){function n(r){return new ic(r,e)}return n.tension=function(r){return t(+r)},n}(0);function ac(t,e){this._context=t,this._k=(1-e)/6}ac.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:io(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const DS=function t(e){function n(r){return new ac(r,e)}return n.tension=function(r){return t(+r)},n}(0);function oc(t,e){this._context=t,this._k=(1-e)/6}oc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:io(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const RS=function t(e){function n(r){return new oc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function sc(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Te){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Te){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,g=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*f+t._x1*t._l23_2a-e*t._l12_2a)/g,o=(o*f+t._y1*t._l23_2a-n*t._l12_2a)/g}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function Im(t,e){this._context=t,this._alpha=e}Im.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:sc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Bm=function t(e){function n(r){return e?new Im(r,e):new ic(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function km(t,e){this._context=t,this._alpha=e}km.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:sc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const CS=function t(e){function n(r){return e?new km(r,e):new ac(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Pm(t,e){this._context=t,this._alpha=e}Pm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const LS=function t(e){function n(r){return e?new Pm(r,e):new oc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function $m(t){this._context=t}$m.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function IS(t){return new $m(t)}function cd(t){return t<0?-1:1}function ld(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(cd(a)+cd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function fd(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ps(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function ao(t){this._context=t}ao.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ps(this,this._t0,fd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ps(this,fd(this,n=ld(this,t,e)),n);break;default:Ps(this,this._t0,n=ld(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Wm(t){this._context=new Vm(t)}(Wm.prototype=Object.create(ao.prototype)).point=function(t,e){ao.prototype.point.call(this,e,t)};function Vm(t){this._context=t}Vm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function BS(t){return new ao(t)}function kS(t){return new Wm(t)}function zm(t){this._context=t}zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=dd(t),i=dd(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function dd(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function PS(t){return new zm(t)}function $o(t,e){this._context=t,this._t=e}$o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function $S(t){return new $o(t,.5)}function WS(t){return new $o(t,0)}function VS(t){return new $o(t,1)}var hd=Array.prototype.slice;function Jr(t,e){if((a=t.length)>1)for(var n=1,r,i=t[e[0]],a,o=i.length;n<a;++n){r=i,i=t[e[n]];for(var s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}}function Zr(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function zS(t,e){return t[e]}function FS(){var t=kt([]),e=Zr,n=Jr,r=zS;function i(a){var o=t.apply(this,arguments),s,c=a.length,f=o.length,g=new Array(f),_;for(s=0;s<f;++s){for(var x=o[s],A=g[s]=new Array(c),E=0,D;E<c;++E)A[E]=D=[0,+r(a[E],x,E,a)],D.data=a[E];A.key=x}for(s=0,_=e(g);s<f;++s)g[_[s]].index=s;return n(g,_),g}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:kt(hd.call(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:kt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Zr:typeof a=="function"?a:kt(hd.call(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Jr,i):n},i}function US(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Jr(t,e)}}function YS(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}Jr(t,e)}}function HS(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,c=0,f=0;s<o;++s){for(var g=t[e[s]],_=g[r][1]||0,x=g[r-1][1]||0,A=(_-x)/2,E=0;E<s;++E){var D=t[e[E]],M=D[r][1]||0,k=D[r-1][1]||0;A+=M-k}c+=_,f+=A*_}i[r-1][1]+=i[r-1][0]=n,c&&(n-=f/c)}i[r-1][1]+=i[r-1][0]=n,Jr(t,e)}}function Fm(t){var e=t.map(Um);return Zr(t).sort(function(n,r){return e[n]-e[r]})}function Um(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function XS(t){return Fm(t).reverse()}function qS(t){var e=t.length,n,r,i=t.map(Um),a=Zr(t).sort(function(g,_){return i[_]-i[g]}),o=0,s=0,c=[],f=[];for(n=0;n<e;++n)r=a[n],o<s?(o+=i[r],c.push(r)):(s+=i[r],f.push(r));return f.reverse().concat(c)}function GS(t){return Zr(t).reverse()}const jS=Object.freeze(Object.defineProperty({__proto__:null,arc:pm,area:_m,curveBasis:ES,curveBasisClosed:SS,curveBasisOpen:MS,curveBundle:NS,curveCardinal:OS,curveCardinalClosed:DS,curveCardinalOpen:RS,curveCatmullRom:Bm,curveCatmullRomClosed:CS,curveCatmullRomOpen:LS,curveLinear:ta,curveLinearClosed:IS,curveMonotoneX:BS,curveMonotoneY:kS,curveNatural:PS,curveStep:$S,curveStepAfter:VS,curveStepBefore:WS,line:ko,pie:mS,radialArea:vS,radialLine:pS,stack:FS,stackOffsetExpand:US,stackOffsetNone:Jr,stackOffsetSilhouette:YS,stackOffsetWiggle:HS,stackOrderAscending:Fm,stackOrderDescending:XS,stackOrderInsideOut:qS,stackOrderNone:Zr,stackOrderReverse:GS,symbol:AS,symbolCircle:rc,symbolCross:Tm,symbolDiamond:Em,symbolSquare:Nm,symbolStar:Mm,symbolTriangle:Om,symbolWye:Dm,symbols:TS},Symbol.toStringTag,{value:"Module"})),JS=en(jS),ZS=en(_E),QS=en(Yy),KS=en(Ix),tM=en(ME);var eM=Si.exports,gd;function nM(){return gd||(gd=1,function(t,e){(function(n,r){r(e,KE,tS,eS,nS,rS,iS,aS,JS,ZS,QS,KS,tM)})(eM,function(n,r,i,a,o,s,c,f,g,_,x,A,E){var D=function(u,l,d){var m=l[d];if(typeof m!="function")throw new Error("Attempt to rebind ".concat(d," which isn't a function on the source object"));return function(){for(var b=arguments.length,y=new Array(b),h=0;h<b;h++)y[h]=arguments[h];var p=m.apply(l,y);return p===l?u:p}},M=function(u,l){for(var d=arguments.length,m=new Array(d>2?d-2:0),b=2;b<d;b++)m[b-2]=arguments[b];for(var y=0,h=m;y<h.length;y++){var p=h[y];u[p]=D(u,l,p)}return u},k=function(l){return function(d){return l.reduce(function(m,b){return m&&b(m)},d)}},B=function(u,l){for(var d=arguments.length,m=new Array(d>2?d-2:0),b=2;b<d;b++)m[b-2]=arguments[b];for(var y=k(m),h=0,p=Object.keys(l);h<p.length;h++){var v=p[h],w=y(v);w&&(u[w]=D(u,l,v))}return u},V=function(u){return u.map(function(l){return typeof l=="string"?new RegExp("^".concat(l,"$")):l})},P=function(){for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return l=V(l),function(m){return l.every(function(b){return!b.test(m)})&&m}},U=function(){for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return l=V(l),function(m){return l.some(function(b){return b.test(m)})&&m}},q=function(u){return function(l){return u[l]}},ot=function(l){return l[0].toUpperCase()+l.slice(1)},K=function(u){return function(l){return u+ot(l)}};function nt(u){return u}function mt(u){}function ft(u){return typeof u=="function"?u:function(){return u}}function J(u){return typeof u=="number"&&isNaN(u)?void 0:u}function G(){var u=function(){return 10},l=mt,d=nt,m=function(h){return h!=null},b=function(h){var p=u.apply(this,arguments),v=h.slice(0,p).map(d);return h.map(function(w,T){return T>=p&&(v.shift(),v.push(d(w,T))),T<p-1||v.some(function(S){return!m(S)})?l(void 0,T):l(v,T)})};return b.period=function(){return arguments.length?(u=ft(arguments.length<=0?void 0:arguments[0]),b):u},b.accumulator=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},b.defined=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],b):m},b.value=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},b}function W(){var u=2,l=G().accumulator(function(m){var b=m&&r.deviation(m),y=m&&r.mean(m);return{average:y,upper:J(y+u*b),lower:J(y-u*b)}}),d=function(b){return l(b)};return d.multiplier=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},M(d,l,"period","value"),d}function Z(){var u=nt,l=function(){return 9},d=function(y){var h=[];return function(p){var v;return h.length<y&&(p!=null?h.push(p):h=[]),h.length>=y&&(v=r.mean(h)),v}},m=function(y){var h=l.apply(this,arguments),p=2/(h+1),v=d(h),w;return y.map(function(T,S){var N=u(T,S);return w===void 0?w=v(N):w=N*p+(1-p)*w,J(w)})};return m.period=function(){return arguments.length?(l=ft(arguments.length<=0?void 0:arguments[0]),m):l},m.value=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},m}function Y(){var u=nt,l=Z().period(12),d=Z().period(26),m=Z().period(9),b=function(h){l.value(u),d.value(u);var p=r.zip(l(h),d(h)).map(function(w){return w[0]!==void 0&&w[1]!==void 0?w[0]-w[1]:void 0}),v=m(p);return r.zip(p,v).map(function(w){return{macd:w[0],signal:w[1],divergence:w[0]!==void 0&&w[1]!==void 0?w[0]-w[1]:void 0}})};return b.value=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},B(b,l,q({period:"fastPeriod"})),B(b,d,q({period:"slowPeriod"})),B(b,m,q({period:"signalPeriod"})),b}function et(u,l){(l==null||l>u.length)&&(l=u.length);for(var d=0,m=Array(l);d<l;d++)m[d]=u[d];return m}function dt(u){if(Array.isArray(u))return u}function ut(u){if(Array.isArray(u))return et(u)}function gt(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function Q(u,l,d){return l=xt(l),Yt(u,_t()?Reflect.construct(l,d||[],xt(u).constructor):l.apply(u,d))}function it(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function ct(u,l,d){if(_t())return Reflect.construct.apply(null,arguments);var m=[null];m.push.apply(m,l);var b=new(u.bind.apply(u,m));return d&&qt(b,d.prototype),b}function ht(u,l){for(var d=0;d<l.length;d++){var m=l[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,O0(m.key),m)}}function Mt(u,l,d){return l&&ht(u.prototype,l),d&&ht(u,d),Object.defineProperty(u,"prototype",{writable:!1}),u}function At(u,l){var d=typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(!d){if(Array.isArray(u)||(d=na(u))||l){d&&(u=d);var m=0,b=function(){};return{s:b,n:function(){return m>=u.length?{done:!0}:{done:!1,value:u[m++]}},e:function(v){throw v},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,h=!0,p=!1;return{s:function(){d=d.call(u)},n:function(){var v=d.next();return h=v.done,v},e:function(v){p=!0,y=v},f:function(){try{h||d.return==null||d.return()}finally{if(p)throw y}}}}function xt(u){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},xt(u)}function Dt(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),l&&qt(u,l)}function lt(u){try{return Function.toString.call(u).indexOf("[native code]")!==-1}catch{return typeof u=="function"}}function _t(){try{var u=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_t=function(){return!!u})()}function Nt(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function at(u,l){var d=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(d!=null){var m,b,y,h,p=[],v=!0,w=!1;try{if(y=(d=d.call(u)).next,l===0){if(Object(d)!==d)return;v=!1}else for(;!(v=(m=y.call(d)).done)&&(p.push(m.value),p.length!==l);v=!0);}catch(T){w=!0,b=T}finally{try{if(!v&&d.return!=null&&(h=d.return(),Object(h)!==h))return}finally{if(w)throw b}}return p}}function Ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(u,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gt(u)}function qt(u,l){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,m){return d.__proto__=m,d},qt(u,l)}function vt(u,l){return dt(u)||at(u,l)||na(u,l)||Ut()}function te(u){return dt(u)||Nt(u)||na(u)||Ut()}function ae(u){return ut(u)||Nt(u)||na(u)||st()}function ln(u,l){if(typeof u!="object"||!u)return u;var d=u[Symbol.toPrimitive];if(d!==void 0){var m=d.call(u,l);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}function O0(u){var l=ln(u,"string");return typeof l=="symbol"?l:l+""}function ea(u){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},ea(u)}function na(u,l){if(u){if(typeof u=="string")return et(u,l);var d={}.toString.call(u).slice(8,-1);return d==="Object"&&u.constructor&&(d=u.constructor.name),d==="Map"||d==="Set"?Array.from(u):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?et(u,l):void 0}}function ra(u){var l=typeof Map=="function"?new Map:void 0;return ra=function(d){if(d===null||!lt(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(d))return l.get(d);l.set(d,m)}function m(){return ct(d,arguments,xt(this).constructor)}return m.prototype=Object.create(d.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),qt(m,d)},ra(u)}function D0(){var u=G().period(14),l=function(v,w){return w+(v[v.length-1]-w)/v.length},d=function(v){var w=vt(v,2),T=w[0],S=w[1];return T<S?0:T-S},m=function(v){var w=vt(v,2),T=w[0],S=w[1];return T>S?0:S-T},b=function(v,w){return w!==void 0?l(v,w):r.mean(v)},y=function(){var v,w,T;return function(S){if(!S){v!==void 0&&(v=NaN);return}if(v===void 0){v=S[0];return}var N=r.pairs([v].concat(ae(S)));w=b(N.map(d),w),T=b(N.map(m),T);var O=isNaN(v)?NaN:T/w;return J(100-100/(1+O))}},h=function(v){var w=y();return u.accumulator(w),u(v)};return M(h,u,"period","value"),h}function dc(){var u=G().accumulator(function(d){return d&&r.mean(d)}),l=function(m){return u(m)};return M(l,u,"period","value"),l}function R0(){var u=function(p,v){return p.close},l=function(p,v){return p.high},d=function(p,v){return p.low},m=G().period(5).defined(function(h){return u(h)!=null&&l(h)!=null&&d(h)!=null}).accumulator(function(h){var p=h&&r.max(h,l),v=h&&r.min(h,d),w=h&&100*(u(h[h.length-1])-v)/(p-v);return J(w)}),b=dc().period(3),y=function(p){var v=m(p),w=b(v);return v.map(function(T,S){return{k:T,d:w[S]}})};return y.closeValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},y.highValue=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y.lowValue=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],y):d},B(y,m,q({period:"kPeriod"})),B(y,b,q({period:"dPeriod"})),y}function C0(){var u=function(h,p){return h.volume},l=function(h,p){return h.close},d=Z().period(13),m=G().period(2).defined(function(y){return l(y)!=null&&u(y)!=null}).accumulator(function(y){return y&&J((l(y[1])-l(y[0]))*u(y[1]))}),b=function(h){var p=m(h);return d(p)};return b.volumeValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.closeValue=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},M(b,d,"period"),b}function L0(){var u=.1,l=nt,d=function(b){return b.map(function(y){var h=J(l(y)*(1-u)),p=J(l(y)*(1+u));return{lower:h,upper:p}})};return d.factor=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},d.value=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},d}function I0(){var u=function(h,p){return h.close},l=function(h,p){return h.high},d=function(h,p){return h.low},m=Z().period(13),b=function(h){return m.value(u),r.zip(h,m(h)).map(function(p){var v=J(l(p[0])-p[1]),w=J(d(p[0])-p[1]);return{bullPower:v,bearPower:w}})};return b.closeValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.highValue=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},b.lowValue=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},M(b,m,"period"),b}function hc(){var u={};return u.distance=function(l,d){return d-l},u.offset=function(l,d){return l instanceof Date?new Date(l.getTime()+d):l+d},u.clampUp=function(l){return l},u.clampDown=function(l){return l},u.copy=function(){return u},u}function B0(u,l){var d=u.map(l.clampUp);return d.length,new Set(d.map(function(m){return m==null?void 0:m.valueOf()})).size,d}function gc(u){var l=this;arguments.length||(u=i.scaleIdentity());var d=hc(),m=function(y){var h=u.domain(),p=u.range(),v=d.distance(h[0],h[1]),w=d.distance(h[0],y),T=w/v,S=T*(p[1]-p[0])+p[0];return S};return m.invert=function(b){var y=u.domain(),h=u.range(),p=(b-h[0])/(h[1]-h[0]),v=d.distance(y[0],y[1]),w=p*v;return d.offset(y[0],w)},m.domain=function(){if(!arguments.length)return u.domain();var b=arguments.length<=0?void 0:arguments[0],y=d.clampUp(b[0]),h=d.clampDown(b[1]);return u.domain([y,h]),m},m.nice=function(){u.nice();var b=u.domain(),y=d.clampUp(b[0]),h=d.clampDown(b[1]);return u.domain([y,h]),m},m.ticks=function(){for(var b=arguments.length,y=new Array(b),h=0;h<b;h++)y[h]=arguments[h];var p=u.ticks.apply(l,y);return B0(p,d)},m.copy=function(){return gc(u.copy()).discontinuityProvider(d.copy())},m.discontinuityProvider=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},B(m,u,U("range","rangeRound","interpolate","clamp","tickFormat")),m}var mc=function(l,d,m,b){var y={sunday:0,monday:1,saturday:6},h=24*3600*1e3,p=h*5,v=h*7,w={},T=function(N){return l(N)===0||l(N)===6};return w.clampDown=function(S){if(S&&T(S)){var N=d.ceil(S);return l(N)===y.sunday?d.offset(N,-1):l(N)===y.monday?d.offset(N,-2):N}else return S},w.clampUp=function(S){if(S&&T(S)){var N=d.floor(S);return l(N)===y.saturday?d.offset(N,2):l(N)===y.sunday?d.offset(N,1):N}else return S},w.distance=function(S,N){S=w.clampUp(S),N=w.clampDown(N);var O=m.ceil(S);if(N<O)return N.getTime()-S.getTime();var C=O.getTime()-S.getTime(),R=m.ceil(N),L=R.getTime()-N.getTime(),$=Math.round((R.getTime()-O.getTime())/v);return $*p+C-L},w.offset=function(S,N){var O=T(S)?w.clampUp(S):S;if(N===0)return O;var C=N<0,R=N>0,L=N,$=C?b.floor(O):m.ceil(O);if(L-=$.getTime()-O.getTime(),C&&L>0||R&&L<0)return new Date(O.getTime()+N);O=C?$:d.offset($,2);var F=Math.floor(L/p);return O=d.offset(O,F*7),L-=F*p,O=new Date(O.getTime()+L),O},w.copy=function(){return w},w},k0=function(){return mc(function(u){return u.getDay()},a.timeDay,a.timeSaturday,a.timeMonday)},P0=function(){return mc(function(u){return u.getUTCDay()},a.utcDay,a.utcSaturday,a.utcMonday)},$0=function(){for(var l=arguments.length,d=new Array(l),m=0;m<l;m++)d[m]=arguments[m];var b=function(w,T){return w>T[0]&&w<T[1]},y=function(w,T){return w[0]>=T[0]&&w[1]<=T[1]},h={};h.distance=function(v,w){v=h.clampUp(v),w=h.clampDown(w);var T=d.filter(function(N){return y(N,[v,w])}),S=T.map(function(N){return N[1]-N[0]});return w-v-S.reduce(function(N,O){return N+O},0)};var p=function(w,T){return w instanceof Date?new Date(w.getTime()+T):w+T};return h.offset=function(v,w){if(w>0){for(var T=h.clampUp(v),S=w;S>0;){var N=d.filter(function(X){return X[0]>T}).sort(function(X,tt){return X[0]-tt[0]});if(N.length){var O=N[0],C=O[0]-T;C>S?(T=p(T,S),S=0):(T=O[1],S-=C)}else T=p(T,S),S=0}return T}else{for(var R=h.clampDown(v),L=w;L<0;){var $=d.filter(function(X){return X[1]<R}).sort(function(X,tt){return tt[0]-X[0]});if($.length){var F=$[0],z=F[1]-R;z<L?(R=p(R,L),L=0):(R=F[0],L-=z)}else R=p(R,L),L=0}return R}},h.clampUp=function(v){return d.reduce(function(w,T){return b(w,T)?T[1]:w},v)},h.clampDown=function(v){return d.reduce(function(w,T){return b(w,T)?T[0]:w},v)},h.copy=function(){return h},h},ia=24*3600*1e3,He="00:00:00.000",W0="SOD",V0="EOD";function pc(u){if(arguments.length!==1||typeof u!="string")throw"Expected single argument of type string";var l=function(h,p){return Number.isInteger(h)?h>=0&&h<=p:!1},d=[0,0,0,0],m=u.split(":");if(m.length<2||m.length>3)throw"Expected an argument wiht 2 or 3 colon delimited parts.";if(d[0]=l(parseInt(m[0],10),23)?parseInt(m[0],10):function(){throw"'Hours' component must be an int between 0 and 23, but was '".concat(m[0],"'")}(),d[1]=l(parseInt(m[1],10),59)?parseInt(m[1],10):function(){throw"'Minutes' component must be an int between 0 and 59, but was '".concat(m[1],"'")}(),m.length===3){var b=m[2].split(".").map(function(y){return parseInt(y,10)});d[2]=l(b[0],59)?b[0]:function(){throw"'Seconds' component must be an int between 0 and 59, but was '".concat(b[0],"'")}(),b.length===2&&(d[3]=l(b[1],999)?b[1]:function(){throw"'Miliseconds' component must be an int between 0 and 999, but was '".concat(b[1],"'")}())}return"".concat(d[0].toString(10).padStart(2,"0"),":").concat(d[1].toString(10).padStart(2,"0"),":").concat(d[2].toString(10).padStart(2,"0"),".").concat(d[3].toString(10).padStart(3,"0"))}function z0(u,l){if(arguments.length!=2||!Array.isArray(u)||u.length!==2||typeof u[0]!="string"||typeof u[1]!="string")throw"Expected argument is a single string[] of length 2.";u[0]===W0&&(u[0]=He),u[1]===V0&&(u[1]=He);var d=pc(u[0]),m=pc(u[1]);if(m!==He&&d>m)throw"Time range start time '".concat(d,"' must be before end time '").concat(m,"' or both must equal ").concat(He);var b=l.setTime(new Date(m===He?ia:0),m)-l.setTime(new Date(0),d),y={startTime:d,endTime:m,lenghtInMs:b};return y.isInRange=function(h){var p=l.getTimeString(h);return y.startTime<=p&&(y.endTime===He||y.endTime>p)},y}var nr=function(l,d){var m=l.map(function(p){return z0(p,d)}).sort(function(p,v){return p.startTime<v.startTime?-1:p.startTime>v.startTime?1:0}),b=ia-m.reduce(function(p,v){return p+v.lenghtInMs},0),y=function(v,w){if(v.getTime()===w.getTime())return 0;if(d.dayInterval(v).getTime()!==d.dayInterval(w).getTime()&&d.getStartOfNextDay(v).getTime()!==w.getTime())throw"tradingDay.totalTradingMillisecondsBetween arguments must be on the same day or intervalEnd must be the start of the next day instead: intervalStart: '".concat(v,"'; intervalEnd: '").concat(w,"'");var T=0,S=m.filter(function($){return $.endTime===He||d.setTime(v,$.endTime)>=v}),N=At(S),O;try{for(N.s();!(O=N.n()).done;){var C=O.value,R=d.setTime(v,C.startTime),L=C.endTime===He?d.getStartOfNextDay(v):d.setTime(v,C.endTime);if(v<R&&w<R)return T+d.msInterval.count(v,w);if(v<R&&(T+=d.msInterval.count(v,R)),w<L)return T;v=L}}catch($){N.e($)}finally{N.f()}return T+d.msInterval.count(v,w)},h=function(v,w){if(w===0)return[v,w];var T=d.msInterval.offset(v,w),S=w>0?m.filter(function(X){return d.setTime(v,X.startTime)>=v}):m.filter(function(X){return d.setTime(v,X.startTime)<v}).reverse();if(S.length===0)return[d.msInterval.offset(v,w),0];if(w>0){var N=At(S),O;try{for(N.s();!(O=N.n()).done;){var C=O.value,R=d.setTime(v,C.startTime);R<=T&&(w-=d.msInterval.count(v,R),v=C.endTime===He?d.getStartOfNextDay(v):d.setTime(v,C.endTime),T=d.msInterval.offset(v,w))}}catch(X){N.e(X)}finally{N.f()}w-=d.msInterval.count(v,T)}else{var L=At(S),$;try{for(L.s();!($=L.n()).done;){var F=$.value,z=F.endTime===He?d.getStartOfNextDay(v):d.setTime(v,F.endTime);T<z&&(w+=d.msInterval.count(z,v)+1,v=d.msInterval.offset(d.setTime(v,F.startTime),-1),T=d.msInterval.offset(v,w))}}catch(X){L.e(X)}finally{L.f()}w+=d.msInterval.count(T,v)}if(w!==0)throw"tradingDay.offset was called with an offset that spans more than a day";return[T,w]};return{totalTradingTimeInMiliseconds:b,nonTradingTimeRanges:m,totalTradingMillisecondsBetween:y,offset:h}},vc=function(l,d,m,b,y){var h={};return h.getTimeComponentArrayFromString=function(p){return[p.slice(0,2),p.slice(3,5),p.slice(6,8),p.slice(9,12)]},h.getTimeString=function(p){var v=m(p).map(function(C){return C.toString(10).padStart(2,"0")}),w=vt(v,4),T=w[0],S=w[1],N=w[2],O=w[3];return"".concat(T,":").concat(S,":").concat(N,".").concat(O.padStart(3,"0"))},h.setTime=function(p,v){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,T=h.getTimeComponentArrayFromString(v),S=vt(T,4),N=S[0],O=S[1],C=S[2],R=S[3];return y.offset(l(p,N,O,C,R),w)},h.getStartOfNextDay=function(p){return b.offset(b.floor(p),1)},h.getEndOfPreviousDay=function(p){return y.offset(b.floor(p),-1)},h.dayInterval=b,h.msInterval=y,h.getDay=d,h},F0=vc(function(u,l,d,m,b){return new Date(u.getFullYear(),u.getMonth(),u.getDate(),l,d,m,b)},function(u){return u.getDay()},function(u){return[u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds()]},a.timeDay,a.timeMillisecond),bc=function(l,d){var m=function(v){return l[v]===void 0?[]:l[v]},b=[nr(m("Sunday"),d),nr(m("Monday"),d),nr(m("Tuesday"),d),nr(m("Wednesday"),d),nr(m("Thursday"),d),nr(m("Friday"),d),nr(m("Saturday"),d)],y=b.reduce(function(p,v){return p+v.totalTradingTimeInMiliseconds},0);if(y===0)throw"Trading pattern must yield at least 1 ms of trading time";var h={tradingDays:b,totalTradingWeekMilliseconds:y};return h.clampUp=function(p){var v=b[d.getDay(p)],w=At(v.nonTradingTimeRanges),T;try{for(w.s();!(T=w.n()).done;){var S=T.value;if(S.isInRange(p))return S.endTime===He?h.clampUp(d.getStartOfNextDay(p)):d.setTime(p,S.endTime)}}catch(N){w.e(N)}finally{w.f()}return p},h.clampDown=function(p){var v=b[d.getDay(p)],w=At(v.nonTradingTimeRanges),T;try{for(w.s();!(T=w.n()).done;){var S=T.value;if(S.isInRange(p))return S.startTime===He?h.clampDown(d.getEndOfPreviousDay(p)):d.setTime(p,S.startTime,-1)}}catch(N){w.e(N)}finally{w.f()}return p},h.distance=function(p,v){if(p.getTime()===v.getTime())return 0;var w=p<=v?[p,v,1]:[v,p,-1],T=vt(w,3),S=T[0],N=T[1],O=T[2];if(d.dayInterval(S).getTime()===d.dayInterval(N).getTime())return h.tradingDays[d.getDay(S)].totalTradingMillisecondsBetween(S,N);var C=h.tradingDays[d.getDay(S)].totalTradingMillisecondsBetween(S,d.dayInterval.offset(d.dayInterval(S),1))+h.tradingDays[d.getDay(N)].totalTradingMillisecondsBetween(d.dayInterval(N),N);return d.dayInterval.count(S,N)===1?C:(S=d.dayInterval.offset(d.dayInterval(S),1),N=d.dayInterval(N),O*d.dayInterval.range(S,N).reduce(function(R,L,$,F){var z=$<F.length-1?F[$+1]:d.dayInterval.offset(L,1),X=z-L!==ia,tt=h.tradingDays[d.getDay(L)];return R+=X?tt.totalTradingMillisecondsBetween(L,z):tt.totalTradingTimeInMiliseconds},C))},h.offset=function(p,v){p=v>=0?h.clampUp(p):h.clampDown(p);var w=function(X){return d.dayInterval.offset(X)-d.dayInterval(X)!==ia},T=function(X,tt,bt){if(bt<0){var wt=d.dayInterval(tt),yt=X.totalTradingMillisecondsBetween(wt,tt);return Math.abs(bt)<=yt?X.offset(tt,bt):[h.clampDown(d.msInterval.offset(wt,-1)),bt+yt+1]}else{var Bt=d.getStartOfNextDay(tt),ge=X.totalTradingMillisecondsBetween(tt,Bt);return bt<ge?X.offset(tt,bt):[h.clampUp(Bt),bt-ge]}};if(v===0)return p;var S=v<0?function(z,X,tt){return[h.clampDown(d.dayInterval.offset(z,-1)),X+tt]}:function(z,X,tt){return[h.clampUp(d.dayInterval.offset(z)),X-tt]},N=h.tradingDays[d.getDay(p)],O=T(N,p,v),C=vt(O,2);for(p=C[0],v=C[1];v!==0;)if(N=h.tradingDays[d.getDay(p)],w(p)){var R=T(N,p,v),L=vt(R,2);p=L[0],v=L[1]}else{var $=Math.abs(v)>=N.totalTradingTimeInMiliseconds?S(p,v,N.totalTradingTimeInMiliseconds):T(N,p,v),F=vt($,2);p=F[0],v=F[1]}return p},h.copy=function(){return h},h},U0=function(u){return bc(u,F0)},Y0=vc(function(u,l,d,m,b){return new Date(Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),l,d,m,b))},function(u){return u.getUTCDay()},function(u){return[u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()]},a.utcDay,a.utcMillisecond),H0=function(u){return bc(u,Y0)};function yc(){var u=[function(h){return h}],l=[0,0],d="percent",m=null,b=[],y=function(p){var v=new Array(p.length),w=At(u),T;try{for(w.s();!(T=w.n()).done;)for(var S=T.value,N=0;N<p.length;N++){var O=S(p[N],N);Array.isArray(O)?v.push.apply(v,ae(O)):v.push(O)}}catch($){w.e($)}finally{w.f()}var C=[r.min(v),r.max(v)];if(C[0]=C[0]==null?r.min(b):r.min([C[0]].concat(ae(b))),C[1]=C[1]==null?r.max(b):r.max([C[1]].concat(ae(b))),m!=null){var R=Math.max(Math.abs(C[1]-m),Math.abs(C[0]-m));C[0]=m-R,C[1]=m+R}switch(d){case"domain":{C[0]-=l[0],C[1]+=l[1];break}case"percent":{var L=C[1]-C[0];C[0]-=l[0]*L,C[1]+=l[1]*L;break}default:throw new Error("Unknown padUnit: ".concat(d))}return C};return y.accessors=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},y.pad=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y.padUnit=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],y):d},y.include=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],y):b},y.symmetricalAbout=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],y):m},y}function _c(){var u=[],l=[0,0],d="percent",m=null,b=[],y=yc(),h=function(w){return w!=null?w.valueOf():null},p=function(w){var T=u.map(function(S){return function(){var N=S.apply(void 0,arguments);return Array.isArray(N)?N.map(h):h(N)}});return y.accessors(T).pad(l).padUnit(d).symmetricalAbout(m!=null?m.valueOf():null).include(b.map(function(S){return S.valueOf()})),y(w).map(function(S){return new Date(S)})};return p.accessors=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],p):u},p.pad=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],p):l},p.padUnit=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],p):d},p.include=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],p):b},p.symmetricalAbout=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],p):m},p}function wc(){var u=1,l=20,d=.1,m=.1,b=o.randomNormal(),y=function(){for(var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,v=u/l,w=[],T=0;T<l+1;T++){w.push(p);var S=b()*Math.sqrt(v)*m+(d-m*m/2)*v;p=p*Math.exp(S)}return w};return y.period=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},y.steps=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y.mu=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],y):d},y.sigma=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],y):m},y.random=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],y):b},y}function X0(u){return typeof u=="function"?u:function(){return u}}function q0(){var u=new Date,l=100,d=a.timeDay,m=1,b=a.timeYear,y=1,h=null,p=function(){var R=o.randomNormal(1,.1);return Math.ceil(R()*1e3)},v=wc(),w=function(R){var L=b.offset(R,y)-R;return(d.offset(R,m)-R)/L},T=function(R,L){var $=w(R),F=v.period($)(L),z={date:R,open:F[0],high:Math.max.apply(Math,F),low:Math.min.apply(Math,F),close:F[v.steps()]};return z.volume=p(z),z},S=function(R){var L,$,F;do L=R?d.offset(R.date,m):new Date(u.getTime()),$=R?R.close:l,R=T(L,$),F=h&&!h(R);while(F);return R},N=function(){var R,L={};return L.next=function(){var $=S(R);return R=$,$},L.take=function($){return L.until(function(F,z){return!$||$<0||z===$})},L.until=function($){for(var F=[],z=0,X=S(R),tt=$&&!$(X,z);tt;)F.push(X),R=X,X=S(R),z+=1,tt=$&&!$(X,z);return F},L},O=function(R){return N().take(R)};if(O.stream=N,typeof Symbol!="function"||ea(Symbol.iterator)!=="symbol")throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return O[Symbol.iterator]=function(){var C=N();return{next:function(){return{value:C.next(),done:!1}}}},O.startDate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],O):u},O.startPrice=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],O):l},O.interval=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],O):d},O.intervalStep=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],O):m},O.unitInterval=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],O):b},O.unitIntervalStep=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],O):y},O.filter=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],O):h},O.volume=function(){return arguments.length?(p=X0(arguments.length<=0?void 0:arguments[0]),O):p},B(O,v),O}function G0(u){var l=u.date.getDay();return!(l===0||l===6)}function j0(){var u="BTC-USD",l=null,d=null,m=null,b=function(){var h=[];l!=null&&h.push("start="+l.toISOString()),d!=null&&h.push("end="+d.toISOString()),m!=null&&h.push("granularity="+m);var p="https://api.gdax.com/products/"+u+"/candles?"+h.join("&");return s.json(p).then(function(v){return v.map(function(w){return{date:new Date(w[0]*1e3),open:w[3],high:w[2],low:w[1],close:w[4],volume:w[5]}})})};return b.product=function(y){return arguments.length?(u=y,b):u},b.start=function(y){return arguments.length?(l=y,b):l},b.end=function(y){return arguments.length?(d=y,b):d},b.granularity=function(y){return arguments.length?(m=y,b):m},b}function aa(){var u=10,l=function(m){return u<=1?m.map(function(b){return[b]}):r.range(0,Math.ceil(m.length/u)).map(function(b){return m.slice(b*u,(b+1)*u)})};return l.bucketSize=function(d){return arguments.length?(u=d,l):u},l}function J0(){var u=aa(),l=function(h){return h},d=function(h){return h},m=function(h){if(u.bucketSize()>=h.length)return h;var p=b(h),v=u(p),w=u(h.slice(1,h.length-1)),T=w.map(function(S,N){var O=v[N],C=r.max(O),R=O.indexOf(C);return S[R]});return[].concat([h[0]],T,[h[h.length-1]])};function b(y){var h=y.map(function(v){return[l(v),d(v)]}),p=r.range(1,h.length-1).map(function(v){var w=h[v-1],T=h[v],S=h[v+1];return .5*Math.abs((w[0]-S[0])*(T[1]-w[1])-(w[0]-T[0])*(S[1]-w[1]))});return p}return M(m,u,"bucketSize"),m.x=function(y){return arguments.length?(l=y,m):l},m.y=function(y){return arguments.length?(d=y,m):d},m}function Z0(){var u=function(y){return y},l=function(y){return y},d=aa(),m=function(y){if(d.bucketSize()>=y.length)return y;var h=d(y.slice(1,y.length-1)),p=y[0],v=y[y.length-1],w=[].concat([p],h,[v]),T=u(p),S=l(p),N=h.map(function(O,C){var R=r.mean(w[C+1],u),L=r.mean(w[C+1],l),$=O.map(function(tt){return[u(tt),l(tt)]}),F=$.map(function(tt){return .5*Math.abs((T-R)*(tt[1]-S)-(T-tt[0])*(L-S))}),z=F.indexOf(r.max(F)),X=$[z];return T=X[0],S=X[1],O[z]});return[].concat([y[0]],N,[y[y.length-1]])};return M(m,d,"bucketSize"),m.x=function(b){return arguments.length?(u=b,m):u},m.y=function(b){return arguments.length?(l=b,m):l},m}function Q0(){var u=aa(),l=function(b){return b},d=function(b){if(u.bucketSize()>b.length)return b;var y=r.extent(b,l),h=u(b.slice(1,b.length-1)),p=h.map(function(v,w){var T={},S,N,O=!0,C=v.map(l),R=C.filter(function(L){return L===y[0]||L===y[1]}).map(function(L){return C.indexOf(L)})[0];return R!==void 0?v[R]:(C.forEach(function(L,$){T[L]===void 0&&(T[L]=0),T[L]++,T[L]>T[S]||S===void 0?(S=L,N=$,O=!0):T[L]===T[S]&&(O=!1)}),O?v[N]:v[Math.floor(v.length/2)])});return[].concat([b[0]],p,[b[b.length-1]])};return M(d,u,"bucketSize"),d.value=function(m){return arguments.length?(l=m,d):l},d}var $t=function(u){return typeof u=="function"?u:function(){return u}},Uo=function(){var u=null,l=function(T){return T.date},d=function(T){return T.open},m=function(T){return T.high},b=function(T){return T.low},y=function(T){return T.close},h="vertical",p=$t(3),v=function(T){var S=u||c.path();return T.forEach(function(N,O){var C=l(N,O),R=d(N,O),L=m(N,O),$=b(N,O),F=y(N,O),z=p(N,O)/2;h==="vertical"?(S.moveTo(C,$),S.lineTo(C,L),S.moveTo(C,R),S.lineTo(C-z,R),S.moveTo(C,F),S.lineTo(C+z,F)):(S.moveTo($,C),S.lineTo(L,C),S.moveTo(R,C),S.lineTo(R,C+z),S.moveTo(F,C),S.lineTo(F,C-z))}),u?null:S.toString()};return v.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.x=function(){return arguments.length?(l=$t(arguments.length<=0?void 0:arguments[0]),v):l},v.open=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),v):d},v.high=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),v):m},v.low=function(){return arguments.length?(b=$t(arguments.length<=0?void 0:arguments[0]),v):b},v.close=function(){return arguments.length?(y=$t(arguments.length<=0?void 0:arguments[0]),v):y},v.width=function(){return arguments.length?(p=$t(arguments.length<=0?void 0:arguments[0]),v):p},v.orient=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v},Dr=function(){var u=null,l=function(w){return w.x},d=function(w){return w.y},m="center",b="center",y=function(w){return w.height},h=$t(3),p=function(w,T){var S=u||c.path();return w.forEach(function(N,O){var C=l.call(this,N,T||O),R=d.call(this,N,T||O),L=y.call(this,N,T||O),$=h.call(this,N,T||O),F;switch(m){case"left":F=$;break;case"right":F=0;break;case"center":F=$/2;break;default:throw new Error("Invalid horizontal alignment "+m)}var z;switch(b){case"bottom":z=-L;break;case"top":z=0;break;case"center":z=L/2;break;default:throw new Error("Invalid vertical alignment "+b)}S.rect(C-F,R-z,$,L)},this),u?null:S.toString()};return p.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],p):u},p.x=function(){return arguments.length?(l=$t(arguments.length<=0?void 0:arguments[0]),p):l},p.y=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),p):d},p.width=function(){return arguments.length?(h=$t(arguments.length<=0?void 0:arguments[0]),p):h},p.horizontalAlign=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],p):m},p.height=function(){return arguments.length?(y=$t(arguments.length<=0?void 0:arguments[0]),p):y},p.verticalAlign=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],p):b},p},Yo=function(){var u=null,l=function(w){return w.date},d=function(w){return w.open},m=function(w){return w.high},b=function(w){return w.low},y=function(w){return w.close},h=$t(3),p=function(w){var T=u||c.path();return w.forEach(function(S,N){var O=l(S,N),C=d(S,N),R=m(S,N),L=b(S,N),$=y(S,N),F=h(S,N),z=F/2;T.rect(O-z,C,F,$-C),T.moveTo(O,Math.min($,C)),T.lineTo(O,R),T.moveTo(O,Math.max($,C)),T.lineTo(O,L)}),u?null:T.toString()};return p.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],p):u},p.x=function(){return arguments.length?(l=$t(arguments.length<=0?void 0:arguments[0]),p):l},p.open=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),p):d},p.high=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),p):m},p.low=function(){return arguments.length?(b=$t(arguments.length<=0?void 0:arguments[0]),p):b},p.close=function(){return arguments.length?(y=$t(arguments.length<=0?void 0:arguments[0]),p):y},p.width=function(){return arguments.length?(h=$t(arguments.length<=0?void 0:arguments[0]),p):h},p},Ho=function(){var u=null,l=function(N){return N.value},d=function(N){return N.median},m=function(N){return N.upperQuartile},b=function(N){return N.lowerQuartile},y=function(N){return N.high},h=function(N){return N.low},p="vertical",v=$t(5),w=$t(.5),T=function(N){var O=u||c.path();return N.forEach(function(C,R){var L=l(C,R),$=v(C,R),F=$/2,z=$*w(C,R),X=z/2,tt=y(C,R),bt=m(C,R),wt=d(C,R),yt=b(C,R),Bt=h(C,R),ge=yt-bt;p==="vertical"?(O.moveTo(L-X,tt),O.lineTo(L+X,tt),O.moveTo(L,tt),O.lineTo(L,bt),O.rect(L-F,bt,$,ge),O.moveTo(L-F,wt),O.lineTo(L+F,wt),O.moveTo(L,yt),O.lineTo(L,Bt),O.moveTo(L-X,Bt),O.lineTo(L+X,Bt)):(O.moveTo(Bt,L-X),O.lineTo(Bt,L+X),O.moveTo(Bt,L),O.lineTo(yt,L),O.rect(yt,L-F,-ge,$),O.moveTo(wt,L-F),O.lineTo(wt,L+F),O.moveTo(bt,L),O.lineTo(tt,L),O.moveTo(tt,L-X),O.lineTo(tt,L+X))}),u?null:O.toString()};return T.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],T):u},T.value=function(){return arguments.length?(l=$t(arguments.length<=0?void 0:arguments[0]),T):l},T.median=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),T):d},T.upperQuartile=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),T):m},T.lowerQuartile=function(){return arguments.length?(b=$t(arguments.length<=0?void 0:arguments[0]),T):b},T.high=function(){return arguments.length?(y=$t(arguments.length<=0?void 0:arguments[0]),T):y},T.low=function(){return arguments.length?(h=$t(arguments.length<=0?void 0:arguments[0]),T):h},T.width=function(){return arguments.length?(v=$t(arguments.length<=0?void 0:arguments[0]),T):v},T.orient=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],T):p},T.cap=function(){return arguments.length?(w=$t(arguments.length<=0?void 0:arguments[0]),T):w},T},Xo=function(){var u=null,l=function(v){return v.x},d=function(v){return v.high},m=function(v){return v.low},b="vertical",y=$t(5),h=function(v){var w=u||c.path();return v.forEach(function(T,S){var N=l(T,S),O=y(T,S),C=O/2,R=d(T,S),L=m(T,S);b==="vertical"?(w.moveTo(N-C,R),w.lineTo(N+C,R),w.moveTo(N,R),w.lineTo(N,L),w.moveTo(N-C,L),w.lineTo(N+C,L)):(w.moveTo(L,N-C),w.lineTo(L,N+C),w.moveTo(L,N),w.lineTo(R,N),w.moveTo(R,N-C),w.lineTo(R,N+C))}),u?null:w.toString()};return h.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],h):u},h.value=function(){return arguments.length?(l=$t(arguments.length<=0?void 0:arguments[0]),h):l},h.high=function(){return arguments.length?(d=$t(arguments.length<=0?void 0:arguments[0]),h):d},h.low=function(){return arguments.length?(m=$t(arguments.length<=0?void 0:arguments[0]),h):m},h.width=function(){return arguments.length?(y=$t(arguments.length<=0?void 0:arguments[0]),h):y},h.orient=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h},qo=function(u){return typeof u=="function"?u:function(){return u}},Go=1e-6,se=function(l){return l.selection()!==l},Wt=function(u,l){u=u||"g";var d=function(h,p){return p},m=null,b=function(h,p){p=p||function(R){return R};var v=h.selection(),w=se(h)?h:null,T=v.selectChildren(l==null?u:"".concat(u,".").concat(l)),S=T.data(p,d),N=S.enter().append(u).attr("class",l),O=S.exit();S=S.merge(N);var C=w||m;return C&&(S=S.transition(C).style("opacity",1),N.style("opacity",Go),O=O.transition(C).style("opacity",Go)),O.remove(),S.enter=function(){return N},S.exit=function(){return O},S};return b.element=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.className=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},b.key=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},b.transition=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],b):m},b},K0=function(u){var l=function(){},d=function(){return[0,0]},m=function(S,N){return[S.x,S.y]},b=u||function(T){return T},y=function(){},h=i.scaleIdentity(),p=i.scaleIdentity(),v=Wt("g","label"),w=function(S){S.each(function(N,O,C){var R=v(f.select(C[O]),N).call(y),L=R.nodes(),$=L.map(function(z,X){var tt=f.select(z).datum(),bt=m(tt,X,L),wt=[h(bt[0]),p(bt[1])],yt=d(tt,X,L);return{hidden:!1,x:wt[0],y:wt[1],width:yt[0],height:yt[1]}}),F=b($);R.attr("style",function(z,X){return"display:"+(F[X].hidden?"none":"inherit")}).attr("transform",function(z,X){return"translate("+F[X].x+", "+F[X].y+")"}).attr("layout-width",function(z,X){return F[X].width}).attr("layout-height",function(z,X){return F[X].height}).attr("anchor-x",function(z,X,tt){return $[X].x-F[X].x}).attr("anchor-y",function(z,X,tt){return $[X].y-F[X].y}),R.call(y),l(R,N,O)})};return B(w,v,U("key")),B(w,b),w.size=function(){return arguments.length?(d=qo(arguments.length<=0?void 0:arguments[0]),w):d},w.position=function(){return arguments.length?(m=qo(arguments.length<=0?void 0:arguments[0]),w):m},w.component=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],w):y},w.decorate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],w):l},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],w):p},w},tp=function(u){var l=2,d=function(v){return v},m=Wt("text"),b=Wt("rect"),y=Wt("circle"),h=function(v){v.each(function(w,T,S){var N=S[T],O=f.select(N),C=Number(N.getAttribute("layout-width")),R=Number(N.getAttribute("layout-height")),L=b(O,[w]);L.attr("width",C).attr("height",R);var $=Number(N.getAttribute("anchor-x")),F=Number(N.getAttribute("anchor-y")),z=y(O,[w]);z.attr("r",2).attr("cx",$).attr("cy",F);var X=m(O,[w]);X.enter().attr("dy","0.9em").attr("transform","translate(".concat(l,", ").concat(l,")")),X.text(d)})};return h.padding=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.value=function(){return arguments.length?(d=qo(arguments.length<=0?void 0:arguments[0]),h):d},h},ep=function(l,d){return!(l.x>=d.x+d.width||l.x+l.width<=d.x||l.y>=d.y+d.height||l.y+l.height<=d.y)},jo=function(u,l){if(ep(u,l)){var d=Math.max(u.x,l.x),m=Math.min(u.x+u.width,l.x+l.width),b=Math.max(u.y,l.y),y=Math.min(u.y+u.height,l.y+l.height);return(m-d)*(y-b)}else return 0},Jo=function(l,d){return r.sum(l.map(function(m,b){return d===b?0:jo(l[d],m)}))},Wn=function(l,d,m,b,y){return{x:l,y:d,width:m,height:b,location:y}},xc=function(u){var l=u.x,d=u.y,m=u.width,b=u.height;return[Wn(l,d,m,b,"bottom-right"),Wn(l-m,d,m,b,"bottom-left"),Wn(l-m,d-b,m,b,"top-left"),Wn(l,d-b,m,b,"top-right"),Wn(l,d-b/2,m,b,"middle-right"),Wn(l-m/2,d,m,b,"bottom-center"),Wn(l-m,d-b/2,m,b,"middle-left"),Wn(l-m/2,d-b,m,b,"top-center")]},Tc=function(l,d,m){return[].concat(ae(l.slice(0,d)),[m],ae(l.slice(d+1)))},np=function(l,d){return l<d},Zo=function(){var l=null,d=np,m=function(){return 0},b,y=function(v,w){return l-m(b[w],w,b)+m(v,w,Tc(b,w,v))},h=function(v,w){l||(l=r.sum(b.map(function(S,N){return m(S,N,b)})));var T=y(v,w);return d(T,l)?Zo().locationScore(m).winningScore(d).score(T).rectangles(Tc(b,w,v)):h};return h.rectangles=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h.score=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.winningScore=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},h.locationScore=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h},rp=function(){var u,l=function(y){return u?y.width*y.height-jo(y,u):0},d=function(y,h,p){return Jo(p,h)+l(y)},m=function(y){var h=Zo().locationScore(d).rectangles(y);return y.forEach(function(p,v){xc(p).forEach(function(w,T){h=h(w,v)})}),h.rectangles()};return m.bounds=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},m},ip=function(l){return l[Ac(l)]},Ac=function(l){return Math.floor(Math.random()*l.length)},ap=function(){var u=1e3,l=1,d,m=function(v){switch(v.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return v.width*v.height/8}return v.width*v.height/4},b=function(v){return d?v.width*v.height-jo(v,d):0},y=function(v,w,T){return Jo(T,w)+b(v)+m(v)},h=function(v){for(var w=u,T=function(R,L){return Math.exp((L-R)/w)>Math.random()},S=Zo().locationScore(y).winningScore(T).rectangles(v);w>0;){var N=Ac(v),O=ip(xc(v[N]));S=S(O,N),w-=l}return S.rectangles()};return h.temperature=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],h):u},h.cooling=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.bounds=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},h},op=function(l,d){return l[r.scan(l,d)]},sp=function(u){u=u||function(d){return d};var l=function(m){m=u(m);for(var b=function(){var h=m.filter(function(w){return!w.hidden}),p=h.map(function(w,T){return[w,Jo(h,T)]}),v=op(p,function(w,T){return T[1]-w[1]});if(v[1]>0)v[0].hidden=!0;else return 1};!b(););return m};return B(l,u),l},up=function(){var u=[0,0],l=function(m){return m.map(function(b,y){var h=b.x,p=b.y;return h+b.width>u[0]&&(h-=b.width),p+b.height>u[1]&&(p-=b.height),{height:b.height,width:b.width,x:h,y:p}})};return l.bounds=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l},Jt=function(u){return typeof u=="function"?u:function(){return u}};function ai(){var u=arguments;return function(l,d){for(var m=0,b=u.length;m<b;m++)if(u[m](l,d)==null)return!1;return!0}}var oi=function(u,l){switch(u){case"left":return l/2;case"right":return-l/2;default:return 0}},rr=function(u){var l=Object.assign({},u),d=function(){};return Object.keys(l).forEach(function(m){d[m]=function(){return arguments.length?(l[m]=arguments.length<=0?void 0:arguments[0],d):l[m]}}),d},Xe=function(){var u=function(){return 0},l=function(v){return v.x},d=function(v){return v.y},m="center",b=function(){return 5},y="vertical",h=rr({decorate:function(){},defined:function(v,w){return ai(u,l,d)(v,w)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return h.values=function(p,v){var w=b(p,v),T=oi(m,w),S=h.xScale(),N=h.yScale();if(y==="vertical"){var O=N(d(p,v),v),C=N(u(p,v),v),R=S(l(p,v),v)+T;return{d:p,x:R,y:O,y0:C,width:w,height:O-C,origin:[R,O],baseOrigin:[R,C],transposedX:R,transposedY:O}}else{var L=S(d(p,v),v),$=S(u(p,v),v),F=N(l(p,v),v)+T;return{d:p,x:F,y:L,y0:$,width:w,height:L-$,origin:[L,F],baseOrigin:[$,F],transposedX:L,transposedY:F}}},h.xValues=function(){return y==="vertical"?[l]:[u,d]},h.yValues=function(){return y!=="vertical"?[l]:[u,d]},h.baseValue=function(){return arguments.length?(u=Jt(arguments.length<=0?void 0:arguments[0]),h):u},h.crossValue=function(){return arguments.length?(l=Jt(arguments.length<=0?void 0:arguments[0]),h):l},h.mainValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),h):d},h.bandwidth=function(){return arguments.length?(b=Jt(arguments.length<=0?void 0:arguments[0]),h):b},h.align=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.orient=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],h):y},h},cp="#c60",lp="#6c0",fp="#000",dp="#ddd",hp="#999",ne={red:cp,green:lp,black:fp,gray:dp,darkGray:hp},Qo=function(){var u=Xe(),l=g.line().x(function(b,y){return u.values(b,y).transposedX}).y(function(b,y){return u.values(b,y).transposedY}),d=Wt("path","line"),m=function(y){se(y)&&d.transition(y),l.defined(u.defined()),y.each(function(h,p,v){var w=d(f.select(v[p]),[h]);w.enter().attr("fill","none").attr("stroke",ne.black),w.attr("d",l),u.decorate()(w,h,p)})};return B(m,u,P("baseValue","bandwidth","align")),M(m,d,"key"),M(m,l,"curve"),m},Ko=function(){var u=Xe(),l=g.line().x(function(m,b){return u.values(m,b).transposedX}).y(function(m,b){return u.values(m,b).transposedY}),d=function(b){var y=l.context();y.beginPath(),y.strokeStyle=ne.black,y.fillStyle="transparent",u.decorate()(y,b),l.defined(u.defined())(b),y.fill(),y.stroke(),y.closePath()};return B(d,u,P("baseValue","bandwidth","align")),M(d,l,"curve","context"),d},le=function(){var u=[0,1],l=[-1,1],d=function(){};return d.domain=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},d.range=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},d},Ec=function(){var u={},l={},d=null,m=function(y,h){var p=y.context();Object.keys(u).forEach(function(v){var w=u[v];if(typeof w!="function")throw new Error("Expected an attribute for ".concat(v,", found ").concat(w));var T=p.getAttribLocation(h,v);w.location(T)(y)}),Object.keys(l).forEach(function(v){var w=l[v];if(typeof w!="function")throw new Error("Expected a uniform for ".concat(v,", found ").concat(w));var T=p.getUniformLocation(h,v);w.location(T)(y)}),d!==null&&d(y)};return m.flush=function(){Object.values(u).forEach(function(b){return b.clear()}),Object.values(l).forEach(function(b){return b.clear()}),d!==null&&d.clear()},m.attribute=function(){for(var b=arguments.length,y=new Array(b),h=0;h<b;h++)y[h]=arguments[h];return y.length===1?u[y[0]]:(u[y[0]]=y[1],m)},m.uniform=function(){for(var b=arguments.length,y=new Array(b),h=0;h<b;h++)y[h]=arguments[h];return y.length===1?l[y[0]]:(l[y[0]]=y[1],m)},m.elementIndices=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},m},Fe=function(u){var l=-1,d=u,m=!0,b=function(h){if(m){var p=h.context();if(Array.isArray(d))switch(d.length){case 1:p.uniform1fv(l,d);break;case 2:p.uniform2fv(l,d);break;case 3:p.uniform3fv(l,d);break;case 4:p.uniform4fv(l,d);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(d.length," provided."))}else p.uniform1f(l,d);m=!1}};return b.clear=function(){m=!0},b.location=function(){return arguments.length?(l!==(arguments.length<=0?void 0:arguments[0])&&(l=arguments.length<=0?void 0:arguments[0],m=!0),b):l},b.data=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m=!0,b):d},b},xn={POINTS:0,TRIANGLES:4},Tn=function(){var u=null,l=null,d=null,m=null,b=null,y=null,h=xn.TRIANGLES,p=0,v=Ec(),w=!1,T=null,S=!0,N=1,O=function(F){if(u!=null){var z=d(),X=m();if(C(l,z,X)&&(l=R(z,X),b=z,y=X,S=!1),u.useProgram(l),v.uniform("uScreen",Fe([u.canvas.width/N,u.canvas.height/N])),v(O,l),p===0)v.elementIndices()==null?u.drawArrays(h,0,F):u.drawElements(h,F,u.UNSIGNED_SHORT,0);else if(v.elementIndices()==null)T.drawArraysInstancedANGLE(h,0,p,F);else{var tt=v.elementIndices().data().length;if(p!==tt)throw new Error("Expected elementIndices length ".concat(tt)+" to match subInstanceCount ".concat(p,"."));T.drawElementsInstancedANGLE(h,p,u.UNSIGNED_SHORT,0,F)}}};return O.extInstancedArrays=function(){return T},O.context=function(){for(var $=arguments.length,F=new Array($),z=0;z<$;z++)F[z]=arguments[z];return F.length?((F[0]==null||F[0]!==u)&&(v.flush(),S=!0),F[0]!=null&&F[0]!==u&&(T=F[0].getExtension("ANGLE_instanced_arrays")),u=F[0],O):u},O.buffers=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],O):v},O.vertexShader=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],O):d},O.fragmentShader=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],O):m},O.mode=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],O):h},O.subInstanceCount=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],O):p},O.debug=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],O):w},O.pixelRatio=function(){return arguments.length?(N=arguments.length<=0?void 0:arguments[0],O):N},O;function C($,F,z){return!$||S?!0:F!==b||z!==y}function R($,F){var z=L($,u.VERTEX_SHADER),X=L(F,u.FRAGMENT_SHADER),tt=u.createProgram();if(u.attachShader(tt,z),u.attachShader(tt,X),u.linkProgram(tt),w&&!u.getProgramParameter(tt,u.LINK_STATUS)){var bt=u.getProgramInfoLog(tt);throw u.deleteProgram(tt),new Error("Failed to link program : ".concat(bt,`
            Vertex Shader : `).concat($,`
            Fragment Shader : `).concat(F))}return tt}function L($,F){var z=u.createShader(F);if(u.shaderSource(z,$),u.compileShader(z),w&&!u.getShaderParameter(z,u.COMPILE_STATUS)){var X=u.getShaderInfoLog(z);throw u.deleteShader(z),new Error("Failed to compile shader : ".concat(X,`
            Shader : `).concat($))}return z}},Ht=function(u){var l=[],d=[],m=function(){return u(l.join(`
`),d.join(`
`))};function b(p,v){p.push(v)}function y(p,v,w){var T=p.indexOf(w);p.splice(T>=0?T:p.length,0,v)}function h(p,v){var w=p.indexOf(v);w===-1&&p.push(v)}return m.appendHeader=function(p){return b(l,p),m},m.insertHeader=function(p,v){return y(l,p,v),m},m.appendHeaderIfNotExists=function(p){return h(l,p),m},m.appendBody=function(p){return b(d,p),m},m.insertBody=function(p,v){return y(d,p,v),m},m.appendBodyIfNotExists=function(p){return h(d,p),m},m},Le=function(l,d){return`
precision mediump float;
float inf = 1.0 / 0.0;
`.concat(l,`
void main() {
    `).concat(d,`
}`)},Ie=function(l,d){return`
precision mediump float;
`.concat(l,`
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    `).concat(d,`
}`)},Sc={header:`attribute vec4 aFillColor;
             varying vec4 vFillColor;`,body:"vFillColor = aFillColor;"},Mc={header:`attribute vec4 aStrokeColor;
             varying vec4 vStrokeColor;`,body:"vStrokeColor = aStrokeColor;"},Nc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 2.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Oc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 4.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Dc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Rc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Cc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Lc={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Ic={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 5.0);
        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Bc={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
         (isPositiveY * isExtremeY * aLowValue) +
         (isPositiveY * isNotExtremeY * aCloseValue) +
         (isNotPositiveY * isNotExtremeY * aOpenValue) +
         (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);

        float bodyThickness = (aOpenValue == aCloseValue ? 1.0 : sign(aCloseValue - aOpenValue));
        float lineWidthYDirection = (isNotExtremeY * bodyThickness * aCorner.y);

        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},kc={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
            (isPositiveY * isExtremeY * aLowValue) +
            (isPositiveY * isNotExtremeY * aCloseValue) +
            (isNotPositiveY * isNotExtremeY * aOpenValue) +
            (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = isExtremeY * aCorner.z;
        float lineWidthYDirection = isNotExtremeY * aCorner.z;

        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Pc={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aMainValue;
        attribute float aBaseValue;
        attribute vec2 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isBaseline = (1.0 - aCorner.y) / 2.0;
        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);

        float xModifier = aCorner.x * (aBandwidth) / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},$c={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isLow = (aCorner.y + 1.0) / 2.0;
        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;

        float isEdgeCorner = abs(aCorner.x);
        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;
        float lineWidthYDirection = isEdgeCorner * aCorner.z;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);
        float yModifier = (uStrokeWidth * lineWidthYDirection);`},Wc={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aCrossNextValue;
        attribute float aMainNextValue;
        attribute float aBaseValue;
        attribute float aBaseNextValue;
        attribute float aDefined;
        attribute float aDefinedNext;

        varying float vDefined;

        float when_lt(float a, float b) {
            return max(sign(b - a), 0.0);
        }

        float and(float a, float b) {
            return a * b;
        }`,body:`
        vDefined = aDefined * aDefinedNext;
        gl_Position = vec4(0, 0, 0, 1);

        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);
        float useIntercept = and(aCorner.z, hasIntercepted);

        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);
        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);

        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);
        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);

        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);
        float interceptXValue = (y0Constant - yConstant) / denominator;
        float interceptYValue = (yGradient * interceptXValue) + yConstant;

        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);

        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));
        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));
        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));`},Vc={header:`
        attribute vec4 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aCapWidth;
        attribute float aHighValue;
        attribute float aUpperQuartileValue;
        attribute float aMedianValue;
        attribute float aLowerQuartileValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;
    `,body:`
        vDefined = aDefined;
        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;

        float isNonZeroY = abs(sign(aCorner.y));
        float isZeroY = 1.0 - isNonZeroY;

        float isQuartileY = isNotExtremeY * isNonZeroY;

        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;
        float isNegativeY = 1.0 - isPositiveY;

        float yValue =
          (isExtremeY * isNegativeY) * aHighValue +
          (isQuartileY * isNegativeY) * aUpperQuartileValue +
          isZeroY * aMedianValue +
          (isQuartileY * isPositiveY) * aLowerQuartileValue +
          (isExtremeY * isPositiveY) * aLowValue;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float isHorizontal = aCorner.w;
        float isVertical = 1.0 - isHorizontal;

        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;

        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;
        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;`},zc={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float distance = length(2.0 * gl_PointCoord - 1.0);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Fc={header:`
        varying float vSize;
        varying float vDefined;

        // anterior, exterior angles
        float an = 0.628319;
        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)
        float en = 0.952000;
        vec2 ecs = vec2(0.580055, 0.814577);
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        p -= acs;
        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);
        float d = length(p) * sign(p.x);

        float distance = 1.0 + d;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Uc={header:`
        varying float vSize;
        varying float vDefined;
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float an = 3.141593 / 3.0;
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        // box
        vec2 d = abs(p) - vec2(0.9, 0.35);
        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);

        float distance = 1.0 + sdf;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Yc={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);`},Hc={header:`
        varying float vSize;
        varying float vDefined;
        float a = 0.6;
        float b = 1.0;
    `,body:`
        if (vDefined < 0.5) {
            discard;
        }

        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;

        float x = abs(pointCoordTransform.x);
        float y = abs(pointCoordTransform.y);

        float X = (a * b * x) / (a * y + b * x);
        float Y = (a * b * y) / (a * y + b * x);

        float distance = length(vec2(x, y)) / length(vec2(X, Y));

        if (distance > 1.0) {
            discard;
        }
    `},Xc={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));
        float bottomEdgeDistance = pointCoordTransform.y + 0.5;
        float distance = max(topEdgesDistance, bottomEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},qc={header:`
        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;
        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float distance = max(innerCornerDistance, outerEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},Gc={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},jc={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},Jc={header:`
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);`},Zc={header:`
        varying float vDefined;
    `,body:`
        float canFill = 0.0;
        float canStroke = 1.0;

        if (vDefined < 0.5) {
            discard;
        }`},Qc={header:"varying float vDefined;",body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }`},Kc={header:"varying float vDefined;",body:`
        float canFill = 1.0;
        float canStroke = 0.0;

        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);

        if (vDefined < 0.5) {
            discard;
        }`},tl={header:"varying vec4 vFillColor;",body:"gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);"},el={header:"varying vec4 vStrokeColor;",body:"gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);"},gp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Wc.header).appendBody(Wc.body),l.appendHeader(Jc.header).appendBody(Jc.body),{vertex:function(){return u},fragment:function(){return l}}},Vt={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126};function ts(u){switch(u){case Vt.BYTE:case Vt.UNSIGNED_BYTE:return 1;case Vt.SHORT:case Vt.UNSIGNED_SHORT:return 2;case Vt.FLOAT:return 4;default:throw new Error("Unknown type ".concat(u))}}function nl(u){switch(u){case Vt.BYTE:return Int8Array;case Vt.UNSIGNED_BYTE:return Uint8Array;case Vt.SHORT:return Int16Array;case Vt.UNSIGNED_SHORT:return Uint16Array;case Vt.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(u))}}var oa=function(){var u=-1,l=null,d=1,m=Vt.FLOAT,b=!1,y=0,h=0,p=null,v=function(T){var S=T.context();l==null&&(l=S.createBuffer()),S.bindBuffer(S.ARRAY_BUFFER,l),S.vertexAttribPointer(u,d,m,b,y,h),S.enableVertexAttribArray(u);var N=T.extInstancedArrays();N.vertexAttribDivisorANGLE(u,p??(T.subInstanceCount()>0?1:0))};return v.location=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.buffer=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],v):l},v.size=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],v):d},v.type=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],v):m},v.normalized=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],v):b},v.stride=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],v):y},v.offset=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.divisor=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],v):p},v},mp=function(){var u=Vt.FLOAT,l=new Float32Array(0),d=function(b){var y=nl(u);return l.length>b?l=new y(l.buffer,0,b):l.length!==b&&(l=new y(b)),l};return d.type=function(){if(!arguments.length)return u;if(u!==(arguments.length<=0?void 0:arguments[0])){u=arguments.length<=0?void 0:arguments[0];var m=nl(u);l=new m(0)}return d},d},rl=function(){var u=!0,l=1,d=Vt.FLOAT,m=mp(),b=function(v,w){return v},y=null,h=function(){var v=y.length,w=m.type(d)(v*l);if(l>1)for(var T=0;T<v;T++){var S=b(y[T],T);if(S.length!==l)throw new Error("Expected components array of size ".concat(l,", recieved array with length ").concat(S.length,"."));for(var N=0;N<l;N++)w[T*l+N]=S[N]}else for(var O=0;O<v;O++){var C=b(y[O],O);if(Array.isArray(C))throw new Error("Expected a single component value, recieved array with length ".concat(C.length,"."));w[O]=C}return u=!1,w};return h.dirty=function(){return u},h.clear=function(){u=!0},h.size=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],u=!0,h):l},h.type=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],u=!0,h):d},h.arrayViewFactory=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],u=!0,h):m},h.value=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],u=!0,h):b},h.data=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],u=!0,h):y},h},Lt=function(){var u=oa(),l=rl(),d=function(b){if(u.size(d.size()).type(d.type()),u(b),!!l.dirty()){var y=l(),h=b.context();h.bindBuffer(h.ARRAY_BUFFER,u.buffer()),h.bufferData(h.ARRAY_BUFFER,y,h.DYNAMIC_DRAW)}};return d.clear=function(){u.buffer(null),l.clear()},M(d,u,"normalized","location","divisor"),M(d,l,"data","value","size","type"),d},Tt=function(u,l,d,m){for(var b=arguments.length,y=new Array(b>4?b-4:0),h=4;h<b;h++)y[h-4]=arguments[h];u[l]=function(){for(var p=arguments.length,v=new Array(p),w=0;w<p;w++)v[w]=arguments[w];var T=d[m].apply(d,y.concat(v));return T===d?u:T}},il=function(){var u=Tn().mode(xn.TRIANGLES).subInstanceCount(6),l=le(),d=le(),m=function(){},b=Lt().divisor(0).size(3).type(Vt.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);u.buffers().attribute("aCorner",b);var y=function(p){var v=gp();u.vertexShader(v.vertex()).fragmentShader(v.fragment()),l(u,"gl_Position",0),d(u,"gl_Position",1),m(u),u(p-1)};return y.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],y):m},y.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],y):d},M(y,u,"context","pixelRatio"),Tt(y,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(y,"crossNextValueAttribute",u.buffers(),"attribute","aCrossNextValue"),Tt(y,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Tt(y,"mainNextValueAttribute",u.buffers(),"attribute","aMainNextValue"),Tt(y,"baseValueAttribute",u.buffers(),"attribute","aBaseValue"),Tt(y,"baseNextValueAttribute",u.buffers(),"attribute","aBaseNextValue"),Tt(y,"definedAttribute",u.buffers(),"attribute","aDefined"),Tt(y,"definedNextAttribute",u.buffers(),"attribute","aDefinedNext"),y},al=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Nc.header).appendBody(Nc.body),l.appendHeader(zc.header).appendBody(zc.body),{vertex:function(){return u},fragment:function(){return l}}},ol=function(){var u=Tn().mode(xn.POINTS),l=le(),d=le(),m=al(),b=function(){},y=function(p){u.vertexShader(m.vertex()).fragmentShader(m.fragment()),l(u,"gl_Position",0),d(u,"gl_Position",1),b(u),u(p)};return y.type=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],y):m},y.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],y):b},y.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],y):d},M(y,u,"context","pixelRatio"),Tt(y,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(y,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Tt(y,"sizeAttribute",u.buffers(),"attribute","aSize"),Tt(y,"definedAttribute",u.buffers(),"attribute","aDefined"),y},si=function(){var u=1,l=function(m){m.buffers().uniform("uStrokeWidth",Fe(u))};return l.lineWidth=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l},ir=function(u){var l=null,d=u,m=!0,b=function(h){var p=h.context();l==null&&(l=p.createBuffer()),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),m&&(p.bufferData(p.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),p.STATIC_DRAW),m=!1)};return b.clear=function(){l=null,m=!0},b.data=function(){return arguments.length?(m=!0,d=arguments.length<=0?void 0:arguments[0],b):d},b},sl=function(){var u=Tn().mode(xn.TRIANGLES).subInstanceCount(6),l=le(),d=le(),m=function(){},b=si(),y=Lt().divisor(0).size(4).type(Vt.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);u.buffers().elementIndices(ir([0,1,2,2,3,0])).attribute("aCorner",y);var h=function(v){var w=Ht(Le),T=Ht(Ie);u.vertexShader(w).fragmentShader(T),w.appendHeader(`
            attribute vec4 aCorner;
            attribute float aCrossValue;
            attribute float aCrossNextValue;
            attribute float aMainValue;
            attribute float aMainNextValue;
            attribute float aDefined;
            attribute float aDefinedNext;

            uniform float uStrokeWidth;
            uniform vec2 uScreen;

            varying float vLength;
            varying vec2 vPosition;
        `),w.appendBody(`
            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);
            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);
        `),l(u,"value",0),l(u,"nextValue",0),d(u,"value",1),d(u,"nextValue",1),w.appendBody(`
            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;

            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);
            vec2 normal = vec2(direction.y, -direction.x);
            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));
            
            padding *= aDefined * aDefinedNext;
            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;

            gl_Position = vec4(position.x, position.y, 0.0, 1.0);

            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));
            vPosition = aCorner.xy * (uStrokeWidth / 2.0);
            vPosition.x += aCorner[3] * vLength;
        `),T.appendHeader(`
            uniform float uStrokeWidth;
            varying float vLength;
            varying vec2 vPosition;

            float canFill = 0.0;
            float canStroke = 1.0;
        `),T.appendBody(`
            vec2 position = vPosition;
            position.x -= clamp(position.x, 0.0, vLength);
            float sdf = length(position) - uStrokeWidth / 2.0;
            if (sdf > 0.5) {
                discard;
            }
        `),b(u),m(u),u(v-1)};return h.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},M(h,u,"context","pixelRatio"),M(h,b,"lineWidth"),Tt(h,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(h,"crossNextValueAttribute",u.buffers(),"attribute","aCrossNextValue"),Tt(h,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Tt(h,"mainNextValueAttribute",u.buffers(),"attribute","aMainNextValue"),Tt(h,"definedAttribute",u.buffers(),"attribute","aDefined"),Tt(h,"definedNextAttribute",u.buffers(),"attribute","aDefinedNext"),h},pp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(kc.header).appendBody(kc.body),l.appendHeader(jc.header).appendBody(jc.body),{vertex:function(){return u},fragment:function(){return l}}},ul=function(){var u=Tn().mode(xn.TRIANGLES).subInstanceCount(18),l=le(),d=le(),m=si(),b=function(){},y=Lt().divisor(0).size(3).type(Vt.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);u.buffers().elementIndices(ir([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",y);var h=function(v){var w=pp();u.vertexShader(w.vertex()).fragmentShader(w.fragment()),l(u,"gl_Position",0),d(u,"gl_Position",1),m(u),u.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),b(u),u(v)};return h.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},M(h,u,"context","pixelRatio"),M(h,m,"lineWidth"),Tt(h,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(h,"openValueAttribute",u.buffers(),"attribute","aOpenValue"),Tt(h,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Tt(h,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Tt(h,"closeValueAttribute",u.buffers(),"attribute","aCloseValue"),Tt(h,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Tt(h,"definedAttribute",u.buffers(),"attribute","aDefined"),h},vp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Pc.header).appendBody(Pc.body),l.appendHeader(Kc.header).appendBody(Kc.body),{vertex:function(){return u},fragment:function(){return l}}},cl=function(){var u=Tn().mode(xn.TRIANGLES).subInstanceCount(6),l=le(),d=le(),m=function(){},b=Lt().divisor(0).size(2).type(Vt.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);u.buffers().elementIndices(ir([0,1,2,0,1,3])).attribute("aCorner",b);var y=function(p){var v=vp();u.vertexShader(v.vertex()).fragmentShader(v.fragment()),l(u,"gl_Position",0),d(u,"gl_Position",1),u.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
        `),m(u),u(p)};return y.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],y):m},y.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],y):d},M(y,u,"context","pixelRatio"),Tt(y,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(y,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Tt(y,"baseValueAttribute",u.buffers(),"attribute","aBaseValue"),Tt(y,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Tt(y,"definedAttribute",u.buffers(),"attribute","aDefined"),y},bp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader($c.header).appendBody($c.body),l.appendHeader(Qc.header).appendBody(Qc.body),{vertex:function(){return u},fragment:function(){return l}}},ll=function(){var u=Tn().mode(xn.TRIANGLES).subInstanceCount(18),l=le(),d=le(),m=function(){},b=si(),y=Lt().divisor(0).size(3).type(Vt.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);u.buffers().elementIndices(ir([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",y);var h=function(v){var w=bp();u.vertexShader(w.vertex()).fragmentShader(w.fragment()),l(u,"gl_Position",0),d(u,"gl_Position",1),b(u),u.vertexShader().appendBody(`
                gl_Position.x += xModifier / uScreen.x * 2.0;
                gl_Position.y += yModifier / uScreen.y * 2.0;
            `),m(u),u(v)};return h.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},M(h,u,"context","pixelRatio"),M(h,b,"lineWidth"),Tt(h,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(h,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Tt(h,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Tt(h,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Tt(h,"definedAttribute",u.buffers(),"attribute","aDefined"),h},yp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Bc.header).appendBody(Bc.body),l.appendHeader(Gc.header).appendBody(Gc.body),{vertex:function(){return u},fragment:function(){return l}}},fl=function(){var u=Tn().mode(xn.TRIANGLES).subInstanceCount(12),l=le(),d=le(),m=si(),b=function(){},y=Lt().divisor(0).size(3).type(Vt.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);u.buffers().elementIndices(ir([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",y);var h=function(v){var w=yp();u.vertexShader(w.vertex()).fragmentShader(w.fragment()),l(u,"gl_Position",0),d(u,"gl_Position",1),m(u),u.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),b(u),u(v)};return h.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},M(h,u,"context","pixelRatio"),M(h,m,"lineWidth"),Tt(h,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(h,"openValueAttribute",u.buffers(),"attribute","aOpenValue"),Tt(h,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Tt(h,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Tt(h,"closeValueAttribute",u.buffers(),"attribute","aCloseValue"),Tt(h,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Tt(h,"definedAttribute",u.buffers(),"attribute","aDefined"),h},_p=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Vc.header).appendBody(Vc.body),l.appendHeader(Zc.header).appendBody(Zc.body),{vertex:function(){return u},fragment:function(){return l}}},dl=function(){var u=Tn().mode(xn.TRIANGLES).subInstanceCount(54),l=le(),d=le(),m=function(){},b=si(),y=Lt().divisor(0).size(4).type(Vt.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);u.buffers().elementIndices(ir([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",y);var h=function(v){var w=_p();u.vertexShader(w.vertex()).fragmentShader(w.fragment()),l(u,"gl_Position",0),d(u,"gl_Position",1),b(u),u.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
            gl_Position.y += yModifier / uScreen.y * 2.0;
        `),m(u),u(v)};return h.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.xScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.yScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},M(h,u,"context","pixelRatio"),M(h,b,"lineWidth"),Tt(h,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Tt(h,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Tt(h,"upperQuartileValueAttribute",u.buffers(),"attribute","aUpperQuartileValue"),Tt(h,"medianValueAttribute",u.buffers(),"attribute","aMedianValue"),Tt(h,"lowerQuartileValueAttribute",u.buffers(),"attribute","aLowerQuartileValue"),Tt(h,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Tt(h,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Tt(h,"capAttribute",u.buffers(),"attribute","aCapWidth"),Tt(h,"definedAttribute",u.buffers(),"attribute","aDefined"),h},Vn=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(u>0||l<0)throw new Error("Offset values (".concat(u," & ").concat(l,") must straddle 0 "));var d=oa(),m=rl(),b=function(h){var p=b.size()*ts(b.type()),v=Math.abs(u)*p;if(d.offset(v).size(b.size()).type(b.type()),d(h),!!m.dirty()){var w=m(),T=l*p,S=v+w.length*ts(b.type())+T,N=h.context();N.bindBuffer(N.ARRAY_BUFFER,d.buffer()),N.bufferData(N.ARRAY_BUFFER,S,N.DYNAMIC_DRAW),N.bufferSubData(N.ARRAY_BUFFER,v,w)}};return b.offset=function(y){if(u>y||y>l)throw new Error("Requested offset ".concat(y," exceeds bounds (").concat(u," & ").concat(l,") "));var h=function(v){d.offset((y-u)*b.size()*ts(b.type())),d(v)};return M(h,b,"clear","location"),h},b.clear=function(){d.buffer(null),m.clear()},M(b,d,"normalized","location","divisor"),M(b,m,"data","value","size","type"),b},sa=function(){var u=le(),l=function(b){return"linear".concat(b)},d=function(b,y,h){b.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(l(h),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(l(h),"Scale;")).appendBody("".concat(y," = ").concat(y," + ").concat(l(h),"Offset;")).appendBody("".concat(y," = ").concat(y," * ").concat(l(h),"Scale;"));var p=u.domain()[1]-u.domain()[0],v=u.range()[1]-u.range()[0],w=u.range()[0]*(p/v)-u.domain()[0],T=v/p,S=[0,0,0,0],N=[1,1,1,1];S[h]=w,N[h]=T,b.buffers().uniform("".concat(l(h),"Offset"),Fe(S)).uniform("".concat(l(h),"Scale"),Fe(N))};return B(d,u),d},hl=function(){var u=le(),l=10;function d(y,h){return Math.log10(y)/Math.log10(h)}var m=function(h){return"log".concat(h)},b=function(h,p,v){var w="".concat(m(v),"Offset + (").concat(m(v),"Scale * clamp(log(").concat(p,") / log(").concat(m(v),"Base), -inf, inf))");h.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(m(v),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(v),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(v),"Include;")).appendHeaderIfNotExists("uniform float ".concat(m(v),"Base;")).appendBody("".concat(p," = (").concat(m(v),"Include * (").concat(w,")) + ((1.0 - ").concat(m(v),"Include) * ").concat(p,");"));var T=d(u.domain()[1],l)-d(u.domain()[0],l),S=u.range()[1]-u.range()[0],N=S/T,O=u.range()[0]-N*d(u.domain()[0],l),C=[0,0,0,0],R=[0,0,0,0],L=[0,0,0,0];C[v]=O,R[v]=N,L[v]=1,h.buffers().uniform("".concat(m(v),"Offset"),Fe(C)).uniform("".concat(m(v),"Scale"),Fe(R)).uniform("".concat(m(v),"Include"),Fe(L)).uniform("".concat(m(v),"Base"),Fe(l))};return b.base=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},B(b,u),b},gl=function(){var u=le(),l=1;function d(y,h){return Math.sign(y)*Math.pow(Math.abs(y),h)}var m=function(h){return"pow".concat(h)},b=function(h,p,v){var w="".concat(m(v),"Offset + (").concat(m(v),"Scale * sign(").concat(p,") * pow(abs(").concat(p,"), vec4(").concat(m(v),"Exp)))");h.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(m(v),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(v),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(m(v),"Include;")).appendHeaderIfNotExists("uniform float ".concat(m(v),"Exp;")).appendBody("".concat(p," = (").concat(m(v),"Include * (").concat(w,")) + ((1.0 - ").concat(m(v),"Include) * ").concat(p,");"));var T=d(u.domain()[1],l)-d(u.domain()[0],l),S=u.range()[1]-u.range()[0],N=S/T,O=u.range()[0]-N*d(u.domain()[0],l),C=[0,0,0,0],R=[0,0,0,0],L=[0,0,0,0];C[v]=O,R[v]=N,L[v]=1,h.buffers().uniform("".concat(m(v),"Offset"),Fe(C)).uniform("".concat(m(v),"Scale"),Fe(R)).uniform("".concat(m(v),"Include"),Fe(L)).uniform("".concat(m(v),"Exp"),Fe(l))};return b.exponent=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},B(b,u),b},wp=i.scaleLinear().copy.toString(),xp=i.scaleLog().copy.toString(),Tp=i.scalePow().copy.toString(),Ap=i.scaleTime().copy.toString(),es=i.scaleIdentity(),Ep=Date.now(),ml=function(l){return l-Ep},zn=function(u){switch(u.copy.toString()){case wp:return{scale:es,webglScale:sa().domain(u.domain())};case Ap:return{scale:ml,webglScale:sa().domain(u.domain().map(ml))};case xp:return{scale:es,webglScale:hl().domain(u.domain()).base(u.base())};case Tp:return{scale:es,webglScale:gl().domain(u.domain()).exponent(u.exponent())};default:return{scale:u.copy(),webglScale:sa().domain(u.range())}}},Sp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Rc.header).appendBody(Rc.body),l.appendHeader(Yc.header).appendBody(Yc.body),{vertex:function(){return u},fragment:function(){return l}}},Mp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Lc.header).appendBody(Lc.body),l.appendHeader(Xc.header).appendBody(Xc.body),{vertex:function(){return u},fragment:function(){return l}}},Np=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Ic.header).appendBody(Ic.body),l.appendHeader(qc.header).appendBody(qc.body),{vertex:function(){return u},fragment:function(){return l}}},Op=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Cc.header).appendBody(Cc.body),l.appendHeader(Hc.header).appendBody(Hc.body),{vertex:function(){return u},fragment:function(){return l}}},Dp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Oc.header).appendBody(Oc.body),l.appendHeader(Fc.header).appendBody(Fc.body),{vertex:function(){return u},fragment:function(){return l}}},Rp=function(){var u=Ht(Le),l=Ht(Ie);return u.appendHeader(Dc.header).appendBody(Dc.body),l.appendHeader(Uc.header).appendBody(Uc.body),{vertex:function(){return u},fragment:function(){return l}}},pl=function(u){switch(u){case g.symbolCircle:return al();case g.symbolSquare:return Sp();case g.symbolTriangle:return Mp();case g.symbolCross:return Np();case g.symbolDiamond:return Op();case g.symbolStar:return Dp();case g.symbolWye:return Rp();default:throw new Error("Unrecognised symbol: ".concat(u))}},vl=function(u){var l=oa().divisor(1),d=u,m=!0,b=function(h){if(l(h),!!m){if(!Array.isArray(d))throw new Error("Expected an array, received: ".concat(d));if(d.length!==l.size())throw new Error("Expected array of length: ".concat(l.size(),", recieved array of length: ").concat(d.length));var p=h.context();p["vertexAttrib".concat(d.length,"fv")](l.location(),d),p.disableVertexAttribArray(l.location()),m=!1}};return b.clear=function(){m=!0},b.value=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m=!0,b):d},M(b,l,"normalized","size","location"),b},Cp=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],l=Lt().size(4),d=u,m=!0,b=function(h){if(h.vertexShader().appendHeaderIfNotExists(Sc.header).appendBodyIfNotExists(Sc.body),h.fragmentShader().appendHeaderIfNotExists(tl.header).appendBodyIfNotExists(tl.body),Array.isArray(d))h.buffers().attribute("aFillColor",vl(d).size(4));else if(typeof d=="function"){if(!m)return;l.value(d),h.buffers().attribute("aFillColor",l)}else throw new Error("Expected value to be an array or function, received ".concat(d));m=!1};return b.value=function(){return arguments.length?(d!==(arguments.length<=0?void 0:arguments[0])&&(d=arguments.length<=0?void 0:arguments[0],m=!0),b):d},M(b,l,"data"),b},Lp=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],l=Lt().size(4),d=u,m=!0,b=function(h){if(h.vertexShader().appendHeaderIfNotExists(Mc.header).appendBodyIfNotExists(Mc.body),h.fragmentShader().appendHeaderIfNotExists(el.header).appendBodyIfNotExists(el.body),Array.isArray(d))h.buffers().attribute("aStrokeColor",vl(d).size(4));else if(typeof d=="function"){if(!m)return;l.value(d),h.buffers().attribute("aStrokeColor",l)}else throw new Error("Expected value to be an array or function, received ".concat(d));m=!1};return b.value=function(){return arguments.length?(d!==(arguments.length<=0?void 0:arguments[0])&&(d=arguments.length<=0?void 0:arguments[0],m=!0),b):d},M(b,l,"data"),b},bl=function(){var u=Xe(),l=Vn(0,1),d=l.offset(1),m=Vn(0,1),b=m.offset(1),y=Vn(0,1).type(Vt.UNSIGNED_BYTE),h=y.offset(1),p=sl().crossValueAttribute(l).crossNextValueAttribute(d).mainValueAttribute(m).mainNextValueAttribute(b).definedAttribute(y).definedNextAttribute(h),v=function(R,L){return!1},w=zn,T=[],S=null,N=null,O=function(R){var L=w(u.xScale()),$=w(u.yScale()),F=!v(T,R);F&&(T=R,y.value(function(z,X){return u.defined()(z,X)}).data(R)),(F||L.scale!==S)&&(S=L.scale,u.orient()==="vertical"?l.value(function(z,X){return L.scale(u.crossValue()(z,X))}).data(R):l.value(function(z,X){return L.scale(u.mainValue()(z,X))}).data(R)),(F||$.scale!==N)&&(N=$.scale,u.orient()==="vertical"?m.value(function(z,X){return $.scale(u.mainValue()(z,X))}).data(R):m.value(function(z,X){return $.scale(u.crossValue()(z,X))}).data(R)),p.xScale(L.webglScale).yScale($.webglScale).decorate(function(z){return u.decorate()(z,R,0)}),p(R.length)};return O.equals=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],O):v},O.scaleMapper=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],O):w},B(O,u,P("baseValue","bandwidth","align")),M(O,p,"context","lineWidth","pixelRatio"),O},yl=function(){var u=g.symbol(),l=Xe(),d=Wt("g","point"),m=function(h){return"translate("+h[0]+", "+h[1]+")"},b=function(h){se(h)&&d.transition(h),h.each(function(p,v,w){var T=p.filter(l.defined()),S=d(f.select(w[v]),T);S.enter().attr("transform",function(N,O){return m(l.values(N,O).origin)}).attr("fill",ne.gray).attr("stroke",ne.black).append("path"),S.attr("transform",function(N,O){return m(l.values(N,O).origin)}).select("path").attr("d",u),l.decorate()(S,p,v)})};return B(b,l,P("baseValue","bandwidth","align")),M(b,d,"key"),M(b,u,"type","size"),b},_l=function(){var u=g.symbol(),l=Xe(),d=function(b){var y=b.filter(l.defined()),h=u.context();y.forEach(function(p,v){h.save();var w=l.values(p,v);h.translate(w.origin[0],w.origin[1]),h.beginPath(),h.strokeStyle=ne.black,h.fillStyle=ne.gray,l.decorate()(h,p,v),u(p,v),h.fill(),h.stroke(),h.closePath(),h.restore()})};return B(d,l,P("baseValue","bandwidth","align")),M(d,u,"size","type","context"),d},Ip=function(){var u=Xe(),l=Jt(64),d=g.symbolCircle,m=Lt(),b=Lt(),y=Lt().type(Vt.UNSIGNED_SHORT),h=Lt().type(Vt.UNSIGNED_BYTE),p=ol().crossValueAttribute(m).mainValueAttribute(b).sizeAttribute(y).definedAttribute(h),v=function(R,L){return!1},w=zn,T=[],S=null,N=null,O=function(R){var L=w(u.xScale()),$=w(u.yScale()),F=!v(T,R);F&&(T=R,y.value(function(z,X){return l(z,X)}).data(R),h.value(function(z,X){return u.defined()(z,X)}).data(R)),(F||L.scale!==S)&&(S=L.scale,u.orient()==="vertical"?m.value(function(z,X){return L.scale(u.crossValue()(z,X))}).data(R):m.value(function(z,X){return L.scale(u.mainValue()(z,X))}).data(R)),(F||$.scale!==N)&&(N=$.scale,u.orient()==="vertical"?b.value(function(z,X){return $.scale(u.mainValue()(z,X))}).data(R):b.value(function(z,X){return $.scale(u.crossValue()(z,X))}).data(R)),p.xScale(L.webglScale).yScale($.webglScale).type(pl(d)).decorate(function(z){return u.decorate()(z,R,0)}),p(R.length)};return O.size=function(){return arguments.length?(l=Jt(arguments.length<=0?void 0:arguments[0]),O):l},O.type=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],O):d},O.equals=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],O):v},O.scaleMapper=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],O):w},B(O,u,P("baseValue","bandwidth","align")),M(O,p,"context","pixelRatio"),O},Bp=function(){var u=Dr().x(0).y(0),l=Xe(),d=Wt("g","bar"),m=function(v){return l.orient()==="vertical"?v.height:v.width},b=function(v){return l.orient()==="vertical"?v.width:v.height},y=function(v){return"translate("+v[0]+", "+v[1]+")"},h=function(v){se(v)&&d.transition(v),v.each(function(w,T,S){var N=l.orient();if(N!=="vertical"&&N!=="horizontal")throw new Error("The bar series does not support an orientation of "+N);var O=w.filter(l.defined()),C=O.map(l.values);u.width(0).height(0),l.orient()==="vertical"?(u.verticalAlign("top"),u.horizontalAlign("center")):(u.horizontalAlign("right"),u.verticalAlign("center"));var R=d(f.select(S[T]),O);R.enter().attr("transform",function(L,$){return y(C[$].baseOrigin)}).attr("class","bar "+l.orient()).attr("fill",ne.darkGray).append("path").attr("d",function(L,$){return b(u)(C[$].width),u([L])}),R.attr("transform",function(L,$){return y(C[$].origin)}).select("path").attr("d",function(L,$){return b(u)(C[$].width),m(u)(-C[$].height),u([L])}),l.decorate()(R,O,T)})};return B(h,l),M(h,d,"key"),h},kp=function(){var u=Xe(),l=Dr().x(0).y(0),d=function(h){return u.orient()==="vertical"?h.height:h.width},m=function(h){return u.orient()==="vertical"?h.width:h.height},b=function(h){var p=l.context(),v=h.filter(u.defined()),w=v.map(u.values);u.orient()==="vertical"?(l.verticalAlign("top"),l.horizontalAlign("center")):(l.horizontalAlign("right"),l.verticalAlign("center")),w.forEach(function(T,S){p.save(),p.beginPath(),p.translate(T.origin[0],T.origin[1]),p.fillStyle=ne.darkGray,p.strokeStyle="transparent",u.decorate()(p,T.d,S),d(l)(-T.height),m(l)(T.width),l([T]),p.fill(),p.stroke(),p.closePath(),p.restore()})};return B(b,u),M(b,l,"context"),b},Pp=function(){var u=Xe(),l=Lt(),d=Lt(),m=Lt(),b=Lt().type(Vt.UNSIGNED_SHORT),y=Lt().type(Vt.UNSIGNED_BYTE),h=cl().crossValueAttribute(l).mainValueAttribute(d).baseValueAttribute(m).bandwidthAttribute(b).definedAttribute(y),p=function(C,R){return!1},v=zn,w=[],T=null,S=null,N=function(C){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var R=v(u.xScale()),L=v(u.yScale()),$=!p(w,C);$&&(w=C,b.value(function(F,z){return u.bandwidth()(F,z)}).data(C),y.value(function(F,z){return u.defined()(F,z)}).data(C)),($||R.scale!==T)&&(T=R.scale,l.value(function(F,z){return R.scale(u.crossValue()(F,z))}).data(C)),($||L.scale!==S)&&(S=L.scale,m.value(function(F,z){return L.scale(u.baseValue()(F,z))}).data(C),d.value(function(F,z){return L.scale(u.mainValue()(F,z))}).data(C)),h.xScale(R.webglScale).yScale(L.webglScale).decorate(function(F){return u.decorate()(F,C,0)}),h(C.length)};return N.equals=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],N):p},N.scaleMapper=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],N):v},B(N,u,P("align")),M(N,h,"context","pixelRatio"),N},ns=function(){var u=function(v){return v.high},l=function(v){return v.low},d=function(v){return v.cross},m="vertical",b="center",y=function(){return 5},h=rr({decorate:function(){},defined:function(v,w){return ai(l,u,d)(v,w)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return h.values=function(p,v){var w=y(p,v),T=oi(b,w),S=h.xScale(),N=h.yScale();if(m==="vertical"){var O=N(u(p,v));return{origin:[S(d(p,v))+T,O],high:0,low:N(l(p,v))-O,width:w}}else{var C=S(l(p,v));return{origin:[C,N(d(p,v))+T],high:S(u(p,v))-C,low:0,width:w}}},h.xValues=function(){return m==="vertical"?[d]:[u,l]},h.yValues=function(){return m!=="vertical"?[d]:[u,l]},h.orient=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.lowValue=function(){return arguments.length?(l=Jt(arguments.length<=0?void 0:arguments[0]),h):l},h.highValue=function(){return arguments.length?(u=Jt(arguments.length<=0?void 0:arguments[0]),h):u},h.crossValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),h):d},h.bandwidth=function(){return arguments.length?(y=Jt(arguments.length<=0?void 0:arguments[0]),h):y},h.align=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h},$p=function(){var u=ns(),l=Wt("g","error-bar"),d=Xo().value(0),m=function(p){return function(v){return se(p)?v.transition(p):v}},b=function(p){return"translate("+p.origin[0]+", "+p.origin[1]+")"},y=function(p){se(p)&&l.transition(p);var v=m(p);p.each(function(w,T,S){var N=w.filter(u.defined()),O=N.map(u.values),C=l(f.select(S[T]),N);C.enter().attr("stroke",ne.black).attr("fill",ne.gray).attr("transform",function(R,L){return b(u.values(R,L))+" scale(1e-6, 1)"}).append("path"),d.orient(u.orient()),C.each(function(R,L,$){var F=O[L];d.high(F.high).low(F.low).width(F.width),v(f.select($[L])).attr("transform",b(F)+" scale(1)").select("path").attr("d",d([R]))}),u.decorate()(C,w,T)})};return B(y,u),M(y,l,"key"),y},Wp=function(){var u=ns(),l=Xo().value(0),d=function(b){var y=b.filter(u.defined()),h=l.context();l.orient(u.orient()),y.forEach(function(p,v){h.save();var w=u.values(p,v);h.translate(w.origin[0],w.origin[1]),h.beginPath(),h.strokeStyle=ne.black,h.fillStyle=ne.gray,u.decorate()(h,p,v),l.high(w.high).width(w.width).low(w.low)([p]),h.fill(),h.stroke(),h.closePath(),h.restore()})};return B(d,u),M(d,l,"context"),d},Vp=function(){var u=ns(),l=Lt(),d=Lt(),m=Lt(),b=Lt().type(Vt.UNSIGNED_SHORT),y=Lt().type(Vt.UNSIGNED_BYTE),h=ll().crossValueAttribute(l).highValueAttribute(d).lowValueAttribute(m).bandwidthAttribute(b).definedAttribute(y),p=function(C,R){return!1},v=zn,w=[],T=null,S=null,N=function(C){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var R=v(u.xScale()),L=v(u.yScale()),$=!p(w,C);$&&(w=C,b.value(function(F,z){return u.bandwidth()(F,z)}).data(C),y.value(function(F,z){return u.defined()(F,z)}).data(C)),($||R.scale!==T)&&(T=R.scale,l.value(function(F,z){return R.scale(u.crossValue()(F,z))}).data(C)),($||L.scale!==S)&&(S=L.scale,d.value(function(F,z){return L.scale(u.highValue()(F,z))}).data(C),m.value(function(F,z){return L.scale(u.lowValue()(F,z))}).data(C)),h.xScale(R.webglScale).yScale(L.webglScale).decorate(function(F){return u.decorate()(F,C,0)}),h(C.length)};return N.equals=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],N):p},N.scaleMapper=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],N):v},B(N,u,P("align")),M(N,h,"context","lineWidth","pixelRatio"),N},zp=function(){var u=Xe(),l=g.area(),d=Wt("path","area"),m=function(y){se(y)&&d.transition(y),l.defined(u.defined()),y.each(function(h,p,v){var w=h.map(u.values);l.x(function(N,O){return w[O].transposedX}).y(function(N,O){return w[O].transposedY});var T=u.orient()==="vertical"?"y":"x";l[T+"0"](function(N,O){return w[O].y0}),l[T+"1"](function(N,O){return w[O].y});var S=d(f.select(v[p]),[h]);S.enter().attr("fill",ne.gray),S.attr("d",l),u.decorate()(S,h,p)})};return B(m,u,P("bandwidth","align")),M(m,d,"key"),M(m,l,"curve"),m},Fp=function(){var u=Xe(),l=g.area(),d=function(b){var y=l.context();l.defined(u.defined());var h=b.map(u.values);l.x(function(v,w){return h[w].transposedX}).y(function(v,w){return h[w].transposedY});var p=u.orient()==="vertical"?"y":"x";l[p+"0"](function(v,w){return h[w].y0}),l[p+"1"](function(v,w){return h[w].y}),y.beginPath(),y.fillStyle=ne.gray,y.strokeStyle="transparent",u.decorate()(y,b),l(b),y.fill(),y.stroke(),y.closePath()};return B(d,u,P("bandwidth","align")),M(d,l,"curve","context"),d},Up=function(){var u=Xe(),l=Vn(0,1),d=l.offset(1),m=Vn(0,1),b=m.offset(1),y=Vn(0,1),h=y.offset(1),p=Vn(0,1).type(Vt.UNSIGNED_BYTE),v=p.offset(1),w=il().crossValueAttribute(l).crossNextValueAttribute(d).mainValueAttribute(m).mainNextValueAttribute(b).baseValueAttribute(y).baseNextValueAttribute(h).definedAttribute(p).definedNextAttribute(v),T=function($,F){return!1},S=zn,N=[],O=null,C=null,R=function($){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var F=S(u.xScale()),z=S(u.yScale()),X=!T(N,$);X&&(N=$,p.value(function(tt,bt){return u.defined()(tt,bt)}).data($)),(X||F.scale!==O)&&(O=F.scale,l.value(function(tt,bt){return F.scale(u.crossValue()(tt,bt))}).data($)),(X||z.scale!==C)&&(C=z.scale,y.value(function(tt,bt){return z.scale(u.baseValue()(tt,bt))}).data($),m.value(function(tt,bt){return z.scale(u.mainValue()(tt,bt))}).data($)),w.xScale(F.webglScale).yScale(z.webglScale).decorate(function(tt){return u.decorate()(tt,$,0)}),w($.length)};return R.equals=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],R):T},R.scaleMapper=function(){return arguments.length?(S=arguments.length<=0?void 0:arguments[0],R):S},B(R,u,P("bandwidth","align")),M(R,w,"context","pixelRatio"),R},rs=function(){var u,l=function(T){return T.date},d=function(T){return T.open},m=function(T){return T.high},b=function(T){return T.low},y=function(T){return T.close},h=function(){return 5},p="center",v=function(T,S){return u.xScale()(l(T,S))};return u=rr({decorate:function(){},defined:function(T,S){return ai(l,d,b,m,y)(T,S)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()}),u.values=function(w,T){var S=y(w,T),N=d(w,T),O=h(w,T),C=oi(p,O),R="";return S>N?R="up":S<N&&(R="down"),{cross:v(w,T)+C,open:u.yScale()(N),high:u.yScale()(m(w,T)),low:u.yScale()(b(w,T)),close:u.yScale()(S),width:O,direction:R}},u.xValues=function(){return[l]},u.yValues=function(){return[d,m,b,y]},u.crossValue=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],u):l},u.openValue=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],u):d},u.highValue=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],u):m},u.lowValue=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],u):b},u.yValue=u.closeValue=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],u):y},u.bandwidth=function(){return arguments.length?(h=Jt(arguments.length<=0?void 0:arguments[0]),u):h},u.align=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],u):p},u},wl=function(u,l){var d=rs(),m=Wt("g",l),b=function(v){return"translate("+v.cross+", "+v.high+")"},y=function(v){return function(w){return se(v)?w.transition(v):w}},h=function(v){se(v)&&m.transition(v);var w=y(v);v.each(function(T,S,N){var O=T.filter(d.defined()),C=m(f.select(N[S]),O);C.enter().attr("transform",function(R,L){return b(d.values(R,L))+" scale(1e-6, 1)"}).append("path"),C.each(function(R,L,$){var F=d.values(R,L),z=F.direction==="up"?ne.green:ne.red,X=w(f.select($[L])).attr("class",l+" "+F.direction).attr("stroke",z).attr("fill",z).attr("transform",function(){return b(F)+" scale(1)"});u.x(0).width(F.width).open(function(){return F.open-F.high}).high(0).low(function(){return F.low-F.high}).close(function(){return F.close-F.high}),X.select("path").attr("d",u([R]))}),d.decorate()(C,T,S)})};return M(h,m,"key"),B(h,d),h},Yp=function(){return wl(Yo(),"candlestick")},xl=function(u){var l=rs(),d=function(b){var y=b.filter(l.defined()),h=u.context();y.forEach(function(p,v){h.save();var w=l.values(p,v);h.translate(w.cross,w.high),h.beginPath(),u.x(0).open(function(){return w.open-w.high}).width(w.width).high(0).low(function(){return w.low-w.high}).close(function(){return w.close-w.high})([p]);var T=w.direction==="up"?ne.green:ne.red;h.strokeStyle=T,h.fillStyle=T,l.decorate()(h,p,v),h.fill(),h.stroke(),h.closePath(),h.restore()})};return M(d,u,"context"),B(d,l),d},Hp=function(){return xl(Yo())},Tl=function(u){var l=rs(),d=Lt(),m=Lt(),b=Lt(),y=Lt(),h=Lt(),p=Lt().type(Vt.UNSIGNED_SHORT),v=Lt().type(Vt.UNSIGNED_BYTE);u.crossValueAttribute(d).openValueAttribute(m).highValueAttribute(b).lowValueAttribute(y).closeValueAttribute(h).bandwidthAttribute(p).definedAttribute(v);var w=function(L,$){return!1},T=zn,S=[],N=null,O=null,C=function(L){var $=T(l.xScale()),F=T(l.yScale()),z=!w(S,L);z&&(S=L,p.value(function(X,tt){return l.bandwidth()(X,tt)}).data(L),v.value(function(X,tt){return l.defined()(X,tt)}).data(L)),(z||$.scale!==N)&&(N=$.scale,d.value(function(X,tt){return $.scale(l.crossValue()(X,tt))}).data(L)),(z||F.scale!==O)&&(O=F.scale,m.value(function(X,tt){return F.scale(l.openValue()(X,tt))}).data(L),b.value(function(X,tt){return F.scale(l.highValue()(X,tt))}).data(L),y.value(function(X,tt){return F.scale(l.lowValue()(X,tt))}).data(L),h.value(function(X,tt){return F.scale(l.closeValue()(X,tt))}).data(L)),u.xScale($.webglScale).yScale(F.webglScale).decorate(function(X){return l.decorate()(X,L,0)}),u(L.length)};return C.equals=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],C):w},C.scaleMapper=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],C):T},B(C,l,P("align")),M(C,u,"context","lineWidth","pixelRatio"),C},Xp=function(){return Tl(fl())},is=function(){var u=function(S){return S.upperQuartile},l=function(S){return S.lowerQuartile},d=function(S){return S.high},m=function(S){return S.low},b=function(S){return S.value},y=function(S){return S.median},h="vertical",p="center",v=function(){return 5},w=rr({decorate:function(){},defined:function(S,N){return ai(m,d,l,u,b,y)(S,N)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return w.values=function(T,S){var N=v(T,S),O=oi(p,N),C=w.xScale(),R=w.yScale();if(h==="vertical"){var L=R(d(T,S));return{origin:[C(b(T,S))+O,L],high:0,upperQuartile:R(u(T,S))-L,median:R(y(T,S))-L,lowerQuartile:R(l(T,S))-L,low:R(m(T,S))-L,width:N}}else{var $=C(m(T,S));return{origin:[$,R(b(T,S))+O],high:C(d(T,S))-$,upperQuartile:C(u(T,S))-$,median:C(y(T,S))-$,lowerQuartile:C(l(T,S))-$,low:0,width:N}}},w.xValues=function(){return h==="vertical"?[b]:[u,l,d,m,y]},w.yValues=function(){return h!=="vertical"?[b]:[u,l,d,m,y]},w.orient=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.lowerQuartileValue=function(){return arguments.length?(l=Jt(arguments.length<=0?void 0:arguments[0]),w):l},w.upperQuartileValue=function(){return arguments.length?(u=Jt(arguments.length<=0?void 0:arguments[0]),w):u},w.lowValue=function(){return arguments.length?(m=Jt(arguments.length<=0?void 0:arguments[0]),w):m},w.highValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),w):d},w.crossValue=function(){return arguments.length?(b=Jt(arguments.length<=0?void 0:arguments[0]),w):b},w.medianValue=function(){return arguments.length?(y=Jt(arguments.length<=0?void 0:arguments[0]),w):y},w.bandwidth=function(){return arguments.length?(v=Jt(arguments.length<=0?void 0:arguments[0]),w):v},w.align=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],w):p},w},qp=function(){var u=is(),l=Wt("g","box-plot"),d=Ho().value(0),m=function(p){return function(v){return se(p)?v.transition(p):v}},b=function(p){return"translate("+p.origin[0]+", "+p.origin[1]+")"},y=function(p){se(p)&&l.transition(p);var v=m(p);p.each(function(w,T,S){var N=w.filter(u.defined()),O=l(f.select(S[T]),N);O.enter().attr("stroke",ne.black).attr("fill",ne.gray).attr("transform",function(C,R){return b(u.values(C,R))+" scale(1e-6, 1)"}).append("path"),d.orient(u.orient()),O.each(function(C,R,L){var $=u.values(C,R);d.median($.median).upperQuartile($.upperQuartile).lowerQuartile($.lowerQuartile).width($.width).high($.high).low($.low),v(f.select(L[R])).attr("transform",b($)).select("path").attr("d",d([C]))}),u.decorate()(O,w,T)})};return B(y,u),M(y,l,"key"),M(y,d,"cap"),y},Gp=function(){var u=is(),l=Ho().value(0),d=function(b){var y=b.filter(u.defined()),h=l.context();l.orient(u.orient()),y.forEach(function(p,v){h.save();var w=u.values(p,v);h.translate(w.origin[0],w.origin[1]),h.beginPath(),h.fillStyle=ne.gray,h.strokeStyle=ne.black,u.decorate()(h,p,v),l.median(w.median).upperQuartile(w.upperQuartile).lowerQuartile(w.lowerQuartile).high(w.high).width(w.width).low(w.low)([p]),h.fill(),h.stroke(),h.closePath(),h.restore()})};return B(d,u),M(d,l,"cap","context"),d},jp=function(){var u=is(),l=Lt(),d=Lt(),m=Lt(),b=Lt(),y=Lt(),h=Lt(),p=Lt().type(Vt.UNSIGNED_SHORT),v=Lt().type(Vt.UNSIGNED_SHORT),w=Lt().type(Vt.UNSIGNED_BYTE),T=dl().crossValueAttribute(l).highValueAttribute(d).upperQuartileValueAttribute(m).medianValueAttribute(b).lowerQuartileValueAttribute(y).lowValueAttribute(h).bandwidthAttribute(p).capAttribute(v).definedAttribute(w),S=function(z,X){return!1},N=zn,O=[],C=null,R=null,L=Jt(20),$=function(z){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var X=N(u.xScale()),tt=N(u.yScale()),bt=!S(O,z);bt&&(O=z,p.value(function(wt,yt){return u.bandwidth()(wt,yt)}).data(z),v.value(function(wt,yt){return L(wt,yt)}).data(z),w.value(function(wt,yt){return u.defined()(wt,yt)}).data(z)),(bt||X.scale!==C)&&(C=X.scale,l.value(function(wt,yt){return X.scale(u.crossValue()(wt,yt))}).data(z)),(bt||tt.scale!==R)&&(R=tt.scale,d.value(function(wt,yt){return tt.scale(u.highValue()(wt,yt))}).data(z),m.value(function(wt,yt){return tt.scale(u.upperQuartileValue()(wt,yt))}).data(z),b.value(function(wt,yt){return tt.scale(u.medianValue()(wt,yt))}).data(z),y.value(function(wt,yt){return tt.scale(u.lowerQuartileValue()(wt,yt))}).data(z),h.value(function(wt,yt){return tt.scale(u.lowValue()(wt,yt))}).data(z)),T.xScale(X.webglScale).yScale(tt.webglScale).decorate(function(wt){return u.decorate()(wt,z,0)}),T(z.length)};return $.cap=function(){return arguments.length?(L=Jt(arguments.length<=0?void 0:arguments[0]),$):L},$.equals=function(){return arguments.length?(S=arguments.length<=0?void 0:arguments[0],$):S},$.scaleMapper=function(){return arguments.length?(N=arguments.length<=0?void 0:arguments[0],$):N},B($,u,P("align")),M($,T,"context","lineWidth","pixelRatio"),$},Jp=function(){return wl(Uo(),"ohlc")},Zp=function(){return xl(Uo())},Qp=function(){return Tl(ul())},as=function(){var u=[],l=function(y){return y},d=function(y,h){return h},m=rr({decorate:function(){},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.xValues=function(){return u.map(function(b){return b.xValues()}).reduce(function(b,y){return b.concat(y)})},m.yValues=function(){return u.map(function(b){return b.yValues()}).reduce(function(b,y){return b.concat(y)})},m.mapping=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],m):l},m.key=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},m.series=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},m},os=function(){var u=as(),l=Wt("g"),d=Wt("g","multi"),m=function(y){se(y)&&(d.transition(y),l.transition(y));var h=u.mapping(),p=u.series(),v=u.xScale(),w=u.yScale();y.each(function(T,S,N){var O=d(f.select(N[S]),p);O.each(function(C,R,L){C.xScale(v).yScale(w);var $=h(T,R,p),F=l(f.select(L[R]),[$]);F.call(C)}),O.selection().order(),u.decorate()(O,T,S)})};return B(m,u),M(m,d,"key"),m},ss=function(){var u=null,l=as(),d=function(b){var y=l.mapping(),h=l.series(),p=l.xScale(),v=l.yScale();h.forEach(function(w,T){var S=y(b,T,h);w.context(u).xScale(p).yScale(v);var N;w.decorate?(N=w.decorate(),w.decorate(function(O,C,R){l.decorate()(O,b,T),N(O,C,R)})):l.decorate()(u,b,T),w(S),N&&w.decorate(N)})};return d.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},B(d,l),d},Al=function(){var u=null,l=1,d=as(),m=function(y){var h=d.mapping(),p=d.series(),v=d.xScale(),w=d.yScale();p.forEach(function(T,S){var N=h(y,S,p);T.context(u).pixelRatio(l).xScale(v).yScale(w);var O;T.decorate?(O=T.decorate(),T.decorate(function(C,R,L){d.decorate()(C,y,S),O(C,R,L)})):d.decorate()(u,y,S),T(N),O&&T.decorate(O)})};return m.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},m.pixelRatio=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],m):l},B(m,d),m},El=function(u){var l=function(){return 50},d="center",m=i.scaleBand(),b=rr({decorate:function(){},xScale:i.scaleLinear(),yScale:i.scaleLinear()});return b.offsetScaleForDatum=function(y,h,p){var v=l(h,p),w=oi(d,v),T=v/2;return m.domain(r.range(0,y.length)).range([-T+w,T+w])},b.bandwidth=function(){return arguments.length?(l=Jt(arguments.length<=0?void 0:arguments[0]),b):l},b.align=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},B(b,m,q({paddingInner:"paddingOuter"})),b},Kp=function(u){var l=El(),d=Wt("g","grouped"),m=function(y){se(y)&&d.transition(y),y.each(function(h,p,v){var w=d(f.select(v[p]),h);w.enter().append("g"),w.select("g").each(function(T,S,N){var O=f.select(N[S]),C=u.orient()!=="horizontal",R=function($,F){var z=l.offsetScaleForDatum(h,$,F),X=C?l.xScale():l.yScale();return X($)+z(S)+z.bandwidth()/2};C?(u.xScale(R),u.yScale(l.yScale())):(u.yScale(R),u.xScale(l.xScale())),u.bandwidth&&u.bandwidth(function(L,$){return l.offsetScaleForDatum(h,L,$).bandwidth()}),u.decorate(function(L,$){return l.decorate()(L,$,S)}),O.call(u)})})};return B(m,u,P("decorate","xScale","yScale")),B(m,l,P("offsetScaleForDatum")),m};function tv(u){var l=El(),d=function(b){b.forEach(function(y,h){var p=u.orient()!=="horizontal",v=function(T,S){var N=l.offsetScaleForDatum(b,T,S),O=p?l.xScale():l.yScale();return O(T)+N(h)+N.bandwidth()/2};p?(u.xScale(v),u.yScale(l.yScale())):(u.yScale(v),u.xScale(l.xScale())),u.bandwidth&&u.bandwidth(function(w,T){return l.offsetScaleForDatum(b,w,T).bandwidth()}),u.decorate(function(w,T){return l.decorate()(w,T,h)}),u(y)})};return B(d,u,P("decorate","xScale","yScale")),B(d,l,P("offsetScaleForDatum")),d}var ev=function(){var u="vertical",l=Qo(),d=os(),m=function(y){return y.each(function(h,p,v){u==="vertical"?d.series(h[0].map(function(w){return l})).mapping(function(w,T){return w.map(function(S){return S[T]})}):d.series(h.map(function(w){return l})).mapping(function(w,T){return w[T]}),f.select(v[p]).call(d)})};return m.series=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],m):l},m.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},B(m,d,P("series","mapping")),m},nv=function(){var u="vertical",l=Ko(),d=ss(),m=function(y){u==="vertical"?d.series(y[0].map(function(h){return l})).mapping(function(h,p){return h.map(function(v){return v[p]})}):d.series(y.map(function(h){return l})).mapping(function(h,p){return h[p]}),d(y)};return m.series=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],m):l},m.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},B(m,d,P("series","mapping")),m},rv=function(){var u="vertical",l=function(){return bl()},d=Al(),m=[],b=function(h){if(u==="vertical"){var p=m;m=h[0].map(function(w,T){return T<p.length?p[T]:l()}),d.series(m).mapping(function(w,T){return w.map(function(S){return S[T]})})}else{var v=m;m=h.map(function(w,T){return T<v.length?v[T]:l()}),d.series(m).mapping(function(w,T){return w[T]})}d(h)};return b.series=function(){for(var y=arguments.length,h=new Array(y),p=0;p<y;p++)h[p]=arguments[p];return h.length?(typeof h[0].xScale=="function"&&typeof h[0].yScale=="function"?l=function(){return h[0]}:l=h[0],m=[],b):l},b.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m=[],b):u},B(b,d,P("series","mapping")),b},iv=function(l){return l.sort(r.ascending).filter(function(d,m,b){return b.indexOf(d,m+1)===-1})},av=function(u){var l=.75,d=function(h){if(h.length<=1)return 10;h=iv(h);var p=r.pairs(h).map(function(w){return Math.abs(w[0]-w[1])}),v=r.min(p);return l*v},m=function(h,p,v){if(h.bandwidth)return h.bandwidth();var w,T=Array.isArray(p)?(w=[]).concat.apply(w,ae(p)):p,S=T.filter(u.defined()).map(v()).map(h),N=d(S);return N},b=function(h){var p=function(w){if(u.xBandwidth&&u.yBandwidth)u.xBandwidth(m(u.xScale(),w,u.xValue)),u.yBandwidth(m(u.yScale(),w,u.yValue));else{var T=u.orient&&u.orient()==="horizontal"?u.yScale():u.xScale();u.bandwidth(m(T,w,u.crossValue))}};h instanceof f.selection?h.each(function(v,w,T){p(v),u(f.select(T[w]))}):(p(h),u(h))};return B(b,u),b.widthFraction=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},b},Sl=function(){var u=function(v){return v.x},l=function(v){return v.y},d=function(v){return v.color},m=function(){return 5},b=function(){return 5},y=_.interpolateViridis,h=rr({decorate:function(){},defined:function(v,w){return ai(u,l,d)(v,w)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return h.pathGenerator=Dr().x(0).y(0),h.colorScale=function(p){var v=p.map(d);return i.scaleLinear().domain([r.min(v),r.max(v)])},h.values=function(p,v){return{x:h.xScale()(u(p,v)),y:h.yScale()(l(p,v)),colorValue:d(p,v),width:b(p,v),height:m(p,v)}},h.xValues=function(){return[u]},h.yValues=function(){return[l]},h.xValue=function(){return arguments.length?(u=Jt(arguments.length<=0?void 0:arguments[0]),h):u},h.yValue=function(){return arguments.length?(l=Jt(arguments.length<=0?void 0:arguments[0]),h):l},h.colorValue=function(){return arguments.length?(d=Jt(arguments.length<=0?void 0:arguments[0]),h):d},h.colorInterpolate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],h):y},h.xBandwidth=function(){return arguments.length?(b=Jt(arguments.length<=0?void 0:arguments[0]),h):b},h.yBandwidth=function(){return arguments.length?(m=Jt(arguments.length<=0?void 0:arguments[0]),h):m},B(h,h.pathGenerator,q({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),h},ov=function(){var u=Sl(),l=Wt("g","box"),d=function(y){return"translate("+y.x+", "+y.y+")"},m=function(y){y.each(function(h,p,v){var w=h.filter(u.defined()),T=u.colorValue(),S=u.colorInterpolate(),N=u.colorScale(w),O=l(f.select(v[p]),w);O.enter().append("path").attr("stroke","transparent"),O.attr("transform",function(C,R){return d(u.values(C,R))}).select("path").attr("d",function(C,R){return u.pathGenerator.width(u.values(C,R).width).height(u.values(C,R).height)([C])}).attr("fill",function(C,R){return S(N(T(C,R)))}),u.decorate()(O,h,p)})};return B(m,u),m},sv=function(){var u=Sl(),l=function(m){var b=m.filter(u.defined()),y=u.colorInterpolate(),h=u.colorScale(b),p=u.pathGenerator.context();b.forEach(function(v,w){p.save(),p.beginPath();var T=u.values(v,w);p.translate(T.x,T.y),p.fillStyle=y(h(T.colorValue)),p.strokeStyle="transparent",u.decorate()(p,v,w),u.pathGenerator.height(T.height).width(T.width)([v]),p.fill(),p.stroke(),p.closePath(),p.restore()})};return M(l,u.pathGenerator,"context"),B(l,u),l},Fn=function(u){return typeof u=="function"?u:function(){return u}},uv=function(){var u=i.scaleIdentity(),l=i.scaleIdentity(),d="horizontal",m=function(T){return T.from},b=function(T){return T.to},y=function(){},h=Wt("g","annotation-band"),p=Dr().horizontalAlign("center").verticalAlign("center").x(0).y(0),v=function(T){if(se(T)&&h.transition(T),d!=="horizontal"&&d!=="vertical")throw new Error("Invalid orientation");var S=d==="horizontal",N=S?function(X,tt){return"translate(".concat(X,", ").concat(tt,")")}:function(X,tt){return"translate(".concat(tt,", ").concat(X,")")},O=S?u:l,C=S?l:u,R=O.range(),L=R[1]-R[0],$=S?"height":"width",F=S?"width":"height",z=function(){return N((R[1]+R[0])/2,(C(b.apply(void 0,arguments))+C(m.apply(void 0,arguments)))/2)};p[F](L),p[$](function(){return C(b.apply(void 0,arguments))-C(m.apply(void 0,arguments))}),T.each(function(X,tt,bt){var wt=h(f.select(bt[tt]),X);wt.enter().attr("transform",z).append("path").classed("band",!0),wt.attr("class","annotation-band ".concat(d)).attr("transform",z).select("path").attr("d",function(yt,Bt){return p([yt],Bt)}),y(wt,X,tt)})};return v.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.yScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],v):l},v.orient=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],v):d},v.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],v):y},v.fromValue=function(){return arguments.length?(m=Fn(arguments.length<=0?void 0:arguments[0]),v):m},v.toValue=function(){return arguments.length?(b=Fn(arguments.length<=0?void 0:arguments[0]),v):b},v},cv=function(){var u=i.scaleIdentity(),l=i.scaleIdentity(),d="horizontal",m=function(w){return w.from},b=function(w){return w.to},y=function(){},h=Dr().horizontalAlign("right").verticalAlign("top"),p=function(w){if(d!=="horizontal"&&d!=="vertical")throw new Error("Invalid orientation");var T=h.context(),S=d==="horizontal",N=S?u:l,O=S?l:u,C=N.range(),R=C[1]-C[0],L=S?"x":"y",$=S?"y":"x",F=S?"height":"width",z=S?"width":"height";w.forEach(function(X,tt){T.save(),T.beginPath(),T.strokeStyle="transparent",h[$](O(m(X))),h[L](C[0]),h[z](R),h[F](O(b(X))-O(m(X))),y(T,X,tt),h.context(T)([X],tt),T.fill(),T.stroke(),T.closePath(),T.restore()})};return p.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],p):u},p.yScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],p):l},p.orient=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],p):d},p.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],p):y},p.fromValue=function(){return arguments.length?(m=Fn(arguments.length<=0?void 0:arguments[0]),p):m},p.toValue=function(){return arguments.length?(b=Fn(arguments.length<=0?void 0:arguments[0]),p):b},M(p,h,"context"),p},us=function(){var u=i.scaleIdentity(),l=i.scaleIdentity(),d=function(w){return w},m=d,b=function(){},y="horizontal",h=Wt("g","annotation-line"),p=function(w){if(se(w)&&h.transition(w),y!=="horizontal"&&y!=="vertical")throw new Error("Invalid orientation");var T=y==="horizontal",S=T?function(yt,Bt){return"translate(".concat(yt,", ").concat(Bt,")")}:function(yt,Bt){return"translate(".concat(Bt,", ").concat(yt,")")},N=T?"x2":"y2",O=T?u:l,C=T?l:u,R=T?"left-handle":"bottom-handle",L=T?"right-handle":"top-handle",$=T?"9":"0",F=T?"0":"9",z=T?"0.32em":"0.71em",X=T?"start":"middle",tt=O.range(),bt=function(){return S(tt[0],C(d.apply(void 0,arguments)))},wt=tt[1]-tt[0];w.each(function(yt,Bt,ge){var Ue=h(f.select(ge[Bt]),yt),fn=Ue.enter().attr("transform",bt).style("stroke","#bbb");fn.append("line").attr(N,wt),fn.append("g").classed(R,!0).style("stroke","none"),fn.append("g").classed(L,!0).style("stroke","none").attr("transform",S(wt,0)).append("text").attr("text-anchor",X).attr("x",$).attr("y",F).attr("dy",z),Ue.attr("class","annotation-line ".concat(y)),Ue.attr("transform",bt),Ue.select("line").attr(N,wt),Ue.select("g."+L).attr("transform",S(wt,0)),Ue.select("text").text(m),b(Ue,yt,Bt)})};return p.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],p):u},p.yScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],p):l},p.value=function(){return arguments.length?(d=Fn(arguments.length<=0?void 0:arguments[0]),p):d},p.label=function(){return arguments.length?(m=Fn(arguments.length<=0?void 0:arguments[0]),p):m},p.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],p):b},p.orient=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],p):y},p};function lv(){var u=function(R){return R.x},l=function(R){return R.y},d=i.scaleIdentity(),m=i.scaleIdentity(),b=function(){},y=Wt("g","annotation-crosshair"),h=yl(),p=us(),v=us().orient("vertical"),w=i.scaleIdentity(),T=i.scaleIdentity(),S=os().series([p,v,h]).xScale(w).yScale(T).mapping(function(C){return[C]}),N=function(R){se(R)&&y.transition(R),R.each(function(L,$,F){var z=y(f.select(F[$]),L);z.enter().style("pointer-events","none"),w.range(d.range()),T.range(m.range()),h.crossValue(u).mainValue(l),p.value(l),v.value(u),z.call(S),b(z,L,$)})};N.x=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],N):u},N.y=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],N):l},N.xScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],N):d},N.yScale=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],N):m},N.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],N):b};var O=U("label");return B(N,p,O,K("y")),B(N,v,O,K("x")),N}var cs=function(){var u=i.scaleIdentity(),l=i.scaleIdentity(),d=function(w){return w},m=d,b=function(){},y="horizontal",h=g.line(),p=function(w){if(y!=="horizontal"&&y!=="vertical")throw new Error("Invalid orientation");var T=y==="horizontal",S=h.context(),N=T?u:l,O=T?l:u,C=N.domain(),R=T?9:0,L=T?0:9,$=T?"left":"center",F=T?"middle":"hanging";w.forEach(function(z,X){S.save(),S.beginPath(),S.strokeStyle="#bbb",S.fillStyle="#000",S.textAlign=$,S.textBaseline=F,b(S,z,X),h.context(S)(C.map(function(wt){var yt=[N(wt),O(d(z))];return T?yt:yt.reverse()}));var tt=T?N(C[1]):O(d(z)),bt=T?O(d(z)):N(C[1]);S.fillText(m(z),tt+R,bt+L),S.fill(),S.stroke(),S.closePath(),S.restore()})};return p.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],p):u},p.yScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],p):l},p.value=function(){return arguments.length?(d=Fn(arguments.length<=0?void 0:arguments[0]),p):d},p.label=function(){return arguments.length?(m=Fn(arguments.length<=0?void 0:arguments[0]),p):m},p.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],p):b},p.orient=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],p):y},M(p,h,"context"),p},fv=function(){var u=function(O){return O.x},l=function(O){return O.y},d=i.scaleIdentity(),m=i.scaleIdentity(),b=_l(),y=cs(),h=cs().orient("vertical"),p=i.scaleIdentity(),v=i.scaleIdentity(),w=ss().series([y,h,b]).xScale(p).yScale(v).mapping(function(N){return[N]}),T=function(O){O.forEach(function(C){p.range(d.range()),v.range(m.range()),b.crossValue(u).mainValue(l),y.value(l),h.value(u),w(C)})};T.x=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],T):u},T.y=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],T):l},T.xScale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],T):d},T.yScale=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],T):m};var S=U("label","decorate");return B(T,y,S,K("y")),B(T,h,S,K("x")),M(T,b,"decorate"),M(T,w,"context"),T},ua=function(){var u=i.scaleIdentity(),l=[10],d=null,m=function(){var y;return d??(u.ticks?(y=u).ticks.apply(y,ae(l)):u.domain())};return m.scale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},m.ticks=function(){for(var b=arguments.length,y=new Array(b),h=0;h<b;h++)y[h]=arguments[h];return l=y,m},m.tickArguments=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],m):l},m.tickValues=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],m):d},m},Ml=function(l){return l},dv=function(){var u=function(){},l=function(){},d=ua(),m=ua(),b=Wt("line","gridline-y").key(Ml),y=Wt("line","gridline-x").key(Ml),h=function(v){se(v)&&(b.transition(v),y.transition(v)),v.each(function(w,T,S){var N=S[T],O=f.select(S[T]),C=d.scale(),R=m.scale(),L=N.__x_scale__||C;N.__x_scale__=C.copy();var $=d(),F=b(O,$);F.enter().attr("x1",L).attr("x2",L).attr("y1",R.range()[0]).attr("y2",R.range()[1]).attr("stroke","#bbb"),F.attr("x1",C).attr("x2",C).attr("y1",R.range()[0]).attr("y2",R.range()[1]),F.exit().attr("x1",C).attr("x2",C),u(F,$,T);var z=N.__y_scale__||R;N.__y_scale__=R.copy();var X=m(),tt=y(O,X);tt.enter().attr("y1",z).attr("y2",z).attr("x1",C.range()[0]).attr("x2",C.range()[1]).attr("stroke","#bbb"),tt.attr("y1",R).attr("y2",R).attr("x1",C.range()[0]).attr("x2",C.range()[1]),tt.exit().attr("y1",R).attr("y2",R),l(tt,X,T)})};return h.yDecorate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},h.xDecorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],h):u},B(h,b,q({key:"xKey"})),B(h,y,q({key:"yKey"})),B(h,d,K("x")),B(h,m,K("y")),h},hv=function(){var u=function(){},l=function(){},d=ua(),m=ua(),b=g.line(),y=function(){var p=b.context(),v=d.scale(),w=m.scale();d().forEach(function(T,S){p.save(),p.beginPath(),p.strokeStyle="#bbb",p.fillStyle="transparent",u(p,T,S),b.context(p)(w.domain().map(function(N){return[v(T),w(N)]})),p.fill(),p.stroke(),p.closePath(),p.restore()}),m().forEach(function(T,S){p.save(),p.beginPath(),p.strokeStyle="#bbb",p.fillStyle="transparent",l(p,T,S),b.context(p)(v.domain().map(function(N){return[v(N),w(T)]})),p.fill(),p.stroke(),p.closePath(),p.restore()})};return y.yDecorate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y.xDecorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},B(y,d,K("x")),B(y,m,K("y")),M(y,b,"context"),y},gv=function(l){return l},Nl=function(l,d,m,b){return l[d]?l[d].apply(l,m):b},Ol=function(l){var d;return(d=l.tickValues())!==null&&d!==void 0?d:Nl(l.scale(),"ticks",l.tickArguments(),l.scale().domain())},Dl=function(l){var d;return(d=l.tickFormat())!==null&&d!==void 0?d:Nl(l.scale(),"tickFormat",l.tickArguments(),gv)},mv=function(l){return l},Rl=function(l,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=[10],y=null,h=function(){},p=null,v=6,w=6,T=3,S=g.line(),N=Wt("g","tick").key(mv),O=Wt("path","domain"),C=function(){return{offset:[0,w+T]}},R=function(){return{path:[[0,0],[0,w]]}},L=m.labelOffset||C,$=m.tickPath||R,F=function(yt,Bt){var ge=0;return yt.bandwidth&&(ge=yt.bandwidth()/2,yt.round()&&(ge=Math.round(ge))),function(Ue){return Bt(yt(Ue)+ge,0)}},z=function(yt,Bt){return tt()?"translate(".concat(Bt,", ").concat(yt,")"):"translate(".concat(yt,", ").concat(Bt,")")},X=function(yt){return tt()?yt.map(function(Bt){return[Bt[1],Bt[0]]}):yt},tt=function(){return l==="left"||l==="right"},bt=function(yt){se(yt)&&(N.transition(yt),O.transition(yt)),yt.each(function(Bt,ge,Ue){var fn=Ue[ge],fi=f.select(fn);fn.__scale__||fi.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",l==="right"?"start":l==="left"?"end":"middle");var ps=fn.__scale__||d;fn.__scale__=d.copy();var ar=Ol(bt),vs=Dl(bt),di=l==="bottom"||l==="right"?1:-1,It=function(Ft){var Pt=vt(Ft,2),oe=Pt[0],Kt=Pt[1];return[oe,di*Kt]},or=d.range(),ke=X([[or[0],di*v],[or[0],0],[or[1],0],[or[1],di*v]]),Un=O(fi,[Bt]);Un.enter().attr("stroke","#000"),Un.attr("d",S(ke));var Se=N(fi,ar),ue=ar.map(function(Me,Ft){return L(Me,Ft,ar)}),hi=ar.map(function(Me,Ft){return $(Me,Ft,ar)});Se.enter().attr("transform",F(ps,z)).append("path").attr("stroke","#000"),Se.enter().append("text").attr("transform",function(Me,Ft){return z.apply(void 0,ae(It(ue[Ft].offset)))}).attr("fill","#000"),Se.exit().attr("transform",F(d,z)),Se.select("path").attr("visibility",function(Me,Ft){return hi[Ft].hidden&&"hidden"}).attr("d",function(Me,Ft){return S(X(hi[Ft].path.map(It)))}),Se.select("text").attr("visibility",function(Me,Ft){return ue[Ft].hidden&&"hidden"}).attr("transform",function(Me,Ft){return z.apply(void 0,ae(It(ue[Ft].offset)))}).attr("dy",function(){var Me="0em";return tt()?Me="0.32em":l==="bottom"&&(Me="0.71em"),Me}).text(vs),Se.attr("transform",F(d,z)),h(Se,Bt,ge)})};return bt.tickFormat=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],bt):p},bt.tickSize=function(){return arguments.length?(w=v=Number(arguments.length<=0?void 0:arguments[0]),bt):w},bt.tickSizeInner=function(){return arguments.length?(w=Number(arguments.length<=0?void 0:arguments[0]),bt):w},bt.tickSizeOuter=function(){return arguments.length?(v=Number(arguments.length<=0?void 0:arguments[0]),bt):v},bt.tickPadding=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],bt):T},bt.decorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],bt):h},bt.scale=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],bt):d},bt.ticks=function(){for(var wt=arguments.length,yt=new Array(wt),Bt=0;Bt<wt;Bt++)yt[Bt]=arguments[Bt];return b=[].concat(yt),bt},bt.tickArguments=function(){return arguments.length?(b=(arguments.length<=0?void 0:arguments[0])==null?[]:ae(arguments.length<=0?void 0:arguments[0]),bt):b!==null?b.slice():null},bt.tickValues=function(){return arguments.length?(y=(arguments.length<=0?void 0:arguments[0])==null?[]:ae(arguments.length<=0?void 0:arguments[0]),bt):y!==null?y.slice():null},bt.orient=function(){return l},bt},ca=function(l,d){var m=!1,b=function(v,w,T){var S=0,N=y.tickSizeInner()+y.tickPadding(),O=!1;if(m){var C=d(v),R=w<T.length-1?d(T[w+1]):d.range()[1];S=(R-C)/2,N=y.tickPadding(),O=w===T.length-1&&C===R}return{offset:[S,N],hidden:O}},y=Rl(l,d,{labelOffset:b}),h=function(v){return y(v)};return h.tickCenterLabel=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},B(h,y),h},Cl=function(l){return ca("top",l)},Ll=function(l){return ca("bottom",l)},Il=function(l){return ca("left",l)},Bl=function(l){return ca("right",l)},la=function(l,d){var m=null,b=function(T,S,N){if(d.step)return d.step();var O=d(T);return S<N.length-1?d(N[S+1])/O:(d.range()[1]-O)*2},y=function(T,S,N){var O=0;return m?O=m(T,S):O=b(T,S,N)/2,{path:[[O,0],[O,p.tickSizeInner()]],hidden:S===N.length-1}},h=function(){return{offset:[0,p.tickPadding()]}},p=Rl(l,d,{labelOffset:h,tickPath:y}),v=function(T){p(T)};return v.tickOffset=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],v):m},B(v,p),v},pv=function(l){return la("top",l)},vv=function(l){return la("bottom",l)},bv=function(l){return la("left",l)},yv=function(l){return la("right",l)},kl=function(u){var l=function(m){var b=Ol(u),y=Dl(u),h=b.map(y),p=m.append("text"),v=h.map(function(S){return p.text(S).node().getBBox()}),w=Math.max.apply(Math,ae(v.map(function(S){return S.height}))),T=Math.max.apply(Math,ae(v.map(function(S){return S.width})));return p.remove(),{maxHeight:w,maxWidth:T,labelCount:h.length}};return l},_v=function(u){var l="auto",d=function(){},m=function(){return u.orient()==="left"||u.orient()==="right"},b=function(){return u.orient()==="top"||u.orient()==="left"?-1:1},y=function(){switch(u.orient()){case"top":case"right":return"start";default:return"end"}},h=function(T){var S=kl(u)(T),N=S.maxHeight,O=S.maxWidth,C=S.labelCount,R=C*O,L;if(l==="auto"){var $=u.scale().range()[1];L=$<R?90*Math.min(1,(R/$-.8)/2):0}else L=l;return{rotate:m()?Math.floor(b()*(90-L)):Math.floor(-L),maxHeight:N,maxWidth:O,anchor:L?y():"middle"}},p=function(T){var S=h(T),N=S.rotate,O=S.maxHeight,C=S.anchor,R=T.select("text"),L=R.attr("transform"),$=b()*Math.floor(O/2),F=m()?"translate(".concat($,", 0)"):"translate(0, ".concat($,")");R.style("text-anchor",C).attr("transform","".concat(L," ").concat(F," rotate(").concat(N," 0 0)"))},v=function(T){u(T)};return u.decorate(function(w){p(w),d(w)}),v.decorate=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],v):d},v.labelRotate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],v):l},B(v,u,P("decorate")),v},wv=function(u){var l="auto",d=function(){},m=function(){return u.orient()==="left"||u.orient()==="right"},b=function(){return u.orient()==="top"||u.orient()==="left"?-1:1},y=function(v){var w=kl(u)(v),T=w.maxHeight,S=w.maxWidth,N=w.labelCount,O=u.scale().range()[1],C=l==="auto"?Math.floor((m()?T:S)*N/O)+1:l,R=v.select("text"),L=R.attr("transform"),$=function(z){return m()?"translate(".concat(z%C*S*b(),", 0)"):"translate(0, ".concat(z%C*T*b(),")")};R.attr("transform",function(F,z){return"".concat(L," ").concat($(z))})},h=function(v){return u(v)};return u.decorate(function(p){y(p),d(p)}),h.decorate=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],h):d},h.labelOffsetDepth=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],h):l},B(h,u,P("decorate")),h},ls="__d3fc-elements__",ui=function(l){return l[ls]||{}},Pl=function(l,d){return void(l[ls]=d)},xv=function(l){return delete l[ls]},Tv=function(l){return l.tagName==="D3FC-GROUP"?[l].concat(ae(l.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[l]},Av=function(l){var d=ui(l),m=d.width,b=d.height,y=l.useDevicePixelRatio&&window.devicePixelRatio!=null?window.devicePixelRatio:1,h=l.clientWidth*y,p=l.clientHeight*y,v=h!==m||p!==b,w=l.children[0];Pl(l,{pixelRatio:y,width:h,height:p,resized:v,child:w})};if(typeof CustomEvent!="function")throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var Ev=function(l){var d=ui(l),m=new CustomEvent("measure",{detail:d});l.dispatchEvent(m)},Sv=function(l){var d=ui(l),m=new CustomEvent("draw",{detail:d});l.dispatchEvent(m)},Mv=function(u){var l=u.map(Tv).reduce(function(d,m){return d.concat(m)});l.forEach(Av),l.forEach(Ev),l.forEach(Sv)},$l=function(l){return ui(l.ownerDocument).queue||[]},Nv=function(l,d){var m=ui(l.ownerDocument),b=m.requestId;b==null&&(b=requestAnimationFrame(function(){var y=$l(l);Mv(y),Ov(l)})),Pl(l.ownerDocument,{queue:d,requestId:b})},Ov=function(l){return xv(l.ownerDocument)},Wl=function(l,d){var m=l;do if(m.parentNode===d)return!0;while(m=m.parentNode);return!1},fs=function(u){var l=$l(u),d=l.indexOf(u)>-1;if(!d){var m=l.some(function(y){return Wl(u,y)});if(!m){var b=l.filter(function(y){return!Wl(y,u)});b.push(u),Nv(u,b)}}};if(typeof HTMLElement!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Dv=function(l){l.__measureListener__==null&&(l.__measureListener__=function(d){return l.setMeasurements(d.detail)},l.addEventListener("measure",l.__measureListener__))},Rv=function(l){l.__measureListener__!=null&&(l.removeEventListener("measure",l.__measureListener__),l.__measureListener__=null)},Vl=function(u,l){return function(d){function m(){return it(this,m),Q(this,m,arguments)}return Dt(m,d),Mt(m,[{key:"attributeChangedCallback",value:function(y){switch(y){case"use-device-pixel-ratio":this.requestRedraw();break}}},{key:"connectedCallback",value:function(){this.childNodes.length===0&&this.appendChild(u()),Dv(this)}},{key:"disconnectedCallback",value:function(){Rv(this)}},{key:"setMeasurements",value:function(y){var h=y.width,p=y.height,v=te(this.childNodes),w=v[0],T=v.slice(1);if(T.length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");l(this,w,{width:h,height:p})}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&this.getAttribute("use-device-pixel-ratio")!=="false"},set:function(y){y&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!y&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}},{key:"requestRedraw",value:function(){fs(this)}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}])}(ra(HTMLElement))},Cv=function(u){function l(){return it(this,l),Q(this,l,arguments)}return Dt(l,u),Mt(l,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&this.getAttribute("set-webgl-viewport")!=="false"},set:function(m){m&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!m&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}])}(Vl(function(){return document.createElement("canvas")},function(u,l,d){var m=d.width,b=d.height;if(l.setAttribute("width",m),l.setAttribute("height",b),u.setWebglViewport){var y=l.getContext("webgl");y.viewport(0,0,m,b)}})),ds=function(l){l.autoResize?Lv(l):zl(l)},Lv=function(l){l.__autoResizeListener__==null&&(l.__autoResizeListener__=function(){return fs(l)},addEventListener("resize",l.__autoResizeListener__))},zl=function(l){l.__autoResizeListener__!=null&&(removeEventListener("resize",l.__autoResizeListener__),l.__autoResizeListener__=null)},Iv=function(u){function l(){return it(this,l),Q(this,l,arguments)}return Dt(l,u),Mt(l,[{key:"connectedCallback",value:function(){ds(this)}},{key:"disconnectedCallback",value:function(){zl(this)}},{key:"requestRedraw",value:function(){fs(this)}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&this.getAttribute("auto-resize")!=="false"},set:function(m){m&&!this.autoResize?this.setAttribute("auto-resize",""):!m&&this.autoResize&&this.removeAttribute("auto-resize"),ds(this)}},{key:"attributeChangedCallback",value:function(m){switch(m){case"auto-resize":ds(this);break}}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}])}(ra(HTMLElement)),Bv=Vl(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")},function(u,l,d){var m=d.width,b=d.height;l.setAttribute("viewBox","0 0 ".concat(m," ").concat(b))}),Fl="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",ci=document.createElement("style");if(ci.setAttribute("type","text/css"),document.querySelector("head").appendChild(ci),ci.styleSheet?ci.styleSheet.cssText+=Fl:ci.textContent+=Fl,(typeof customElements>"u"?"undefined":ea(customElements))!=="object"||typeof customElements.define!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Ul=[],hs=function(l,d){customElements.get(l)?Ul.push(l):customElements.define(l,d)};hs("d3fc-canvas",Cv),hs("d3fc-group",Iv),hs("d3fc-svg",Bv),Ul.length>0;var kv=function(){var u=x.dispatch("point");function l(b){var y=f.pointer(b);u.call("point",this,[{x:y[0],y:y[1]}])}function d(){u.call("point",this,[])}var m=function(y){y.on("mouseenter.pointer",l).on("mousemove.pointer",l).on("mouseleave.pointer",d)};return M(m,u,"on"),m},Pv=function(){var u="",l="vertical",d=function(p,v){return Number(p[v])},m=function(p){return Object.keys(p[0]).filter(function(v){return v!==u}).map(function(v){var w=p.filter(function(T){return T[v]}).map(function(T){var S=[T[u],d(T,v)];return S.data=T,S});return w.key=v,w})},b=function(p){return p.map(function(v){var w=Object.keys(v).filter(function(T){return T!==u}).map(function(T){var S=[T,d(v,T)];return S.data=v,S});return w.key=v[u],w})},y=function(p){return l==="vertical"?m(p):b(p)};return y.key=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},y.value=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],y):d},y.orient=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],y):l},y},Yl=function(){for(var u={},l=function(w){for(var T=0,S=Object.keys(u);T<S.length;T++){var N=S[T];w[N].apply(null,u[N])}return w},d=arguments.length,m=new Array(d),b=0;b<d;b++)m[b]=arguments[b];for(var y=function(){var w=p[h];l[w]=function(){for(var T=arguments.length,S=new Array(T),N=0;N<T;N++)S[N]=arguments[N];return S.length?(u[w]=S,l):u[w]}},h=0,p=m;h<p.length;h++)y();return l},Hl=`d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}
d3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}
d3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}
d3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}
d3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}
d3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}`,li=document.createElement("style");li.setAttribute("type","text/css"),document.querySelector("head").appendChild(li),li.styleSheet?li.styleSheet.cssText+=Hl:li.textContent+=Hl;var Be=function(l){return typeof l=="function"?l:function(){return l}},Xl=function(){var u=$v.apply(void 0,arguments),l=u.xScale,d=u.yScale,m=u.xAxis,b=u.yAxis,y=Be(""),h=Be(""),p=Be(""),v=Be(null),w=Be(null),T=Be("right"),S=Be("bottom"),N=null,O=null,C=null,R=null,L=!1,$=!0,F=Yl("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),z=function(){},X=Yl("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),tt=function(){},bt=function(){},wt=Wt("d3fc-group","cartesian-chart"),yt=Wt("d3fc-canvas","webgl-plot-area"),Bt=Wt("d3fc-canvas","canvas-plot-area"),ge=Wt("d3fc-svg","svg-plot-area"),Ue=Wt("d3fc-svg","annotation-plot-area"),fn=Wt("d3fc-svg","x-axis").key(function(ke){return ke}),fi=Wt("d3fc-svg","y-axis").key(function(ke){return ke}),ps=Wt("div","chart-label"),ar=Wt("div","x-label").key(function(ke){return ke}),vs=Wt("div","y-label").key(function(ke){return ke}),di=function(Un){return function(Se){return se(Un)?Se.transition(Un):Se}},It=function(Un){var Se=di(Un);Un.each(function(ue,hi,Me){var Ft=wt(f.select(Me[hi]),[ue]);Ft.enter().attr("auto-resize",""),ps(Ft,[S(ue)]).attr("class",function(Pt){return Pt==="top"?"chart-label bottom-label":"chart-label top-label"}).style("margin-bottom",function(Pt){return Pt==="top"?0:"1em"}).style("margin-top",function(Pt){return Pt==="top"?"1em":0}).text(y(ue)),ar(Ft,[S(ue)]).attr("class",function(Pt){return"x-label ".concat(Pt,"-label")}).text(h(ue)),vs(Ft,[T(ue)]).attr("class",function(Pt){return"y-label ".concat(Pt,"-label")}).text(p(ue)),yt(Ft,N?[ue]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",$).on("draw",function(Pt,oe){var Kt=Pt.detail,Ne=Kt.child,dn=Kt.pixelRatio;N.context(L?null:Ne.getContext("webgl")).pixelRatio(dn).xScale(l).yScale(d),N(oe)}),Ft.select(".webgl-plot-area>canvas").on("webglcontextlost",function(Pt){Pt.preventDefault(),L=!0,Ft.node().requestRedraw()}).on("webglcontextrestored",function(){L=!1,Ft.node().requestRedraw()}),Bt(Ft,O?[ue]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",$).on("draw",function(Pt,oe){var Kt=Pt.detail,Ne=Kt.child,dn=Kt.pixelRatio,Yn=Ne.getContext("2d");Yn.save(),$&&Yn.scale(dn,dn),O.context(Yn).xScale(l).yScale(d),O(oe),Yn.restore()}),ge(Ft,C?[ue]:[]).classed("plot-area",!0).on("draw",function(Pt,oe){var Kt=Pt.detail.child;C.xScale(l).yScale(d),Se(f.select(Kt).datum(oe)).call(C)}),Ue(Ft,R?[ue]:[]).classed("plot-area",!0).classed("annotations",!0).on("draw",function(Pt,oe){var Kt=Pt.detail.child;R.xScale(l).yScale(d),Se(f.select(Kt).datum(oe)).call(R)}),fn(Ft,[S(ue)]).attr("class",function(Pt){return"x-axis ".concat(Pt,"-axis")}).style("height",v(ue)).on("measure",function(Pt,oe){var Kt=Pt.detail,Ne=Kt.width,dn=Kt.height,Yn=Kt.child;oe==="top"&&f.select(Yn).attr("viewBox","0 ".concat(-dn," ").concat(Ne," ").concat(dn)),l.range([0,Ne])}).on("draw",function(Pt,oe){var Kt=Pt.detail.child,Ne=oe==="top"?m.top(l):m.bottom(l);Ne.decorate(z),Se(f.select(Kt).datum(oe)).call(F(Ne))}),fi(Ft,[T(ue)]).attr("class",function(Pt){return"y-axis ".concat(Pt,"-axis")}).style("width",w(ue)).on("measure",function(Pt,oe){var Kt=Pt.detail,Ne=Kt.width,dn=Kt.height,Yn=Kt.child;oe==="left"&&f.select(Yn).attr("viewBox","".concat(-Ne," 0 ").concat(Ne," ").concat(dn)),d.range([dn,0])}).on("draw",function(Pt,oe){var Kt=Pt.detail.child,Ne=oe==="left"?b.left(d):b.right(d);Ne.decorate(tt),Se(f.select(Kt).datum(oe)).call(X(Ne))}),Ft.each(function(Pt,oe,Kt){return Kt[oe].requestRedraw()}),bt(Ft,ue,hi)})},or=P(/range\w*/,/tickFormat/);return B(It,l,or,K("x")),B(It,d,or,K("y")),B(It,F,K("x")),B(It,X,K("y")),It.xOrient=function(){return arguments.length?(S=Be(arguments.length<=0?void 0:arguments[0]),It):S},It.yOrient=function(){return arguments.length?(T=Be(arguments.length<=0?void 0:arguments[0]),It):T},It.xDecorate=function(){return arguments.length?(z=arguments.length<=0?void 0:arguments[0],It):z},It.yDecorate=function(){return arguments.length?(tt=arguments.length<=0?void 0:arguments[0],It):tt},It.chartLabel=function(){return arguments.length?(y=Be(arguments.length<=0?void 0:arguments[0]),It):y},It.xLabel=function(){return arguments.length?(h=Be(arguments.length<=0?void 0:arguments[0]),It):h},It.yLabel=function(){return arguments.length?(p=Be(arguments.length<=0?void 0:arguments[0]),It):p},It.xAxisHeight=function(){return arguments.length?(v=Be(arguments.length<=0?void 0:arguments[0]),It):v},It.yAxisWidth=function(){return arguments.length?(w=Be(arguments.length<=0?void 0:arguments[0]),It):w},It.webglPlotArea=function(){return arguments.length?(N=arguments.length<=0?void 0:arguments[0],It):N},It.canvasPlotArea=function(){return arguments.length?(O=arguments.length<=0?void 0:arguments[0],It):O},It.svgPlotArea=function(){return arguments.length?(C=arguments.length<=0?void 0:arguments[0],It):C},It.svgAnnotationPlotArea=function(){return arguments.length?(R=arguments.length<=0?void 0:arguments[0],It):R},It.decorate=function(){return arguments.length?(bt=arguments.length<=0?void 0:arguments[0],It):bt},It.useDevicePixelRatio=function(){return arguments.length?($=arguments.length<=0?void 0:arguments[0],It):$},It},$v=function(){for(var l={xScale:i.scaleIdentity(),yScale:i.scaleIdentity(),xAxis:{bottom:Ll,top:Cl},yAxis:{right:Bl,left:Il}},d=arguments.length,m=new Array(d),b=0;b<d;b++)m[b]=arguments[b];return m.length===1&&!m[0].domain&&!m[0].range?Object.assign(l,m[0]):Object.assign(l,{xScale:m[0]||l.xScale,yScale:m[1]||l.yScale})},ql=function(l){return typeof l=="function"?l:function(){return l}},Gl=function(u,l){return function(){var d=ql(""),m=l,b=function(){},y=Xl.apply(void 0,arguments),h=function(v){u(y,m),y.decorate(function(w,T,S){w.enter().select(".x-label").style("height","1em").style("line-height","1em");var N=y.yOrient()(T);w.enter().append("div").attr("class","y-label-container").style("grid-column",N==="left"?1:5).style("-ms-grid-column",N==="left"?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),w.select(".y-label-container>.y-label").text(d),b(w,T,S)}),v.call(y)};return B(h,y,U(/^x/,/^y/,"chartLabel")),h.yLabel=function(){return arguments.length?(d=ql(arguments.length<=0?void 0:arguments[0]),h):d},h.plotArea=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],h):m},h.decorate=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],h):b},h}},Wv=Gl(function(u,l){return u.svgPlotArea(l)},Qo),Vv=Gl(function(u,l){return u.canvasPlotArea(l)},Ko),zv=function(l){switch(l){case"x":return A.brushX();case"y":return A.brushY();case"xy":return A.brush()}},gs=function(l){return[l[1],l[0]]},ms=function(l){var d=zv(l),m=x.dispatch("brush","start","end"),b=i.scaleIdentity(),y=i.scaleIdentity(),h=Wt("g","brush"),p=function(R,L,$){switch(l){case"x":return R.map(L);case"y":return R.map($);case"xy":return[[L(R[0][0]),$(R[0][1])],[L(R[1][0]),$(R[1][1])]]}},v=function(R){return p(R,i.scaleLinear().domain(b.range()).invert,i.scaleLinear().domain(gs(y.range())).invert)},w=function(R){return p(R,i.scaleLinear().domain(b.range()),i.scaleLinear().domain(gs(y.range())))},T=function(R){var L=i.scaleLinear().domain(b.domain());if(l==="x")return R.map(L.invert);if(l==="xy")return[L.invert(R[0][0]),L.invert(R[1][0])]},S=function(R){var L=i.scaleLinear().domain(gs(y.domain()));if(l==="y")return[R[1],R[0]].map(L.invert);if(l==="xy")return[L.invert(R[1][1]),L.invert(R[0][1])]},N=function(R){if(!(R.sourceEvent&&R.sourceEvent.type==="draw"))if(R.selection){var L=w(R.selection);m.call(R.type,{},{selection:L,xDomain:T(L),yDomain:S(L)})}else m.call(R.type,{},{})},O=function(R){R.each(function(L,$,F){d.extent([[b.range()[0],y.range()[1]],[b.range()[1],y.range()[0]]]),d.on("end",function(X){return N(X)}).on("brush",function(X){return N(X)}).on("start",function(X){return N(X)});var z=h(f.select(F[$]),[L]);z.call(d).call(d.move,L?v(L):null)})};return O.xScale=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],O):b},O.yScale=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],O):y},M(O,m,"on"),M(O,d,"filter","handleSize"),O},Fv=function(){return ms("x")},Uv=function(){return ms("y")},Yv=function(){return ms("xy")},jl=function(l,d){if(l==null&&d==null)return!0;var m=l.domain(),b=d.domain();return m.length===b.length&&m.every(function(y,h){var p;return(y==null?void 0:y.valueOf())===((p=b[h])===null||p===void 0?void 0:p.valueOf())})},Hv=function(l,d){return E.zoomIdentity.scale(l.k/d.k).translate(l.x-d.x,l.y-d.y)},fa=Symbol("d3fc-domain-zoom"),Xv=function(){var u=x.dispatch("zoom"),l=E.zoom().on("zoom",function(m){var b=m.transform,y=this,h=b,p=y[fa],v=p.originalXScale,w=p.previousXScale,T=p.xScale,S=p.originalYScale,N=p.previousYScale,O=p.yScale,C=p.previousTransform;(!jl(w,T)||!jl(N,O))&&(v=T==null?void 0:T.copy(),S=O==null?void 0:O.copy(),h=Hv(b,C)),T!=null&&(w=h.rescaleX(v.range(T.range())),T.domain(w.domain())),O!=null&&(N=h.rescaleY(S.range(O.range())),O.domain(N.domain())),C=h,y[fa]={originalXScale:v,previousXScale:w,xScale:T,originalYScale:S,previousYScale:N,yScale:O,previousTransform:C},h!==b&&l.transform(f.select(y),h),u.call("zoom",this,m)}),d=function(b){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;y==null&&h==null,b.each(function(p,v,w){var T=w[v][fa];T!=null&&T.xScale===y&&T.yScale;var S=y==null?void 0:y.copy(),N=h==null?void 0:h.copy();w[v][fa]={originalXScale:S,previousXScale:S,xScale:y,originalYScale:N,previousYScale:N,yScale:h,previousTransform:E.zoomIdentity}}).call(l)};return M(d,u,"on"),M(d,l,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate","scaleExtent","translateExtent"),d};n.annotationCanvasBand=cv,n.annotationCanvasCrosshair=fv,n.annotationCanvasGridline=hv,n.annotationCanvasLine=cs,n.annotationSvgBand=uv,n.annotationSvgCrosshair=lv,n.annotationSvgGridline=dv,n.annotationSvgLine=us,n.autoBandwidth=av,n.axisBottom=Ll,n.axisLabelOffset=wv,n.axisLabelRotate=_v,n.axisLeft=Il,n.axisOrdinalBottom=vv,n.axisOrdinalLeft=bv,n.axisOrdinalRight=yv,n.axisOrdinalTop=pv,n.axisRight=Bl,n.axisTop=Cl,n.brush=Yv,n.brushX=Fv,n.brushY=Uv,n.bucket=aa,n.chartCanvasCartesian=Vv,n.chartCartesian=Xl,n.chartSvgCartesian=Wv,n.dataJoin=Wt,n.discontinuityIdentity=hc,n.discontinuityRange=$0,n.discontinuitySkipUtcWeekends=P0,n.discontinuitySkipUtcWeeklyPattern=H0,n.discontinuitySkipWeekends=k0,n.discontinuitySkipWeeklyPattern=U0,n.effectivelyZero=Go,n.exclude=P,n.extentDate=_c,n.extentLinear=yc,n.extentTime=_c,n.feedGdax=j0,n.group=Pv,n.include=U,n.includeMap=q,n.indicatorBollingerBands=W,n.indicatorElderRay=I0,n.indicatorEnvelope=L0,n.indicatorExponentialMovingAverage=Z,n.indicatorForceIndex=C0,n.indicatorMacd=Y,n.indicatorMovingAverage=dc,n.indicatorRelativeStrengthIndex=D0,n.indicatorStochasticOscillator=R0,n.isTransition=se,n.largestTriangleOneBucket=J0,n.largestTriangleThreeBucket=Z0,n.layoutAnnealing=ap,n.layoutBoundingBox=up,n.layoutGreedy=rp,n.layoutLabel=K0,n.layoutRemoveOverlaps=sp,n.layoutTextLabel=tp,n.modeMedian=Q0,n.pointer=kv,n.prefix=K,n.randomFinancial=q0,n.randomGeometricBrownianMotion=wc,n.randomSkipWeekends=G0,n.rebind=M,n.rebindAll=B,n.scaleDiscontinuous=gc,n.seriesCanvasArea=Fp,n.seriesCanvasBar=kp,n.seriesCanvasBoxPlot=Gp,n.seriesCanvasCandlestick=Hp,n.seriesCanvasErrorBar=Wp,n.seriesCanvasGrouped=tv,n.seriesCanvasHeatmap=sv,n.seriesCanvasLine=Ko,n.seriesCanvasMulti=ss,n.seriesCanvasOhlc=Zp,n.seriesCanvasPoint=_l,n.seriesCanvasRepeat=nv,n.seriesSvgArea=zp,n.seriesSvgBar=Bp,n.seriesSvgBoxPlot=qp,n.seriesSvgCandlestick=Yp,n.seriesSvgErrorBar=$p,n.seriesSvgGrouped=Kp,n.seriesSvgHeatmap=ov,n.seriesSvgLine=Qo,n.seriesSvgMulti=os,n.seriesSvgOhlc=Jp,n.seriesSvgPoint=yl,n.seriesSvgRepeat=ev,n.seriesWebglArea=Up,n.seriesWebglBar=Pp,n.seriesWebglBoxPlot=jp,n.seriesWebglCandlestick=Xp,n.seriesWebglErrorBar=Vp,n.seriesWebglLine=bl,n.seriesWebglMulti=Al,n.seriesWebglOhlc=Qp,n.seriesWebglPoint=Ip,n.seriesWebglRepeat=rv,n.shapeBar=Dr,n.shapeBoxPlot=Ho,n.shapeCandlestick=Yo,n.shapeErrorBar=Xo,n.shapeOhlc=Uo,n.webglAdjacentAttribute=Vn,n.webglAttribute=Lt,n.webglBaseAttribute=oa,n.webglBufferBuilder=Ec,n.webglElementIndices=ir,n.webglFillColor=Cp,n.webglProgramBuilder=Tn,n.webglScaleLinear=sa,n.webglScaleLog=hl,n.webglScaleMapper=zn,n.webglScalePow=gl,n.webglSeriesArea=il,n.webglSeriesBar=cl,n.webglSeriesBoxPlot=dl,n.webglSeriesCandlestick=fl,n.webglSeriesErrorBar=ll,n.webglSeriesLine=sl,n.webglSeriesOhlc=ul,n.webglSeriesPoint=ol,n.webglShaderBuilder=Ht,n.webglStrokeColor=Lp,n.webglSymbolMapper=pl,n.webglTypes=Vt,n.webglUniform=Fe,n.zoom=Xv,Object.defineProperty(n,"__esModule",{value:!0})})}(Si,Si.exports)),Si.exports}var ie=nM(),cu="http://www.w3.org/1999/xhtml";const md={svg:"http://www.w3.org/2000/svg",xhtml:cu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ym(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),md.hasOwnProperty(e)?{space:md[e],local:t}:t}function rM(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===cu&&e.documentElement.namespaceURI===cu?e.createElement(t):e.createElementNS(n,t)}}function iM(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Hm(t){var e=Ym(t);return(e.local?iM:rM)(e)}function aM(){}function Xm(t){return t==null?aM:function(){return this.querySelector(t)}}function oM(t){typeof t!="function"&&(t=Xm(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,f,g=0;g<o;++g)(c=a[g])&&(f=t.call(c,c.__data__,g,a))&&("__data__"in c&&(f.__data__=c.__data__),s[g]=f);return new Ke(r,this._parents)}function sM(){return[]}function uM(t){return t==null?sM:function(){return this.querySelectorAll(t)}}function cM(t){typeof t!="function"&&(t=uM(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,f=0;f<s;++f)(c=o[f])&&(r.push(t.call(c,c.__data__,f,o)),i.push(c));return new Ke(r,i)}function lM(t){return function(){return this.matches(t)}}function fM(t){typeof t!="function"&&(t=lM(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,f=0;f<o;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&s.push(c);return new Ke(r,this._parents)}function qm(t){return new Array(t.length)}function dM(){return new Ke(this._enter||this._groups.map(qm),this._parents)}function oo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}oo.prototype={constructor:oo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function hM(t){return function(){return t}}var pd="$";function gM(t,e,n,r,i,a){for(var o=0,s,c=e.length,f=a.length;o<f;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new oo(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function mM(t,e,n,r,i,a,o){var s,c,f={},g=e.length,_=a.length,x=new Array(g),A;for(s=0;s<g;++s)(c=e[s])&&(x[s]=A=pd+o.call(c,c.__data__,s,e),A in f?i[s]=c:f[A]=c);for(s=0;s<_;++s)A=pd+o.call(t,a[s],s,a),(c=f[A])?(r[s]=c,c.__data__=a[s],f[A]=null):n[s]=new oo(t,a[s]);for(s=0;s<g;++s)(c=e[s])&&f[x[s]]===c&&(i[s]=c)}function pM(t,e){if(!t)return A=new Array(this.size()),f=-1,this.each(function(q){A[++f]=q}),A;var n=e?mM:gM,r=this._parents,i=this._groups;typeof t!="function"&&(t=hM(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),f=0;f<a;++f){var g=r[f],_=i[f],x=_.length,A=t.call(g,g&&g.__data__,f,r),E=A.length,D=s[f]=new Array(E),M=o[f]=new Array(E),k=c[f]=new Array(x);n(g,_,D,M,k,A,e);for(var B=0,V=0,P,U;B<E;++B)if(P=D[B]){for(B>=V&&(V=B+1);!(U=M[V])&&++V<E;);P._next=U||null}}return o=new Ke(o,r),o._enter=s,o._exit=c,o}function vM(){return new Ke(this._exit||this._groups.map(qm),this._parents)}function bM(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function yM(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],f=n[s],g=c.length,_=o[s]=new Array(g),x,A=0;A<g;++A)(x=c[A]||f[A])&&(_[A]=x);for(;s<r;++s)o[s]=e[s];return new Ke(o,this._parents)}function _M(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function wM(t){t||(t=xM);function e(_,x){return _&&x?t(_.__data__,x.__data__):!_-!x}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),f,g=0;g<s;++g)(f=o[g])&&(c[g]=f);c.sort(e)}return new Ke(i,this._parents).order()}function xM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function TM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function AM(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function EM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function SM(){var t=0;return this.each(function(){++t}),t}function MM(){return!this.node()}function NM(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function OM(t){return function(){this.removeAttribute(t)}}function DM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function RM(t,e){return function(){this.setAttribute(t,e)}}function CM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function LM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function IM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function BM(t,e){var n=Ym(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?DM:OM:typeof e=="function"?n.local?IM:LM:n.local?CM:RM)(n,e))}function Gm(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function kM(t){return function(){this.style.removeProperty(t)}}function PM(t,e,n){return function(){this.style.setProperty(t,e,n)}}function $M(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function WM(t,e,n){return arguments.length>1?this.each((e==null?kM:typeof e=="function"?$M:PM)(t,e,n??"")):VM(this.node(),t)}function VM(t,e){return t.style.getPropertyValue(e)||Gm(t).getComputedStyle(t,null).getPropertyValue(e)}function zM(t){return function(){delete this[t]}}function FM(t,e){return function(){this[t]=e}}function UM(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function YM(t,e){return arguments.length>1?this.each((e==null?zM:typeof e=="function"?UM:FM)(t,e)):this.node()[t]}function jm(t){return t.trim().split(/^|\s+/)}function uc(t){return t.classList||new Jm(t)}function Jm(t){this._node=t,this._names=jm(t.getAttribute("class")||"")}Jm.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Zm(t,e){for(var n=uc(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Qm(t,e){for(var n=uc(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function HM(t){return function(){Zm(this,t)}}function XM(t){return function(){Qm(this,t)}}function qM(t,e){return function(){(e.apply(this,arguments)?Zm:Qm)(this,t)}}function GM(t,e){var n=jm(t+"");if(arguments.length<2){for(var r=uc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?qM:e?HM:XM)(n,e))}function jM(){this.textContent=""}function JM(t){return function(){this.textContent=t}}function ZM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function QM(t){return arguments.length?this.each(t==null?jM:(typeof t=="function"?ZM:JM)(t)):this.node().textContent}function KM(){this.innerHTML=""}function tN(t){return function(){this.innerHTML=t}}function eN(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function nN(t){return arguments.length?this.each(t==null?KM:(typeof t=="function"?eN:tN)(t)):this.node().innerHTML}function rN(){this.nextSibling&&this.parentNode.appendChild(this)}function iN(){return this.each(rN)}function aN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oN(){return this.each(aN)}function sN(t){var e=typeof t=="function"?t:Hm(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function uN(){return null}function cN(t,e){var n=typeof t=="function"?t:Hm(t),r=e==null?uN:typeof e=="function"?e:Xm(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lN(){var t=this.parentNode;t&&t.removeChild(this)}function fN(){return this.each(lN)}function dN(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function hN(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function gN(t){return this.select(t?hN:dN)}function mN(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Km={},ve=null;if(typeof document<"u"){var pN=document.documentElement;"onmouseenter"in pN||(Km={mouseenter:"mouseover",mouseleave:"mouseout"})}function vN(t,e,n){return t=t0(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function t0(t,e,n){return function(r){var i=ve;ve=r;try{t.call(this,this.__data__,e,n)}finally{ve=i}}}function bN(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function yN(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function _N(t,e,n){var r=Km.hasOwnProperty(t.type)?vN:t0;return function(i,a,o){var s=this.__on,c,f=r(e,a,o);if(s){for(var g=0,_=s.length;g<_;++g)if((c=s[g]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=f,c.capture=n),c.value=e;return}}this.addEventListener(t.type,f,n),c={type:t.type,name:t.name,value:e,listener:f,capture:n},s?s.push(c):this.__on=[c]}}function wN(t,e,n){var r=bN(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,f=s.length,g;c<f;++c)for(i=0,g=s[c];i<a;++i)if((o=r[i]).type===g.type&&o.name===g.name)return g.value}return}for(s=e?_N:yN,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function e0(t,e,n){var r=Gm(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function xN(t,e){return function(){return e0(this,t,e)}}function TN(t,e){return function(){return e0(this,t,e.apply(this,arguments))}}function AN(t,e){return this.each((typeof e=="function"?TN:xN)(t,e))}var EN=[null];function Ke(t,e){this._groups=t,this._parents=e}Ke.prototype={constructor:Ke,select:oM,selectAll:cM,filter:fM,data:pM,enter:dM,exit:vM,join:bM,merge:yM,order:_M,sort:wM,call:TM,nodes:AM,node:EM,size:SM,empty:MM,each:NM,attr:BM,style:WM,property:YM,classed:GM,text:QM,html:nN,raise:iN,lower:oN,append:sN,insert:cN,remove:fN,clone:gN,datum:mN,on:wN,dispatch:AN};function Wo(t){return typeof t=="string"?new Ke([[document.querySelector(t)]],[document.documentElement]):new Ke([[t]],EN)}var SN=0;function vd(){this._="@"+(++SN).toString(36)}vd.prototype={constructor:vd,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var MN={value:function(){}};function n0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Da(n)}function Da(t){this._=t}function NN(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Da.prototype=n0.prototype={constructor:Da,on:function(t,e){var n=this._,r=NN(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=ON(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=bd(n[i],t.name,e);else if(e==null)for(i in n)n[i]=bd(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Da(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function ON(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function bd(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=MN,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var lu="http://www.w3.org/1999/xhtml";const yd={svg:"http://www.w3.org/2000/svg",xhtml:lu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),yd.hasOwnProperty(e)?{space:yd[e],local:t}:t}function DN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===lu&&e.documentElement.namespaceURI===lu?e.createElement(t):e.createElementNS(n,t)}}function RN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i0(t){var e=r0(t);return(e.local?RN:DN)(e)}function CN(){}function a0(t){return t==null?CN:function(){return this.querySelector(t)}}function LN(t){typeof t!="function"&&(t=a0(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,f,g=0;g<o;++g)(c=a[g])&&(f=t.call(c,c.__data__,g,a))&&("__data__"in c&&(f.__data__=c.__data__),s[g]=f);return new tn(r,this._parents)}function IN(){return[]}function BN(t){return t==null?IN:function(){return this.querySelectorAll(t)}}function kN(t){typeof t!="function"&&(t=BN(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,f=0;f<s;++f)(c=o[f])&&(r.push(t.call(c,c.__data__,f,o)),i.push(c));return new tn(r,i)}function PN(t){return function(){return this.matches(t)}}function $N(t){typeof t!="function"&&(t=PN(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,f=0;f<o;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&s.push(c);return new tn(r,this._parents)}function o0(t){return new Array(t.length)}function WN(){return new tn(this._enter||this._groups.map(o0),this._parents)}function so(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}so.prototype={constructor:so,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function VN(t){return function(){return t}}var _d="$";function zN(t,e,n,r,i,a){for(var o=0,s,c=e.length,f=a.length;o<f;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new so(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function FN(t,e,n,r,i,a,o){var s,c,f={},g=e.length,_=a.length,x=new Array(g),A;for(s=0;s<g;++s)(c=e[s])&&(x[s]=A=_d+o.call(c,c.__data__,s,e),A in f?i[s]=c:f[A]=c);for(s=0;s<_;++s)A=_d+o.call(t,a[s],s,a),(c=f[A])?(r[s]=c,c.__data__=a[s],f[A]=null):n[s]=new so(t,a[s]);for(s=0;s<g;++s)(c=e[s])&&f[x[s]]===c&&(i[s]=c)}function UN(t,e){if(!t)return A=new Array(this.size()),f=-1,this.each(function(q){A[++f]=q}),A;var n=e?FN:zN,r=this._parents,i=this._groups;typeof t!="function"&&(t=VN(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),f=0;f<a;++f){var g=r[f],_=i[f],x=_.length,A=t.call(g,g&&g.__data__,f,r),E=A.length,D=s[f]=new Array(E),M=o[f]=new Array(E),k=c[f]=new Array(x);n(g,_,D,M,k,A,e);for(var B=0,V=0,P,U;B<E;++B)if(P=D[B]){for(B>=V&&(V=B+1);!(U=M[V])&&++V<E;);P._next=U||null}}return o=new tn(o,r),o._enter=s,o._exit=c,o}function YN(){return new tn(this._exit||this._groups.map(o0),this._parents)}function HN(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function XN(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],f=n[s],g=c.length,_=o[s]=new Array(g),x,A=0;A<g;++A)(x=c[A]||f[A])&&(_[A]=x);for(;s<r;++s)o[s]=e[s];return new tn(o,this._parents)}function qN(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function GN(t){t||(t=jN);function e(_,x){return _&&x?t(_.__data__,x.__data__):!_-!x}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),f,g=0;g<s;++g)(f=o[g])&&(c[g]=f);c.sort(e)}return new tn(i,this._parents).order()}function jN(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function JN(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ZN(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function QN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function KN(){var t=0;return this.each(function(){++t}),t}function tO(){return!this.node()}function eO(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function nO(t){return function(){this.removeAttribute(t)}}function rO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iO(t,e){return function(){this.setAttribute(t,e)}}function aO(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oO(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function sO(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function uO(t,e){var n=r0(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?rO:nO:typeof e=="function"?n.local?sO:oO:n.local?aO:iO)(n,e))}function s0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cO(t){return function(){this.style.removeProperty(t)}}function lO(t,e,n){return function(){this.style.setProperty(t,e,n)}}function fO(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function dO(t,e,n){return arguments.length>1?this.each((e==null?cO:typeof e=="function"?fO:lO)(t,e,n??"")):hO(this.node(),t)}function hO(t,e){return t.style.getPropertyValue(e)||s0(t).getComputedStyle(t,null).getPropertyValue(e)}function gO(t){return function(){delete this[t]}}function mO(t,e){return function(){this[t]=e}}function pO(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function vO(t,e){return arguments.length>1?this.each((e==null?gO:typeof e=="function"?pO:mO)(t,e)):this.node()[t]}function u0(t){return t.trim().split(/^|\s+/)}function cc(t){return t.classList||new c0(t)}function c0(t){this._node=t,this._names=u0(t.getAttribute("class")||"")}c0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function l0(t,e){for(var n=cc(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function f0(t,e){for(var n=cc(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function bO(t){return function(){l0(this,t)}}function yO(t){return function(){f0(this,t)}}function _O(t,e){return function(){(e.apply(this,arguments)?l0:f0)(this,t)}}function wO(t,e){var n=u0(t+"");if(arguments.length<2){for(var r=cc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?_O:e?bO:yO)(n,e))}function xO(){this.textContent=""}function TO(t){return function(){this.textContent=t}}function AO(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function EO(t){return arguments.length?this.each(t==null?xO:(typeof t=="function"?AO:TO)(t)):this.node().textContent}function SO(){this.innerHTML=""}function MO(t){return function(){this.innerHTML=t}}function NO(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function OO(t){return arguments.length?this.each(t==null?SO:(typeof t=="function"?NO:MO)(t)):this.node().innerHTML}function DO(){this.nextSibling&&this.parentNode.appendChild(this)}function RO(){return this.each(DO)}function CO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function LO(){return this.each(CO)}function IO(t){var e=typeof t=="function"?t:i0(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function BO(){return null}function kO(t,e){var n=typeof t=="function"?t:i0(t),r=e==null?BO:typeof e=="function"?e:a0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function PO(){var t=this.parentNode;t&&t.removeChild(this)}function $O(){return this.each(PO)}function WO(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function VO(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zO(t){return this.select(t?VO:WO)}function FO(t){return arguments.length?this.property("__data__",t):this.node().__data__}var d0={},Zt=null;if(typeof document<"u"){var UO=document.documentElement;"onmouseenter"in UO||(d0={mouseenter:"mouseover",mouseleave:"mouseout"})}function YO(t,e,n){return t=h0(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function h0(t,e,n){return function(r){var i=Zt;Zt=r;try{t.call(this,this.__data__,e,n)}finally{Zt=i}}}function HO(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function XO(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function qO(t,e,n){var r=d0.hasOwnProperty(t.type)?YO:h0;return function(i,a,o){var s=this.__on,c,f=r(e,a,o);if(s){for(var g=0,_=s.length;g<_;++g)if((c=s[g]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=f,c.capture=n),c.value=e;return}}this.addEventListener(t.type,f,n),c={type:t.type,name:t.name,value:e,listener:f,capture:n},s?s.push(c):this.__on=[c]}}function GO(t,e,n){var r=HO(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,f=s.length,g;c<f;++c)for(i=0,g=s[c];i<a;++i)if((o=r[i]).type===g.type&&o.name===g.name)return g.value}return}for(s=e?qO:XO,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function wd(t,e,n,r){var i=Zt;t.sourceEvent=Zt,Zt=t;try{return e.apply(n,r)}finally{Zt=i}}function g0(t,e,n){var r=s0(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function jO(t,e){return function(){return g0(this,t,e)}}function JO(t,e){return function(){return g0(this,t,e.apply(this,arguments))}}function ZO(t,e){return this.each((typeof e=="function"?JO:jO)(t,e))}var QO=[null];function tn(t,e){this._groups=t,this._parents=e}tn.prototype={constructor:tn,select:LN,selectAll:kN,filter:$N,data:UN,enter:WN,exit:YN,join:HN,merge:XN,order:qN,sort:GN,call:JN,nodes:ZN,node:QN,size:KN,empty:tO,each:eO,attr:uO,style:dO,property:vO,classed:wO,text:EO,html:OO,raise:RO,lower:LO,append:IO,insert:kO,remove:$O,clone:zO,datum:FO,on:GO,dispatch:ZO};function uo(t){return typeof t=="string"?new tn([[document.querySelector(t)]],[document.documentElement]):new tn([[t]],QO)}function m0(){for(var t=Zt,e;e=t.sourceEvent;)t=e;return t}function p0(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function KO(t){var e=m0();return e.changedTouches&&(e=e.changedTouches[0]),p0(t,e)}function tD(t,e,n){arguments.length<3&&(n=e,e=m0().changedTouches);for(var r=0,i=e?e.length:0,a;r<i;++r)if((a=e[r]).identifier===n)return p0(t,a);return null}function $s(){Zt.stopImmediatePropagation()}function Vr(){Zt.preventDefault(),Zt.stopImmediatePropagation()}function eD(t){var e=t.document.documentElement,n=uo(t).on("dragstart.drag",Vr,!0);"onselectstart"in e?n.on("selectstart.drag",Vr,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function nD(t,e){var n=t.document.documentElement,r=uo(t).on("dragstart.drag",null);e&&(r.on("click.drag",Vr,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wa(t){return function(){return t}}function fu(t,e,n,r,i,a,o,s,c,f){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=c,this._=f}fu.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function rD(){return!Zt.button}function iD(){return this.parentNode}function aD(t){return t??{x:Zt.x,y:Zt.y}}function oD(){return"ontouchstart"in this}function v0(){var t=rD,e=iD,n=aD,r=oD,i={},a=n0("start","drag","end"),o=0,s,c,f,g,_=0;function x(P){P.on("mousedown.drag",A).filter(r).on("touchstart.drag",M).on("touchmove.drag",k).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(){if(!(g||!t.apply(this,arguments))){var P=V("mouse",e.apply(this,arguments),KO,this,arguments);P&&(uo(Zt.view).on("mousemove.drag",E,!0).on("mouseup.drag",D,!0),eD(Zt.view),$s(),f=!1,s=Zt.clientX,c=Zt.clientY,P("start"))}}function E(){if(Vr(),!f){var P=Zt.clientX-s,U=Zt.clientY-c;f=P*P+U*U>_}i.mouse("drag")}function D(){uo(Zt.view).on("mousemove.drag mouseup.drag",null),nD(Zt.view,f),Vr(),i.mouse("end")}function M(){if(t.apply(this,arguments)){var P=Zt.changedTouches,U=e.apply(this,arguments),q=P.length,ot,K;for(ot=0;ot<q;++ot)(K=V(P[ot].identifier,U,tD,this,arguments))&&($s(),K("start"))}}function k(){var P=Zt.changedTouches,U=P.length,q,ot;for(q=0;q<U;++q)(ot=i[P[q].identifier])&&(Vr(),ot("drag"))}function B(){var P=Zt.changedTouches,U=P.length,q,ot;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),q=0;q<U;++q)(ot=i[P[q].identifier])&&($s(),ot("end"))}function V(P,U,q,ot,K){var nt=q(U,P),mt,ft,J,G=a.copy();if(wd(new fu(x,"beforestart",mt,P,o,nt[0],nt[1],0,0,G),function(){return(Zt.subject=mt=n.apply(ot,K))==null?!1:(ft=mt.x-nt[0]||0,J=mt.y-nt[1]||0,!0)}))return function W(Z){var Y=nt,et;switch(Z){case"start":i[P]=W,et=o++;break;case"end":delete i[P],--o;case"drag":nt=q(U,P),et=o;break}wd(new fu(x,Z,mt,P,et,nt[0]+ft,nt[1]+J,nt[0]-Y[0],nt[1]-Y[1],G),G.apply,G,[Z,ot,K])}}return x.filter=function(P){return arguments.length?(t=typeof P=="function"?P:wa(!!P),x):t},x.container=function(P){return arguments.length?(e=typeof P=="function"?P:wa(P),x):e},x.subject=function(P){return arguments.length?(n=typeof P=="function"?P:wa(P),x):n},x.touchable=function(P){return arguments.length?(r=typeof P=="function"?P:wa(!!P),x):r},x.on=function(){var P=a.on.apply(a,arguments);return P===a?x:P},x.clickDistance=function(P){return arguments.length?(_=(P=+P)*P,x):Math.sqrt(_)},x}var sD={value:function(){}};function b0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new Ra(n)}function Ra(t){this._=t}function uD(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ra.prototype=b0.prototype={constructor:Ra,on:function(t,e){var n=this._,r=uD(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=cD(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=xd(n[i],t.name,e);else if(e==null)for(i in n)n[i]=xd(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ra(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function cD(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function xd(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=sD,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var lD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ri=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ii=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ve=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mn=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},lc=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},fc=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},fD=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)},dD=function(){function t(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.nx,s=e.ny,c=e.dy,f=c===void 0?0:c,g=e.dx,_=g===void 0?0:g,x=e.color,A=x===void 0?"grey":x,E=e.data,D=e.type,M=e.subject,k=e.connector,B=e.note,V=e.disable,P=e.id,U=e.className;ri(this,t),this._dx=o!==void 0?o-r:_,this._dy=s!==void 0?s-a:f,this._x=r,this._y=a,this._color=A,this.id=P,this._className=U||"",this._type=D||"",this.data=E,this.note=B||{},this.connector=k||{},this.subject=M||{},this.disable=V||[]}return ii(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),this.type.connector.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(n){this._className=n,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(n){this._type=n,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(n){this._x=n,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(n){this._color=n,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(n){this._dx=n,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(n){this._dy=n,this.updateOffset()}},{key:"nx",set:function(n){this._dx=n-this._x,this.updateOffset()}},{key:"ny",set:function(n){this._dy=n-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(n){var r=n.x,i=n.y;this._dx=r,this._dy=i,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(n){var r=n.x,i=n.y;this._x=r,this._y=i,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var n={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(n.data=this.data),this.type&&(n.type=this.type),this._className&&(n.className=this._className),Object.keys(this.connector).length>0&&(n.connector=this.connector),Object.keys(this.subject).length>0&&(n.subject=this.subject),Object.keys(this.note).length>0&&(n.note=this.note),n}}]),t}(),hD=function(){function t(e){var n=e.annotations,r=e.accessors,i=e.accessorsInverse;ri(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return ii(t,[{key:"clearTypes",value:function(n){this.annotations.forEach(function(r){r.type=void 0,r.subject=n&&n.subject||r.subject,r.connector=n&&n.connector||r.connector,r.note=n&&n.note||r.note})}},{key:"setPositionWithAccessors",value:function(){var n=this;this.annotations.forEach(function(r){r.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.editMode=n,r.type.updateEditMode())})}},{key:"updateDisable",value:function(n){this.annotations.forEach(function(r){r.disable=n,r.type&&n.forEach(function(i){r.type[i]&&(r.type[i].remove&&r.type[i].remove(),r.type[i]=void 0)})})}},{key:"updateTextWrap",value:function(n){this.annotations.forEach(function(r){r.type&&r.type.updateTextWrap&&r.type.updateTextWrap(n)})}},{key:"updateText",value:function(){this.annotations.forEach(function(n){n.type&&n.type.drawText&&n.type.drawText()})}},{key:"updateNotePadding",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.notePadding=n)})}},{key:"json",get:function(){var n=this;return this.annotations.map(function(r){var i=r.json;return n.accessorsInverse&&r.data&&(i.data={},Object.keys(n.accessorsInverse).forEach(function(a){i.data[a]=n.accessorsInverse[a]({x:r.x,y:r.y})})),i})}},{key:"noteNodes",get:function(){return this.annotations.map(function(n){return Ve({},n.type.getNoteBBoxOffset(),{positionX:n.x,positionY:n.y})})}}]),t}(),gD=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i;return{move:{x:r,y:a}}},mD=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r1,s=e.r2,c=e.padding,f={move:{x:r,y:a}};return o!==void 0&&(f.r1={x:r+o/Math.sqrt(2),y:a+o/Math.sqrt(2)}),s!==void 0&&(f.r2={x:r+s/Math.sqrt(2),y:a+s/Math.sqrt(2)}),c!==void 0&&(f.padding={x:r+o+c,y:a}),f},pD=function(e){var n=e.group,r=e.handles,i=e.r,a=i===void 0?10:i,o=n.selectAll("circle.handle").data(r);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(v0().container(Wo("g.annotations").node()).on("start",function(s){return s.start&&s.start(s)}).on("drag",function(s){return s.drag&&s.drag(s)}).on("end",function(s){return s.end&&s.end(s)})),n.selectAll("circle.handle").attr("cx",function(s){return s.x}).attr("cy",function(s){return s.y}).attr("r",function(s){return s.r||a}).attr("class",function(s){return"handle "+(s.className||"")}),o.exit().remove()},y0=function(e,n){return(e==="dynamic"||e==="left"||e==="right")&&(n<0?e="top":e="bottom"),e},_0=function(e,n){return(e==="dynamic"||e==="top"||e==="bottom")&&(n<0?e="right":e="left"),e},vD=["topBottom","top","bottom"],bD=["leftRight","left","right"],yD=function(t){var e=t.padding,n=e===void 0?0:e,r=t.bbox,i=r===void 0?{x:0,width:0,height:0}:r,a=t.align,o=t.orientation,s=t.offset,c=s===void 0?{x:0,y:0}:s,f=-i.x,g=0;return vD.indexOf(o)!==-1?(a=_0(a,c.x),c.y<0&&o==="topBottom"||o==="top"?g-=i.height+n:g+=n,a==="middle"?f-=i.width/2:a==="right"&&(f-=i.width)):bD.indexOf(o)!==-1&&(a=y0(a,c.y),c.x<0&&o==="leftRight"||o==="left"?f-=i.width+n:f+=n,a==="middle"?g-=i.height/2:a==="top"&&(g-=i.height)),{x:f,y:g}},_n=function(e){var n=e.data,r=e.curve,i=r===void 0?ta:r,a=e.canvasContext,o=e.className,s=e.classID,c=ko().curve(i),f={type:"path",className:o,classID:s,data:n};return a?(c.context(a),f.pathMethods=c):f.attrs={d:c(n)},f},co=function(e){var n=e.data,r=e.canvasContext,i=e.className,a=e.classID,o={type:"path",className:i,classID:a,data:n},s=pm().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return r?(s.context(r),o.pathMethods=lineGen):o.attrs={d:s()},o},_D=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.bbox,s=t.offset;e=y0(e,s.y),e==="top"?a-=o.height:e==="middle"&&(a-=o.height/2);var c=[[r,a],[r,a+o.height]];return{components:[_n({data:c,className:"note-line"})]}},wD=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.offset,s=t.bbox;e=_0(e,o.x),e==="right"?r-=s.width:e==="middle"&&(r-=s.width/2);var c=[[r,a],[r+s.width,a]];return{components:[_n({data:c,className:"note-line"})]}},w0=function(e){var n=e.type,r=e.subjectType,i=n.annotation,a=i.position,o=i.x-a.x,s=o+i.dx,c=i.y-a.y,f=c+i.dy,g=i.subject;if(r==="circle"&&(g.outerRadius||g.radius)){var _=Math.sqrt((o-s)*(o-s)+(c-f)*(c-f)),x=Math.asin(-f/_),A=g.outerRadius||g.radius+(g.radiusPadding||0);o=Math.abs(Math.cos(x)*A)*(s<0?-1:1),c=Math.abs(Math.sin(x)*A)*(f<0?-1:1)}if(r==="rect"){var E=g.width,D=g.height;(E>0&&i.dx>0||E<0&&i.dx<0)&&(Math.abs(E)>Math.abs(i.dx)?o=E/2:o=E),(D>0&&i.dy>0||D<0&&i.dy<0)&&(Math.abs(D)>Math.abs(i.dy)?c=D/2:c=D),o===E/2&&c===D/2&&(o=s,c=f)}return[[o,c],[s,f]]},xD=function(t){var e=w0(t);return{components:[_n({data:e,className:"connector"})]}},TD=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,a=r.x-i.x,o=a+r.dx,s=r.y-i.y,c=s+r.dy,f=r.subject;if(n==="rect"){var g=f.width,_=f.height;(g>0&&r.dx>0||g<0&&r.dx<0)&&(Math.abs(g)>Math.abs(r.dx)?a=g/2:a=g),(_>0&&r.dy>0||_<0&&r.dy<0)&&(Math.abs(_)>Math.abs(r.dy)?s=_/2:s=_),a===g/2&&s===_/2&&(a=o,s=c)}var x=[[a,s],[o,c]],A=c-s,E=o-a,D=o,M=c,k=c<s&&o>a||o<a&&c>s?-1:1;if(Math.abs(E)<Math.abs(A)?(D=o,M=s+E*k):(M=c,D=a+A*k),n==="circle"&&(f.outerRadius||f.radius)){var B=(f.outerRadius||f.radius)+(f.radiusPadding||0),V=B/Math.sqrt(2);if(Math.abs(E)>V&&Math.abs(A)>V)a=V*(o<0?-1:1),s=V*(c<0?-1:1),x=[[a,s],[D,M],[o,c]];else if(Math.abs(E)>Math.abs(A)){var P=Math.asin(-c/B);a=Math.abs(Math.cos(P)*B)*(o<0?-1:1),x=[[a,c],[o,c]]}else{var U=Math.acos(o/B);s=Math.abs(Math.sin(U)*B)*(c<0?-1:1),x=[[o,s],[o,c]]}}else x=[[a,s],[D,M],[o,c]];return{components:[_n({data:x,className:"connector"})]}},AD=function(t){var e=t.type,n=t.connectorData,r=t.subjectType;n||(n={}),(!n.points||typeof n.points=="number")&&(n.points=ED(e.annotation.offset,n.points)),n.curve||(n.curve=Bm);var i=[];if(e.editMode){var a=n.points.map(function(f,g){return Ve({},gD({cx:f[0],cy:f[1]}),{index:g})}),o=function(g){n.points[g][0]+=ve.dx,n.points[g][1]+=ve.dy,e.redrawConnector()};i=e.mapHandles(a.map(function(f){return Ve({},f.move,{drag:o.bind(e,f.index)})}))}var s=w0({type:e,subjectType:r});s=[s[0]].concat(fD(n.points),[s[1]]);var c=[_n({data:s,curve:n.curve,className:"connector"})];return{components:c,handles:i}},ED=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r={x:e.x/(n+1),y:e.y/(n+1)},i=[],a=1;a<=n;a++)i.push([r.x*a+a%2*20,r.y*a-a%2*20]);return i},SD=function(t){var e=t.annotation,n=t.start,r=t.end,i=t.scale,a=i===void 0?1:i,o=e.position;n?n=[-r[0]+n[0],-r[1]+n[1]]:n=[e.dx,e.dy],r||(r=[e.x-o.x,e.y-o.y]);var s=r[0],c=r[1],f=n[0],g=n[1],_=10*a,x=16/180*Math.PI,A=Math.atan(g/f);f<0&&(A+=Math.PI);var E=[[s,c],[Math.cos(A+x)*_+s,Math.sin(A+x)*_+c],[Math.cos(A-x)*_+s,Math.sin(A-x)*_+c],[s,c]];return{components:[_n({data:E,className:"connector-end connector-arrow",classID:"connector-end"})]}},MD=function(t){var e=t.line,n=t.scale,r=n===void 0?1:n,i=co({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[i]}},ND=function(t){var e=t.subjectData,n=t.type;!e.radius&&!e.outerRadius&&(e.radius=20);var r=[],i=co({data:e,className:"subject"});if(n.editMode){var a=mD({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:e.radiusPadding}),o=function(f){var g=e[f]+ve.dx*Math.sqrt(2);e[f]=g,n.redrawSubject(),n.redrawConnector()},s=[Ve({},a.r1,{drag:o.bind(n,e.outerRadius!==void 0?"outerRadius":"radius")})];e.innerRadius&&s.push(Ve({},a.r2,{drag:o.bind(n,"innerRadius")})),r=n.mapHandles(s)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},OD=function(t){var e=t.subjectData,n=t.type;e.width||(e.width=100),e.height||(e.height=100);var r=[],i=e.width,a=e.height,o=[[0,0],[i,0],[i,a],[0,a],[0,0]],s=_n({data:o,className:"subject"});if(n.editMode){var c=function(){e.width=ve.x,n.redrawSubject(),n.redrawConnector()},f=function(){e.height=ve.y,n.redrawSubject(),n.redrawConnector()},g=[{x:i,y:a/2,drag:c.bind(n)},{x:i/2,y:a,drag:f.bind(n)}];r=n.mapHandles(g)}return s.attrs["fill-opacity"]=.1,{components:[s],handles:r}},DD=function(t){var e=t.subjectData,n=t.type,r=n.annotation.position,i=(e.x1!==void 0?e.x1:r.x)-r.x,a=(e.x2!==void 0?e.x2:r.x)-r.x,o=(e.y1!==void 0?e.y1:r.y)-r.y,s=(e.y2!==void 0?e.y2:r.y)-r.y,c=[[i,o],[a,s]];return{components:[_n({data:c,className:"subject"})]}},RD=function(t){var e=t.subjectData,n=e===void 0?{}:e,r=t.type,i=r===void 0?{}:r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.typeSettings&&i.typeSettings.subject;n.radius||(o&&o.radius?n.radius=o.radius:n.radius=14),n.x||o&&o.x&&(n.x=o.x),n.y||o&&o.y&&(n.y=o.y);var s=[],c=[],f=n.radius,g=f*.7,_=0,x=0,A=Math.sqrt(2)*f,E={xleftcorner:-f,xrightcorner:f,ytopcorner:-f,ybottomcorner:f,xleft:-A,xright:A,ytop:-A,ybottom:A};n.x&&!n.y?_=E["x"+n.x]:n.y&&!n.x?x=E["y"+n.y]:n.x&&n.y&&(_=E["x"+n.x+"corner"],x=E["y"+n.y+"corner"]);var D="translate("+_+", "+x+")",M=co({className:"subject",data:{radius:f}});M.attrs.transform=D,M.attrs.fill=a.color,M.attrs["stroke-linecap"]="round",M.attrs["stroke-width"]="3px";var k=co({className:"subject-ring",data:{outerRadius:f,innerRadius:g}});k.attrs.transform=D,k.attrs["stroke-width"]="3px",k.attrs.fill="white";var B=void 0;if(_&&x||!_&&!x)B=_n({className:"subject-pointer",data:[[0,0],[_||0,0],[0,x||0],[0,0]]});else if(_||x){var V=function(K){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return K&&K/Math.sqrt(2)/Math.sqrt(2)||nt*f/Math.sqrt(2)};B=_n({className:"subject-pointer",data:[[0,0],[V(_),V(x)],[V(_,-1),V(x,-1)],[0,0]]})}if(B&&(B.attrs.fill=a.color,B.attrs["stroke-linecap"]="round",B.attrs["stroke-width"]="3px",c.push(B)),i.editMode){var P=function(){n.x=ve.x<-f*2?"left":ve.x>f*2?"right":void 0,n.y=ve.y<-f*2?"top":ve.y>f*2?"bottom":void 0,i.redrawSubject()},U={x:_*2,y:x*2,drag:P.bind(i)};!U.x&&!U.y&&(U.y=-f),s=i.mapHandles([U])}var q=void 0;return n.text&&(q={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:_,y:x}}),c.push(M),c.push(k),c.push(q),{components:c,handles:s}},x0=function(){function t(e){var n=e.a,r=e.annotation,i=e.editMode,a=e.dispatcher,o=e.notePadding,s=e.accessors;if(ri(this,t),this.a=n,this.note=r.disable.indexOf("note")===-1&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=r.disable.indexOf("connector")===-1&&n.select("g.annotation-connector"),this.subject=r.disable.indexOf("subject")===-1&&n.select("g.annotation-subject"),this.dispatcher=a,a){var c=ID.bind(null,a,r);c({component:this.note,name:"note"}),c({component:this.connector,name:"connector"}),c({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=o!==void 0?o:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}return ii(t,[{key:"init",value:function(n){this.annotation.x||this.mapX(n),this.annotation.y||this.mapY(n)}},{key:"mapY",value:function(n){n.y&&(this.annotation.y=n.y(this.annotation.data))}},{key:"mapX",value:function(n){n.x&&(this.annotation.x=n.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(n,r){var i=this;Array.isArray(r)||(r=[r]),r.filter(function(a){return a}).forEach(function(a){var o=a.type,s=a.className,c=a.attrs,f=a.handles,g=a.classID;if(o==="handle")pD({group:n,r:c&&c.r,handles:f});else{gn(n,[i.annotation],o,s,g);for(var _=n.select(o+"."+(g||s)),x=Object.keys(c),A=[],E=_.node().attributes,D=E.length-1;D>=0;D--){var M=E[D].name;x.indexOf(M)===-1&&M!=="class"&&A.push(M)}x.forEach(function(k){k==="text"?_.text(c[k]):_.attr(k,c[k])}),A.forEach(function(k){return _.attr(k,null)})}})}},{key:"getNoteBBox",value:function(){return Ad(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var n=Ad(this.note,".annotation-note-content"),r=this.noteContent.attr("transform").split(/\(|\,|\)/g);return n.offsetCornerX=parseFloat(r[1])+this.annotation.dx,n.offsetCornerY=parseFloat(r[2])+this.annotation.dy,n.offsetX=this.annotation.dx,n.offsetY=this.annotation.dy,n}},{key:"drawSubject",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.subject,a=r.type,o={type:this,subjectData:i},s={};a==="circle"?s=ND(o):a==="rect"?s=OD(o):a==="threshold"?s=DD(o):a==="badge"&&(s=RD(o,this.annotation));var c=s,f=c.components,g=f===void 0?[]:f,_=c.handles,x=_===void 0?[]:_;return g.forEach(function(A){A&&A.attrs&&!A.attrs.stroke&&(A.attrs.stroke=n.annotation.color)}),this.editMode&&(x=x.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),g.push({type:"handle",handles:x})),g}},{key:"drawConnector",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.connector,a=i.type||r.type,o={type:this,connectorData:i};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var s={};a==="curve"?s=AD(o):a==="elbow"?s=TD(o):s=xD(o);var c=s,f=c.components,g=f===void 0?[]:f,_=c.handles,x=_===void 0?[]:_,A=g[0];A&&(A.attrs.stroke=this.annotation.color,A.attrs.fill="none");var E=i.end||r.end,D={};if(E==="arrow"){var M=A.data[1],k=A.data[0],B=Math.sqrt(Math.pow(M[0]-k[0],2)+Math.pow(M[1]-k[1],2));B<5&&A.data[2]&&(M=A.data[2]),D=SD({annotation:this.annotation,start:M,end:k,scale:i.endScale})}else E==="dot"?D=MD({line:A,scale:i.endScale}):(!E||E==="none")&&this.connector&&this.connector.select(".connector-end").remove();return D.components&&(D.components.forEach(function(V){V.attrs.fill=n.annotation.color,V.attrs.stroke=n.annotation.color}),g=g.concat(D.components)),this.editMode&&x.length!==0&&g.push({type:"handle",handles:x}),g}},{key:"drawNote",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.note,a=i.align||r.align||"dynamic",o={bbox:r.bbox,align:a,offset:this.annotation.offset},s=i.lineType||r.lineType,c={};s==="vertical"?c=_D(o):s==="horizontal"&&(c=wD(o));var f=c,g=f.components,_=g===void 0?[]:g,x=f.handles,A=x===void 0?[]:x;if(_.forEach(function(k){k.attrs.stroke=n.annotation.color}),this.editMode){A=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),_.push({type:"handle",handles:A});var E=this.dragNote.bind(this),D=this.dragstarted.bind(this),M=this.dragended.bind(this);this.note.call(v0().container(Wo("g.annotations").node()).on("start",function(k){return D(k)}).on("drag",function(k){return E(k)}).on("end",function(k){return M(k)}))}else this.note.on("mousedown.drag",null);return _}},{key:"drawNoteContent",value:function(n){var r=this.annotation.note,i=r.padding!==void 0?r.padding:this.notePadding,a=r.orientation||n.orientation||"topBottom",o=r.lineType||n.lineType,s=r.align||n.align||"dynamic";o==="vertical"?a="leftRight":o==="horizontal"&&(a="topBottom");var c={padding:i,bbox:n.bbox,offset:this.annotation.offset,orientation:a,align:s},f=yD(c),g=f.x,_=f.y;return this.offsetCornerX=g+this.annotation.dx,this.offsetCornerY=_+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+g+", "+_+")"),[]}},{key:"drawOnScreen",value:function(n,r){return this.drawOnSVG(n,r)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function(){var n=this.annotation.position;this.a.attr("transform","translate("+n.x+", "+n.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var n=this.annotation.offset;this.note.attr("transform","translate("+n.x+", "+n.y+")")}}},{key:"setPositionWithAccessors",value:function(n){n&&this.annotation.data&&(this.mapX(n),this.mapY(n)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){ve.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var n=this.annotation.position;n.x+=ve.dx,n.y+=ve.dy,this.annotation.position=n}},{key:"dragNote",value:function(){var n=this.annotation.offset;n.x+=ve.dx,n.y+=ve.dy,this.annotation.offset=n}},{key:"mapHandles",value:function(n){var r=this;return n.map(function(i){return Ve({},i,{start:r.dragstarted.bind(r),end:r.dragended.bind(r)})})}}]),t}(),er=function(e,n,r){return function(i){lc(a,i);function a(o){ri(this,a);var s=fc(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return s.typeSettings=n,n.disable&&n.disable.forEach(function(c){s[c]&&s[c].remove(),s[c]=void 0,c==="note"&&(s.noteContent=void 0)}),s}return ii(a,[{key:"className",value:function(){return""+(n.className||Mn(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this)&&Mn(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(s){return this.typeSettings.subject=Ve({},n.subject,this.typeSettings.subject),Mn(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawSubject",this).call(this,Ve({},s,this.typeSettings.subject))}},{key:"drawConnector",value:function(s){return this.typeSettings.connector=Ve({},n.connector,this.typeSettings.connector),Mn(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawConnector",this).call(this,Ve({},s,n.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(s){return this.typeSettings.note=Ve({},n.note,this.typeSettings.note),Mn(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNote",this).call(this,Ve({},s,n.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(s){return Mn(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNoteContent",this).call(this,Ve({},s,n.note,this.typeSettings.note))}}],[{key:"init",value:function(s,c){return Mn(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,s,c),r&&(s=r(s,c)),s}}]),a}(e)},Vo=function(t){lc(e,t);function e(n){ri(this,e);var r=fc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.textWrap=n.textWrap||120,r.drawText(),r}return ii(e,[{key:"updateTextWrap",value:function(r){this.textWrap=r,this.drawText()}},{key:"drawText",value:function(){if(this.note){gn(this.note,[this.annotation],"g","annotation-note-content");var r=this.note.select("g.annotation-note-content");gn(r,[this.annotation],"rect","annotation-note-bg"),gn(r,[this.annotation],"text","annotation-note-label"),gn(r,[this.annotation],"text","annotation-note-title");var i={height:0},a=this.a.select("text.annotation-note-label"),o=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,s=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,c=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,f={top:0,bottom:0,left:0,right:0};if(typeof c=="number"?f={top:c,bottom:c,left:c,right:c}:c&&(typeof c>"u"?"undefined":lD(c))==="object"&&(f=Ve(f,c)),this.annotation.note.title){var g=this.a.select("text.annotation-note-title");g.text(this.annotation.note.title),g.attr("fill",this.annotation.color),g.attr("font-weight","bold"),g.call(Td,o,s),i=g.node().getBBox()}a.text(this.annotation.note.label).attr("dx","0"),a.call(Td,o,s),a.attr("y",i.height*1.1||0),a.attr("fill",this.annotation.color);var _=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",_.width+f.left+f.right).attr("height",_.height+f.top+f.bottom).attr("x",_.x-f.left).attr("y",-f.top).attr("fill","white").attr("fill-opacity",0)}}}]),e}(x0);er(Vo,{className:"label",note:{align:"middle"}});var zo=er(Vo,{className:"callout",note:{lineType:"horizontal"}});er(zo,{className:"callout elbow",connector:{type:"elbow"}});er(zo,{className:"callout curve",connector:{type:"curve"}});er(x0,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});er(Vo,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});er(Vo,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var CD=function(t){lc(e,t);function e(){return ri(this,e),fc(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ii(e,[{key:"mapY",value:function(r){Mn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,r);var i=this.annotation;(i.subject.x1||i.subject.x2)&&i.data&&r.y&&(i.y=r.y(i.data)),(i.subject.x1||i.subject.x2)&&!i.x&&(i.x=i.subject.x1||i.subject.x2)}},{key:"mapX",value:function(r){Mn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,r);var i=this.annotation;(i.subject.y1||i.subject.y2)&&i.data&&r.x&&(i.x=r.x(i.data)),(i.subject.y1||i.subject.y2)&&!i.y&&(i.y=i.subject.y1||i.subject.y2)}}]),e}(zo),LD=er(CD,{className:"callout xythreshold",subject:{type:"threshold"}}),gn=function(e,n,r,i,a){var o=e.selectAll(r+"."+(a||i)).data(n);return o.enter().append(r).merge(o).attr("class",i),o.exit().remove(),e},ID=function(e,n,r){var i=r.component,a=r.name;i&&i.on("mouseover.annotations",function(){e.call(a+"over",i,n)}).on("mouseout.annotations",function(){return e.call(a+"out",i,n)}).on("click.annotations",function(){return e.call(a+"click",i,n)})},Td=function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1.2;e.each(function(){for(var a=Wo(this),o=a.text().split(r||/[ \t\r\n]+/).reverse().filter(function(g){return g!==""}),s=void 0,c=[],f=a.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");s=o.pop();)c.push(s),f.text(c.join(" ")),f.node().getComputedTextLength()>n&&c.length>1&&(c.pop(),f.text(c.join(" ")),c=[s],f=a.append("tspan").attr("x",0).attr("dy",i+"em").text(s))})},Ad=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:":not(.handle)";return e?e.selectAll(n).nodes().reduce(function(r,i){var a=i.getBBox();r.x=Math.min(r.x,a.x),r.y=Math.min(r.y,a.y),r.width=Math.max(r.width,a.width);var o=i&&i.attributes&&i.attributes.y;return r.height=Math.max(r.height,(o&&parseFloat(o.value)||0)+a.height),r},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function BD(){var t=[],e=void 0,n=void 0,r=[],i={},a={},o=!1,s=void 0,c=zo,f=void 0,g=void 0,_=b0("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),x=void 0,A=function(D){x=D,o||D.selectAll("circle.handle").remove();var M=t.map(function(P){return P.type||(P.type=c),P.disable||(P.disable=r),new dD(P)});e=e||new hD({annotations:M,accessors:i,accessorsInverse:a,ids:s});var k=D.selectAll("g").data([e]);k.enter().append("g").attr("class","annotations");var B=D.select("g.annotations");gn(B,e.annotations,"g","annotation");var V=B.selectAll("g.annotation");V.each(function(P){var U=Wo(this);U.attr("class","annotation"),gn(U,[P],"g","annotation-connector"),gn(U,[P],"g","annotation-subject"),gn(U,[P],"g","annotation-note"),gn(U.select("g.annotation-note"),[P],"g","annotation-note-content"),P.type=P.type.toString()==="[object Object]"?P.type:new P.type({a:U,annotation:P,textWrap:f,notePadding:g,editMode:o,dispatcher:_,accessors:i}),P.type.draw(),P.type.drawText&&P.type.drawText()})};return A.json=function(){return window.copy(JSON.stringify(e.json.map(function(E){return delete E.type,E}))),A},A.update=function(){return t&&e&&(t=e.annotations.map(function(E){return E.type.draw(),E})),A},A.updateText=function(){return e&&(e.updateText(f),t=e.annotations),A},A.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,A},A.disable=function(E){return arguments.length?(r=E,e&&(e.updateDisable(r),t=e.annotations),A):r},A.textWrap=function(E){return arguments.length?(f=E,e&&(e.updateTextWrap(f),t=e.annotations),A):f},A.notePadding=function(E){return arguments.length?(g=E,e&&(e.updateNotePadding(g),t=e.annotations),A):g},A.type=function(E,D){return arguments.length?(c=E,e&&(e.annotations.map(function(M){M.type.note&&M.type.note.selectAll("*:not(.annotation-note-content)").remove(),M.type.noteContent&&M.type.noteContent.selectAll("*").remove(),M.type.subject&&M.type.subject.selectAll("*").remove(),M.type.connector&&M.type.connector.selectAll("*").remove(),M.type.typeSettings={},M.type=c,M.subject=D&&D.subject||M.subject,M.connector=D&&D.connector||M.connector,M.note=D&&D.note||M.note}),t=e.annotations),A):c},A.annotations=function(E){if(!arguments.length)return e&&e.annotations||t;if(t=E,e&&e.annotations){var D=t.some(function(M){return!M.type||M.type.toString()!=="[object Object]"});D?(e=null,A(x)):e.annotations=t}return A},A.context=function(E){return arguments.length?(n=E,A):n},A.accessors=function(E){return arguments.length?(i=E,A):i},A.accessorsInverse=function(E){return arguments.length?(a=E,A):a},A.ids=function(E){return arguments.length?(s=E,A):s},A.editMode=function(E){return arguments.length?(o=E,x&&x.selectAll("g.annotation").classed("editable",o),e&&(e.editMode(o),t=e.annotations),A):o},A.collection=function(E){return arguments.length?(e=E,A):e},A.on=function(){var E=_.on.apply(_,arguments);return E===_?A:E},A}function kD(){const t=BD();let e=Qe(),n=Qe();const r=ie.dataJoin("g","annotation"),i=a=>{a.each((o,s,c)=>{const f=o.map(g=>({...g,x:e(g.x),y:n(g.y)}));t.annotations(f),r(de(c[s]),f).call(t)})};return i.xScale=(...a)=>a.length?(e=a[0],i):e,i.yScale=(...a)=>a.length?(n=a[0],i):n,ie.rebindAll(i,t),i}const PD=(t,e,n)=>{const r=e[n];if(typeof r!="function")throw new Error(`Attempt to rebind ${n} which isn't a function on the source object`);return(...i)=>{var a=r.apply(e,i);return a===e?t:a}},$D=t=>e=>t.reduce((n,r)=>n&&r(n),e),WD=(t,e,...n)=>{const r=$D(n);for(const i of Object.keys(e)){const a=r(i);a&&(t[a]=PD(t,e,i))}return t},VD=t=>t.map(e=>typeof e=="string"?new RegExp(`^${e}$`):e),zD=(...t)=>(t=VD(t),e=>t.every(n=>!n.test(e))&&e),FD=t=>t,T0=(t,e,n,r)=>t[e]?t[e].apply(t,n):r,UD=t=>t.tickValues()??T0(t.scale(),"ticks",t.tickArguments(),t.scale().domain()),YD=t=>t.tickFormat()??T0(t.scale(),"tickFormat",t.tickArguments(),FD),HD=t=>n=>{const r=UD(t),i=YD(t),a=r.map(i),o=n.append("text"),s=a.map(g=>o.text(g).node().getBBox()),c=Math.max(...s.map(g=>g.height)),f=Math.max(...s.map(g=>g.width));return o.remove(),{maxHeight:c,maxWidth:f,labelCount:a.length}},Ed=t=>{let e=o=>{},n=null;const r=()=>t.orient()==="left"||t.orient()==="right",i=o=>{const{maxHeight:s,maxWidth:c,labelCount:f}=HD(t)(o),g=r(),_=t.scale().range()[g?0:1],x=t.scale().domain(),A=Math.floor((g?s:c)*f/_)+1;o.select("text").attr("visibility",(E,D)=>{const M=E>=x[0]&&E<=x[1],k=D%A===0;return M&&k?"visible":"hidden"}),o.select("path").attr("visibility",E=>E>=x[0]&&E<=x[1]?"visible":"hidden"),n&&g&&n.yAxisWidth(`max(${Math.ceil(c)+10+2}px, 3rem)`)},a=o=>t(o);return t.decorate(o=>{i(o),e(o)}),a.decorate=(...o)=>o.length?(e=o[0],a):e,a.series=(...o)=>o.length?(n=o[0],a):n,WD(a,t,zD("decorate","series")),a},Xn=class Xn extends nb{constructor(){super(...arguments),this.containerRef=kr(),this.annotations=[],this.resizeObserver=new ResizeObserver(e=>{const[n]=e;n.contentRect.width&&n.contentRect.height&&this.redraw()})}get plotData(){return this.props.plotData}getWebglColorFromCSS(e){var n;if(Xn.cssColors!==void 0)return((n=Jn(Xn.cssColors.getPropertyValue(e)))==null?void 0:n.rgb())??void 0}getWebGLColor(e){const n=typeof e=="string"?this.getWebglColorFromCSS(e):e;if(n!==void 0)return[n.r/255,n.g/255,n.b/255,n.opacity]}getWebglColorByIdx(e){const n=[1,0,0,1];if(this.plotData===void 0)return n;const r=Ku(e,this.plotData.length);return this.getWebGLColor(yr(r))??n}redraw(){de(this.containerRef.current).datum({annotations:this.annotations,data:this.plotData}).call(this.series),de(this.containerRef.current).select("rect.annotation-note-bg").attr("rx",2).attr("ry",2);const e=de(this.containerRef.current).select(".svg-plot-area svg"),n=e.select("clipPath");if(n.empty()){const i=crypto.randomUUID();e.append("clipPath").attr("id",i).html('<rect x="0" y="0" width="100%" height="100%" />')}else{const i=n.attr("id");e.select("g.multi > g:not(g .annotation)").attr("clip-path",`url(#${i})`),e.select("g.multi > g:has(g .annotation)").attr("clip-path",null)}const{useClick:r}=this.props;if(r){const i=r();i&&e.on("click",()=>{const[a]=this.annotations;if(!a)return;const{x:o,y:s}=a,c=this._findClosestPoint(o,s);c&&i(c)})}}_webglMapping(e,n,r){return e.data[n]}_svgMapping(e,n,r,i){return i?e.annotations:e.data[n]}_createWebglSeries(){return[]}_createSvgSeries(){return[]}_findClosestPoint(e,n){return null}_annotationData(e){return null}_annotationOrientation(){return"vertical"}_updateScaleDomains(){const e=this._createXScale(),n=this._createYScale();this.xScale.domain(e.domain()),this.yScale.domain(n.domain()),this.xScaleBase.domain(this.xScale.domain()),this.yScaleBase.domain(this.yScale.domain()),this._xScaleInitial.domain(this.xScale.domain()),this._yScaleInitial.domain(this.yScale.domain()),this.d3fcSvgNode&&(this.d3fcSvgNode.__zoom=Qi),this.annotations=[]}_addAnnotation(e){var g;if(!e){this.redraw();return}const n=this._annotationData(e);if(!n){this.redraw();return}const r=this.xScale.domain(),i=this.yScale.domain(),a=this._annotationOrientation()==="vertical"?{y1:this.yScale.range()[0],y2:this.yScale.range()[1]}:{x1:this.xScale.range()[0],x2:this.xScale.range()[1]},o=Math.max(Math.min(n.x,r[1]),r[0]);let s=o<(r[1]+r[0])/2?20:-20;const c=Math.max(Math.min(n.y,i[1]),i[0]),f=(g=this.annotationSvgElement)==null?void 0:g.getBoundingClientRect();if(f){const _=this.xScale(o),x=document.body.getBoundingClientRect(),A=_+f.left,E=.3,D=400;s!==-20&&A>Math.min(x.width*(1-E),Math.max(x.width/2,x.width-D))?s=-20:s!==20&&A<Math.max(x.width*E,Math.min(x.width/2,D))&&(s=20)}this.annotations.push({x:o,y:c,dx:s,dy:(c-i[0])/(i[1]-i[0])>=.5?15:-15,note:{title:n.title,label:n.note,wrapSplitter:`
`,bgPadding:5},subject:a}),this.redraw()}_createPointer(){const e=this.props.onPoint??(([n])=>{if(this.annotations.pop(),!n){this.redraw();return}const r=this.xScale.invert(n.x),i=this.yScale.invert(n.y),a=this._findClosestPoint(r,i);this._addAnnotation(a)});return ie.pointer().on("point",e)}_createZoom(){let e=!1,n=1,r,i;return om().on("zoom",a=>{r=a.transform.rescaleX(this.xScaleBase).domain(),i=a.transform.rescaleY(this.yScaleBase).domain();const o=a.transform.k,s=this.xScale.domain(),c=this.yScale.domain();r[0]<this._xScaleInitial.domain()[0]&&(r[0]=this._xScaleInitial.domain()[0],e=!0,n===o&&(r[1]=r[0]+(s[1]-s[0]))),i[0]<this._yScaleInitial.domain()[0]&&(i[0]=this._yScaleInitial.domain()[0],e=!0,n===o&&(i[1]=i[0]+(c[1]-c[0]))),i[1]>this._yScaleInitial.domain()[1]&&(i[1]=this._yScaleInitial.domain()[1],e=!0,n===o&&(i[0]=i[1]-(c[1]-c[0]))),this.xScale.domain(r),this.yScale.domain(i),n=o,this.redraw()}).on("end",a=>{e&&(this.xScaleBase.domain(r),this.yScaleBase.domain(i),this.d3fcSvgNode.__zoom=new Je(1,0,0)),this.redraw(),this.props.onZoomEnd&&this.props.onZoomEnd()})}setScale({xDomain:e,yDomain:n}){e&&this.xScale.domain(e),n&&this.yScale.domain(n),(e||n)&&(this.xScaleBase.domain(this.xScale.domain()),this.yScaleBase.domain(this.yScale.domain()),this.d3fcSvgNode.__zoom=new Je(1,0,0),this.redraw())}_createAnnotations(){return kD().notePadding(15).type(LD)}_xLabel(){return null}_yLabel(){return null}_xTickValues(){return null}_yTickValues(){return null}_xTickFormat(){return e=>e}_yTickFormat(){return null}_createSeries(){const e=this._createZoom(),n=this._createPointer(),r=this._createWebglSeries(),i=this._createSvgSeries(),a=this._createAnnotations();this.series=ie.chartCartesian({xScale:this.xScale,yScale:this.yScale,xAxis:{bottom:_=>Ed(ie.axisBottom(_))},yAxis:{left:_=>Ed(ie.axisLeft(_)).series(this.series)}}).yOrient("left").xTickFormat(this._xTickFormat()).decorate(_=>{const x=_.enter().select(i.length>0?"d3fc-svg.plot-area":"d3fc-canvas.plot-area").on("measure.range",A=>{this.xScaleBase.range([0,A.detail.width]),this.yScaleBase.range([A.detail.height,0])});e&&x.call(e),n&&x.call(n)});const o=this._xTickValues();o&&this.series.xTickValues(o);const s=this._yTickValues();s&&this.series.yTickValues(s);const c=this._yTickFormat();c&&this.series.yTickFormat(c);const f=this._xLabel();f&&this.series.xLabel(f);const g=this._yLabel();g&&this.series.yLabel(g),r.length>0&&this.series.webglPlotArea(ie.seriesWebglMulti().series(r).mapping(this._webglMapping.bind(this))),i.length>0&&this.series.svgPlotArea(ie.seriesSvgMulti().series(i).mapping((_,x,A)=>this._svgMapping(_,x,A,x>=i.length))),a&&this.series.svgAnnotationPlotArea(ie.seriesSvgMulti().series([a]).mapping(_=>_.annotations))}createChart(){this.containerRef.current!==void 0&&(this.xScale=this._createXScale(),this.yScale=this._createYScale(),this.xScaleBase=this.xScale.copy(),this.yScaleBase=this.yScale.copy(),this._xScaleInitial=this.xScale.copy(),this._yScaleInitial=this.yScale.copy(),this._createSeries(),this.redraw())}originalDomain(){return{xDomain:this._xScaleInitial.domain(),yDomain:this._yScaleInitial.domain()}}componentDidMount(){var a,o;Xn.cssColors??(Xn.cssColors=window.getComputedStyle(document.documentElement)),this.createChart();for(const s of((a=this.containerRef.current)==null?void 0:a.getElementsByClassName("plot-area"))??[])if(s.tagName==="D3FC-SVG"||s.tagName==="D3FC-CANVAS"){this.d3fcSvgNode=s;break}this.annotationSvgElement=(o=this.containerRef.current)==null?void 0:o.getElementsByClassName("annotation-plot-area")[0];const{onTimestampHover:e,onFrameHover:n,onFrameSelect:r,onProfileChange:i}=this.props;e&&Ri.subscribe(e),n&&lr.subscribe(n),r&&La.subscribe(r),i&&ze.subscribe(i)}componentDidUpdate(e){e.plotData!==this.props.plotData&&this._updateScaleDomains(),this.redraw()}componentWillUnmount(){var a;(a=this.containerRef.current)==null||a.remove();const{onTimestampHover:e,onFrameHover:n,onFrameSelect:r,onProfileChange:i}=this.props;e&&Ri.unsubscribe(e),n&&lr.unsubscribe(n),r&&La.unsubscribe(r),i&&ze.unsubscribe(i)}render(){Er(()=>(this.containerRef.current!==null&&this.resizeObserver.observe(this.containerRef.current),()=>this.resizeObserver.disconnect()),[]);const e={width:"100%",height:"100%"};return I("div",{ref:this.containerRef,style:e})}};Xn.cssColors=void 0;let lo=Xn;class Fo extends lo{_annotationNote(e){return{title:"Data",note:`X ${this._xAccess(e).toFixed(2)}
Y ${this._yAccess(e).toFixed(2)}
`}}_createXScale(){return Qe().domain(ie.extentLinear().include([0]).accessors([e=>this._xAccess(e)])(this.props.plotData.flat()))}_createYScale(){return Qe().domain(ie.extentLinear().pad([.5,.5]).accessors([e=>this._yAccess(e)])(this.props.plotData.flat()))}_findClosestPoint(e,n){const r=this.props.plotData.map(g=>qa(g,_=>Math.abs(this._xAccess(_)-e))).filter(Boolean),[i,a]=this._xScaleInitial.domain(),o=g=>(g-i)/(a-i),[s,c]=this._yScaleInitial.domain(),f=g=>(g-s)/(c-s);return qa(r,g=>{const[_,x]=[this._xAccess(g),this._yAccess(g)];return(o(_)-o(e))**2+(f(x)-f(n))**2})}_annotationData(e){const n=this._xAccess(e),r=this._yAccess(e);return{x:n,y:r,...this._annotationNote(e)}}_createWebglSeries(){const e=r=>ie.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(i=>this._xAccess(i)).mainValue(i=>this._yAccess(i)).lineWidth(1.5).defined(()=>!0).decorate((i,a)=>{ie.webglStrokeColor().value(o=>r).data(a)(i)}),n=fo();return this.props.plotData.map((r,i)=>{if(this.props.activeGroups!==null){const a=this.props.activeGroups[i],o=n.findIndex(s=>s===a);return e(this.getWebglColorByIdx(o))}return e(this.getWebglColorByIdx(i))})}}class XD extends Fo{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.cpu_load/10}_createYScale(){return Qe().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Load [%]"}_annotationNote(e){return{title:"CPU Load",note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Load ${this._yAccess(e).toFixed(2)}%
`}}}const qD=t=>()=>{const{current:e}=t;if(!e)return null;e.annotations.pop();const n=Ri.get();if(!n){e.redraw();return}const{x:r,yProc:i}=n,[a,o]=e.yScale.domain(),s=e._findClosestPoint(r,a+(o-a)*i);e._addAnnotation(s)},GD=t=>([e])=>{const{current:n}=t;if(!n)return null;if(!e){Ri.set(null);return}const r=n.xScale.invert(e.x),i=n.yScale.invert(e.y),[a,o]=n.yScale.domain();Ri.set({x:r,yProc:(i-a)/(o-a)})},Hi=t=>({onPoint:GD(t),onTimestampHover:qD(t)}),jD=Ar(({tilingComponent:t})=>{const e=St(null);return I($n,{tilingComponent:t,allowGroupSelection:!0,allowMultiplePlots:!0,children:r=>{const i=r.map(a=>{var s;const o=(s=t.dataProvider)==null?void 0:s.call(t,a);return(o==null?void 0:o.fullData)??[]});return I(XD,{ref:e,plotData:i,activeGroups:r,...Hi(e)},r.join(","))}})});Qn(jD,"CPU Load",{dataProvider:t=>QE(t),additionalProps:{contentClassName:Sr,minWidth:150,minHeight:150}});function JD(t){const e=ho(t),n=new Map;if((e??[]).filter(r=>r.name===kE).forEach(r=>{r.args.die_temp.forEach((i,a)=>{var o;n.get(a)===void 0&&n.set(a,[]),(o=n.get(a))==null||o.push({ts:+r.ts.toFixed(3),temp:i,sensor:`die-temp${a}`})})}),n.size!==0)return n.forEach((r,i)=>{const a=new Set(r.map(o=>o.temp));a.size===1&&a.values().next().value===null&&n.delete(i)}),{fullData:Array.from(n.values())}}class ZD extends Fo{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.temp}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Temperature []"}_annotationNote(e){const n=this._yAccess(e),r=n?`${n.toFixed(2)}`:"not provided";return{title:e.sensor,note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Temp ${r}
`}}}const QD=Ar(({tilingComponent:t})=>{const e=St(null),n=r=>{const i=r.flatMap(a=>{var s;const o=(s=t.dataProvider)==null?void 0:s.call(t,a);return(o==null?void 0:o.fullData)??[]});return I(ZD,{ref:e,plotData:i,activeGroups:r,...Hi(e)},r.join(","))};return I($n,{tilingComponent:t,allowGroupSelection:!0,allowMultiplePlots:!0,...Hi(e),children:n})});Qn(QD,"Die temperature",{dataProvider:t=>JD(t),additionalProps:{contentClassName:Sr,minHeight:150,minWidth:150}});var A0=(t=>(t.X="x",t.Y="y",t))(A0||{});const xi=t=>Object.values(A0).find(e=>e!==t);class E0 extends lo{constructor(){super(...arguments),this.orient=this.props.orient??"horizontal",this._mainAxis=this.orient==="vertical"?"y":"x",this._axisType={x:this._getAxisType("x"),y:this._getAxisType("y")},this._plotData=this._sortPlotData()}get plotData(){return this._plotData}_getAxisType(e){const[n]=this.props.plotData,[r]=n,a=typeof this._accessValue(r,e);return a==="number"||a==="bigint"?"number":"string"}get _uniqueLabels(){const e=xi(this._mainAxis),n=this.plotData.flat().map(r=>String(this._accessValue(r,e)));return Array.from(new Set(n))}_access(e,n,r){switch(this._axisType[r]){case"number":return this._accessValue(e,r);case"string":const i=String(this._accessValue(e,r));return this._uniqueLabels.indexOf(i)}}_sortPlotData(){if(!this.props.order)return this.props.plotData;const e=this.props.order==="descending"?1:0,n=Math.pow(-1,1+e),i=[...this.props.plotData[0]];i.sort((f,g)=>{const[_,x]=[f,g].map(A=>this._accessValue(A,this._mainAxis));return(x-_)*n});const a=xi(this._mainAxis),o=i.map(f=>[this._accessValue(f,a),this._accessValue(f,this._mainAxis)]),s=Object.fromEntries(o),c=this.props.plotData.slice(1).map(f=>[...f].sort((g,_)=>{const[x,A]=[g,_].map(E=>this._accessValue(E,a)).map(E=>s[E]??1/0*n);return(A-x)*n}));return[i,...c]}_tickValues(e){switch(this._axisType[e]){case"number":return e==="x"?super._xTickValues():super._yTickValues();case"string":return _u(0,this._uniqueLabels.length)}}_tickFormat(e){switch(this._axisType[e]){case"number":return e==="x"?super._xTickFormat():super._yTickFormat();case"string":const n=this._uniqueLabels;return r=>n[r]??""}}_xTickFormat(){return this._tickFormat("x")}_yTickFormat(){return this._tickFormat("y")}_xTickValues(){return this._tickValues("x")}_yTickValues(){return this._tickValues("y")}_xLabel(){return this._getLabel("x")}_yLabel(){return this._getLabel("y")}_createScale(e){switch(this._axisType[e]){case"number":const n=Ha(this.plotData.flat(),i=>this._accessValue(i,this._mainAxis)||0)??0;return Qe().domain([0,n*1.05]);case"string":const r=this._uniqueLabels.length;return Qe().domain([-.5,r-.5])}}_createXScale(){return this._createScale("x")}_createYScale(){return this._createScale("y")}_getOffset(e){const r=this.plotData.length,i=.8/r;return(e-(r-1)/2)*i}_findClosestPoint(e,n){const r=xi(this._mainAxis),i=this.orient==="vertical"?e:n,a=this.plotData.flatMap((s,c)=>s.map(f=>({data:f,seriesId:c}))),o=qa(a,({data:s,seriesId:c})=>{const f=this._uniqueLabels.indexOf(String(this._accessValue(s,r)));return Math.abs(f-this._getOffset(c)-i)});return o==null?void 0:o.data}_annotationData(e){const n=this.plotData,r=n.findIndex(f=>f.includes(e)),i=xi(this._mainAxis),a=String(this._accessValue(e,i)),o=this._uniqueLabels.indexOf(a),s=this._getOffset(r),c={x:this.orient==="vertical"?o-s:this._access(e,n[r],"x"),y:this.orient==="horizontal"?o-s:this._access(e,n[r],"y")};return c[this._mainAxis]=this._accessValue(e,this._mainAxis)/2,{...c,...this._annotationNote(e)}}_annotationOrientation(){return this.props.orient??super._annotationOrientation()}_createSvgSeries(){const e=this.props.decorateSvgSeries??(o=>s=>{s.select("path").attr("fill",o)}),n=ie.seriesSvgBar().orient(this.orient),r=ie.seriesSvgGrouped(n).xScale(this.xScale).yScale(this.yScale).orient(this.orient).crossValue(o=>{const s=String(this._accessValue(o,xi(this._mainAxis)));return this._uniqueLabels.indexOf(s)}).mainValue(o=>this._accessValue(o,this._mainAxis)||0).decorate((o,s,c)=>{const f=fo(),g=Ku(Array.isArray(this.props.activeGroup)?f.findIndex(_=>_===this.props.activeGroup[c]):f.findIndex(_=>_===this.props.activeGroup),this.plotData.length);e(g)(o)}),i=ie.autoBandwidth(r),a=o=>{o.datum(this.plotData).call(i)};return ie.rebind(a,i,"xScale","yScale"),[a]}}class S0 extends E0{constructor(){super(...arguments),this.formatter=new rb("microseconds")}_accessValue(e,n){const r=this.props.showTypeLabel?`${e.name} Type`:e.name;return n===this._mainAxis?e.duration.average/1e3:r}_getLabel(e){return e===this._mainAxis?"Time [ms]":"Operator Name"}_annotationNote(e){const n=e.name,r=this.formatter.format(e.duration.total);let a=`Average time: ${this.formatter.format(e.duration.average)}
Total time: ${r}`;return e.sourceProfile&&(a+=`
Source Profile: ${e.sourceProfile}`),{title:n.toString(),note:a}}}function KD({activeGroup:t,theme:e,tilingComponent:n}){var o;const r=St(null),i=(o=n.dataProvider)==null?void 0:o.call(n,t),a=(i==null?void 0:i.plotData)??[];return I(S0,{ref:r,plotData:a,activeGroup:t,orient:"horizontal",order:"ascending",theme:e,...gm(r,t)},t)}function tR({tilingComponent:t}){const e=Rd();return I($n,{tilingComponent:t,allowGroupSelection:!0,children:r=>{const i=Cd(ze),a=i==null?void 0:i.indexToView;return I(KD,{activeGroup:r,theme:e,tilingComponent:t},`${r}:${a}`)}})}Qn(tR,"OP Execution Time",{dataProvider:t=>WE(t),additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});const eR=t=>{const e=Array.from(new Set(t.flatMap(n=>n.map(r=>r.name))));return t.map(n=>{const r=new Map(n.map(i=>[i.name,i]));return e.map(i=>r.get(i)??{name:i,duration:{total:0,average:0}})})};function nR({tilingComponent:t}){return I($n,{tilingComponent:t,allowGroupSelection:!0,allowMultiplePlots:!0,children:n=>{const r=n.map(a=>{var o,s;return((s=(o=t.dataProvider)==null?void 0:o.call(t,a))==null?void 0:s.plotData.flat())??[]}),i=eR(r);return I(S0,{plotData:i,activeGroup:n,orient:"horizontal",order:"ascending",showTypeLabel:!0},n.join(","))}})}Qn(nR,"OP Type Execution Time",{dataProvider:t=>VE(t),additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});class rR extends E0{_accessValue(e,n){return n===this._mainAxis?e.size:e.name}_getLabel(e){return e===this._mainAxis?"Size [B]":"Operator Name"}_annotationNote(e){let n=`Size: ${e.size}B`;return e.sourceProfile&&(n+=`
Source Profile: ${e.sourceProfile}`),{title:e.name,note:n}}}function iR({activeGroup:t,theme:e,tilingComponent:n}){var o;const r=St(null),i=(o=n.dataProvider)==null?void 0:o.call(n,t),a=(i==null?void 0:i.plotData)??[];return I(rR,{ref:r,plotData:a,activeGroup:t,orient:"horizontal",order:"ascending",theme:e,...gm(r,t)},t)}function aR({tilingComponent:t}){const e=Rd(),n=Cd(ze),r=n==null?void 0:n.indexToView;return I($n,{tilingComponent:t,allowGroupSelection:!0,children:a=>I(iR,{activeGroup:a,theme:e,tilingComponent:t},`${a}:${r}`)})}Qn(aR,"OP Size",{dataProvider:t=>zE(t),additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});const oR="_title_lcydk_74",sR="_selected_lcydk_81",uR="_legend_lcydk_87",cR="_square_lcydk_99",lR="_divider_lcydk_131",We={"ram-overview-content":"_ram-overview-content_lcydk_41","ram-overview-selectors":"_ram-overview-selectors_lcydk_50","range-selector":"_range-selector_lcydk_60",title:oR,selected:sR,legend:uR,square:cR,"memory-usage-content":"_memory-usage-content_lcydk_104","memory-usage-legend":"_memory-usage-legend_lcydk_111",divider:lR};class fR extends Fo{_xAccess(e){return e.ts}_yAccess(e){return e.percentage}_createYScale(){return Qe().domain([0,100])}_annotationNote(e){return{title:this.props.memoryNameFunc(e.address,!1,!1),note:`Timestamp: ${e.ts.toFixed(2)}ms
Used: ${e.used}B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused}B
Size: ${e.used+e.unused}B`}}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Usage [%]"}constructor(e){super(e)}}class dR extends Fo{_createXScale(){return Qe().domain(ie.extentLinear().include([0]).accessors([e=>e.ts])(this.props.plotData.flat()))}_createYScale(){return Qe().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return`Usage [%] (${this.props.totalMemory} B total)`}_webglMapping(e,n){if(n>=e.data.length){const r=Object.values(this.props.addrToRange)[n%e.data.length][0];return[{ts:this._xScaleInitial.domain()[0],base:r},{ts:this._xScaleInitial.domain()[1],base:r}]}return e.data[n]}_createWebglSeries(){const e=i=>ie.seriesWebglArea().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).baseValue(a=>a.base/this.props.totalMemory*100).mainValue(a=>(a.base+a.used)/this.props.totalMemory*100).defined(()=>!0).decorate((a,o)=>{ie.webglFillColor().value(s=>typeof i=="string"?this.getWebGLColor(i)??[1,0,0,1]:i).data(o)(a)}),n=i=>ie.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).mainValue(a=>a.base).lineWidth(1.5).defined(()=>!0).decorate((a,o)=>{ie.webglStrokeColor().value(s=>this.getWebGLColor(i)??[1,0,0,1]).data(o)(a)}),r={0:"--colors-lime",1:"--colors-orange"};return this.props.plotData.map((i,a)=>e(a in r?r[a]:"--colors-red")).concat(Object.values(this.props.addrToRange).map(i=>n("--colors-black")))}_findClosestPoint(e,n){let r=-1;if(n<this.props.assignedMemory/this.props.totalMemory*100?r=1:n>=this._yScaleInitial.domain()[1]?r=this.props.plotData.length-1:(r=Object.values(this.props.addrToRange).findIndex(c=>c[0]<=n&&n<c[1]),r+=2),r===-1)return null;const i=this.props.plotData[r],a=qi(c=>c.ts).left(i,e),o=i[a===0?a:a-1],s=i[a>=i.length?i.length-1:a];return e-o.ts>s.ts-e?s:o}_annotationData(e){return{x:e.ts,y:(e.base+e.used)/this.props.totalMemory*100,title:e.address!==-1?this.props.memoryNameFunc(e.address,!1,!1):"Statically allocated memory",note:(e.address!==-1?`Timestamp: ${e.ts.toFixed(2)}ms
Used: ${e.used}B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused}B
`:"")+`Size: ${e.used+e.unused}B`}}}function M0(t){return`0x${t.toString(16)}`}const Sd=Ar(t=>{const e=St(null),n=[];return t.percent&&n.push(`${t.percent.toFixed(2)}%`),t.addr&&n.push(M0(t.addr)),I("button",{ref:e,className:We["range-selector"]+" "+(t.additionalClass??""),onClick:r=>{t.onClick(r),t.selectButton(e)},children:[I("span",{className:We.title,children:t.name}),n.length>0?I("span",{children:n.join(", ")}):void 0]})}),hR=Ar(({tilingComponent:t})=>{const e=St(null),n=St(null),r=o=>{var s;i(),(s=o.current)==null||s.classList.add(We.selected)},i=()=>{var s;const o=We.selected;for(const c of((s=n.current)==null?void 0:s.getElementsByClassName(o))??[])c.classList.remove(o)};return I($n,{tilingComponent:t??null,allowGroupSelection:!0,children:o=>{var D;const s=(D=t==null?void 0:t.dataProvider)==null?void 0:D.call(t,o);if(!s||s.assignedMemory===-1)return null;const{assignedMemory:c,addrToRange:f,addrToProps:g,plotData:_,totalMemory:x,memoryRegionName:A}=s,E=M=>{const k=e.current;k&&k.setScale({yDomain:f[M]})};return I(mn,{children:[I("div",{className:We["ram-overview-content"],children:[I(dR,{ref:e,plotData:_,addrToRange:f,assignedMemory:c,totalMemory:x,memoryNameFunc:A,onZoomEnd:i,...Hi(e)},o),I("div",{ref:n,className:We["ram-overview-selectors"],children:[I(Sd,{name:"whole graph",percent:100,onClick:()=>{var M,k;return(k=e.current)==null?void 0:k.setScale(((M=e.current)==null?void 0:M.originalDomain())??{})},selectButton:r,additionalClass:We.selected}),I("div",{className:We.divider}),Object.keys(g).map(M=>Number.parseInt(M)).sort().reverse().map(M=>I(Sd,{name:g[M].threadName?`${g[M].threadName} thread`:g[M].symbol??g[M].region??M0(M),addr:M,percent:g[M].ramPercent,onClick:()=>E(M),selectButton:r},`${o}-${M}`))]})]}),I("div",{className:We.legend,children:[I("span",{children:[I("div",{className:We.square,style:{backgroundColor:"var(--colors-lime)"}})," free"]}),I("span",{children:[I("div",{className:We.square,style:{backgroundColor:"var(--colors-red)"}})," allocated"]}),I("span",{children:[I("div",{className:We.square,style:{backgroundColor:"var(--colors-orange)"}})," statically allocated"]})]})]})}})});Qn(hR,"RAM Overview",{dataProvider:t=>N0(t),additionalProps:{contentClassName:Sr,minHeight:460,minWidth:350}});function gR({color:t,strokeWidth:e="1rem",width:n="1rem"}){return I("svg",{width:n,height:"1rem",viewBox:"0 0 100 10",children:I("line",{x1:"0",x2:"100",y1:"5",y2:"5",style:{stroke:t,"stroke-width":e}})})}function mR({tilingComponent:t}){const e=St(),[n,r]=In(!1);Er(()=>{e.current&&r(!0)},[]);const i=o=>{if(!e.current)return"#FFFFFF";const[s,c,f]=e.current.getWebglColorByIdx(o);return yr(s*255,c*255,f*255,1).formatHex()};return I($n,{tilingComponent:t??null,allowGroupSelection:!0,children:o=>{var E;const s=(E=t==null?void 0:t.dataProvider)==null?void 0:E.call(t,o);if(!s||s.assignedMemory===-1)return null;const{data:c,plotData:f,addrToRange:g,assignedMemory:_,memoryRegionName:x}=s,A=Array.from(new Set(c.map(D=>D.memory_addr)).values()).sort();return I("div",{className:We["memory-usage-content"],children:[I(fR,{ref:e,plotData:f.slice(2),activeGroups:null,addrToRange:g,assignedMemory:_,memoryNameFunc:x,...Hi(e)},o),I("div",{className:We["memory-usage-legend"],children:n&&A.map((D,M)=>I("p",{children:[I(gR,{color:i(M),strokeWidth:"1.5rem"}),x(D,!0,!1)]},`${o}-${D}`))})]})}})}Qn(mR,"Memory usage",{dataProvider:t=>N0(t),additionalProps:{contentClassName:Sr,minHeight:200,minWidth:300}});function pR(t,e){const n=t.sort((g,_)=>{const x=g.memory_addr-_.memory_addr;return x===0?g.ts-_.ts:x}),r=new Set;let i=e;n.forEach(g=>{r.has(g.memory_addr)||(i+=g.used+g.unused,r.add(g.memory_addr))});const a={},o=Math.max(...n.map(g=>g.ts))/1e3,s=[[{ts:0,used:i-e,unused:0,base:e,percentage:100,address:-1},{ts:o,used:i-e,unused:0,base:e,percentage:100,address:-1}],[{ts:0,used:e,unused:0,base:0,percentage:100,address:-1},{ts:o,used:e,unused:0,base:0,percentage:100,address:-1}]];let c=[],f=s[1];return n.forEach((g,_,x)=>{c.push({ts:g.ts/1e3,base:f[0].base+f[0].used+f[0].unused,used:g.used,unused:g.unused,percentage:g.used/(g.used+g.unused)*100,address:g.memory_addr}),(_+1>=x.length||g.memory_addr!==x[_+1].memory_addr)&&(a[g.memory_addr]=[c[0].base/i*100,(c[0].base+c[0].used+c[0].unused)/i*100],s.push(c),c=[],f=s[s.length-1])}),{data:s,totalMemory:i,addrToRange:a}}function vR(t,e,n,r,i,a=!0,o=!0){const s=[];o&&s.push(`${(i[t][1]-i[t][0]).toFixed(2)}% of RAM`),a&&s.push(`0x${t.toString(16)}`);let c="";s.length>0&&(c=` (${s.join(", ")})`);const f=e.find(g=>g.memory_addr===t);return f!=null&&f.for_thread_id&&f.for_thread_id in n?`${n[f.for_thread_id]} thread${c}`:t in r?`${r[t]}${c}`:`${f==null?void 0:f.memory_region}${c}`}function bR(t){var _,x,A;const e=ho(t),n=(e??[]).filter(E=>E.name===tc).map(E=>({name:E.name,ts:+E.ts.toFixed(3),...E.args})),r=new Set;n.forEach(E=>r.add(`${E.memory_region};${E.memory_addr};${E.for_thread_id}`));let i=Array.from(r).map(E=>{const[D,M,k]=E.split(";");return{memory_region:D,memory_addr:+M,for_thread_id:+k}});const a=((_=e==null?void 0:e.find(E=>E.name===CE))==null?void 0:_.args)??{},o=((x=e==null?void 0:e.find(E=>E.name===LE))==null?void 0:x.args)??0,s=e==null?void 0:e.filter(E=>E.name===IE).reduce((E,D,M,k)=>(E[D.tid]=D.args.name,E),{});if(s){const E=(A=Object.entries(s).find(([M,k])=>k==="main"))==null?void 0:A[0],D=i.findIndex(M=>M.for_thread_id===+(E??-1));D!==-1&&(i=[i[D]].concat(i.filter((M,k)=>k!==D)))}if(!n||n.length===0)return;const{data:c,addrToRange:f,totalMemory:g}=pR(n,o);return{fullData:n,plotData:c,threadNameData:s,memorySymbols:a,addrToRange:f,staticallyAssignedMem:o,totalMemory:g}}let Md=null,Ti={};function N0(t){const e=xa.get();if(e!==Md&&(Md=e,Ti={}),t in Ti)return Ti[t];const n=bR(t);if(!n){Ti[t]=void 0;return}const{fullData:r,plotData:i,threadNameData:a,memorySymbols:o,addrToRange:s,staticallyAssignedMem:c,totalMemory:f}=n,g=(E,D=!0,M=!0)=>vR(E,r,a??{},o,s,D,M),_=Array.from(new Set(r.map(E=>E.memory_addr))).sort().reverse(),x={};_.forEach(E=>{const D=r.find(k=>k.memory_addr===E),M=D==null?void 0:D.for_thread_id;x[E]={range:E in s?s[E]:void 0,threadName:a&&M?a[M]:void 0,symbol:o[E],ramPercent:E in s?s[E][1]-s[E][0]:void 0,region:D==null?void 0:D.memory_region}});const A={data:r,plotData:i,assignedMemory:c,addrToProps:x,totalMemory:f,addrToRange:s,memoryRegionName:g};return Ti[t]=A,A}const yR=Ar(({children:t})=>I("div",{className:Ws["tiling-panel"],children:[t,I("div",{className:Ws.background})]})),Di=ZE,_R={global:{splitterSize:4,tabEnableRename:!1},borders:[],layout:{type:"row",children:[{type:"row",children:[{type:"tabset",children:[Ni.createJSONNode()]},{type:"tabset",children:[Di.createJSONNode()]}]}]}};[Ni,Di].forEach(t=>t.instances.set(1));const wR=3,AR=Ar(({tilingRef:t})=>{ib(t,()=>({addNode:o,removeNode:s,getRef:()=>e}),[]);const e=St(),n=Ye.fromJson(_R);let r,i;n.visitNodes((x,A)=>{if(!(x instanceof Qt))return;const E=x.getAttr("component");E===Di.title?r=x:E===Ni.title&&(i=x)});let a=null;function o(x){var k;let A=n.getNodeById(r.getId())&&i.getWindowId()===r.getWindowId()?r:i;for(;A&&(A.getType()==="tab"||(A==null?void 0:A.getOrientation())!==Ct.HORZ);)A=A==null?void 0:A.getParent();if(n.getRoot().getId()===(A==null?void 0:A.getId())&&(A=r.getParent()),!A)return;const E=A.getChildren(),D=(E.length??0)>=wR;x.incrInstances();const M=n.doAction(Ot.addNode(x.createJSONNode(),D?E[E.length-1].getId():A.getId(),D?pt.CENTER:pt.RIGHT,-1,!0));M&&D&&a===null&&(a=((k=M.getParent())==null?void 0:k.getChildren()[0].getId())??null)}function s(x){n.visitNodes(A=>{A.getAttr("component")===x.title&&(x.decrInstances(),n.doAction(Ot.deleteTab(A.getId())))})}const c=x=>{const A=x.getComponent();if(A===void 0)return;const E=da(A),D=E==null?void 0:E.component;if(!E||!D)return;const M=Object.getPrototypeOf(E),k=Object.assign(Object.create(M),E);return x.setEventListener("visibility",()=>{var B;if(x.isVisible()){const V=new Event("resize",{bubbles:!0});(B=x.getMoveableElement())==null||B.dispatchEvent(V)}}),I(yR,{children:I(D,{tilingComponent:k})})};Ql.subscribe(()=>{Ql.get()||(Kl().filter(x=>![Ni,Di].includes(x)).forEach(s),a=null,Kl().filter(x=>![Ni,Di].includes(x)&&x.available.get()).forEach(o),a&&n.doAction(Ot.selectTab(a)))});const f=x=>{var D;const A=ob();if(!A)return;const E=(D=da(A))==null?void 0:D.createJSONNode();if(E)return{json:E}},g=x=>{if(x.type===Ot.ADD_NODE&&"component"in x.data.json){const A=da(x.data.json.component);A&&A.incrInstances()}else if(x.type===Ot.DELETE_TAB){const A=n.getNodeById(x.data.node),E=da(A==null?void 0:A.getAttr("component"));E&&E.decrInstances()}else if(x.type===Ot.MAXIMIZE_TOGGLE){const A=n.getNodeById(x.data.node);if(A===void 0)return x;A.isMaximized()?A.updateAttrs({enableDrag:!0}):A.updateAttrs({enableDrag:!1})}return x},_=(x,A)=>{A.leading=I(sb,{})};return I("div",{id:Ws["tiling-layout"],children:I(Ib,{ref:e,icons:{close:I(Od,{}),maximize:I(ab,{})},model:n,factory:c,popoutWindowName:"Zephelin Trace Viewer",realtimeResize:!0,onExternalDrag:f,onAction:g,onRenderTab:_})})},(t,e)=>!0);export{AR as default};
